(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35d3e074"],{"02bc":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"state-process-container",attrs:{main:t.main,sub:t.sub}},[a("div",{staticClass:"state-process"},[a("img",{staticClass:"empty-img",attrs:{src:t.imgSrc}}),t._v(" "),a("h3",{attrs:{id:"mainText"},domProps:{innerHTML:t._s(t.main)}}),t._v(" "),t.sub?a("p",{attrs:{id:"subText"},domProps:{innerHTML:t._s(t.sub)}}):t._e()])])},i=[],s=a("5975"),r={name:"empty",props:{main:{type:String,default:"Report's empty"},sub:{type:String,default:"We couldn't find any results for your query"},imgSrc:{type:String,default:"/static/images/noresults.svg"}},components:{"su-loader":s["a"]}},o=r,c=a("2877"),l=Object(c["a"])(o,n,i,!1,null,null,null);e["a"]=l.exports},2388:function(t,e,a){"use strict";var n=a("14f3"),i=a("ec83"),s=(1+Math.sqrt(5))/2;function r(t,e,a,s,r,o){var c,l,u,g,d,p,h,f,v,m,C,b=[],w=e.children,T=0,y=0,_=w.length,x=e.value;while(T<_){u=r-a,g=o-s;do{d=w[y++].value}while(!d&&y<_);for(p=h=d,m=Math.max(g/u,u/g)/(x*t),C=d*d*m,v=Math.max(h/C,C/p);y<_;++y){if(d+=l=w[y].value,l<p&&(p=l),l>h&&(h=l),C=d*d*m,f=Math.max(h/C,C/p),f>v){d-=l;break}v=f}b.push(c={value:d,dice:u<g,children:w.slice(T,y)}),c.dice?Object(n["a"])(c,a,s,r,x?s+=g*d/x:o):Object(i["a"])(c,a,s,x?a+=u*d/x:r,o),x-=d,T=y}return b}e["a"]=function t(e){function a(t,a,n,i,s){r(e,t,a,n,i,s)}return a.ratio=function(e){return t((e=+e)>1?e:1)},a}(s)},6157:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"tag-widget "+(t.isModal?"":"page-container full-height")},[a("h1",[t.isInsideKite?a("span",{staticClass:"icon icon-bookmark"}):a("span",{staticClass:"icon icon-arrow-left",on:{click:function(e){return e.stopPropagation(),t.hideTagManagerModal.apply(null,arguments)}}}),t._v("\n\t\tManage tags\n\t\t"),!t.fetchingTags&&t.tags&&t.tags.length?a("su-button",{staticClass:"btn btn-blue",nativeOn:{click:function(e){return e.preventDefault(),t.showCreateBox()}}},[t._v("+ New tag")]):t._e()],1),t._v(" "),t.fetchingTags?a("div",[a("jobber",{attrs:{main:"Fetching your tags",sub:""}})],1):a("div",[t.tagResults&&t.tagResults.length||t.tags&&t.tags.length?a("div",[a("div",{staticClass:"tag-search"},[a("su-input",{attrs:{autofocus:"",placeholder:"Search tags",label:"Search"},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}})],1),t._v(" "),t.tagResults&&t.tagResults.length?a("div",{staticClass:"tag-list"},[a("div",{staticClass:"added-tags"},t._l(t.tagResults,(function(e,n){return a("p",{key:n},[a("span",{staticClass:"tag",style:"background:"+t.getBackground(e.colour)+";color:"+t.getColor(e),on:{click:function(a){return t.showCreateBox(!0,e)}}},[t._v(t._s(e.text))]),t._v(" "),a("span",{staticClass:"tag-links"},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"icon-container",attrs:{title:"Edit","tooltip-pos":"left"}},[a("span",{staticClass:"icon icon-edit",on:{click:function(a){return t.showCreateBox(!0,e)}}})]),t._v(" "),a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"icon-container",attrs:{title:"Delete","tooltip-pos":"left"}},[a("span",{staticClass:"icon icon-trash-empty",on:{click:function(a){return t.showConfirmationBox(!0,e)}}})]),t._v(" "),t.isInsideKite?t._e():a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"icon-container analyse",attrs:{title:"Analyse","tooltip-pos":"left"}},[a("span",{staticClass:"icon icon-trending-up",on:{click:function(a){return t.analyseTag(e)}}})])])])})),0)]):a("p",{staticClass:"text-grey"},[a("span",{staticClass:"icon icon-info"}),t._v(" No tags found.\n\t\t\t")])]):a("div",{staticClass:"text-center no-tags"},[a("img",{attrs:{src:"/static/images/tags-empty.png"}}),t._v(" "),a("br"),t._v(" "),t.fetchingTags?t._e():a("su-button",{staticClass:"btn btn-blue",nativeOn:{click:function(e){return e.preventDefault(),t.showCreateBox()}}},[t._v("Create tag")])],1)]),t._v(" "),t.showCreate?a("div",{staticClass:"section tagger"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideCreateBox}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showCreateBox("new")}}},[a("div",{staticClass:"modalbody",on:{click:t.hidePalette}},[t.editing?a("h2",{staticClass:"create-tag-head"},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.hideCreateBox.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-arrow-left"})]),t._v(" "),a("span",[t._v('Edit "'+t._s(t._f("clip")(t.newTag.text))+'"')])]):a("h2",{staticClass:"create-tag-head"},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.hideCreateBox.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-arrow-left"})]),t._v("\n\t\t\t\t\t\t\tNew tag\n\t\t\t\t\t\t")]),t._v(" "),a("su-form",{ref:"create_tag_form",attrs:{id:"create_tag_form"}},[a("div",{staticClass:"create-tag-color"},[a("label",[t._v(" ")]),a("br"),t._v(" "),a("div",{staticClass:"selected-color",on:{click:function(e){e.stopPropagation(),t.showPalette=!t.showPalette}}},[a("span",{style:"background-color:"+t.newTag.colour},[t._v(" ")]),t._v(" "),a("span",[t._v("Color")])]),t._v(" "),t.showPalette?a("div",{staticClass:"color-palette"},t._l(t.palette,(function(e,n){return a("span",{key:n,staticClass:"palette-colors",style:"background:"+e,on:{click:function(a){return t.changeColor(e)}}},[t._v(" ")])})),0):t._e()]),a("div",{staticClass:"create-tag-name"},[a("su-input",{attrs:{id:"create_tag_name",type:"text",autofocus:"true",pattern:"\\s*(\\S\\s*){3,}",oninput:"this.setCustomValidity('')",maxlength:20,oninvalid:"this.setCustomValidity('Please fill in this field')",label:"Tag",placeholder:"Tag",rules:t.rules.tagName},model:{value:t.newTag.text,callback:function(e){t.$set(t.newTag,"text",e)},expression:"newTag.text"}})],1),a("br"),t._v(" "),a("div",{staticClass:"create-tag-desc row"},[a("div",{staticClass:"eight columns"},[a("su-input",{attrs:{pattern:"\\s*(\\S\\s*){0,}",oninvalid:"this.setCustomValidity('Invalid characters')",oninput:"this.setCustomValidity('')",type:"text",maxlength:140,label:"Description",placeholder:"Description",rules:t.rules.tagDesc},model:{value:t.newTag.description,callback:function(e){t.$set(t.newTag,"description",e)},expression:"newTag.description"}})],1),t._v(" "),a("div",{staticClass:"four columns su-input-group"},[a("label",{staticClass:"su-input-label"},[t._v(" ")]),t._v(" "),t.editing?a("su-button",{staticClass:"btn btn-blue",attrs:{type:"submit",disabled:t.creatingTag,processing:t.creatingTag},nativeOn:{click:function(e){return e.preventDefault(),t.createTag(!0)}}},[t._v("Update")]):a("su-button",{staticClass:"btn btn-blue",attrs:{type:"submit",disabled:t.creatingTag,processing:t.creatingTag},nativeOn:{click:function(e){return e.preventDefault(),t.createTag()}}},[t._v("Save")])],1)]),t._v(" "),t.editing?a("p",{staticClass:"text-center"},[t.deleting?a("su-loader"):a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showConfirmationBox.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-trash"}),t._v("\n\t\t\t\t\t\t\t\t\tDelete tag\n\t\t\t\t\t\t\t\t")])],1):t._e()])],1)])])])]):t._e(),t._v(" "),t.showConfirmation?a("div",{staticClass:"section tagger"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideConfirmationBox}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showConfirmationBox.apply(null,arguments)}}},[a("div",{staticClass:"modalbody",on:{click:function(e){return e.stopPropagation(),t.hidePalette.apply(null,arguments)}}},[a("h4",{staticClass:"text-center"},[t._v('Are you sure you want to delete "'+t._s(t.newTag.tag_name)+'" ?')]),a("br"),t._v(" "),a("div",{staticClass:"button-container text-center"},[a("su-button",{staticClass:"btn-grey btn-outline",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.hideConfirmationBox.apply(null,arguments)}}},[t._v("Cancel")]),t._v(" "),a("su-button",{staticClass:"btn btn-blue",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.deleteTag()}}},[t._v("Delete")])],1)])])])])]):t._e()])},i=[],s=a("5975"),r=a("2e34"),o=a("02bc"),c=a("5dfe"),l=a("ba6a"),u=a("5665"),g=a("2f62");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){h(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function h(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var f={name:"tagger",data:function(){var t=function(t,e){return e&&e.trim().length<3?new Error("Minimum characters required: 3"):e&&e.length>20?new Error("Maximum characters allowed: 20"):void 0},e=function(t,e){if(e&&e.length>140)return new Error("Maximum characters allowed: 140")};return{tags:[],searchInput:"",newTag:{text:"",type:"custom",classes:"custom-tag ",value:"",colour:"rgba(3, 155, 229, 1)",description:""},showCreate:!1,hasChanged:!1,showPalette:!1,palette:["rgba(3, 155, 229, 1)","rgba(11, 128, 67, 1)","rgba(63, 81, 181, 1)","rgba(244, 81, 30, 1)","rgba(121, 85, 72, 1)","rgba(124, 179, 66, 1)","rgba(240, 147, 0, 1)","rgba(142, 36, 170, 1)","rgba(97, 97, 97, 1)","rgba(255, 205, 86, 1)"],paletteMap:{"rgba(3, 155, 229, 1)":"p1","rgba(11, 128, 67, 1)":"p2","rgba(63, 81, 181, 1)":"p3","rgba(244, 81, 30, 1)":"p4","rgba(121, 85, 72, 1)":"p5","rgba(124, 179, 66, 1)":"p6","rgba(240, 147, 0, 1)":"p7","rgba(142, 36, 170, 1)":"p8","rgba(97, 97, 97, 1)":"p9","rgba(255, 205, 86, 1)":"p10"},creatingTag:!1,editing:!1,deleting:!1,showConfirmation:!1,rules:{tagName:[{validator:t,required:!0}],tagDesc:[{validator:e,required:!0}]},fetchingTags:!1}},props:{isModal:{type:Boolean,default:!1}},computed:p(p({},Object(g["c"])(["consoleTags","consolePendingTags","csrf"])),{},{isInsideKite:function(){return this.$route.query&&this.$route.query.source&&("kite"===this.$route.query.source||"kitewebview"===this.$route.query.source||"coinwebview"===this.$route.query.source)},tagOptions:function(){var t=this;if(this.tags){var e=this.tags.filter((function(e){return-1!==e.text.toLowerCase().indexOf(t.tagsFilter.toLowerCase())&&"SYSTEM"!==e.client_id.toUpperCase()}));return e.push({text:"+  New tag"}),e}},tagResults:function(){var t=this.searchInput.trim().toLowerCase(),e=[];if(t)for(var a in this.tags)-1!==this.tags[a].tag_name.toLowerCase().indexOf(t)&&e.push(this.tags[a]);else e=this.tags;return e.sort((function(t,e){var a=t.tag_name.toUpperCase(),n=e.tag_name.toUpperCase();return a<n?-1:a>n?1:0})),e}}),watch:{"newTag.text":function(t){t&&(this.newTag.text=t.toLowerCase().trim().replace(" ","-"))}},components:{"su-loader":s["a"],jobber:r["a"],"su-button":c["a"],empty:o["a"]},mounted:function(){var t=this;window.addEventListener("keyup",(function(e){27===e.keyCode&&(t.showCreate?t.hideCreateBox():t.hideTagManagerModal())})),this.fetchTags(!1,!0),this.$route.query.action&&"create"===this.$route.query.action&&(this.$route.query.tag&&(this.newTag.text=this.$route.query.tag),this.showCreateBox())},methods:p(p({},Object(g["d"])(["setConsoleTags"])),{},{hideTagManagerModal:function(){this.$parent.hideTagManagerModal()},analyseTag:function(t){this.$router.push({name:"taganalysis",query:{tag:t.tag_id}})},getBackground:function(t){if(t){var e=t.replace("1)","0.1)");return e}return"rgba(68, 68, 68, 0.1)"},getColor:function(t){return t.colour?t.colour:"#444"},showCreateBox:function(t,e){this.showCreate||(this.showCreate=!0,!0===t&&(this.editing=!0,this.newTag=e),this.$nextTick((function(){try{document.querySelectorAll(".create-tag-name")[0].querySelector("input").focus()}catch(t){console.log("Error creating tag form")}})))},hideCreateBox:function(){this.showCreate=!1,this.editing=!1,this.newTag={text:"",type:"custom",classes:"custom-tag ",value:"",colour:"rgba(3, 155, 229, 1)",description:""}},hidePalette:function(){this.showPalette=!1},changeColor:function(t){this.newTag.colour=t},createTag:function(t){var e=this;if(this.$refs["create_tag_form"]&&this.$refs["create_tag_form"].validate()){t||(this.newTag.classes+=this.paletteMap[this.newTag.colour]),this.creatingTag=!0;var a={tag_name:this.newTag.text,description:this.newTag.description,colour:this.newTag.colour},n=u["a"].createTag,i="POST";!0===t&&(a["tag_id"]=parseInt(this.newTag.id),n=u["a"].editTag,i="PUT"),l["a"].request(i,!1,n,a,(function(a,n){"SUCCESS"===a.toUpperCase()?e.fetchTags(t):"FAILURE"===a.toUpperCase()?(e.creatingTag=!1,e.$toast.error({message:"Error updating tags: "+n.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3})):(e.creatingTag=!1,e.$toast.error({message:"Error updating tags:"+l["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3}))}))}},fetchTags:function(t,e){var a=this;e&&(this.fetchingTags=!0),l["a"].request("GET",!1,u["a"].getTags,null,(function(n,i){if(a.fetchingTags=!1,a.creatingTag=!1,a.deleting=!1,"SUCCESS"===n.toUpperCase()){for(var s=i.data.data.result,r=0;r<s.length;r++)"SYSTEM"===s[r].client_id.toUpperCase()?(s[r]["type"]="system",s[r]["classes"]="system-tag"):(s[r]["type"]="custom",s[r]["classes"]="custom-tag "+a.paletteMap[s[r].colour]),s[r]["text"]=s[r].tag_name,s[r]["value"]=s[r].id;if(a.tags=s,a.setConsoleTags(s),!e){var o=s.find((function(t){return t.tag_name===a.newTag.text}));o?t?a.$toast.success({message:"Tag updated.",orientation:a.$toast.TOP_RIGHT,duration:6e3}):a.$toast.success({message:"Tag created.",orientation:a.$toast.TOP_RIGHT,duration:6e3}):(a.deleting=!1,a.$toast.success({message:"Tag deleted.",orientation:a.$toast.TOP_RIGHT,duration:6e3})),a.hideCreateBox()}}else"FAILURE"===n.toUpperCase()?a.$toast.error({message:"Error fetching tags: "+i.data.message,orientation:a.$toast.TOP_RIGHT,duration:6e3}):a.$toast.error({message:"Error fetching tags:"+l["a"].errorMessage(),orientation:a.$toast.TOP_RIGHT,duration:6e3})}))},postTag:function(){for(var t={},e=[],a=0;a<this.selectedTags.length;a++)e.push(this.selectedTags[a]["id"]);t["target_id"]=this.holding.instrument_id,t["tag_ids"]=e,this.$emit("tag-posted",t)},deleteTag:function(){var t=this;this.deleting=!0,this.$nextTick((function(){t.hideConfirmationBox()}));var e=[];e.push(parseInt(this.newTag.id)),l["a"].request("PUT",!1,u["a"].deleteTag,{tag_ids:e},(function(e,a){"SUCCESS"===e.toUpperCase()?t.fetchTags(!0):"FAILURE"===e.toUpperCase()?(t.deleting=!1,t.$toast.error({message:"Error deleting tags: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3})):(t.deleting=!1,t.$toast.error({message:"Error deleting tags:"+l["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}))}))},showConfirmationBox:function(t,e){t&&e&&(this.newTag=e),this.showConfirmation=!0},hideConfirmationBox:function(){this.showConfirmation=!1}})},v=f,m=a("2877"),C=Object(m["a"])(v,n,i,!1,null,null,null);e["default"]=C.exports},6825:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hide,expression:"hide"},{name:"on-escape",rawName:"v-on-escape",value:t.hide,expression:"hide"}],staticClass:"context-menu",attrs:{id:"context-menu-"+t._uid}},[a("div",{staticClass:"context-menu-button-wrap",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleButtonClick.apply(null,arguments)}}},[t._t("button")],2),t._v(" "),a("transition",{attrs:{name:"dropdown"}},[t.showMenu?a("ul",{staticClass:"context-menu-list list-flat"},[t._t("menu")],2):t._e()])],1)},i=[],s={name:"mobile-context-menu",props:{orientation:{type:String,default:"left"},marginTop:{type:Number,default:8},parentSelector:String},data:function(){return{showMenu:!1}},deactivated:function(){this.hide(),this.$emit("delete")},methods:{hide:function(){this.showMenu&&(this.showMenu=!1)},handleButtonClick:function(t){var e=this;this.showMenu?this.showMenu=!1:(this.showMenu=!0,this.$nextTick((function(){var t=0;if(e.parentSelector){var a=document.querySelector(e.parentSelector);t=a&&a.scrollTop}else t=window.pageYOffset||document.documentElement.scrollTop;var n=e.$el.querySelector(".context-menu-button").getBoundingClientRect(),i=e.$el.querySelector(".context-menu-list"),s=i.getBoundingClientRect(),r=!0;s.height+s.top-t<=window.innerHeight?i.style.top=n.top+n.height+e.marginTop+"px":(i.style.top=n.top-s.height-e.marginTop+"px",r=!1),r?i.classList.add("position-bottom"):i.classList.add("position-top"),"left"===e.orientation?i.style.left=n.left+n.width-s.width+"px":"right"===e.orientation&&(i.style.left=n.left+n.width+"px")})))}}},r=s,o=a("2877"),c=Object(o["a"])(r,n,i,!1,null,null,null);e["a"]=c.exports},b6f4:function(t,e,a){"use strict";var n=a("0dd4"),i=a("2388");function s(t){if("function"!==typeof t)throw new Error;return t}function r(){return 0}var o=function(t){return function(){return t}};e["a"]=function(){var t=i["a"],e=!1,a=1,c=1,l=[0],u=r,g=r,d=r,p=r,h=r;function f(t){return t.x0=t.y0=0,t.x1=a,t.y1=c,t.eachBefore(v),l=[0],e&&t.eachBefore(n["a"]),t}function v(e){var a=l[e.depth],n=e.x0+a,i=e.y0+a,s=e.x1-a,r=e.y1-a;s<n&&(n=s=(n+s)/2),r<i&&(i=r=(i+r)/2),e.x0=n,e.y0=i,e.x1=s,e.y1=r,e.children&&(a=l[e.depth+1]=u(e)/2,n+=h(e)-a,i+=g(e)-a,s-=d(e)-a,r-=p(e)-a,s<n&&(n=s=(n+s)/2),r<i&&(i=r=(i+r)/2),t(e,n,i,s,r))}return f.round=function(t){return arguments.length?(e=!!t,f):e},f.size=function(t){return arguments.length?(a=+t[0],c=+t[1],f):[a,c]},f.tile=function(e){return arguments.length?(t=s(e),f):t},f.padding=function(t){return arguments.length?f.paddingInner(t).paddingOuter(t):f.paddingInner()},f.paddingInner=function(t){return arguments.length?(u="function"===typeof t?t:o(+t),f):u},f.paddingOuter=function(t){return arguments.length?f.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):f.paddingTop()},f.paddingTop=function(t){return arguments.length?(g="function"===typeof t?t:o(+t),f):g},f.paddingRight=function(t){return arguments.length?(d="function"===typeof t?t:o(+t),f):d},f.paddingBottom=function(t){return arguments.length?(p="function"===typeof t?t:o(+t),f):p},f.paddingLeft=function(t){return arguments.length?(h="function"===typeof t?t:o(+t),f):h},f}},ec83:function(t,e,a){"use strict";e["a"]=function(t,e,a,n,i){var s,r=t.children,o=-1,c=r.length,l=t.value&&(i-a)/t.value;while(++o<c)s=r[o],s.x0=e,s.x1=n,s.y0=a,s.y1=a+=s.value*l}}}]);