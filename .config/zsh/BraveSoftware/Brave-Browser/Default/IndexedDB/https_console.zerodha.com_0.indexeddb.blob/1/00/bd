(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0927b8ce","taganalysis"],{"11df":function(t,e,a){"use strict";var s=window.URL,n=window.Blob,i=window.Worker;function r(t){var e={};t.onmessage=function(a){switch(a.data.type){case"ping":t.postMessage({type:"pong"});break;case"set_timeout":e[a.data.id]=setTimeout((function(){t.postMessage({type:"tick",id:a.data.id})}),a.data.delay);break;case"clear_timeout":clearTimeout(e[a.data.id]);break;case"set_interval":e[a.data.id]=setInterval((function(){t.postMessage({type:"tick",id:a.data.id})}),a.data.interval);break;case"clear_interval":clearInterval(e[a.data.id]);break}}}function o(t){var e=this;this.__ww__=t,this.__timer_handlers__={},this.__ww__.onmessage=function(t){"tick"===t.data.type&&e.__timer_handlers__[t.data.id]()}}function l(){this.__timers__={}}o.prototype.setTimeout=function(t,e,a){this.__timer_handlers__[t]=e,this.__ww__.postMessage({type:"set_timeout",delay:a,id:t})},o.prototype.clearTimeout=function(t){this.__ww__.postMessage({type:"clear_timeout",id:t}),delete this.__timer_handlers__[t]},o.prototype.setInterval=function(t,e,a){this.__timer_handlers__[t]=e,this.__ww__.postMessage({type:"set_interval",interval:a,id:t})},o.prototype.clearInterval=function(t){this.__ww__.postMessage({type:"clear_interval",id:t}),delete this.__timer_handlers__[t]},l.prototype.setTimeout=function(t,e,a){this.__timers__[t]=setTimeout(e,a)},l.prototype.clearTimeout=function(t){clearInterval(this.__timers__[t])},l.prototype.setInterval=function(t,e,a){this.__timers__[t]=setInterval(e,a)},l.prototype.clearInterval=function(t){clearInterval(this.__timers__[t])};var c=null,d=[];function u(t){if(c)t(c);else if(d.push(t),1===d.length){var e,a,u;try{a=s.createObjectURL(new n(["("+r.toString()+")(this)"],{type:"text/javascript"})),u=new i(a)}catch(p){return h(),c=new l,void d.forEach((function(t){t(c)}))}u.onmessage=function(t){"pong"===t.data.type&&(clearInterval(e),c=new o(u),d.forEach((function(t){t(c)})))},e=setTimeout((function(){h(),c=new l,d.forEach((function(t){t(c)}))}),300),u.postMessage({type:"ping"})}function h(){a&&s.revokeObjectURL(a),u&&u.terminate(),e&&clearTimeout(e)}}var h=1;e.setTimeout=function(t,e){var a=h++;return u((function(s){s.setTimeout(a,t,e)})),a},e.clearTimeout=function(t){u((function(e){e.clearTimeout(t)}))},e.setInterval=function(t,e){var a=h++;return u((function(s){s.setInterval(a,t,e)})),a},e.clearInterval=function(t){u((function(e){e.clearInterval(t)}))}},1552:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container holdings gift"},[t.isMobileView?t._e():a("h1",[a("img",{staticClass:"gift-head-icon",attrs:{src:"/static/images/gift.svg"}}),t._v("\n\t\tGift stocks\n\t")]),t._v(" "),t.isMobileView?t._e():a("hr",{staticClass:"header-hr"}),t._v(" "),t.job?a("div",{staticClass:"section text-center"},[a("jobber",{attrs:{main:"Fetching your holdings"}})],1):t._e(),t._v(" "),!(t.holdings&&t.holdings.length>0)||t.job||t.fetchingData||t.holdingsError||t.sortingData?!t.holdings||0!==t.holdings.length||t.job||t.fetchingData||t.holdingsError?t.job||t.fetchingData||!t.holdingsError?t._e():a("div",{staticClass:"section"},[a("error",{attrs:{sub:t.holdingsErrorMsg}})],1):a("div",{staticClass:"section"},[a("empty",{attrs:{main:"",sub:"You do not hold any stocks approved for gifting."}})],1):a("div",{staticClass:"section gift-illustration"},[t._m(0),t._v(" "),t.showHoldings?a("div",{staticClass:"rec-card"},[a("p",[a("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showHoldings=!1}}},[a("span",{staticClass:"icon icon-arrow-left"}),t._v("\n\t\t\t\t\tModify\n\t\t\t\t")])]),t._v(" "),a("div",{staticClass:"rec-box"},[a("div",{staticClass:"row v-align"},[a("div",{class:{"seven columns":!0}},[a("p",[a("strong",[t._v(t._s(t.giftRec.name))])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"three columns"},[a("span",[t._v(t._s(t.giftRec.mobile))])]),t._v(" "),t.giftRec.email?a("div",{staticClass:"nine columns"},[a("span",[t._v(t._s(t.giftRec.email))])]):t._e()])]),t._v(" "),a("div",{class:{"five columns":!0,"text-right":!t.isMobileView}},[a("su-button",{staticClass:"btn btn-blue",attrs:{processing:t.sending,disabled:t.sending||0===t.checkedRows.length},nativeOn:{click:function(e){return e.preventDefault(),t.sendGift.apply(null,arguments)}}},[t._v("Confirm & send")])],1)]),t._v(" "),t.showHoldings?a("su-form",{attrs:{id:"gift_form"}},[a("h2",[t._v("Select the stocks to gift")]),t._v(" "),t.selectedHoldings.length?a("div",{staticClass:"selected-container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"eight columns"},[a("label",[t._v("Selected stocks")]),a("br"),t._v(" "),t._l(t.selectedHoldings,(function(e,s){return a("span",{key:s},[t._v(t._s(e.tradingsymbol)+" ("+t._s(e.giftQty)+")"),s<t.selectedHoldings.length-1?a("span",[t._v(", ")]):t._e()])}))],2),t._v(" "),a("div",{class:{"four columns":!0,"text-right":!t.isMobileView}},[a("label",[t._v("Total approx. value")]),a("br"),t._v(" "),a("span",[t._v(t._s(t._f("inrFormat")(t.getTotalValue,2,null,!0)))])])])]):t._e(),t._v(" "),t.isMobileView?a("div",{staticClass:"table-section cards"},t._l(t.holdings,(function(e,s){return a("div",{key:s,staticClass:"card",class:t.holdings.length-1===s?"last":""},[a("div",{staticClass:"top"},[a("div",{staticClass:"top-left"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedRows,expression:"checkedRows"}],attrs:{type:"checkbox"},domProps:{value:e.isin,checked:Array.isArray(t.checkedRows)?t._i(t.checkedRows,e.isin)>-1:t.checkedRows},on:{change:function(a){var s=t.checkedRows,n=a.target,i=!!n.checked;if(Array.isArray(s)){var r=e.isin,o=t._i(s,r);n.checked?o<0&&(t.checkedRows=s.concat([r])):o>-1&&(t.checkedRows=s.slice(0,o).concat(s.slice(o+1)))}else t.checkedRows=i}}}),t._v(" "),a("span",{staticClass:"checkmark"})]),t._v(" "),a("su-input",{attrs:{type:"number",disabled:-1===t.checkedRows.indexOf(e.isin),max:parseFloat(e.quantity_available_gift),min:1,required:!0},model:{value:e.giftQty,callback:function(a){t.$set(e,"giftQty",a)},expression:"holding_item.giftQty"}})],1),t._v(" "),a("div",{staticClass:"top-right"},[a("div",[a("label",[t._v("Available")]),t._v(" "+t._s(e["quantity_available_gift"]))])])]),t._v(" "),a("div",{staticClass:"middle"},[a("div",{staticClass:"text-bold symbol"},[t._v(t._s(e["tradingsymbol"]))])]),t._v(" "),a("div",{staticClass:"bottom"},[0!==e["quantity_discrepant"]||null==e["close_price"]?a("div",[a("label",[t._v("Prev. close")]),t._v(" – ")]):a("div",[a("label",[t._v("Prev. close")]),t._v(" "+t._s(t._f("inrFormat")(e["close_price"],2)))]),t._v(" "),null==e["closing_value"]?a("div",[a("label",[t._v("Present value")]),t._v(" – ")]):a("div",[a("label",[t._v("Present value")]),t._v(" "+t._s(t._f("inrFormat")(e["closing_value"],2)))])])])})),0):a("div",{staticClass:"table-container"},[a("table",{staticClass:"holdings-table",attrs:{id:"holdings_table"}},[a("thead",[a("tr",[a("td",{staticClass:"row-check table-border"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.allChecked,expression:"allChecked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.allChecked)?t._i(t.allChecked,null)>-1:t.allChecked},on:{change:[function(e){var a=t.allChecked,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.allChecked=a.concat([i])):r>-1&&(t.allChecked=a.slice(0,r).concat(a.slice(r+1)))}else t.allChecked=n},function(e){return t.selectAllOrders()}]}}),t._v(" "),a("span",{staticClass:"checkmark"})])]),t._v(" "),a("td",{class:["table-border "+t.isSorted("tradingsymbol")],on:{click:function(e){return t.sortTable("tradingsymbol",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\tSymbol\n\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("tradingsymbol")]})]),t._v(" "),a("td",{class:t.isSorted("quantity_available_gift"),on:{click:function(e){return t.sortTable("quantity_available_gift",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\tAvailable qty.\n\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("quantity_available_gift")]})]),t._v(" "),a("td",{class:t.isSorted("close_price"),on:{click:function(e){return t.sortTable("close_price",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\tPrev. close\n\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("close_price")]})]),t._v(" "),a("td",{class:t.isSorted("closing_value"),on:{click:function(e){return t.sortTable("closing_value",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\tPresent value\n\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("closing_value")]})]),t._v(" "),a("td",[t._v("Gift qty.")])])]),t._v(" "),a("tbody",t._l(t.holdings,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"row-check table-border"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedRows,expression:"checkedRows"}],attrs:{type:"checkbox"},domProps:{value:e.isin,checked:Array.isArray(t.checkedRows)?t._i(t.checkedRows,e.isin)>-1:t.checkedRows},on:{change:function(a){var s=t.checkedRows,n=a.target,i=!!n.checked;if(Array.isArray(s)){var r=e.isin,o=t._i(s,r);n.checked?o<0&&(t.checkedRows=s.concat([r])):o>-1&&(t.checkedRows=s.slice(0,o).concat(s.slice(o+1)))}else t.checkedRows=i}}}),t._v(" "),a("span",{staticClass:"checkmark"})])]),t._v(" "),a("td",{staticClass:"textleft table-border"},[a("span",{staticClass:"symbol"},[t._v(t._s(e["tradingsymbol"]))])]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e["quantity_available_gift"])+"\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),0!==e["quantity_discrepant"]||null==e["close_price"]?a("td",{staticClass:"text-light-grey"},[t._v(" – ")]):a("td",[t._v(t._s(t._f("inrFormat")(e["close_price"],2)))]),t._v(" "),null==e["closing_value"]?a("td",[t._v(" – ")]):a("td",[t._v(t._s(t._f("inrFormat")(e["closing_value"],2)))]),t._v(" "),a("td",[a("su-input",{attrs:{type:"number",disabled:-1===t.checkedRows.indexOf(e.isin),max:parseFloat(e.quantity_available_gift),min:1,required:!0},model:{value:e.giftQty,callback:function(a){t.$set(e,"giftQty",a)},expression:"holding_item.giftQty"}})],1)])})),0)])])]):t._e()],1)]):a("div",{staticClass:"inputcontainer"},[a("div",{staticClass:"rec-box"},[a("div",{staticClass:"row v-align"},[t._m(1),t._v(" "),a("div",{class:{"six columns":!0,"text-right":!t.isMobileView}},[a("span",{staticClass:"text-light-grey text-small"},[t._v("Select stocks in the next step")])])]),t._v(" "),a("su-form",{ref:"rec_form",attrs:{id:"rec_form"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"three columns gift-inputs"},[a("su-input",{attrs:{type:"text",maxlength:40,"dynamic-label":"",rules:t.rules.receiverName,placeholder:"Recipient's name",label:"Recipient's name",required:!0},model:{value:t.giftRec.name,callback:function(e){t.$set(t.giftRec,"name",e)},expression:"giftRec.name"}})],1),t._v(" "),a("div",{staticClass:"three columns gift-inputs gift-mobile"},[a("span",{staticClass:"pre-mobile"},[t._v("+91")]),t._v(" "),a("su-input",{attrs:{type:"number","dynamic-label":"",rules:t.rules.receiverMobile,placeholder:"Recipient's mobile",label:"Recipient's mobile",required:!0},model:{value:t.giftRec.mobile,callback:function(e){t.$set(t.giftRec,"mobile",e)},expression:"giftRec.mobile"}})],1),t._v(" "),a("div",{staticClass:"four columns"},[a("su-input",{attrs:{type:"text",maxlength:50,"dynamic-label":"","no-error":"",placeholder:"Recipient's e-mail (Optional)",label:"Recipient's e-mail (Optional)"},model:{value:t.giftRec.email,callback:function(e){t.$set(t.giftRec,"email",e)},expression:"giftRec.email"}})],1),t._v(" "),a("div",{staticClass:"two columns"},[a("label",[t._v(" ")]),a("br"),t._v(" "),a("su-button",{staticClass:"btn-blue",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.showHoldingsBlock()}}},[t._v("Continue")])],1)])])],1)])]),t._v(" "),a("div",{staticClass:"section",attrs:{id:"approval"}},[t.fetchingData||t.job||t.fetchingHistory?t._e():a("div",{staticClass:"gift-history table-container"},[a("h3",{on:{click:function(e){t.showHistory=!t.showHistory}}},[a("img",{staticClass:"recent-icon",attrs:{src:"/static/images/clock-dark.svg"}}),t._v("\n\t\t\t\tHistory\n\t\t\t\t"),t.fetchingHistory?a("su-loader"):t._e(),t._v(" "),t.history&&t.history.length>0?a("span",{class:{icon:!0,"icon-chevron-down":!t.showHistory,"icon-chevron-up":t.showHistory}}):t._e()],1),t._v(" "),!t.isMobileView||t.isMobileView&&!t.showHistory?a("hr"):t._e(),t._v(" "),t.showHistory?a("div",[a("input",{attrs:{id:"gift_link",type:"text",value:""}}),t._v(" "),t.history&&t.history.length>0?a("div",{staticClass:"table-container"},[t.isMobileView?a("div",{staticClass:"history-table table-section cards"},t._l(t.history,(function(e,s){return a("div",{key:s,staticClass:"card",class:t.history.length-1===s?"last":""},[a("div",{staticClass:"top"},[a("div",[a("label",[t._v("Receiver")]),t._v(" "+t._s(t._f("clip")(e.receiver_fullname,10))+" ("+t._s(e.receiver_phone_number)+")\n\t\t\t\t\t\t\t\t")]),t._v(" "),"ACCEPTED"===e.status.toUpperCase()?a("div",[a("span",{staticClass:"text-light-grey text-small"},[t._v("Claimed by "+t._s(e.claimer_fullname)+" ("+t._s(e.claimed_by)+")")])]):t._e()]),t._v(" "),a("div",{staticClass:"middle"},[a("div",{staticClass:"middle-left"},[a("label",[t._v("Created")]),t._v(" "+t._s(e.creation)+"\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"middle-right"},["ACCEPTED"!==e.status.toUpperCase()?a("div",{staticClass:"gift-status"},[-1!==e.status.toUpperCase().indexOf("TRANSFERRED")?a("span",{staticClass:"status transferred"},[t._v(t._s(e.status))]):a("span",{class:["status "+e.status.toLowerCase()]},[t._v(t._s(e.status))])]):a("div",{staticClass:"gift-status"},[a("su-button",{staticClass:"btn btn-blue",nativeOn:{click:function(a){return a.preventDefault(),t.showConfirmModal(e.name,"approve",e.claimer_fullname,e.claimed_by)}}},[t._v("Approve")])],1),t._v(" "),"CREATED"!==e.status.toUpperCase()&&("ACCEPTED"!==e.status.toUpperCase()||t.deleting&&t.delItem===e.name)?t._e():a("a",{staticClass:"text-small",attrs:{href:""},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.showConfirmModal(e.name,"delete")}}},[t._v("Cancel")])])]),t._v(" "),a("div",{staticClass:"bottom"},[a("label",[t._v("Stocks gifted")]),t._v(" "),t._l(e.stocks,(function(s,n){return a("span",{key:n},[t._v(t._s(s.symbol)+" ("+t._s(s.qty)+")"),n<e.stocks.length-1?a("span",[t._v(", ")]):t._e()])}))],2)])})),0):a("table",{staticClass:"history-table"},[t._m(2),t._v(" "),a("tbody",t._l(t.history,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-left"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.receiver_fullname)+"\n\t\t\t\t\t\t\t\t\t"),"ACCEPTED"===e.status.toUpperCase()?a("div",[a("span",{staticClass:"text-light-grey text-small"},[t._v("Claimed by "+t._s(e.claimer_fullname)+" ("+t._s(e.claimed_by)+")")])]):t._e(),t._v(" "),"CREATED"===e.status.toUpperCase()?a("div",[a("a",{staticClass:"text-small",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.copyLink(e.name)}}},[a("span",{staticClass:"icon icon-copy"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\tCopy gift link\n\t\t\t\t\t\t\t\t\t\t")])]):t._e()]),t._v(" "),a("td",{staticClass:"text-left"},[t._v(t._s(e.receiver_phone_number))]),t._v(" "),a("td",{staticClass:"text-left"},[t._v(t._s(e.creation))]),t._v(" "),a("td",{staticClass:"text-left"},t._l(e.stocks,(function(s,n){return a("span",{key:n},[t._v(t._s(s.symbol)+" ("+t._s(s.qty)+")"),n<e.stocks.length-1?a("span",[t._v(", ")]):t._e()])})),0),t._v(" "),a("td",{staticClass:"text-left"},["ACCEPTED"!==e.status.toUpperCase()?a("div",{staticClass:"gift-status"},[-1!==e.status.toUpperCase().indexOf("TRANSFERRED")?a("span",{staticClass:"status transferred"},[t._v(t._s(e.status))]):a("span",{class:["status "+e.status.toLowerCase()]},[t._v(t._s(e.status))])]):a("div",{staticClass:"gift-status"},[a("su-button",{staticClass:"btn btn-blue",nativeOn:{click:function(a){return a.preventDefault(),t.showConfirmModal(e.name,"approve",e.claimer_fullname,e.claimed_by)}}},[t._v("Approve")])],1),t._v(" "),"CREATED"!==e.status.toUpperCase()&&("ACCEPTED"!==e.status.toUpperCase()||t.deleting&&t.delItem===e.name)?t._e():a("a",{staticClass:"text-small",attrs:{href:""},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.showConfirmModal(e.name,"delete")}}},[t._v("Cancel")])])])})),0)])]):t._e()]):t._e(),t._v(" "),t.history&&0===t.history.length?a("p",{staticClass:"text-light-grey"},[a("span",{staticClass:"icon icon-info"}),t._v(" No gifts sent.")]):t._e()])]),t._v(" "),t.showConfirm?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask cancel-pledge-modal"},[a("div",{staticClass:"modal-wrapper",on:{click:function(e){return e.stopPropagation(),t.hideConfirmModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showConfirmModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideConfirmModal.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("div",{staticClass:"text-center"},[a("p",[t._v(t._s(t.confirmMsg))]),t._v(" "),-1!==t.confirmMsg.indexOf("claim")?a("p",{staticClass:"text-grey text-small"},[a("span",{staticClass:"icon icon-alert-triangle"}),t._v(" Note: After approving, you will need to check your e-mail between 6-8 PM to complete the CDSL off-market transfer. "),a("a",{attrs:{target:"_blank",href:"https://support.zerodha.com/category/your-zerodha-account/transfer-of-shares-and-conversion-of-shares/gifting-securities/articles/gift-shares"}},[t._v("Read more")]),t._v(".")]):t._e(),t._v(" "),""!==t.delItem?a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.deleting,disabled:t.deleting},nativeOn:{click:function(e){return e.preventDefault(),t.deleteRequest.apply(null,arguments)}}},[t._v("Confirm")]):""!==t.approveItem?a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.approving,disabled:t.approving},nativeOn:{click:function(e){return e.preventDefault(),t.approveGift.apply(null,arguments)}}},[t._v("Confirm")]):t._e(),t._v(" "),a("su-button",{staticClass:"btn-grey btn-outline",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.hideConfirmModal.apply(null,arguments)}}},[t._v("Cancel")])],1)])])])])]):t._e()])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row v-align"},[a("div",{staticClass:"five columns text-center"},[a("img",{attrs:{src:"/static/images/gift.png"}})]),t._v(" "),a("div",{staticClass:"seven columns"},[a("h2",[t._v("Gift your favourite stocks and ETFs to your friends and family")]),t._v(" "),a("ul",{staticClass:"text-grey"},[a("li",[t._v("Select instruments from your portfolio you wish to gift. "),a("a",{attrs:{target:"_blank",href:"https://docs.google.com/spreadsheets/d/12D5MnLDav3AVxSY84nc1aavaYg9kbLkRyZvq7aJ-DCM/edit#gid=40865646"}},[t._v("View list of approved securities")]),t._v(".")]),t._v(" "),a("li",[t._v("We notify the recipient. They log into their Zerodha account to accept the gift.")]),t._v(" "),a("li",[t._v("If they don’t have an account, they can sign up and then accept the gift later.")]),t._v(" "),a("li",[t._v("We notify you of the acceptance and you authorize moving securities to the recipient’s demat. "),a("a",{attrs:{href:"https://support.zerodha.com/category/your-zerodha-account/transfer-of-shares-and-conversion-of-shares/articles/gift-shares"}},[t._v("Learn more")]),t._v(".")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"six columns"},[a("h2",[t._v("Send a gift")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",{staticClass:"text-left"},[t._v("Recipient name")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("Recipient mobile")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("Created on")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("Stocks gifted")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("Status")])])])}],i=a("108d"),r=a("02bc"),o=a("2e34"),l=a("5dfe"),c=a("3fb9"),d=a("2f62"),u=a("ba6a"),h=a("5665");function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function _(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){m(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function m(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var g=[];function v(t,e){return t+"?date="+e}function f(t){var e=t,a=""+(e.getMonth()+1),s=""+e.getDate(),n=e.getFullYear();return a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),[n,a,s].join("-")}var b={data:function(){var t=function(t,e){if(!e.match(/^[0-9]{10}$/))return new Error("Enter a valid mobile.")};return{showHoldings:!1,job:!1,params:{},holdings:[],date:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),format:"YYYY-MM-DD",sortKey:"tradingsymbol",sortBy:"asc",segment:"EQ",disabled:{to:new Date(2017,3,1)},timeout:"",noResults:!1,fetchingData:!1,sortingData:!1,searchQuery:"",lastUpdated:{},holdingsError:!1,holdingsErrorMsg:"Please try again",firstPoll:!0,checkedRows:[],selectedHoldings:[],allChecked:!1,sending:!1,giftRec:{name:"",mobile:"",email:""},showHistory:!0,history:{},fetchingHistory:!1,deleting:!1,delItem:"",approving:!1,approveItem:"",showConfirm:!1,confirmMsg:"",rules:{receiverName:[{required:!0}],receiverMobile:[{validator:t,required:!0,message:"Enter a valid mobile."}]}}},created:function(){var t=document.createElement("script");t.setAttribute("src","https://kite.trade/publisher.js?v=3"),document.head.appendChild(t)},mounted:function(){this.getHoldingsData(this.date,this.segment),this.getHistory(),-1!==document.location.href.indexOf("#approval")&&(this.showHistory=!0);var t=this;window.addEventListener("keyup",(function(e){27===e.keyCode&&t.hideConfirmModal()}))},computed:_(_({},Object(d["c"])(["isMobileView","activeSegments"])),{},{getTotalValue:function(){if(this.selectedHoldings.length){var t=0;for(var e in this.selectedHoldings)this.selectedHoldings[e].close_price&&(t+=this.selectedHoldings[e].giftQty*this.selectedHoldings[e].close_price);return t}}}),watch:{checkedRows:function(t){t&&t.length?this.selectedHoldings=this.holdings.filter((function(e){return-1!==t.indexOf(e.isin)})):this.selectedHoldings=[]}},methods:{copyLink:function(t){document.getElementById("gift_link").value="https://console.zerodha.com/gift/accept/"+t,document.getElementById("gift_link").setAttribute("value","https://console.zerodha.com/gift/accept/"+t),document.getElementById("gift_link").select(),document.execCommand("copy"),document.getElementById("gift_link").value="",document.getElementById("gift_link").setAttribute("value",""),this.$toast.success({message:"Gift link copied to clipboard.",orientation:this.$toast.TOP_RIGHT,duration:6e3})},showConfirmModal:function(t,e,a,s){var n=this;"delete"===e?(this.confirmMsg="Delete this request?",this.delItem=t):"approve"===e&&(this.confirmMsg="Your gift has been claimed by "+a+" ("+s+"). Approve this request?",this.approveItem=t),this.$nextTick((function(){n.showConfirm=!0}))},hideConfirmModal:function(){this.delItem="",this.approveItem="",this.approving=!1,this.deleting=!1,this.showConfirm=!1},selectAllOrders:function(){if(this.checkedRows=[],this.allChecked)for(var t=0;t<this.holdings.length;t++)this.checkedRows.push(this.holdings[t].isin)},isSorted:function(t){return t===this.sortKey?" sorted":""},getsortBy:function(t){return t===this.sortKey?"arrow-show arrow "+this.sortBy:"asc"},sortTable:function(t,e){if(g=[],t===this.sortKey)if("asc"===this.sortBy){this.sortBy="desc";for(var a=document.getElementById("holdings_table").querySelectorAll("thead td span"),s=0;s<a.length;s++)a[s].className="arrow asc";e.target.querySelector("span")?e.target.querySelector("span").className="arrow desc":e.target.className="arrow desc"}else{this.sortBy="asc";for(var n=document.getElementById("holdings_table").querySelectorAll("thead td span"),i=0;i<n.length;i++)n[i].className="arrow asc";e.target.querySelector("span")?e.target.querySelector("span").className="arrow asc":e.target.className="arrow asc"}else{this.sortKey=t,this.sortBy="asc";for(var r=document.getElementById("holdings_table").querySelectorAll("thead td span"),o=0;o<r.length;o++)r[o].className="arrow asc";e.target.querySelector("span")?e.target.querySelector("span").className="arrow asc":e.target.className="arrow asc",this.params.page=1}this.sortingData=!0,this.getHoldingsData(this.params.date,this.params.segment,this.sortKey,this.sortBy,!0)},compare:function(t,e){return"tradingsymbol"===this.sortKey?t[this.sortKey]<e[this.sortKey]?"desc"===this.sortBy?1:-1:t[this.sortKey]>e[this.sortKey]?"desc"===this.sortBy?-1:1:0:null===t[this.sortKey]?1:null===e[this.sortKey]?-1:parseFloat(t[this.sortKey])<parseFloat(e[this.sortKey])?"desc"===this.sortBy?1:-1:parseFloat(t[this.sortKey])>parseFloat(e[this.sortKey])?"desc"===this.sortBy?-1:1:0},pollData:function(){var t=this;this.firstPoll?setTimeout((function(){return t.getHoldingsData(t.date)}),500):setTimeout((function(){return t.getHoldingsData(t.date)}),2e3),this.firstPoll=!1},getHoldingsData:function(t,e,a,s,n,i){var r=this;if(this.holdingsError=!1,this.noResults=!1,n||i||(this.fetchingData=!0),i&&(this.sortingData=!0),n)return g=this.holdings,g.sort(this.compare),void this.$nextTick((function(){r.sortingData=!1}));var o=v(h["a"].getHoldings,f(this.date));this.job=!0,u["a"].request("GET",!0,o,null,(function(t,e){if("PENDING"===t.toUpperCase())r.pollData();else if("SUCCESS"===t.toUpperCase()){r.firstPoll=!0,r.params={date:r.date},r.holdings=[];var a=[],s=e.data.data.result;for(var o in s)for(var l=s[o],c=0;c<l.length;c++){var d=l[c];d["row"]=c,a.push(d)}for(var h=a.length-1;h>=0;h--){var p=parseFloat(a[h]["quantity_available"])+parseFloat(a[h]["quantity_pledged_for_loan"])+parseFloat(a[h]["quantity_pledged_for_margin"]);a[h]["quantity_available_gift"]=a[h]["quantity_available"]-a[h]["quantity_t1"],a[h]["quantity_available_gift"]<1?a.splice(h,1):isNaN(p)?a[h]["qty_total"]=0:(parseFloat(p)%1!==0&&(p=parseFloat(p).toFixed(3)),a[h]["qty_total"]=p)}if(r.sortingData=!1,n||i||r.getApprovedStocks(a),0===r.holdings.length?r.noResults=!0:r.noResults=!1,document.getElementById("holdings_table"))for(var _=document.getElementById("holdings_table").querySelectorAll("tbody tr"),m=0;m<_.length;m++)_[m].className="";r.sortingData=!1}else"FAILURE"===t.toUpperCase()?(r.job=!1,r.fetchingData=!1,r.sortingData=!1,r.firstPoll=!0,r.holdingsError=!0,r.$toast.error({message:"Error fetching holdings: "+e.data.message,orientation:r.$toast.TOP_RIGHT,duration:6e3})):"UNDEFINED"===t.toUpperCase()&&(r.job=!1,r.fetchingData=!1,r.sortingData=!1,r.$toast.error({message:"Error fetching holdings:"+u["a"].errorMessage(),orientation:r.$toast.TOP_RIGHT,duration:6e3}))}))},searchFilter:function(){this.searchQuery.trim().length>0?-1===this.selectedFilters.indexOf("")&&this.selectedFilters.push(""):-1!==this.selectedFilters.indexOf("")&&this.selectedFilters.splice(this.selectedFilters.indexOf(""),1)},showHoldingsBlock:function(){-1!==this.activeSegments.indexOf("EQ")?this.$refs["rec_form"]&&this.$refs["rec_form"].validate()&&(this.showHoldings=!0):this.$toast.warning({message:"Your equity account is inactive/dormant. <a href='/account/segment-activation'>Activate Segment</a>.",orientation:this.$toast.TOP_RIGHT,duration:8e3})},hideHoldingsBlock:function(){this.showHoldings=!1,this.giftRec={name:"",mobile:"",email:""}},sendGift:function(){var t=this;if(document.getElementById("gift_form")&&document.getElementById("gift_form").reportValidity()){this.sending=!0;var e=[],a=function(a){var s=t.holdings.find((function(e){return e.isin===t.checkedRows[a]}));e.push({isin:s.isin,instrument_id:s.instrument_id,quantity:parseFloat(s.giftQty),quantity_available:parseFloat(s.quantity_available_gift)})};for(var s in this.checkedRows)a(s);var n={name:this.giftRec.name,mobile:this.giftRec.mobile,email:this.giftRec.email,gift_items:e};u["a"].request("POST",!1,h["a"].sendGift,n,(function(e,a){t.sending=!1,"SUCCESS"===e.toUpperCase()?(t.hideHoldingsBlock(),t.checkedRows=[],t.getHistory(),t.$toast.success({message:"Gift notification sent to the recipient. Awaiting confirmation.",orientation:t.$toast.TOP_RIGHT,duration:8e3})):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error sending gift: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error sending gift:"+u["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))}},getApprovedStocks:function(t){var e=this;this.fetchingData=!0,u["a"].request("GET",!1,h["a"].getApprovedStocks,null,(function(a,s){if(e.sending=!1,e.fetchingData=!1,e.job=!1,e.sortingData=!1,"SUCCESS"===a.toUpperCase())for(var n=s.data.data.result,i=0;i<t.length;i++){t[i]["giftQty"]=parseFloat(t[i]["qty_total"]);for(var r=0;r<n.length;r++)t[i].isin===n[r].isin.trim()&&e.holdings.push(t[i])}else"FAILURE"===a.toUpperCase()?e.$toast.error({message:"Error fetching approved stocks: "+s.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3}):e.$toast.error({message:"Error fetching approved stocks:"+u["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3})}))},getHistory:function(){var t=this;this.fetchingHistory=!0,u["a"].request("GET",!1,h["a"].getGiftHistory,null,(function(e,a){if(t.fetchingHistory=!1,"SUCCESS"===e.toUpperCase()){var s=a.data.data.result,n={},i=[],r=[],o=[],l=[],c=[],d=[],h=[];for(var p in t.history=[],s)n.hasOwnProperty(s[p].name)||(n[s[p].name]=s[p],n[s[p].name]["stocks"]=[]),n[s[p].name]["stocks"].push({symbol:s[p].tradingsymbol,qty:s[p].quantity});for(var _ in n)"ACCEPTED"===n[_].status.toUpperCase()?i.push(n[_]):"CREATED"===n[_].status.toUpperCase()?r.push(n[_]):"APPROVED"===n[_].status.toUpperCase()?o.push(n[_]):"PROCESSING"===n[_].status.toUpperCase()?l.push(n[_]):-1!==n[_].status.toUpperCase().indexOf("TRANSFERRED")?c.push(n[_]):"FAILED"===n[_].status.toUpperCase()?d.push(n[_]):"CANCELED"===n[_].status.toUpperCase()&&h.push(n[_]);t.history=i.concat(r,o,l,c,d,h),document.getElementById("approval")&&-1!==document.location.href.indexOf("#approval")&&document.getElementById("approval").scrollIntoView({behavior:"smooth"})}else"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching gift history: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching gift history:"+u["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},deleteRequest:function(){var t=this;this.deleting=!0,u["a"].request("POST",!1,h["a"].cancelGift,{gift_id:this.delItem},(function(e,a){t.deleting=!1,"SUCCESS"===e.toUpperCase()?(t.getHistory(),t.hideConfirmModal(),t.$toast.success({message:"Gift request deleted",orientation:t.$toast.TOP_RIGHT,duration:6e3})):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error deleting gift request: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error deleting gift request:"+u["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},approveGift:function(){var t=this;this.approving=!0,u["a"].request("POST",!1,h["a"].authoriseGift,{gift_id:this.approveItem},(function(e,a){"SUCCESS"===e.toUpperCase()?(t.approving=!1,console.log("success")):"FAILURE"===e.toUpperCase()?428===a.status&&a.data.message?(t.invokeCDSL(a.data.message,t.approveItem),t.hideConfirmModal()):(t.approving=!1,t.$toast.error({message:"Error approving gift: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3})):(t.approving=!1,t.$toast.error({message:"Error approving gift:"+u["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}))}))},invokeCDSL:function(t,e){var a=this;try{KiteConnect.ready((function(){var s=new KiteConnect("console");s.authHoldings(t,(function(){var s=this;u["a"].request("POST",!1,h["a"].approveGift,{gift_id:e,request_id:t},(function(t,e){a.approving=!1,"SUCCESS"===t.toUpperCase()?(a.getHistory(),a.$toast.success({message:"Gift approved. Check your e-mail between 6-8 PM to complete CDSL off-market transfer. <a target='_blank' href='https://support.zerodha.com/category/your-zerodha-account/transfer-of-shares-and-conversion-of-shares/gifting-securities/articles/gift-shares'>Read more</a>.",orientation:a.$toast.TOP_RIGHT,duration:1e4})):s.$toast.error({message:"Error approving gift:"+u["a"].errorMessage(),orientation:s.$toast.TOP_RIGHT,duration:6e3})}))}))}))}catch(s){this.$toast.error({message:"Something went wrong. Please try again.",orientation:this.$toast.TOP_RIGHT,duration:6e3})}}},components:{jobber:o["a"],"su-button":l["a"],empty:r["a"],error:c["default"],"su-form":i["a"]}},y=b,C=a("2877"),w=Object(C["a"])(y,s,n,!1,null,null,null);e["default"]=w.exports},"19d1":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),a("hr",{staticClass:"header-hr"}),t._v(" "),a("div",{staticClass:"section"},[t.isLoansInviteFailed?a("div",{staticClass:"text-center"},[a("error",{attrs:{main:t.loansInviteErrorMessage,sub:""}})],1):t._e(),t._v(" "),t.isLoansInviteFailed?t._e():a("div",{staticClass:"text-center"},[a("img",{staticClass:"img-loan-sub",attrs:{src:"/static/images/aadhaar.svg"}}),t._v(" "),a("h2",[t._v("Invitation accepted")]),t._v(" "),a("p",[t._v("We have accepted your request. You will get an email notification once your account is activated.")])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",{staticClass:"v-align"},[a("span",{staticClass:"icon icon-credit-card"}),t._v("\n\t\tLoans\n\t\t"),a("img",{staticClass:"img-zerodha-capital hide-on-mobile",attrs:{src:"/static/images/zerodha-capital.svg"}})])}],i=a("bc3a"),r=a.n(i),o=a("3fb9");function l(t){var e=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),s=0;s<a.length;s++){var n=a[s].trim();if(n.substring(0,t.length+1)===t+"="){e=decodeURIComponent(n.substring(t.length+1));break}}return e}var c=l("public_token"),d=r.a.create({timeout:1e4,responseType:"json",headers:{"X-CSRFToken":c,"Content-Type":"application/json"}}),u={name:"loaninvite",components:{error:o["default"]},data:function(){return{isLoansInviteFailed:!1,loansInviteErrorMessage:""}},mounted:function(){this.getLoansInvite()},methods:{getLoansInvite:function(){var t=this;d.get("/api/loans/getinvite").then((function(e){var a=e.data;"SUCCESS"===a.status&&""===a.message?t.$router.push("/loans/get-invite"):"SUCCESS"===a.status&&"ACCEPTED"===a.message&&t.$router.push("/loans/")})).catch((function(e){t.isLoansInviteFailed=!0;var a=e.response.status;401===a?t.loansInviteErrorMessage="You are not authorized to view this page.":-1!==[500,501,502,503,504,505,506,507,508,510,511].indexOf(a)?t.loansInviteErrorMessage="NBFC server is unavailable. Please try after some time.":t.loansInviteErrorMessage=""}))}}},h=u,p=a("2877"),_=Object(p["a"])(h,s,n,!1,null,null,null);e["default"]=_.exports},"1a5a":function(t,e,a){"use strict";var s=a("d68e");function n(t){var e=this;this.__filters_in__=[],this.__filters_out__=[],this.__subscriptions__=[],this.__node_id__=Math.floor(1e10*Math.random())+1,this.__last_message_cnt__=0,this.__ignore_list__={},this.__router__=t.router,this.__router__.onmessage((function(t,a){e.__onmessage__(t,a)})),this.__lock_handlers__={},this.filterOut((function(t,a,s){if("!sys.lock.request"===t){var n=a.data.fn,i=a.data.id;delete a.data.fn,e.__lock_handlers__[a.id]=function(){n((function(){e.emit("!sys.lock.release",{id:i})}))}}s(t,a)})),this.filterIn((function(t,a,s){"!sys.lock.acquired"===t&&e.__lock_handlers__[a.data.request_id]&&(e.__lock_handlers__[a.data.request_id](),delete e.__lock_handlers__[a.data.request_id]),s(t,a)}))}n.prototype.emit=function(t,e,a){var n=this,i={id:this.__node_id__+"_"+this.__last_message_cnt__++,node_id:this.__node_id__,data:e};a||(this.__ignore_list__[i.id]=!0),s.asyncEach(this.__filters_out__,t,i,(function(t,e){n.__router__.broadcast(t,e)}))},n.prototype.on=function(t,e){return this.__subscriptions__.push({channel:t,handler:e}),this.emit("!sys.channels.add",{channel:t}),this},n.prototype.off=function(t,e){var a=this;this.__subscriptions__=this.__subscriptions__.reduce((function(s,n){return n.channel!==t||e&&e!==n.handler?(s.push(n),s):(a.emit("!sys.channels.remove",{channel:t}),s)}),[])},n.prototype.lock=function(t,e,a){a||(a=e,e=5e3),this.emit("!sys.lock.request",{id:t,timeout:e,fn:a})},n.prototype.filterIn=function(t){return this.__filters_in__.push(t),this},n.prototype.filterOut=function(t){return this.__filters_out__.push(t),this},n.prototype.__onmessage__=function(t,e){var a=this;s.asyncEach(this.__filters_in__,t,e,(function(t,e){a.__ignore_list__[e.id]||a.__subscriptions__.forEach((function(a){a.channel===t&&a.handler(e.data,t)}))}))},t.exports=n},"1bef":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container holdings gift"},[t.isMobileView?t._e():a("h1",[a("img",{staticClass:"gift-head-icon",attrs:{src:"/static/images/gift.svg"}}),t._v("\n\t\tAccept gift\n\t")]),t._v(" "),t.isMobileView?t._e():a("hr",{staticClass:"header-hr"}),t._v(" "),t.fetchingData?a("div",{staticClass:"section text-center"},[a("jobber",{attrs:{main:"Fetching gift details",sub:""}})],1):t._e(),t._v(" "),!t.fetchingData&&t.holdingsError?a("div",{staticClass:"section"},[a("error",{attrs:{main:t.holdingsErrorMsg,sub:""}})],1):t._e(),t._v(" "),t.fetchingData||t.holdingsError||!t.giftDetails[t.giftID]?t._e():a("div",{staticClass:"section accept-head"},[a("div",{staticClass:"gift-illustration text-center"},[a("img",{attrs:{src:"/static/images/gift.png"}}),t._v(" "),a("h3",[t._v("\n\t\t\t\t"+t._s(t.giftDetails[t.giftID].sender_fullname)+" ("+t._s(t.giftDetails[t.giftID].gifted_by)+") has sent you "+t._s(t.giftDetails[t.giftID].stocks.length)+" stock"),t.giftDetails[t.giftID].stocks.length>1?a("span",[t._v("s")]):t._e(),t._v(" as gift.\n\t\t\t")]),t._v(" "),a("div",{staticClass:"gift-history table-container accept-table"},[a("table",{staticClass:"history-table"},[t._m(0),t._v(" "),a("tbody",t._l(t.giftDetails[t.giftID].stocks,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-left table-border"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.symbol)+"\n\t\t\t\t\t\t\t")]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.qty)+"\n\t\t\t\t\t\t\t")])])})),0)]),a("br")]),t._v(" "),"accepted"===t.giftDetails[t.giftID].status.toLowerCase()||t.accepted?a("p",[a("span",{staticClass:"icon icon-check"}),t._v("\n\t\t\t\tYou have accepted this gift.\n\t\t\t")]):a("div",[a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",disabled:t.accepting,processing:t.accepting},nativeOn:{click:function(e){return e.preventDefault(),t.accept.apply(null,arguments)}}},[t._v("Accept gift")])],1),t._v(" "),t._m(1)])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"grey-back"},[a("tr",[a("td",{staticClass:"text-left table-border"},[t._v("Stock")]),t._v(" "),a("td",[t._v("Qty.")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-light-grey text-small"},[t._v("Once you accept, the sender has to transfer the stocks to your demat. "),a("a",{attrs:{href:"https://support.zerodha.com/category/your-zerodha-account/transfer-of-shares-and-conversion-of-shares/articles/receive-gifted-shares"}},[t._v("Learn more")]),t._v(".")])}],i=a("02bc"),r=a("2e34"),o=a("5dfe"),l=a("3fb9"),c=a("2f62"),d=a("ba6a"),u=a("5665");function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),!0).forEach((function(e){_(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function _(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var m={data:function(){return{fetchingData:!1,holdingsError:!1,holdingsErrorMsg:"Please try again",giftID:"",giftDetails:{},accepting:!1,accepted:!1}},mounted:function(){this.getGiftDetails()},computed:p({},Object(c["c"])(["isMobileView"])),methods:{getGiftDetails:function(){var t=this;this.giftID=encodeURIComponent(this.$route.params.giftID),this.fetchingData=!0,d["a"].request("GET",!1,u["a"].getGiftDetails+"?gift_id="+this.giftID,null,(function(e,a){if(t.fetchingData=!1,"SUCCESS"===e.toUpperCase()){var s=a.data.data.result;for(var n in t.giftDetails={},s)t.giftDetails.hasOwnProperty(s[n].name)||(t.giftDetails[s[n].name]=s[n],t.giftDetails[s[n].name]["stocks"]=[]),t.giftDetails[s[n].name]["stocks"].push({symbol:s[n].trading_symbol,qty:s[n].quantity})}else"FAILURE"===e.toUpperCase()?(t.holdingsError=!0,t.$toast.error({message:"Error fetching gift details: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3})):(t.holdingsError=!0,t.$toast.error({message:"Error fetching gift details:"+d["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}))}))},accept:function(){var t=this;this.accepting=!0,d["a"].request("POST",!1,u["a"].claimGift,{gift_id:this.giftID,gifted_by:this.giftDetails[this.giftID].gifted_by},(function(e,a){t.accepting=!1,"SUCCESS"===e.toUpperCase()?(t.accepted=!0,t.$toast.success({message:"You've accepted the gift. Waiting for the sender to complete the demat transfer.",orientation:t.$toast.TOP_RIGHT,duration:8e3})):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error accepting gift: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error accepting gift:"+d["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))}},components:{jobber:r["a"],"su-button":o["a"],empty:i["a"],error:l["default"]}},g=m,v=a("2877"),f=Object(v["a"])(g,s,n,!1,null,null,null);e["default"]=f.exports},"1fa4":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("su-form",{on:{submit:function(e){return e.preventDefault(),t.migrateToIpvPage.apply(null,arguments)}}},[a("div",{staticClass:"section fatca"},[a("h2",[t._v("FATCA declaration "),a("span",{staticClass:"text-small text-light-grey"},[t._v("(Foreign Account Tax Compliance Act.)"),a("a",{attrs:{href:"https://zerodhacapital.com/tos/faq#fatca",target:"_blank"}},[a("span",{staticClass:"icon icon-help-circle"})])])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row input-container"},[a("div",{staticClass:"four columns"},[a("su-input",{attrs:{type:"text","dynamic-label":"","no-error":"",label:"City of birth",placeholder:"City of birth"},model:{value:t.birthCity,callback:function(e){t.birthCity=e},expression:"birthCity"}})],1),t._v(" "),a("div",{staticClass:"four columns su-input-group su-static-label"},[t.birthCountry?a("label",{staticClass:"su-input-label"},[t._v("Country of birth")]):t._e(),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.birthCountry,expression:"birthCountry"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.birthCountry=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Country of birth")]),t._v(" "),t._l(t.fatcaISOCountryCode,(function(e,s){return a("option",{key:s,domProps:{value:s}},[t._v(t._s(e))])}))],2)]),t._v(" "),a("div",{staticClass:"four columns"},[a("label",[t._v("Do you have any other country of tax residence?")]),t._v(" "),a("su-radio-group",{model:{value:t.hasOtherCountryTaxResidence,callback:function(e){t.hasOtherCountryTaxResidence=e},expression:"hasOtherCountryTaxResidence"}},[a("su-radio",{attrs:{value:"yes",label:"Yes"}}),t._v(" "),a("su-radio",{attrs:{value:"no",label:"No"}})],1)],1)]),t._v(" "),"yes"===t.hasOtherCountryTaxResidence?a("div",{staticClass:"row input-container"},[a("div",{staticClass:"four columns su-input-group su-static-label"},[t.otherCountryTaxResidence?a("label",{staticClass:"su-input-label"},[t._v("Other country of tax residence")]):t._e(),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.otherCountryTaxResidence,expression:"otherCountryTaxResidence"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.otherCountryTaxResidence=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Other country of tax residence")]),t._v(" "),t._l(t.fatcaISOCountryCode,(function(e,s){return a("option",{key:s},[t._v(t._s(e))])}))],2)]),t._v(" "),a("div",{staticClass:"four columns"},[a("su-input",{attrs:{type:"text","dynamic-label":"","no-error":"",label:"Tax identification number",placeholder:"Tax identification number"},model:{value:t.taxID,callback:function(e){t.taxID=e},expression:"taxID"}})],1),t._v(" "),a("br")]):t._e(),t._v(" "),a("div",{staticClass:"row input-container"},[a("div",{staticClass:"three columns su-input-group su-static-label"},[t.incomeSlab?a("label",{staticClass:"su-input-label"},[t._v("Income slab")]):t._e(),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.incomeSlab,expression:"incomeSlab"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.incomeSlab=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Income slab")]),t._v(" "),t._l(t.fatcaIncomeSlab,(function(e,s){return a("option",{key:s},[t._v(t._s(e))])}))],2)]),t._v(" "),a("div",{staticClass:"three columns su-input-group su-static-label"},[t.wealthSource?a("label",{staticClass:"su-input-label"},[t._v("Source of wealth")]):t._e(),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.wealthSource,expression:"wealthSource"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.wealthSource=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Source of wealth")]),t._v(" "),t._l(t.fatcaSourceWealth,(function(e,s){return a("option",{key:s},[t._v(t._s(e))])}))],2)]),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"number","dynamic-label":"","no-error":"",label:"Net worth (optional)",placeholder:"Net worth (optional)"},model:{value:t.netWorth,callback:function(e){t.netWorth=e},expression:"netWorth"}})],1),t._v(" "),a("div",{staticClass:"three columns su-input-group su-static-label"},[t.netWorthDate?a("label",{staticClass:"su-input-label"},[t._v("Net worth date (optional)")]):t._e(),t._v(" "),a("datepicker",{attrs:{format:t.format,lang:"en","not-before":"1900-01-01","not-after":t.currentDate,placeholder:"Net worth date (optional)"},model:{value:t.netWorthDate,callback:function(e){t.netWorthDate=e},expression:"netWorthDate"}})],1)]),t._v(" "),a("div",{staticClass:"row input-container"},[a("div",{staticClass:"four columns"},[a("label",[t._v("Are you a politically exposed person? "),a("a",{attrs:{href:"https://zerodhacapital.com/tos/faq#pep",target:"_blank"}},[a("span",{staticClass:"icon icon-help-circle"})])]),t._v(" "),a("su-radio-group",{model:{value:t.isPoliticallyExposed,callback:function(e){t.isPoliticallyExposed=e},expression:"isPoliticallyExposed"}},[a("su-radio",{attrs:{value:"yes",label:"Yes"}}),t._v(" "),a("su-radio",{attrs:{value:"no",label:"No"}})],1)],1)]),t._v(" "),a("br"),t._v(" "),a("h2",[t._v("Personal details")]),t._v(" "),a("div",{staticClass:"row input-container"},[a("div",{staticClass:"three columns su-input-group su-static-label"},[t.mStatus?a("label",{staticClass:"su-input-label"},[t._v("Marital status")]):t._e(),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.mStatus,expression:"mStatus"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.mStatus=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Select marital status")]),t._v(" "),t._l(t.maritalStatusChoices,(function(e,s){return a("option",{key:s},[t._v(t._s(e))])}))],2)]),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"text","dynamic-label":"","no-error":"",label:"Mother's first name",placeholder:"Mother's first name"},model:{value:t.mothersFirstName,callback:function(e){t.mothersFirstName=e},expression:"mothersFirstName"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"text","dynamic-label":"","no-error":"",label:"Mother's middle name (optional)",placeholder:"Mother's middle name (optional)"},model:{value:t.mothersMiddleName,callback:function(e){t.mothersMiddleName=e},expression:"mothersMiddleName"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"text","dynamic-label":"","no-error":"",label:"Mother's last name",placeholder:"Mother's last name"},model:{value:t.mothersLastName,callback:function(e){t.mothersLastName=e},expression:"mothersLastName"}})],1)]),t._v(" "),a("div",{staticClass:"fatca-tac"},[a("p",[a("su-checkbox",{attrs:{label:"I confirm that the information provided above is true, correct and complete to the best of my knowledge. In case any of the above specified information is found to be false or untrue, I am aware that I will be liable for it"},model:{value:t.confirmFatcaInfo,callback:function(e){t.confirmFatcaInfo=e},expression:"confirmFatcaInfo"}})],1),t._v(" "),a("p",[a("su-checkbox",{attrs:{label:"In case of any change in the above given status on a future date, I undertake to inform Zerodha Capital Private Limited within 30 days"},model:{value:t.fatcaStatusChangeOnFuture,callback:function(e){t.fatcaStatusChangeOnFuture=e},expression:"fatcaStatusChangeOnFuture"}}),a("br")],1)]),t._v(" "),a("div",[a("su-button",{class:t.validateFatcaDeclaration?"btn-grey":"btn-blue",attrs:{disabled:t.validateFatcaDeclaration||t.isIpvProcessing,type:"submit",processing:t.isIpvProcessing}},[t._v("Continue")])],1)])])],1)},n=[],i=a("bc3a"),r=a.n(i),o=a("8508"),l=a.n(o),c=a("eeee");function d(t){var e=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),s=0;s<a.length;s++){var n=a[s].trim();if(n.substring(0,t.length+1)===t+"="){e=decodeURIComponent(n.substring(t.length+1));break}}return e}var u=d("public_token"),h=r.a.create({timeout:1e4,responseType:"json",headers:{"X-CSRFToken":u,"Content-Type":"application/json"}}),p={name:"fatca",components:{"su-table":c["a"],datepicker:l.a},data:function(){return{birthCity:"",birthCountry:"IN",hasOtherCountryTaxResidence:"no",isPoliticallyExposed:"no",otherCountryTaxResidence:"",confirmFatcaInfo:!1,fatcaStatusChangeOnFuture:!1,taxID:"",incomeSlab:"",wealthSource:"",netWorth:"",format:"YYYY-MM-DD",netWorthDate:"",currentDate:"",mStatus:"",mothersFirstName:"",mothersMiddleName:"",mothersLastName:"",fatcaSourceWealth:{"01":"Salary","02":"Business Income","03":"Gift","04":"Ancestral Property","05":"Rental Income","06":"Prize Money","07":"Royalty","08":"Others"},fatcaIncomeSlab:{"<1":"Below 1 Lakh","1-5":"1-5 Lacs","5-10":"5-10 Lacs","10-25":"10-25 Lacs","25-1cr":"25 Lacs - 1 crore",">1cr":"Above 1 Crore"},maritalStatusChoices:{M:"Married",S:"Single",W:"Widow/Widower",D:"Divorced",NA:"Not Applicable"},fatcaISOCountryCode:{AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia, Plurinational State of",BQ:"Bonaire, Sint Eustatius and Saba",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, the Democratic Republic of the",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote d'Ivoire",HR:"Croatia",CU:"Cuba",CW:"Curacao",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic of",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia, the Former Yugoslav Republic of",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States of",MD:"Moldova, Republic of",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena, Ascension and Tristan da Cunha",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",MF:"Saint Martin (French part)",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten (Dutch part)",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and the South Sandwich Islands",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan, Province of China",TJ:"Tajikistan",TZ:"Tanzania, United Republic of",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela, Bolivarian Republic of",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},isIpvProcessing:!1}},mounted:function(){this.pageScrollToTop(),this.currentDate=this.getCurrentDate()},computed:{validateFatcaDeclaration:function(){var t;return t="yes"===this.hasOtherCountryTaxResidence?""===this.birthCity||""===this.birthCountry||""===this.otherCountryTaxResidence||""===this.taxID||""===this.incomeSlab||""===this.wealthSource||""===this.mStatus||""===this.mothersFirstName||""===this.mothersLastName||!this.confirmFatcaInfo||!this.fatcaStatusChangeOnFuture:""===this.birthCity||""===this.birthCountry||""===this.incomeSlab||""===this.wealthSource||""===this.mStatus||""===this.mothersFirstName||""===this.mothersLastName||!this.confirmFatcaInfo||!this.fatcaStatusChangeOnFuture,t}},methods:{pageScrollToTop:function(){window.scrollTo(0,0)},getCurrentDate:function(){var t=new Date,e=t.getDate(),a=t.getMonth()+1,s=t.getFullYear();return e<10&&(e="0"+e),a<10&&(a="0"+a),t=s+"-"+a+"-"+e,t},migrateToIpvPage:function(){var t=this,e={other_country_tax_residence:{}};e.birth_city=this.birthCity,e.birth_country=this.birthCountry,e.other_country_tax_residence.country=this.otherCountryTaxResidence,e.other_country_tax_residence.tax_identification_number=this.taxID,e.income_slab=this.incomeSlab,e.source_of_wealth=this.wealthSource,e.net_worth=this.netWorth,e.net_worth_date=this.netWorthDate,e.maritial_status=this.mStatus,e.mothers_first_name=this.mothersFirstName,e.mothers_middle_name=this.mothersMiddleName,e.mothers_last_name=this.mothersLastName,e.politically_exposed=this.isPoliticallyExposed,"no"===this.hasOtherCountryTaxResidence&&(e.other_country_tax_residence=null),this.isIpvProcessing=!0,h.post("/api/loans/fatca",e).then((function(e){var a=e.data;window.location.href=a.data.ipv,t.isIpvProcessing=!1})).catch((function(e){var a="";e.response?a+=e.response.data.message:e.message&&(a+=e.message),t.$toast.error({message:a,orientation:t.$toast.TOP_RIGHT,duration:6e3}),t.isIpvProcessing=!1,401===e.response.status&&(window.location.href="/")}))}}},_=p,m=a("2877"),g=Object(m["a"])(_,s,n,!1,null,null,null);e["a"]=g.exports},2456:function(t,e,a){"use strict";var s,n={},i=function(){try{if(s=window.localStorage,!s)return!1;s.setItem("live_local_storage_is_writable_test",""),s.removeItem("live_local_storage_is_writable_test")}catch(t){return!1}return!(document.documentMode&&document.documentMode<9)&&!navigator.userAgent.match("CriOS")}();function r(){}Object.defineProperty(r.prototype,"length",{get:function(){return i?s.length:Object.keys(n).length}}),r.prototype.getItem=function(t){return i?s.getItem(t):n.hasOwnProperty(t)?n[t]:null},r.prototype.setItem=function(t,e){i?s.setItem(t,e):n[t]=e},r.prototype.removeItem=function(t){i?s.removeItem(t):n[t]=null},r.prototype.key=function(t){return i?s.key(t):Object.keys(n)[t]},t.exports=r},2878:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container funds-page"},[t.isMobileView?t._e():a("h1",[a("span",{staticClass:"icon icon-credit-card"}),t._v("\n\t\t\tPayins history\n\t\t")]),t._v(" "),t.isMobileView?t._e():a("hr"),t.isMobileView?t._e():a("br"),t._v(" "),t.notes&&t.notes.length?a("div",{staticClass:"notice text-box yellow"},[a("ul",t._l(t.notes,(function(e,s){return a("li",{key:s},[a("span",{domProps:{innerHTML:t._s(e)}})])})),0)]):t._e(),t._v(" "),t.fetchingHistory?a("jobber",{attrs:{main:"Fetching your payins",sub:"",loader:!0}}):t._e(),t._v(" "),t.fetchingHistory||t.historyError?t._e():a("div",{staticClass:"section"},[a("div",{staticClass:"action-tabs"},[a("span",{class:["equity"===t.activeSection?"active":"","tab","equity"],on:{click:function(e){return t.displayTab("equity")}}},[t._v("\n                    Equity")]),a("span",{class:["commodity"===t.activeSection?"active":"","tab","commodity"],on:{click:function(e){return t.displayTab("commodity")}}},[t._v("\n                    Commodity")])])]),t._v(" "),t.fetchingHistory||t.historyError||"equity"!==t.activeSection?t._e():a("div",{staticClass:"section table-section"},[t.history.eq&&t.history.eq.length?a("div",{staticClass:"table-container"},[a("table",{staticClass:"history-table eq-recent"},[t._m(0),t._v(" "),a("tbody",t._l(t.history.eq,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-left table-border"},[a("span",{staticClass:"date"},[t._v(t._s(t._f("dateFilter")(e["datetime"],"date")))]),t._v(" "),a("span",{staticClass:"time"},[t._v(t._s(t._f("dateFilter")(e["datetime"],"time")))])]),t._v(" "),a("td",{staticClass:"text-left"},[a("span",[t._v(t._s(e.payment_mode.toUpperCase()))]),a("br"),t._v(" "),e.remarks?a("span",{staticClass:"text-grey text-small"},[t._v(t._s(e.remarks))]):t._e()]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.cashier_reference)+"\n\t\t\t\t\t\t\t")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.bank_reference)+"\n\t\t\t\t\t\t\t")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[a("span",[t._v(t._s(t._f("capitalize")(e.payment_status)))]),a("br"),t._v(" "),"UPI"!==e.payment_mode.toUpperCase()&&"NETBANKING"!==e.payment_mode.toUpperCase()||"SUCCESS"===e.payment_status.toUpperCase()?t._e():a("span",[a("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.getPayinDetails(e.payment_mode,e.cashier_reference)}}},[t._v("Fetch details")]),t._v(" "),t.isLoading(e.cashier_reference)?a("su-loader"):t._e()],1)]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.amount)+"\n\t\t\t\t\t\t\t")])])})),0)])]):a("empty",{attrs:{main:"No recent payins found",sub:""}})],1),t._v(" "),t.fetchingHistory||t.historyError||"commodity"!==t.activeSection?t._e():a("div",{staticClass:"section table-section"},[t.history.com&&t.history.com.length?a("div",{staticClass:"table-container"},[a("table",{staticClass:"history-table com-recent"},[t._m(1),t._v(" "),a("tbody",t._l(t.history.com,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-left table-border"},[a("span",{staticClass:"date"},[t._v(t._s(t._f("dateFilter")(e["datetime"],"date")))]),t._v(" "),a("span",{staticClass:"time"},[t._v(t._s(t._f("dateFilter")(e["datetime"],"time")))])]),t._v(" "),a("td",{staticClass:"text-left"},[a("span",[t._v(t._s(e.payment_mode.toUpperCase()))]),a("br"),t._v(" "),e.remarks?a("span",{staticClass:"text-grey text-small"},[t._v(t._s(e.remarks))]):t._e()]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.cashier_reference)+"\n\t\t\t\t\t\t\t")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.bank_reference)+"\n\t\t\t\t\t\t\t")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[a("span",[t._v(t._s(t._f("capitalize")(e.payment_status)))]),a("br"),t._v(" "),"UPI"!==e.payment_mode.toUpperCase()&&"NETBANKING"!==e.payment_mode.toUpperCase()||"SUCCESS"===e.payment_status.toUpperCase()?t._e():a("span",[a("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.getPayinDetails(e.payment_mode,e.cashier_reference)}}},[t._v("Fetch details")]),t._v(" "),t.isLoading(e.cashier_reference)?a("su-loader"):t._e()],1)]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.amount)+"\n\t\t\t\t\t\t\t")])])})),0)])]):a("empty",{attrs:{main:"No recent payins found",sub:""}})],1),t._v(" "),t.historyError&&!t.fetchingHistory?a("div",{staticClass:"section"},[a("error")],1):t._e()],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",{staticClass:"text-left table-border"},[t._v("\n                                Date\n                            ")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("\n                                Method\n                            ")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("\n                                Payment ID\n                            ")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[t._v("\n                                Bank reference\n                            ")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[t._v("\n                                Status\n                            ")]),t._v(" "),a("td",[t._v("\n                                Amount\n                            ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",{staticClass:"text-left table-border"},[t._v("\n                                Date\n                            ")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("\n                                Method\n                            ")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("\n                                Payment ID\n                            ")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[t._v("\n                                Bank reference\n                            ")]),t._v(" "),a("td",{staticClass:"text-left table-border"},[t._v("\n                                Status\n                            ")]),t._v(" "),a("td",[t._v("\n                                Amount\n                            ")])])])}],i=a("2e34"),r=a("02bc"),o=a("3fb9"),l=a("2f62"),c=a("ba6a"),d=a("5665");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){p(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function p(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var _={data:function(){return{fetchingHistory:!1,historyError:!1,activeSection:"equity",history:{},fetchingDetails:{},notes:[]}},mounted:function(){this.getPayinHistory()},computed:h({},Object(l["c"])(["isMobileView"])),methods:{isLoading:function(t){return!!this.fetchingDetails[t]},getPayinHistory:function(){var t=this;this.fetchingHistory=!0,c["a"].request("GET",!1,d["a"].getPayinHistory,null,(function(e,a){if(t.fetchingHistory=!1,"SUCCESS"===e.toUpperCase()){var s=a.data.data.result.data.payins;s&&(t.history["eq"]=s.filter((function(t){return"equity"===t.segment})),t.history["com"]=s.filter((function(t){return"commodity"===t.segment}))),t.notes=a.data.data.result.data.notes}else"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching payins history: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching payins history:"+c["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},getPayinDetails:function(t,e){var a=this;this.fetchingDetails[e]=!0;var s=d["a"].getPayinDetails+"?mode="+t+"&cashier_ref="+e;c["a"].request("GET",!1,s,null,(function(t,s){if(a.fetchingDetails[e]=!1,"SUCCESS"===t.toUpperCase()){var n=s.data.data.result.data.message;a.$toast.info({message:n,orientation:a.$toast.TOP_RIGHT,duration:8e3})}else"FAILURE"===t.toUpperCase()?a.$toast.error({message:"Error fetching payins details: "+s.data.message,orientation:a.$toast.TOP_RIGHT,duration:6e3}):a.$toast.error({message:"Error fetching payins details:"+c["a"].errorMessage(),orientation:a.$toast.TOP_RIGHT,duration:6e3})}))},displayTab:function(t){this.activeSection=t}},components:{jobber:i["a"],empty:r["a"],error:o["default"]}},m=_,g=a("2877"),v=Object(g["a"])(m,s,n,!1,null,null,null);e["default"]=v.exports},"29db":function(t,e,a){"use strict";var s=a("11df"),n=a("2456"),i=a("d68e"),r=4e3,o=r/4;function l(t){var e=this;t=t||{},this.__namespace__=t.namespace||"tabex_default_",this.__node_id__=Math.floor(1e10*Math.random())+1,this.__last_message_cnt__=0,this.__handlers__=[],this.__router_channels__={},this.__router_id_prefix__=this.__namespace__+"router_",this.__router_channels_prefix__=this.__namespace__+"subscribed_",this.__lock_prefix__=this.__namespace__+"lock_",this.__storage_events_filter__=[];for(var a=0;a<100;a++)this.__storage_events_filter__.push("");this.__ls__=new n,this.__master_id__=null,i.addEvent(window,"storage",(function(t){null!==t.key?"onstoragecommit"in document?setTimeout((function(){e.__on_changed__(t)}),1):e.__on_changed__(t):e.__check_master__()})),this.__destroyed__=!1,i.addEvent(window,"beforeunload",(function(){e.__destroy__()})),i.addEvent(window,"unload",(function(){e.__destroy__()})),this.__check_master__(),this.__timer_cm__=s.setInterval((function(){e.__check_master__()}),o),this.__timer_lc__=s.setInterval((function(){e.__locks_cleanup__()}),1e3)}l.prototype.broadcast=function(t,e){if("!sys.channels.add"===t)return this.__router_channels__[e.data.channel]=this.__router_channels__[e.data.channel]||0,this.__router_channels__[e.data.channel]++,void this.__update_channels_list__();if("!sys.channels.remove"===t)return this.__router_channels__[e.data.channel]=this.__router_channels__[e.data.channel]||0,this.__router_channels__[e.data.channel]--,void this.__update_channels_list__();if("!sys.lock.request"!==t)if("!sys.lock.release"!==t){var a=JSON.stringify({channel:t,message:e,random:Math.floor(1e10*Math.random())});this.__storage_events_filter__.shift(),this.__storage_events_filter__.push(this.__namespace__+"broadcast_"+a),this.__ls__.setItem(this.__namespace__+"broadcast",a),this.__handlers__.forEach((function(a){a(t,e)}))}else this.__ls__.removeItem(this.__lock_prefix__+e.data.id);else this.__lock__(e.data.id,e.id,e.data.timeout)},l.prototype.onmessage=function(t){var e=this;this.__handlers__.push(t),setTimeout((function(){t("!sys.master",{data:{node_id:e.__node_id__,master_id:e.__master_id__},node_id:e.__node_id__,id:e.__node_id__+"_"+e.__last_message_cnt__++}),e.__on_channels_list_changed__()}),0)},l.prototype.__lock__=function(t,e,a){var s=this,n=this.__lock_prefix__+t,i=this.__ls__.getItem(n);if(i)try{i=JSON.parse(i)}catch(r){i=null}i&&i.expire>Date.now()||(this.__ls__.setItem(n,JSON.stringify({expire:a+Date.now(),requestId:e})),setTimeout((function(){if(i=s.__ls__.getItem(n),i)try{i=JSON.parse(i)}catch(r){i=null}i&&i.requestId===e&&s.__handlers__.forEach((function(t){t("!sys.lock.acquired",{data:{request_id:e},node_id:s.__node_id__,id:s.__node_id__+"_"+s.__last_message_cnt__++})}))}),30))},l.prototype.__locks_cleanup__=function(){for(var t,e,a=0;a<this.__ls__.length;a++)if(t=this.__ls__.key(a),0===t.indexOf(this.__lock_prefix__)){e=this.__ls__.getItem(t);try{e=JSON.parse(e)}catch(s){e=null}(!e||e.expire<Date.now())&&this.__ls__.removeItem(t)}},l.prototype.__on_master_changed__=function(t){var e=this;t?(this.__master_id__=+t,this.__handlers__.forEach((function(t){t("!sys.master",{data:{node_id:e.__node_id__,master_id:e.__master_id__},node_id:e.__node_id__,id:e.__node_id__+"_"+e.__last_message_cnt__++})})),e.__update_channels_list__(!0),e.__on_channels_list_changed__()):this.__get_alive_router_ids__().sort()[0]===this.__node_id__&&(this.__storage_events_filter__.pop(),this.__storage_events_filter__.push(this.__namespace__+"master_"+this.__node_id__),this.__ls__.setItem(this.__namespace__+"master",this.__node_id__),this.__on_master_changed__(this.__node_id__))},l.prototype.__on_changed__=function(t){if(-1===this.__storage_events_filter__.indexOf(t.key+"_"+t.newValue)&&(t.key===this.__namespace__+"master"&&this.__on_master_changed__(t.newValue),0===t.key.indexOf(this.__router_channels_prefix__)&&this.__on_channels_list_changed__(),t.key===this.__namespace__+"broadcast")){var e=JSON.parse(t.newValue);this.__handlers__.forEach((function(t){t(e.channel,e.message)}))}},l.prototype.__destroy__=function(){this.__destroyed__||(this.__destroyed__=!0,s.clearInterval(this.__timer_cm__),s.clearInterval(this.__timer_lc__),this.__ls__.removeItem(this.__router_id_prefix__+this.__node_id__),this.__ls__.removeItem(this.__router_channels_prefix__+this.__node_id__),this.__master_id__===this.__node_id__&&this.__ls__.removeItem(this.__namespace__+"master"))},l.prototype.__get_alive_router_ids__=function(){for(var t,e,a=Date.now()-r,s=[],n=0;n<this.__ls__.length;n++)e=this.__ls__.key(n),0===e.indexOf(this.__router_id_prefix__)&&(t=+e.substr(this.__router_id_prefix__.length),this.__ls__.getItem(e)<a?(this.__ls__.removeItem(e),this.__ls__.removeItem(this.__router_channels_prefix__+t)):s.push(t));return s},l.prototype.__update_channels_list__=function(t){var e=this,a=[];Object.keys(this.__router_channels__).forEach((function(t){e.__router_channels__[t]>0&&a.push(t)}));var s=JSON.stringify(a.sort());this.__ls__.getItem(this.__router_channels_prefix__+this.__node_id__)!==s&&(this.__storage_events_filter__.pop(),this.__storage_events_filter__.push(this.__router_channels_prefix__+this.__node_id__+"_"+s),this.__ls__.setItem(this.__router_channels_prefix__+this.__node_id__,s),t||this.__on_channels_list_changed__())},l.prototype.__on_channels_list_changed__=function(){for(var t,e=this,a=[],s=0;s<this.__ls__.length;s++)t=this.__ls__.key(s),0===t.indexOf(this.__router_channels_prefix__)&&(a=a.concat(JSON.parse(this.__ls__.getItem(t))));a=a.reduce((function(t,e){return-1===t.indexOf(e)&&t.push(e),t}),[]),this.__handlers__.forEach((function(t){t("!sys.channels.refresh",{id:e.__node_id__+"_"+e.__last_message_cnt__++,node_id:e.__node_id__,data:{channels:a}})}))},l.prototype.__check_master__=function(){this.__ls__.setItem(this.__router_id_prefix__+this.__node_id__,Date.now()),this.__master_id__=+this.__ls__.getItem(this.__namespace__+"master"),-1===this.__get_alive_router_ids__().indexOf(this.__master_id__)&&(this.__storage_events_filter__.pop(),this.__storage_events_filter__.push(this.__namespace__+"master_"+this.__node_id__),this.__ls__.setItem(this.__namespace__+"master",this.__node_id__),this.__on_master_changed__(this.__node_id__))},t.exports=l},3912:function(t,e,a){"use strict";e["a"]={methods:{filteringData:function(){this.searchQuery.trim().length>0?document.getElementsByClassName("clear")[0].style.display="block":document.getElementsByClassName("clear")[0].style.display="none"},clearSearch:function(){this.searchQuery="",document.getElementsByClassName("clear")[0].style.display="none"},expandSearch:function(){document.getElementsByClassName("search-table")[0].classList.add("expand"),document.getElementsByClassName("filter-input")[0].setAttribute("placeholder","Filter eg: INFY"),this.searchQuery.trim()?document.getElementsByClassName("clear")[0].style.display="block":document.getElementsByClassName("clear")[0].style.display="none"},hideSearch:function(){document.getElementsByClassName("search-table")[0].classList.remove("expand"),document.getElementsByClassName("filter-input")[0].setAttribute("placeholder","Search"),document.getElementsByClassName("clear")[0].style.display="none",document.getElementsByClassName("filter-input")[0].blur()}}}},"3dfd":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.initFetch?a("div",{attrs:{id:"app"},on:{click:function(e){t.hideUserMenu(e),t.hidePortfolioMenu(e),t.hideReportsMenu(e),t.hideFundsMenu(e)}}},["tagmanager"!==t.$route.name?a("div",{staticClass:"header"},[a("div",{staticClass:"wrapper"},[a("div",{staticClass:"header-right menu-closed"},[t.isMobileView?a("a",{staticClass:"logo",attrs:{href:"/dashboard"}},[a("img",{attrs:{src:"/static/images/logo-mini.svg"}})]):a("a",{staticClass:"logo",attrs:{href:"/dashboard"}},[a("img",{attrs:{src:"/static/images/logo.svg"}})]),t._v(" "),t.isMobileView?a("div",{class:{"mobile-page-title":!0,"webview-title":t.isMobileWebview}},[t._v("\n\t\t\t\t"+t._s(t.$route.meta.title)+"\n\t\t\t")]):t._e(),t._v(" "),t.isMobileWebview?t._e():a("a",{staticClass:"toggle-mobile-menu",attrs:{href:"#"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleBurger()}}},[t._m(0)]),t._v(" "),a("transition",{attrs:{name:"dropdown"}},[t.showBurger?a("div",{staticClass:"mobile-menu-drop show-on-mobile"},[a("div",{staticClass:"mobile-profile-card"},[a("a",{attrs:{href:"/account"}},[a("su-avatar",{staticClass:"profile-avatar",attrs:{username:t.user_name,src:t.avatar,size:50}}),t._v(" "),a("div",{staticClass:"mobile-profile-details"},[a("h2",{staticClass:"username"},[t._v(t._s(t._f("capitalize")(t.user_name)))]),t._v(" "),a("span",{attrs:{id:"userDetails",name:t.user_shortname}},[t._v(t._s(t.client_id))])])],1)]),t._v(" "),a("router-link",{class:"mobile-account-link",attrs:{to:"/account"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",{staticClass:"icon icon-user"}),t._v(" "),a("span",[t._v("My account")])]),t._v(" "),a("router-link",{attrs:{to:"/dashboard"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",{staticClass:"icon icon-compass"}),t._v(" "),a("span",[t._v("Dashboard")])]),t._v(" "),a("div",{staticClass:"nav-accordion-label",attrs:{id:"mobile_portfolio_label"},on:{click:function(e){return t.expandMobileMenu("portfolio")}}},[a("div",[a("span",{staticClass:"icon icon-briefcase"}),t._v("\n\t\t\t\t\t\t\tPortfolio\n\t\t\t\t\t\t\t"),a("span",{staticClass:"icon icon-chevron-right"}),t._v(" "),a("span",{staticClass:"icon icon-chevron-down"})]),t._v(" "),a("div",{staticClass:"nav-accordion-content portfolio-menu-content"},[a("router-link",{attrs:{to:"/portfolio/positions"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Positions")]),t._v(" "),t.status.positions_count>0?a("span",{staticClass:"portfolio-count"},[t._v(t._s(t.status.positions_count))]):t._e()]),t._v(" "),a("router-link",{attrs:{to:"/portfolio/holdings"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Holdings")]),t._v(" "),t.status.eq_holdings_count>0?a("span",{staticClass:"portfolio-count"},[t._v(t._s(t.status.eq_holdings_count))]):t._e()]),t._v(" "),a("a",{attrs:{href:"/portfolio/ipo",target:"_blank"}},[a("span",[t._v("IPOs")])]),t._v(" "),a("router-link",{attrs:{to:"/portfolio/corporate-action-order-window"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Corporate actions")])]),t._v(" "),a("router-link",{attrs:{to:"/portfolio/tags/analyse"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Tags")])])],1)]),t._v(" "),a("div",{staticClass:"nav-accordion-label",attrs:{id:"mobile_reports_label"},on:{click:function(e){return t.expandMobileMenu("reports")}}},[a("div",[a("span",{staticClass:"icon icon-book"}),t._v("\n\t\t\t\t\t\t\tReports\n\t\t\t\t\t\t\t"),a("span",{staticClass:"icon icon-chevron-right"}),t._v(" "),a("span",{staticClass:"icon icon-chevron-down"})]),t._v(" "),a("div",{staticClass:"nav-accordion-content reports-menu-content"},[a("router-link",{attrs:{to:"/reports/tradebook"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Tradebook")])]),t._v(" "),a("router-link",{attrs:{to:"/reports/pnl"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("P&L")])]),t._v(" "),a("router-link",{attrs:{to:"/reports/taxpnl"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Tax P&L")])]),t._v(" "),a("router-link",{attrs:{to:"/reports/tax-loss-harvesting"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Tax-loss harvesting")])]),t._v(" "),a("router-link",{attrs:{to:"/sixty-day-challenge"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("60 day challenge")])]),t._v(" "),a("router-link",{attrs:{to:"/reports/downloads"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Downloads")])])],1)]),t._v(" "),a("div",{staticClass:"nav-accordion-label",attrs:{id:"mobile_funds_label"},on:{click:function(e){return t.expandMobileMenu("funds")}}},[a("div",[a("span",{staticClass:"icon icon-credit-card"}),t._v("\n\t\t\t\t\t\t\tFunds\n\t\t\t\t\t\t\t"),a("span",{staticClass:"icon icon-chevron-right"}),t._v(" "),a("span",{staticClass:"icon icon-chevron-down"})]),t._v(" "),a("div",{staticClass:"nav-accordion-content funds-menu-content"},[a("router-link",{attrs:{to:"/funds/overview"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Withdrawal")])]),t._v(" "),a("router-link",{attrs:{to:"/funds/statement"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Statement")])]),t._v(" "),a("router-link",{attrs:{to:"/funds/interest-statement"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Interest statement")])]),t._v(" "),a("router-link",{attrs:{to:"/funds/mandates"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("span",[t._v("Bank mandates")])])],1)]),t._v(" "),a("router-link",{attrs:{to:"/refer"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("img",{staticClass:"refer-link-img",attrs:{src:"/static/images/refer-grey.svg"}}),t._v(" "),a("span",[t._v("Rewards & referrals")])]),t._v(" "),a("router-link",{staticClass:"mobile-refer-label",attrs:{to:"/gift"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("img",{staticClass:"refer-link-img",attrs:{src:"/static/images/gift-grey.svg"}}),t._v(" "),a("span",[t._v("Gift stocks")])]),t._v(" "),t.isMobileWebview?t._e():a("div",{staticClass:"mobile-menu-footer"},[a("a",{attrs:{rel:"noopener noreferrer",href:"https://support.zerodha.com/category/console/"}},[a("span",{staticClass:"icon icon-life-buoy"}),t._v(" Support")]),a("a",{attrs:{target:"_self",href:"/logout"}},[a("span",{staticClass:"icon icon-exit"}),t._v(" Logout")])]),t._v(" "),a("br"),t._v(" "),a("p",[t._v(" ")])],1):t._e()]),t._v(" "),a("div",{staticClass:"app-nav hide-on-mobile"},[a("router-link",{attrs:{to:"/dashboard"}},[a("span",[t._v("Dashboard")])]),t._v(" "),a("a",{staticClass:"dropdown-label portfolio-label",class:t.portfolioMenuClass,attrs:{href:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.togglePortfolioMenu.apply(null,arguments)}}},[a("span",{staticClass:"portfolio-id"},[t._v("Portfolio")])]),t._v(" "),t.isPortfolioMenu?a("div",{staticClass:"dropdown-nav portfolio-dropdown",on:{click:function(e){return t.hidePortfolioMenu(e)}}},[a("div",{staticClass:"triangle",attrs:{id:"portfolio_triangle"}}),t._v(" "),a("ul",{staticClass:"list-flat dropdown-nav-list"},[a("li",[a("router-link",{attrs:{to:"/portfolio/positions"}},[t.status.positions_count>0?a("span",[t._v("Positions ("+t._s(t.status.positions_count)+")")]):a("span",[t._v("Positions")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/portfolio/holdings"}},[t.status.eq_holdings_count>0?a("span",[t._v("Holdings ("+t._s(t.status.eq_holdings_count)+")")]):a("span",[t._v("Holdings")])])],1),t._v(" "),a("hr"),t._v(" "),t._m(1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/portfolio/corporate-action-order-window"}},[a("span",[t._v("Corporate actions")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/portfolio/tags/analyse"}},[a("span",[t._v("Tags")])])],1)])]):t._e(),t._v(" "),a("a",{staticClass:"dropdown-label reports-label",class:t.reportsMenuClass,attrs:{href:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleReportsMenu.apply(null,arguments)}}},[a("span",{staticClass:"reports-id"},[t._v("Reports")])]),t._v(" "),t.isReportsMenu?a("div",{staticClass:"dropdown-nav reports-dropdown",on:{click:function(e){return t.hideReportsMenu(e)}}},[a("div",{staticClass:"triangle",attrs:{id:"reports_triangle"}}),t._v(" "),a("ul",{staticClass:"list-flat dropdown-nav-list"},[a("li",[a("router-link",{attrs:{to:"/reports/tradebook"}},[a("span",[t._v("Tradebook")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/reports/pnl"}},[a("span",[t._v("P&L")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/reports/taxpnl"}},[a("span",[t._v("Tax P&L")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/reports/tax-loss-harvesting"}},[a("span",[t._v("Tax-loss harvesting")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/sixty-day-challenge"}},[a("span",[t._v("60 day challenge")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/reports/downloads"}},[a("span",[t._v("Downloads")])])],1)])]):t._e(),t._v(" "),a("a",{staticClass:"dropdown-label funds-label",class:t.fundsMenuClass,attrs:{href:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleFundsMenu.apply(null,arguments)}}},[a("span",{staticClass:"funds-id"},[t._v("Funds")])]),t._v(" "),t.isFundsMenu?a("div",{staticClass:"dropdown-nav funds-dropdown",on:{click:function(e){return t.hideFundsMenu(e)}}},[a("div",{staticClass:"triangle",attrs:{id:"funds_triangle"}}),t._v(" "),a("ul",{staticClass:"list-flat dropdown-nav-list"},[a("li",[a("router-link",{attrs:{to:"/funds/overview"}},[a("span",[t._v("Withdrawal")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/funds/statement"}},[a("span",[t._v("Statement")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/funds/interest-statement"}},[a("span",[t._v("Interest statement")])])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/funds/mandates"}},[a("span",[t._v("Bank mandates")])])],1)])]):t._e(),t._v(" "),a("router-link",{attrs:{to:"/account"}},[a("span",[t._v("Account")])])],1),t._v(" "),a("div",{staticClass:"right-nav hide-on-mobile"},[a("div",{staticClass:"user-nav perspective"},[a("a",{staticClass:"dropdown-label user-id",attrs:{href:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleUserMenu.apply(null,arguments)}}},[a("su-avatar",{staticClass:"profile-avatar",attrs:{username:t.user_name,src:t.avatar,size:25}}),t._v(" "),a("span",{attrs:{id:"userDetails",name:t.user_shortname}},[t._v(t._s(t.client_id))])],1),t._v(" "),t.isUserMenu?a("div",{staticClass:"dropdown-nav",on:{click:function(e){return t.hideUserMenu(e)}}},[a("div",{staticClass:"triangle"}),t._v(" "),a("div",{staticClass:"dropdown-nav-header"},[a("router-link",{attrs:{to:"/account"}},[a("h4",{staticClass:"username"},[t._v(t._s(t._f("capitalize")(t.user_name)))])])],1),t._v(" "),a("hr"),t._v(" "),a("ul",{staticClass:"list-flat dropdown-nav-list"},[a("li",[a("router-link",{attrs:{to:"/account"}},[a("span",{staticClass:"icon icon-user"}),t._v(" My account\n\t\t\t\t\t\t\t\t")])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{attrs:{to:"/refer"}},[a("img",{staticClass:"refer-link-img",attrs:{src:"/static/images/refer.svg"}}),t._v(" Rewards & referrals\n\t\t\t\t\t\t\t\t")])],1),t._v(" "),a("hr"),t._v(" "),a("li",[a("router-link",{staticClass:"mobile-refer-label",attrs:{to:"/gift"},nativeOn:{click:function(e){return t.linkClicked()}}},[a("img",{staticClass:"refer-link-img",attrs:{src:"/static/images/gift.svg"}}),t._v(" Gift stocks\n\t\t\t\t\t\t\t\t")])],1),t._v(" "),a("hr"),t._v(" "),t._m(2),t._v(" "),a("hr"),t._v(" "),a("li",[a("a",{attrs:{target:"_self",href:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.logout.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-exit"}),t._v(" Logout")])])])]):t._e()])])],1)])]):t._e(),t._v(" "),a("div",{staticClass:"wrapper"},[a("div",{class:"page-content "+("tagmanager"===t.$route.name?"widget":"")},[a("router-view")],1)]),t._v(" "),t.showZerodhaCapitalFooter||"tagmanager"===t.$route.name?t._e():a("div",{staticClass:"footer"},[t._m(3)]),t._v(" "),t.showZerodhaCapitalFooter?a("div",{staticClass:"footer"},[t._m(4)]):t._e()]):t._e()},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"nav-icon4"}},[a("span"),t._v(" "),a("span"),t._v(" "),a("span")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{attrs:{href:"/portfolio/ipo",target:"_blank"}},[a("span",[t._v("IPOs")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{attrs:{href:"https://support.zerodha.com/category/console/",target:"_blank"}},[a("span",{staticClass:"icon icon-help-circle"}),t._v(" Support")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer-section"},[a("div",{staticClass:"footer-container"},[a("div",{staticClass:"row text-grey"},[a("div",{staticClass:"six columns nomargin-mobile"},[a("a",{attrs:{href:"https://zerodha.com"}},[a("img",{attrs:{src:"/static/images/zerodha-grey-logo.svg"}})]),t._v(" "),a("span",{staticClass:"text-light-grey"},[t._v("© 2023. All rights reserved.")])]),t._v(" "),a("div",{staticClass:"nomargin-mobile six columns text-right"},[a("a",{staticClass:"text-light-grey hide-on-mobile",attrs:{target:"_blank",href:"https://support.zerodha.com"}},[t._v("Support")])])]),t._v(" "),a("p",{staticClass:"text-light-grey hide-on-mobile"},[t._v("NSE​ &​ BSE – SEBI Registration no.: INZ000031633 | MCX - SEBI Registration no.: INZ000038238 | CDSL - SEBI Registration no.: IN-DP-431-2019")]),t._v(" "),a("p",{staticClass:"text-light-grey hide-on-mobile"},[t._v("Disclaimer: The P&L report/Holdings/Positions data is prepared based on the trades and information available with us, at the time of report generation. Zerodha Broking Ltd., does not make any warranty, express or implied, or assume any legal/consequential liability, or responsibility for the authenticity, and completeness of the data presented in this report/data. To double check your P&L report/Holdings/Positions data, verify it with the Tradebook, Contract Notes and the Funds Statement which are available with you at all times.")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer-section"},[a("div",{staticClass:"footer-container"},[a("div",{staticClass:"row text-grey"},[a("div",{staticClass:"six columns nomargin-mobile"},[a("a",{attrs:{href:"https://zerodha.com"}},[a("img",{attrs:{src:"/static/images/zerodha-grey-logo.svg"}})]),t._v(" "),a("span",{staticClass:"text-light-grey"},[t._v("© 2023 Zerodha Capital Private Ltd. All rights reserved. RBI Reg. No. N-02.00283")])]),t._v(" "),a("div",{staticClass:"nomargin-mobile six columns text-right"},[a("a",{staticClass:"text-light-grey hide-on-mobile",attrs:{target:"_blank",href:"https://support.zerodha.com"}},[t._v("Support")])])]),t._v(" "),a("p",{staticClass:"hide-on-mobile"},[a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/tos/terms-and-conditions",target:"_blank"}},[t._v("Terms & Conditions")])]),t._v(" |\n\t\t\t\t\t"),a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/tos/privacy-policy",target:"_blank"}},[t._v("Privacy Policy")])]),t._v(" |\n\t\t\t\t\t"),a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/tos/fair-practices-code",target:"_blank"}},[t._v("Fair Practice Code")])]),t._v(" |\n\t\t\t\t\t"),a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/tos/interest-rate-policy",target:"_blank"}},[t._v("Interest Rate Policy")])]),t._v(" |\n\t\t\t\t\t"),a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/tos/demand-call-loan-policy",target:"_blank"}},[t._v("Demand and Call Loan Policy")])]),t._v(" |\n\t\t\t\t\t"),a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/approved-list",target:"_blank"}},[t._v("List of approved securities")])]),t._v(" |\n\t\t\t\t\t"),a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/tos/grievance-redressal",target:"_blank"}},[t._v("Grievance Redressal")])]),t._v(" |\n\t\t\t\t\t"),a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/tos/ombudsman-scheme",target:"_blank"}},[t._v("Ombudsman Scheme")])]),t._v(" |\n\t\t\t\t\t"),a("span",[a("a",{staticClass:"text-light-grey",attrs:{href:"https://zerodhacapital.com/tos/faq",target:"_blank"}},[t._v("FAQs")])])])])])}],i=a("a026"),r=a("c0d6"),o=a("2f62");function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function t(){l(this,t)};c.install=function(t,e){};var d=a("2878");function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h=function t(){u(this,t)};function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}h.install=function(t,e){t.component("payin",d["default"])};var _=function t(){p(this,t)};function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}_.install=function(t,e){};var g=function t(){m(this,t)};function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}g.install=function(t,e){};var f=function t(){v(this,t)};function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}f.install=function(t,e){};var y=function t(){b(this,t)};function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}y.install=function(t,e){};var w=function t(){C(this,t)};function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}w.install=function(t,e){};var x=function t(){k(this,t)};x.install=function(t,e){};var S=a("e9dd"),T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-container"},[a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"modal-default-button",on:{click:function(e){return t.$emit("close")}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t\t\t\t\t\t")])])])])])])},P=[],D=a("2877"),E={},I=Object(D["a"])(E,T,P,!1,null,null,null),O=I.exports;function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var M=function t(){R(this,t)};function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}M.install=function(t,e){t.component("discrepant",S["default"]),t.component("modal",O)};var F=function t(){A(this,t)};function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}F.install=function(t,e){};var N=function t(){L(this,t)};function $(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}N.install=function(t,e){};var U=function t(){$(this,t)};function H(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}U.install=function(t,e){};var B=function t(){H(this,t)};B.install=function(t,e){};var j=a("8499"),q=a("6157");function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var G=function t(){z(this,t)};function K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}G.install=function(t,e){t.component("taganalysis",j["default"]),t.component("tagmanager",q["default"])};var V=function t(){K(this,t)};V.install=function(t,e){};var Y=a("1bef"),Q=a("1552");function W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Z=function t(){W(this,t)};Z.install=function(t,e){t.component("sendGift",Q["default"]),t.component("acceptGift",Y["default"])};var J=a("d1df"),X=a("1fa4"),tt=a("d796"),et=a("19d1"),at=a("d361"),st=a("bad3"),nt=a("ee54"),it=a("685f");function rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ot=function t(){rt(this,t)};function lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}ot.install=function(t,e){t.component("fatca",X["a"]),t.component("fatcacorrection",tt["default"]),t.component("loansdashboard",J["default"]),t.component("loaninvite",et["default"]),t.component("statement",at["default"]),t.component("managepledge",st["default"]),t.component("offers",nt["a"]),t.component("kyc",it["default"])};var ct=function t(){lt(this,t)};function dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}ct.install=function(t,e){};var ut=function t(){dt(this,t)};function ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}ut.install=function(t,e){};var pt=function t(){ht(this,t)};pt.install=function(t,e){};var _t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{class:t.customClass,attrs:{to:t.to,event:""},nativeOn:{click:function(e){return e.preventDefault(),t.handle.apply(null,arguments)}}},[t._t("default")],2)},mt=[];function gt(t){return gt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}var vt={name:"custom-router-link",props:{to:{type:[String,Object],required:!0}},data:function(){return{customClass:[]}},mounted:function(){var t=this;this.$nextTick((function(){t.setClass()}))},methods:{handle:function(){var t,e;"object"===gt(this.to)?(t=this.to.name,e=this.$route.name):(t=this.to,e=this.$route.path),t===e?(document.querySelector(".page-container").classList.add("bounce"),setTimeout((function(){document.querySelector(".page-container").className="page-container profile"}),305)):this.$router.push(this.to)},setClass:function(){}}},ft=vt,bt=Object(D["a"])(ft,_t,mt,!1,null,null,null),yt=bt.exports,Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("h1",[t._v("Switch user")]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row section"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.client_id,expression:"client_id"}],attrs:{type:"text",id:"client_id"},domProps:{value:t.client_id},on:{input:function(e){e.target.composing||(t.client_id=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn-red",on:{click:function(e){return t.switchUser()}}},[t._v("Submit")])])])},wt=[],kt=a("bc3a"),xt=a.n(kt),St=xt.a.create({timeout:1e4,responseType:"json"}),Tt={data:function(){return{client_id:""}},methods:{switchUser:function(){this.client_id.length>0&&St.post("/qadmin/switch-user/",{user_id:this.client_id}).then((function(t){"success"===t.data.message?location.href="/dashboard":console.log("Error redirecting to dashboard.")})).catch((function(t){console.log("Error switching user: ",t)}))}}},Pt=Tt,Dt=Object(D["a"])(Pt,Ct,wt,!1,null,null,null),Et=Dt.exports;function It(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Ot=function t(){It(this,t)};Ot.install=function(t,e){t.component("adminswitch",Et)};var Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",[a("thead",[a("tr",t._l(t.columns,(function(e,s){return a("th",{key:s,class:{active:t.sortKey==e},on:{click:function(a){return t.sortBy(e)}}},[t._v("\n\t\t\t\t"+t._s(e)+"\n\t\t\t\t"),a("span",{staticClass:"arrow",class:t.sortOrders[e]>0?"asc":"dsc"})])})),0)]),t._v(" "),a("tbody",t._l(t.filteredData,(function(e,s){return a("tr",{key:s},t._l(t.columns,(function(s,n){return a("td",{key:n},[t._v("\n\t\t\t"+t._s(e[s])+"\n\t\t\t")])})),0)})),0)])},Mt=[],At={props:{data:Array,columns:Array},data:function(){var t={};return this.columns.forEach((function(e){t[e]=1})),{sortKey:"",sortOrders:t}},computed:{filteredData:function(){var t=this.sortKey,e=this.sortOrders[t]||1,a=this.data;return t&&(a=a.slice().sort((function(a,s){return a=a[t],s=s[t],(a===s?0:a>s?1:-1)*e}))),a}},methods:{sortBy:function(t){this.sortKey=t,this.sortOrders[t]=-1*this.sortOrders[t]}}},Ft=At,Lt=Object(D["a"])(Ft,Rt,Mt,!1,null,null,null),Nt=Lt.exports;function $t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Ut=function t(){$t(this,t)};Ut.install=function(t,e){t.component("data-table",Nt)};var Ht=a("b047c"),Bt=a.n(Ht),jt=a("b23e"),qt=a.n(jt),zt=a("ba6a"),Gt=a("5665"),Kt=a("1a6c");function Vt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function Yt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(a),!0).forEach((function(e){Qt(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Vt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Qt(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Wt(t){return Wt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(t)}var Zt=qt.a.client();function Jt(t){var e=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),s=0;s<a.length;s++){var n=a[s].trim();if(n.substring(0,t.length+1)===t+"="){e=decodeURIComponent(n.substring(t.length+1));break}}return e}i["a"].use(Ut,{store:r["a"]}),i["a"].use(c,{store:r["a"]}),i["a"].use(h,{store:r["a"]}),i["a"].use(_,{store:r["a"]}),i["a"].use(g,{store:r["a"]}),i["a"].use(f,{store:r["a"]}),i["a"].use(y,{store:r["a"]}),i["a"].use(w,{store:r["a"]}),i["a"].use(x,{store:r["a"]}),i["a"].use(M,{store:r["a"]}),i["a"].use(F,{store:r["a"]}),i["a"].use(N,{store:r["a"]}),i["a"].use(U,{store:r["a"]}),i["a"].use(V,{store:r["a"]}),i["a"].use(Z,{store:r["a"]}),i["a"].use(B,{store:r["a"]}),i["a"].use(G,{store:r["a"]}),i["a"].use(ot,{store:r["a"]}),i["a"].use(ct,{store:r["a"]}),i["a"].use(ut,{store:r["a"]}),i["a"].use(pt,{store:r["a"]}),i["a"].use(Ot,{store:r["a"]}),i["a"].use(Kt["a"]);var Xt={name:"app",components:{"custom-router-link":yt},watch:{$route:function(t,e){t.meta.title&&(this.setPageTitle(t.meta.title),this.setFooter(t.meta.title))}},data:function(){return{client_id:"",user_name:"",user_shortname:"",avatar:"",status:[],isUserMenu:!1,isLoansMenu:!1,isPortfolioMenu:!1,isReportsMenu:!1,isFundsMenu:!1,initFetch:!1,showBurger:!1,isMobile:!1,showZerodhaCapitalFooter:!1,isMobileWebview:!1}},created:function(){this.setCSRF(Jt("public_token")),window.addEventListener("resize",this.handleResize),this.handleResize(),this.$route.meta.title&&(this.setPageTitle(this.$route.meta.title),this.setFooter(this.$route.meta.title)),this.getStatus(),this.getSegmentStatus(),this.getFamilyParents()},destroyed:function(){window.removeEventListener("resize",this.handleResize)},mounted:function(){var t=this.$route.query;"object"===Wt(t)&&0!==Object.keys(t).length&&t.hasOwnProperty("src")&&("kitemobile"===t.src||"coinmobile"===t.src?this.isMobile=!0:"kitewebview"!==t.src&&"coinwebview"!==t.src||(this.isMobileWebview=!0)),Zt.on("channel",(function(t){"logout"===t&&(window.location.href="/logout")}));for(var e=document.getElementsByClassName("nav-accordion-label"),a=0;a<e.length;a++)e[a].addEventListener("click",(function(){this.classList.toggle("active");var t=this.nextElementSibling;"block"===t.style.display?t.style.display="none":t.style.display="block"}))},computed:Yt(Yt({},Object(o["c"])(["isMobileView"])),{},{portfolioMenuClass:function(){if("holdings"===this.$route.name||"positions"===this.$route.name||"discrepant"===this.$route.name||"corporateAction"===this.$route.name||"tags"===this.$route.name)return"router-link-active"},reportsMenuClass:function(){if("tradebook"===this.$route.name||"pnl"===this.$route.name||"taxpnl"===this.$route.name||"challenge"===this.$route.name||"downloads"===this.$route.name||"taxloss"===this.$route.name)return"router-link-active"},fundsMenuClass:function(){if("funds"===this.$route.name||"ledger"===this.$route.name||"interest"===this.$route.name||"enach"===this.$route.name||"payin"===this.$route.name)return"router-link-active"}}),methods:Yt(Yt({},Object(o["d"])(["setMobileView","setActiveSegments","setPNLStatus","setSegmentList","setSlb","setClientID","setCSRF","setUserDetails","setParentAccounts","setChildAccounts"])),{},{getFamilyParents:function(){var t=this;zt["a"].request("GET",!1,Gt["a"].getParent,null,(function(e,a){"SUCCESS"===e.toUpperCase()?(t.setParentAccounts(a.data.data.result),t.getFamilyChildren()):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching family account details: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching family account details:"+zt["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},getFamilyChildren:function(){var t=this;zt["a"].request("GET",!1,Gt["a"].getChildren,null,(function(e,a){"SUCCESS"===e.toUpperCase()?t.setChildAccounts(a.data.data.result):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching family account details: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching family account details:"+zt["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},setFooter:function(t){var e=["Loans dashboard","Loans statement","Loans fatca correction","Loans pledges","Loans kyc"];this.showZerodhaCapitalFooter=-1!==e.indexOf(t)},handleResize:Bt()((function(){window.innerWidth<801?this.setMobileView(!0):window.innerWidth>800&&this.setMobileView(!1)}),50),linkClicked:function(){document.getElementById("nav-icon4").classList.toggle("open"),this.showBurger=!this.showBurger,document.getElementsByTagName("body")[0].style.overflowY="scroll"},getStatus:function(){var t=this;zt["a"].request("GET",!1,Gt["a"].getStatus,null,(function(e,a){"SUCCESS"===e.toUpperCase()?(t.status=a.data.data.result,t.user_name=t.status.user_name,t.client_id=t.status.user_id,t.user_email=t.status.email,t.avatar=t.status.avatar_url,t.user_shortname=t.status.user_shortname.replace(/ .*/,""),t.setPNLStatus(t.status.pnl_last_run_status),t.setClientID(t.client_id),t.setUserDetails(t.status)):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching status: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching status:"+zt["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},getSegmentStatus:function(){var t=this;this.initFetch=!1,zt["a"].request("GET",!1,Gt["a"].getSegmentStatus,null,(function(e,a){if(t.initFetch=!0,"SUCCESS"===e.toUpperCase()){var s=[];"ACTIVATED"!==a.data.data.result.nse_eq_status.toUpperCase()&&"ACTIVATED"!==a.data.data.result.bse_fo_status.toUpperCase()&&"ACTIVATED"!==a.data.data.result.nse_fo_status.toUpperCase()||s.push("EQ"),"ACTIVATED"===a.data.data.result.mcx_status.toUpperCase()&&s.push("COM"),t.setActiveSegments(s),t.setSegmentList(a.data.data.result),t.setSlb({nse_slb_status:a.data.data.result.nse_slb_status,bse_slb_status:a.data.data.result.bse_slb_status})}else"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching segment status: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching segment status:"+zt["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},toggleUserMenu:function(){this.isLoansMenu=!1,this.isUserMenu=!this.isUserMenu,this.isPortfolioMenu=!1,this.isReportsMenu=!1,this.isFundsMenu=!1,document.getElementsByClassName("portfolio-label")[0].classList.remove("no-border"),document.getElementsByClassName("reports-label")[0].classList.remove("no-border"),document.getElementsByClassName("funds-label")[0].classList.remove("no-border")},hideUserMenu:function(t){this.isUserMenu=!1,document.getElementsByClassName("portfolio-label")[0]&&document.getElementsByClassName("portfolio-label")[0].classList.remove("no-border"),document.getElementsByClassName("reports-label")[0]&&document.getElementsByClassName("reports-label")[0].classList.remove("no-border"),document.getElementsByClassName("funds-label")[0]&&document.getElementsByClassName("funds-label")[0].classList.remove("no-border")},toggleLoansMenu:function(){this.isLoansMenu=!this.isLoansMenu,this.isPortfolioMenu=!1,this.isUserMenu=!1,this.isReportsMenu=!1,this.isFundsMenu=!1,document.getElementsByClassName("portfolio-label")[0].classList.remove("no-border"),document.getElementsByClassName("reports-label")[0].classList.remove("no-border"),document.getElementsByClassName("funds-label")[0].classList.remove("no-border")},hideLoansMenu:function(t){this.isLoansMenu=!1},togglePortfolioMenu:function(){this.isPortfolioMenu=!this.isPortfolioMenu,this.isLoansMenu=!1,this.isUserMenu=!1,this.isReportsMenu=!1,this.isFundsMenu=!1,document.getElementsByClassName("portfolio-label")[0].classList.remove("no-border"),document.getElementsByClassName("reports-label")[0].classList.remove("no-border"),document.getElementsByClassName("funds-label")[0].classList.remove("no-border"),"holdings"!==this.$route.name&&"positions"!==this.$route.name&&"discrepant"!==this.$route.name&&"corporateAction"!==this.$route.name&&"tags"!==this.$route.name||document.getElementsByClassName("portfolio-label")[0].classList.add("no-border")},hidePortfolioMenu:function(t){this.isPortfolioMenu=!1},toggleReportsMenu:function(){this.isReportsMenu=!this.isReportsMenu,this.isLoansMenu=!1,this.isUserMenu=!1,this.isPortfolioMenu=!1,this.isFundsMenu=!1,document.getElementsByClassName("portfolio-label")[0].classList.remove("no-border"),document.getElementsByClassName("reports-label")[0].classList.remove("no-border"),document.getElementsByClassName("funds-label")[0].classList.remove("no-border"),"tradebook"!==this.$route.name&&"pnl"!==this.$route.name&&"taxpnl"!==this.$route.name&&"challenge"!==this.$route.name&&"downloads"!==this.$route.name&&"taxloss"!==this.$route.name||document.getElementsByClassName("reports-label")[0].classList.add("no-border")},hideReportsMenu:function(t){this.isReportsMenu=!1},toggleFundsMenu:function(){this.isFundsMenu=!this.isFundsMenu,this.isLoansMenu=!1,this.isUserMenu=!1,this.isPortfolioMenu=!1,this.isReportsMenu=!1,document.getElementsByClassName("portfolio-label")[0].classList.remove("no-border"),document.getElementsByClassName("reports-label")[0].classList.remove("no-border"),document.getElementsByClassName("funds-label")[0].classList.remove("no-border"),"funds"!==this.$route.name&&"ledger"!==this.$route.name&&"interest"!==this.$route.name&&"enach"!==this.$route.name&&"payin"!==this.$route.name||document.getElementsByClassName("funds-label")[0].classList.add("no-border")},hideFundsMenu:function(t){this.isFundsMenu=!1},toggleBurger:function(){document.getElementById("nav-icon4").classList.toggle("open"),document.getElementsByClassName("header-right")[0].classList.toggle("menu-closed"),this.showBurger=!this.showBurger,this.showBurger?document.getElementsByTagName("body")[0].style.overflowY="hidden":document.getElementsByTagName("body")[0].style.overflowY="scroll"},expandMobileMenu:function(t){"portfolio"===t?(document.getElementById("mobile_reports_label").classList.remove("active"),document.getElementById("mobile_funds_label").classList.remove("active"),document.getElementById("mobile_portfolio_label").classList.toggle("active")):"reports"===t?(document.getElementById("mobile_portfolio_label").classList.remove("active"),document.getElementById("mobile_funds_label").classList.remove("active"),document.getElementById("mobile_reports_label").classList.toggle("active")):"funds"===t&&(document.getElementById("mobile_portfolio_label").classList.remove("active"),document.getElementById("mobile_reports_label").classList.remove("active"),document.getElementById("mobile_funds_label").classList.toggle("active"))},setPageTitle:function(t){document.title=t+" / Console"},logout:function(){Zt.emit("channel","logout",!0)}})},te=Xt,ee=(a("4960"),Object(D["a"])(te,s,n,!1,null,null,null));e["default"]=ee.exports},"408c":function(t,e,a){var s=a("2b3e"),n=function(){return s.Date.now()};t.exports=n},"48f1":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("su-table",{attrs:{headers:t.dataHoldingsHeader,data:t.filteredDataHoldings,"header-checkbox":"","header-checkbox-checked":t.headerCheckboxChecked,"toolbar-header":"",sort:"",tableBorder:"",searchFilterOnly:!1},on:{headerCheckboxSelect:t.onHeaderCheckboxSelect},scopedSlots:t._u([{key:"default",fn:function(e){return[a("td",{staticClass:"textleft table-border"},[t._v("\n\t\t\t\t"+t._s(e.row.tradingsymbol)+" "),a("p",{staticClass:"text-light-grey text-xsmall"},[t._v(t._s(e.row.isin))])]),t._v(" "),a("td",[t._v("\n\t\t\t\t"+t._s(e.row.loan_available_formatted)+"\n\t\t\t")]),t._v(" "),a("td",[a("div",{staticClass:"su-input-group"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.row.pledge_qty,expression:"props.row.pledge_qty",modifiers:{number:!0}}],attrs:{disabled:!t.selectedHoldings[e.row.isin],type:"number",min:1,max:e.row.quantity},domProps:{value:e.row.pledge_qty},on:{input:[function(a){a.target.composing||t.$set(e.row,"pledge_qty",t._n(a.target.value))},function(a){return t.onQtyChange(e.row.isin,e.row.pledge_qty,e.index)}],blur:function(e){return t.$forceUpdate()}}}),t._v(" / "),a("span",{staticClass:"text-blue"},[t._v(t._s(e.row.quantity)+" ")])])]),t._v(" "),a("td",[a("div",[a("div",{staticClass:"su-input-group"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.row.loan_value,expression:"props.row.loan_value",modifiers:{number:!0}}],attrs:{disabled:!t.selectedHoldings[e.row.isin],type:"number",min:Math.round(e.row.amount/e.row.quantity),max:e.row.amount},domProps:{value:e.row.loan_value},on:{input:[function(a){a.target.composing||t.$set(e.row,"loan_value",t._n(a.target.value))},function(a){return t.onValueChange(e.row.isin,e.row.loan_value,e.index)}],blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("su-checkbox",{attrs:{title:"Check to pledge stock",id:e.row.isin},on:{change:function(a){return t.onHoldingSelect(e.index)}},model:{value:t.selectedHoldings[e.row.isin],callback:function(a){t.$set(t.selectedHoldings,e.row.isin,a)},expression:"selectedHoldings[props.row.isin]"}})],1)])]}}])})],1)},n=[],i=a("a210"),r=a("2f62"),o=a("eeee"),l=a("19b7");function c(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=d(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,o=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){o=!0,i=t},f:function(){try{r||null==a.return||a.return()}finally{if(o)throw i}}}}function d(t,e){if(t){if("string"===typeof t)return u(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),!0).forEach((function(e){_(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function _(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var m=l["b"],g={components:{"su-input":i["a"],"su-table":o["a"]},props:{holdings:Array,columns:Array,filterKey:String,searchQuery:String},data:function(){return{headerCheckboxChecked:!0,selectedHoldings:{},dataHoldings:[],dataHoldingsHeader:[{class:[],label:"Symbol",field:"tradingsymbol",sort:!0,tableBorder:!0,sortArrow:!0,arrowShowDefault:!0,search:!0},{class:[],label:"Max available (₹)",field:"amount",sort:!0,arrowShowDefault:!1,sortArrow:!0},{class:[],label:"Quantity",field:"quantity"},{class:[],label:"Amount required (₹)",field:"loan_value",showHeaderCheckbox:!0}]}},mounted:function(){var t=this;this.dataHoldings=this.$clone(this.holdings);var e=this.stocksPledged;this.dataHoldings.map((function(a,s){e&&e.length>0?e.map((function(t){return t.isin})).indexOf(a.isin)>-1?(a.pledge_qty=e[e.map((function(t){return t.isin})).indexOf(a.isin)].quantity,a.loan_value=e[e.map((function(t){return t.isin})).indexOf(a.isin)].loan_value,t.$set(t.selectedHoldings,a.isin,!0)):(a.pledge_qty=a.quantity,a.loan_value=a.amount,t.$set(t.selectedHoldings,a.isin,!1)):(a.loan_value=a.amount,a.pledge_qty=a.quantity,t.$set(t.selectedHoldings,a.isin,!0)),a.loan_available_formatted=t.$options.filters.inrFormat(a.amount,0,null,!1)})),this.onHoldingsDataChange()},computed:p(p({},Object(r["c"])(m,["stocksPledged"])),{},{filteredDataHoldings:function(){var t=this;return this.dataHoldings.filter((function(e){return e.tradingsymbol.toLowerCase().includes(t.searchQuery.toLowerCase())}))}}),watch:{holdings:function(t){var e=[];""!==this.searchQuery?(this.dataHoldingsOnFetch.map((function(a,s){t.map((function(t){return t.isin})).indexOf(a.isin)>-1&&e.push(a)})),this.dataHoldings=e):this.dataHoldings=this.dataHoldingsOnFetch},selectedHoldings:{deep:!0,immediate:!0,handler:function(t){for(var e in t){if(!t[e])return void(this.headerCheckboxChecked=!1);this.headerCheckboxChecked=!0}}}},methods:{onHeaderCheckboxSelect:function(t){for(var e in this.selectedHoldings)this.$set(this.selectedHoldings,e,t)},onHoldingsDataChange:function(){var t,e={},a=[],s=c(this.dataHoldings);try{for(s.s();!(t=s.n()).done;){var n=t.value;this.selectedHoldings[n.isin]&&a.push(n)}}catch(i){s.e(i)}finally{s.f()}e.holdings=a,e.holdingsSelect=!0,this.$emit("pledgedHoldings",e)},onHoldingSelect:function(t){this.onHoldingsDataChange()},onValueChange:function(t,e,a){var s=this.dataHoldings[a];s.amount<e||!e||(s.loan_value=e,s.pledge_qty=Math.floor(s.loan_value/Number(parseFloat(s.amount/s.quantity).toFixed(2))),this.onHoldingsDataChange(),this.$set(this.dataHoldings,a,s))},onQtyChange:function(t,e,a){var s=this.dataHoldings[a];s.quantity<e||!e||(s.pledge_qty=e,s.loan_value=s.quantity===e?s.amount:Math.round(s.amount/s.quantity)*s.pledge_qty,this.onHoldingsDataChange(),this.$set(this.dataHoldings,a,s))}}},v=g,f=a("2877"),b=Object(f["a"])(v,s,n,!1,null,null,null);e["a"]=b.exports},"4cef":function(t,e){var a=/\s/;function s(t){var e=t.length;while(e--&&a.test(t.charAt(e)));return e}t.exports=s},"506b":function(t,e,a){"use strict";var s=a("d68e");function n(t){var e=this;this.__namespace__=t.namespace||"tabex_default_",this.__handlers__=[],this.__iframe_url__=t.iframe,this.__iframe_done__=!1,this.__pending__=[],this.__iframe__=document.createElement("iframe"),this.__iframe__.style.left="-1000px",this.__iframe__.style.position="absolute",this.__iframe__.onload=function(){e.__iframe__.contentWindow.postMessage(JSON.stringify({origin:window.location.origin||window.location.protocol+"//"+window.location.host,namespace:e.__namespace__}),e.__iframe_url__),e.__iframe_done__=!0,e.__pending__.forEach((function(t){e.__iframe__.contentWindow.postMessage(JSON.stringify(t),e.__iframe_url__)})),e.__pending__=null},s.addEvent(window,"message",(function(t){if(0===e.__iframe_url__.indexOf(t.origin)){var a;try{a=JSON.parse(t.data)}catch(s){return}a.namespace===e.__namespace__&&e.__handlers__.forEach((function(t){t(a.channel,a.message)}))}})),this.__iframe__.src=this.__iframe_url__;var a=function(){document.body.appendChild(e.__iframe__)};"loading"===document.readyState?s.addEvent(document,"DOMContentLoaded",a):a()}function i(t){var e,a=this;for(this.__namespace__=t.namespace||"tabex_default_",this.__origin_first_check__=t.origin||window.location.origin||window.location.protocol+"//"+window.location.host,Array.isArray(this.__origin_first_check__)||(this.__origin_first_check__=[this.__origin_first_check__]),e=0;e<this.__origin_first_check__.length;e++)this.__origin_first_check__[e]=this.__origin_first_check__[e].replace(/[-\/\\^$+?.()|[\]{}]/g,"\\$&"),this.__origin_first_check__[e]=this.__origin_first_check__[e].replace(/[*]/g,".+?"),this.__origin_first_check__[e]=new RegExp(this.__origin_first_check__[e]);this.__origin__=null,this.__router__=t.router,s.addEvent(window,"message",(function(t){var s,n=!1;if(!a.__origin__||a.__origin__!==t.origin){for(e=0;e<a.__origin_first_check__.length;e++)if(a.__origin_first_check__[e].test(t.origin)){n=!0;break}if(!n)return}try{s=JSON.parse(t.data)}catch(i){return}if(s.namespace===a.__namespace__)return!a.__origin__&&s.origin?(a.__origin__=s.origin,void a.__router__.onmessage((function(t,e){window.parent.postMessage(JSON.stringify({channel:t,message:e,namespace:a.__namespace__}),a.__origin__)}))):void a.__router__.broadcast(s.channel,s.message)}))}n.prototype.broadcast=function(t,e){this.__iframe_done__?this.__iframe__.contentWindow.postMessage(JSON.stringify({channel:t,message:e,namespace:this.__namespace__}),this.__iframe_url__):this.__pending__.push({channel:t,message:e,namespace:this.__namespace__})},n.prototype.onmessage=function(t){this.__handlers__.push(t)},e.TunnelClient=n,e.TunnelRouter=i},"685f":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),a("hr",{staticClass:"header-hr"}),t._v(" "),a("div",{staticClass:"section"},[a("div",{staticClass:"text-center"},[a("img",{staticClass:"img-loan-sub",attrs:{src:"/static/images/aadhaar.svg"}}),t._v(" "),t._m(1),t._v(" "),a("su-button",{staticClass:"btn-blue",nativeOn:{click:function(e){return e.preventDefault(),t.redirectToKiteLogin()}}},[t._v("Update KYC details")])],1)])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",{staticClass:"v-align"},[a("span",{staticClass:"icon icon-credit-card"}),t._v("\n\t\tLoans\n\t\t"),a("img",{staticClass:"img-zerodha-capital hide-on-mobile",attrs:{src:"/static/images/zerodha-capital.svg"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("Your KYC eligibility is failed. Please update your KYC."),a("br"),t._v("\n\t\t\t\tIf you have already initiated a KYC update, please come back later. It takes 2-3 days to get the details updated in CKYC.")])}],i={methods:{redirectToKiteLogin:function(){window.open("https://signup.zerodha.com/kite/login?source=nbfc","_self")}}},r=i,o=a("2877"),l=Object(o["a"])(r,s,n,!1,null,null,null);e["default"]=l.exports},8499:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container positions"},[t.isMobileView?t._e():a("h1",[a("span",{staticClass:"icon icon-bookmark"}),t._v("\n\t\tTags\n\t\t"),t._m(0)]),t._v(" "),t.isMobileView?t._e():a("hr",{staticClass:"header-hr"}),t._v(" "),a("div",{staticClass:"section"},[a("su-form",[a("div",{class:{locked:t.job||t.fetchingData,inputcontainer:!0,row:!0}},[a("div",{class:{"two-half":!0,columns:!0,lockContainer:t.job||t.fetchingData,"su-input-group  su-static-label":!0}},[a("label",{staticClass:"su-input-label"},[t._v("Date range")]),t._v(" "),a("date-picker",{attrs:{range:"",format:t.format,lang:"en","not-before":"2017-04-01","not-after":t.reportEndDate,placeholder:"Select range"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t._v(" "),a("div",{class:{nine:!0,columns:!0,lockContainer:t.job||t.fetchingData}},[a("label",[t._v(" ")]),a("br"),t._v(" "),t.job||t.fetchingData?t._e():a("su-button",{staticClass:"btn-blue",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.getTagsData(t.dateRange[0],t.dateRange[1])}}},[a("span",{staticClass:"icon icon-arrow-right"})]),t._v(" "),t.job||t.fetchingData?a("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"lock-img-container",attrs:{title:"Please wait while your report is being built"}},[a("img",{staticClass:"lock-class",attrs:{src:"/static/images/lock.svg"}}),t._v(" "),a("su-loader")],1):t._e(),t._v(" "),t.job||t.fetchingData?t._e():a("a",{staticClass:"manage-tag-link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.showTagManagerModal.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-bookmark"}),t._v(" Manage tags")])],1)])])],1),t._v(" "),t.tags_items.length>0&&!t.job&&!t.fetchingData&&!t.tagsError?a("div",{staticClass:"section"},[a("div",{staticClass:"tag-summary"},[a("div",{staticClass:"row tag-summary-container"},[t.tagSummary[0].trades?a("div",{staticClass:"four columns tag-summary-card"},[t._m(1),a("br"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"six columns"},[a("h2",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"tag-detail",attrs:{title:t.tagSummary[0].name}},[a("span",{staticClass:"tag-colour",style:"background:"+t.tagSummary[0].colour}),t._v(" "),a("span",{staticClass:"tag-name"},[t._v(t._s(t.tagSummary[0].name))])])]),t._v(" "),a("div",{staticClass:"six columns text-right"},[a("h2",[t._v(t._s(t.tagSummary[0].trades)+" trades")])])]),t._v(" "),a("div",{staticClass:"row text-small tag-summary-sub text-grey"},[a("div",{staticClass:"four columns"},[a("div",{staticClass:"row"},[a("div",{staticClass:"three columns"},[t._v("\n\t\t\t\t\t\t\t\t\tEQ:\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"nine columns"},[a("span",{domProps:{innerHTML:t._s(t.getTrades(t.tagSummary[0].comp,"EQ"))}}),t._v(" trades\n\t\t\t\t\t\t\t\t")])])]),t._v(" "),a("div",{staticClass:"four columns"},[a("div",{staticClass:"row"},[a("div",{staticClass:"three columns"},[t._v("\n\t\t\t\t\t\t\t\t\tFO:\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"nine columns"},[a("span",{domProps:{innerHTML:t._s(t.getTrades(t.tagSummary[0].comp,"FO"))}}),t._v(" trades\n\t\t\t\t\t\t\t\t")])])]),t._v(" "),a("div",{staticClass:"four columns"},[a("div",{staticClass:"row"},[a("div",{staticClass:"three columns"},[t._v("\n\t\t\t\t\t\t\t\t\tMF:\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"nine columns"},[a("span",{domProps:{innerHTML:t._s(t.getTrades(t.tagSummary[0].comp,"MF"))}}),t._v(" trades\n\t\t\t\t\t\t\t\t")])])])]),t._v(" "),t._m(2),a("hr"),t._v(" "),t._l(t.tagSummary[0].comp,(function(e,s){return s<5?a("div",{key:s,staticClass:"row text-small tag-comp-table"},[a("div",{staticClass:"nine columns"},[a("p",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:e.tradingsymbol}},[t._v(t._s(t._f("clip")(e.tradingsymbol,30)))])]),t._v(" "),a("div",{staticClass:"three columns text-right"},[a("p",[t._v(t._s(e.trade_count))])])]):t._e()})),t._v(" "),t.tagSummary[0].comp.length>5?a("a",{staticClass:"text-small",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.viewTagTrades(t.tagSummary[0])}}},[t._v("VIEW MORE "),a("span",{staticClass:"icon icon-arrow-right"})]):t._e()],2):t._e(),t._v(" "),a("div",{staticClass:"four columns tag-summary-card"},[t._m(3),a("br"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"six columns"},[a("h2",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"tag-detail",attrs:{title:t.tagSummary[1].name}},[a("span",{staticClass:"tag-colour",style:"background:"+t.tagSummary[1].colour}),t._v(" "),a("span",{staticClass:"tag-name"},[t._v(t._s(t.tagSummary[1].name))])])]),t._v(" "),a("div",{staticClass:"six columns text-right"},[a("h2",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:t._f("inrFormat")(t.tagSummary[1].profit,1,null,!0)}},[t.tagSummary[1].profit>0?a("span",{staticClass:"pos"},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[1].profit)))]):t.tagSummary[1].profit<0?a("span",{staticClass:"neg"},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[1].profit)))]):a("span",[t._v(t._s(t._f("kformat")(t.tagSummary[1].profit)))])])])]),t._v(" "),a("div",{staticClass:"row text-small tag-summary-sub text-grey"},[a("div",{staticClass:"six columns"},[t._v("\n\t\t\t\t\t\t\tRealized:\n\t\t\t\t\t\t\t"),t.tagSummary[1].pnlRealized>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pos",attrs:{title:t.tagSummary[1].pnlRealized}},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[1].pnlRealized)))]):t.tagSummary[1].pnlRealized<0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"neg",attrs:{title:t.tagSummary[1].pnlRealized}},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[1].pnlRealized)))]):a("span",[t._v(t._s(t._f("kformat")(t.tagSummary[1].pnlRealized)))])]),t._v(" "),a("div",{staticClass:"six columns"},[t._v("\n\t\t\t\t\t\t\tUnrealized:\n\t\t\t\t\t\t\t"),t.tagSummary[1].pnlUnrealized>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pos",attrs:{title:t.tagSummary[1].pnlUnrealized}},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[1].pnlUnrealized)))]):t.tagSummary[1].pnlUnrealized<0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"neg",attrs:{title:t.tagSummary[1].pnlUnrealized}},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[1].pnlUnrealized)))]):a("span",[t._v(t._s(t._f("kformat")(t.tagSummary[1].pnlUnrealized)))])])]),t._v(" "),t._m(4),a("hr"),t._v(" "),t._l(t.tagSummary[1].comp,(function(e,s){return s<5?a("div",{key:s,staticClass:"row text-small tag-comp-table"},[a("div",{staticClass:"nine columns"},[a("p",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:e.tradingsymbol}},[t._v(t._s(t._f("clip")(e.tradingsymbol,30)))])]),t._v(" "),a("div",{staticClass:"three columns text-right"},[a("p",[t._v(t._s(e.trade_count))])])]):t._e()})),t._v(" "),t.tagSummary[1].comp.length>5?a("a",{staticClass:"text-small",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.viewTagTrades(t.tagSummary[1])}}},[t._v("VIEW MORE "),a("span",{staticClass:"icon icon-arrow-right"})]):t._e()],2),t._v(" "),a("div",{staticClass:"four columns tag-summary-card"},[t._m(5),a("br"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"six columns"},[a("h2",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"tag-detail",attrs:{title:t.tagSummary[2].name}},[a("span",{staticClass:"tag-colour",style:"background:"+t.tagSummary[2].colour}),t._v(" "),a("span",{staticClass:"tag-name"},[t._v(t._s(t.tagSummary[2].name))])])]),t._v(" "),a("div",{staticClass:"six columns text-right"},[a("h2",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:t._f("inrFormat")(t.tagSummary[2].loss,2,null,!0)}},[t.tagSummary[2].loss>0?a("span",{staticClass:"pos"},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[2].loss)))]):t.tagSummary[2].loss<0?a("span",{staticClass:"neg"},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[2].loss)))]):a("span",[t._v(t._s(t._f("kformat")(t.tagSummary[2].loss)))])])])]),t._v(" "),a("div",{staticClass:"row text-small tag-summary-sub text-grey"},[a("div",{staticClass:"six columns"},[t._v("\n\t\t\t\t\t\t\tRealized:\n\t\t\t\t\t\t\t"),t.tagSummary[2].pnlRealized>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pos",attrs:{title:t.tagSummary[2].pnlRealized}},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[2].pnlRealized)))]):t.tagSummary[2].pnlRealized<0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"neg",attrs:{title:t.tagSummary[2].pnlRealized}},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[2].pnlRealized)))]):a("span",[t._v(t._s(t._f("kformat")(t.tagSummary[2].pnlRealized)))])]),t._v(" "),a("div",{staticClass:"six columns"},[t._v("\n\t\t\t\t\t\t\tUnrealized:\n\t\t\t\t\t\t\t"),t.tagSummary[2].pnlUnrealized>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pos",attrs:{title:t.tagSummary[2].pnlUnrealized}},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[2].pnlUnrealized)))]):t.tagSummary[2].pnlUnrealized<0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"neg",attrs:{title:t.tagSummary[2].pnlUnrealized}},[t._v("₹ "+t._s(t._f("kformat")(t.tagSummary[2].pnlUnrealized)))]):a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:t.tagSummary[2].pnlUnrealized}},[t._v(t._s(t._f("kformat")(t.tagSummary[2].pnlUnrealized)))])])]),t._v(" "),t._m(6),a("hr"),t._v(" "),t._l(t.tagSummary[2].comp,(function(e,s){return s<5?a("div",{key:s,staticClass:"row text-small tag-comp-table"},[a("div",{staticClass:"nine columns"},[a("p",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:e.tradingsymbol}},[t._v(t._s(t._f("clip")(e.tradingsymbol,30)))])]),t._v(" "),a("div",{staticClass:"three columns text-right"},[a("p",[t._v(t._s(e.trade_count))])])]):t._e()})),t._v(" "),t.tagSummary[2].comp.length>5?a("a",{staticClass:"text-small",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.viewTagTrades(t.tagSummary[2])}}},[t._v("VIEW MORE "),a("span",{staticClass:"icon icon-arrow-right"})]):t._e()],2)])]),t._v(" "),a("div",{staticClass:"tags-treemap"},[a("treemap",{key:"tags-page",attrs:{"raw-data":t.tags_items,"hide-stats":!0,"max-items":100,name:"tags"}})],1)]):t._e(),t._v(" "),t.tags_items.length>0&&!t.job&&!t.fetchingData&&!t.tagsError?a("div",{staticClass:"section table-section"},[a("p",{staticClass:"paginate-info text-light-grey text-small"},[t._v("Rows 1 to "+t._s(t.tags_items.length)+" out of "+t._s(t.tags_items.length))]),t._v(" "),t.isMobileView?t._e():a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideSearch,expression:"hideSearch"}],staticClass:"search-table tags-search"},[a("span",{staticClass:"icon icon-search"}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"filter-input",attrs:{maxlength:"15",type:"text",placeholder:"Search"},domProps:{value:t.searchQuery},on:{click:function(e){return t.expandSearch()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterData(t.searchQuery,!1)},input:[function(e){e.target.composing||(t.searchQuery=e.target.value)},function(e){return t.filterData(t.searchQuery,!0)}]}}),t._v(" "),a("span",{staticClass:"clear icon icon-times",on:{click:function(e){return t.clearSearch()}}})]),t._v(" "),t.isMobileView?t._e():a("div",{staticClass:"table-container hide-on-mobile"},[a("table",{staticClass:"positions-table tags-table",attrs:{id:"positions_table"}},[a("thead",[a("tr",[a("td",{class:["table-border "+t.isSorted("tag_name")],on:{click:function(e){return t.sortTable("tag_name",e)}}},[t._v("\n\t\t\t\t\t\t\tName\n\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("tag_name")]})]),t._v(" "),a("td",{class:["table-border "+t.isSorted("total_trades")],on:{click:function(e){return t.sortTable("total_trades",e)}}},[t._v("\n\t\t\t\t\t\t\tTrades\n\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("total_trades")]})]),t._v(" "),a("td",{class:["table-border "+t.isSorted("pnlRealized")],on:{click:function(e){return t.sortTable("pnlRealized",e)}}},[t._v("\n\t\t\t\t\t\t\tRealised P&L\n\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("pnlRealized")]})]),t._v(" "),a("td",{class:[t.isSorted("pnlUnrealized")],on:{click:function(e){return t.sortTable("pnlUnrealized",e)}}},[t._v("\n\t\t\t\t\t\t\tUnrealised P&L\n\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("pnlUnrealized")]})])])]),t._v(" "),a("tbody",t._l(t.tags_items,(function(e,s){return a("tr",{key:s,on:{mouseleave:function(e){t.showDrop=!1},mouseenter:function(e){t.showDrop=!0}}},[a("td",{staticClass:"textleft table-border"},[a("div",[a("span",{staticClass:"tag-pin",style:"background: "+e.colour}),t._v("\n\t\t\t\t\t\t\t\t"+t._s(e["tag_name"])+"\n\t\t\t\t\t\t\t")]),a("br"),t._v(" "),a("div",[a("span",{staticClass:"text-light-grey text-small"},[t._v(t._s(e.description))])]),t._v(" "),t.showDrop?a("context-menu",{staticClass:"table"},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"context-menu-button",attrs:{slot:"button",title:"Options"},slot:"button"},[a("span",{staticClass:"icon icon-ellipsis"})]),t._v(" "),a("template",{slot:"menu"},[a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.viewPnl(e)}}},[a("span",{staticClass:"icon icon-trending-up"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\tView P&L report\n\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.viewPortfolio(e)}}},[a("span",{staticClass:"icon icon-briefcase"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\tView portfolio\n\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.viewTagTrades(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\tView trades\n\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),a("hr"),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.showCreateBox(e)}}},[a("span",{staticClass:"icon icon-edit"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.showDeleteConfirmationBox(e)}}},[a("span",{staticClass:"icon icon-trash"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t\t")])])])],2):t._e()],1),t._v(" "),a("td",{staticClass:"table-border"},[t._v(t._s(t._f("inrFormat")(e["total_trades"],2)))]),t._v(" "),e["pnlRealized"]>0?a("td",{staticClass:"pos table-border"},[t._v("+"+t._s(t._f("inrFormat")(e["pnlRealized"],2)))]):e["pnlRealized"]<0?a("td",{staticClass:"neg table-border"},[t._v(t._s(t._f("inrFormat")(e["pnlRealized"],2)))]):a("td",{staticClass:"table-border"},[t._v(t._s(t._f("inrFormat")(e["pnlRealized"],2)))]),t._v(" "),e["pnlUnrealized"]>0?a("td",{staticClass:"pos"},[t._v("+"+t._s(t._f("inrFormat")(e["pnlUnrealized"],2)))]):e["pnlUnrealized"]<0?a("td",{staticClass:"neg"},[t._v(t._s(t._f("inrFormat")(e["pnlUnrealized"],2)))]):a("td",[t._v(t._s(t._f("inrFormat")(e["pnlUnrealized"],2)))])])})),0)])])]):t._e(),t._v(" "),t.tags_items.length>0&&!t.job&&!t.fetchingData&&!t.tagsError&&t.isMobileView?a("div",{staticClass:"section table-section show-on-mobile cards"},t._l(t.tags_items,(function(e,s){return a("div",{key:s,staticClass:"card",class:t.tags_items.length-1===s?"last":"",on:{click:function(a){return t.toShowContextMenu(e)}}},[t.contextMenuTag===e.tag_name?a("mobile-context-menu",{on:{close:function(a){return t.toHideContextMenu(e)}}},[a("template",{slot:"menu"},[a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.viewPnl(e)}}},[a("span",{staticClass:"icon icon-trending-up"}),t._v("\n\t\t\t\t\t\t\tView P&L report\n\t\t\t\t\t\t")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.viewPortfolio(e)}}},[a("span",{staticClass:"icon icon-briefcase"}),t._v("\n\t\t\t\t\t\t\tView portfolio\n\t\t\t\t\t\t")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.viewTagTrades(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\tView trades\n\t\t\t\t\t\t")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.showCreateBox(e)}}},[a("span",{staticClass:"icon icon-edit"}),t._v("\n\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.showDeleteConfirmationBox(e)}}},[a("span",{staticClass:"icon icon-trash"}),t._v("\n\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t")])])])],2):t._e(),t._v(" "),a("div",{staticClass:"top"},[a("div",{staticClass:"top-left"},[a("span",{staticClass:"tag-pin",style:"background: "+e.colour}),t._v("\n\t\t\t\t\t"+t._s(e["tag_name"])+"\n\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"top-right"},[a("label",[t._v("Trades")]),t._v(" "+t._s(t._f("inrFormat")(e["total_trades"],2))+"\n\t\t\t\t")])]),t._v(" "),a("div",{staticClass:"middle"},[a("div",{staticClass:"middle-left"},[a("label",[t._v("Realised P&L: ")]),t._v(" "),e["pnlRealized"]>0?a("span",{staticClass:"pos"},[t._v("+"+t._s(t._f("inrFormat")(e["pnlRealized"],2)))]):e["pnlRealized"]<0?a("span",{staticClass:"neg"},[t._v(t._s(t._f("inrFormat")(e["pnlRealized"],2)))]):a("span",[t._v(t._s(t._f("inrFormat")(e["pnlRealized"],2)))])]),t._v(" "),a("div",{staticClass:"middle-right"},[a("label",[t._v("Unrealised P&L: ")]),t._v(" "),e["pnlUnrealized"]>0?a("span",{staticClass:"pos"},[t._v("+"+t._s(t._f("inrFormat")(e["pnlUnrealized"],2)))]):e["pnlUnrealized"]<0?a("span",{staticClass:"neg"},[t._v(t._s(t._f("inrFormat")(e["pnlUnrealized"],2)))]):a("span",[t._v(t._s(t._f("inrFormat")(e["pnlUnrealized"],2)))])])])],1)})),0):0!==t.tags_items.length||t.job||t.fetchingData||t.tagsError?t.job||t.fetchingData||!t.tagsError?t._e():a("div",{staticClass:"section"},[a("error",{attrs:{sub:t.tagsErrorMsg}})],1):a("div",{staticClass:"section"},[a("empty",{attrs:{main:"No tags found.",sub:"Start by <a href=/portfolio/holdings>tagging</a> your portfolio. <a href=https://zrd.sh/tags-intro>Learn more</a>."}})],1),t._v(" "),t.job?a("div",{staticClass:"section text-center"},[a("jobber")],1):t._e(),t._v(" "),t.showCreate?a("div",{staticClass:"section tagger"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideCreateBox}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showCreateBox("a")}}},[a("div",{staticClass:"modalbody",on:{click:t.hidePalette}},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideCreateBox.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),t.editing?a("h2",[a("span",{staticClass:"icon icon-edit"}),t._v(' Edit "'+t._s(t.selectedTag.text)+'"')]):a("h2",[t._v("New tag")]),t._v(" "),a("su-form",{attrs:{id:"create_tag_form"}},[a("div",{staticClass:"create-tag-color"},[a("label",[t._v(" ")]),a("br"),t._v(" "),a("div",{staticClass:"selected-color",on:{click:function(e){e.stopPropagation(),t.showPalette=!0}}},[a("span",{style:"background-color:"+t.selectedTag.colour},[t._v(" ")]),t._v(" "),a("span",[t._v("Color")])]),t._v(" "),t.showPalette?a("div",{staticClass:"color-palette"},t._l(t.palette,(function(e,s){return a("span",{key:s,staticClass:"palette-colors",style:"background:"+e,on:{click:function(a){return t.changeColor(e)}}},[t._v(" ")])})),0):t._e()]),a("div",{staticClass:"create-tag-name"},[a("su-input",{attrs:{type:"text",required:"",autofocus:"",minlength:3,maxlength:15,"static-label":"","no-error":"",label:"Tag"},model:{value:t.selectedTag.text,callback:function(e){t.$set(t.selectedTag,"text",e)},expression:"selectedTag.text"}})],1),a("br"),t._v(" "),a("div",{staticClass:"create-tag-desc row"},[a("div",{staticClass:"eight columns"},[a("su-input",{attrs:{type:"text",maxlength:140,minlength:6,required:"","static-label":"","no-error":"",label:"Description"},model:{value:t.selectedTag.description,callback:function(e){t.$set(t.selectedTag,"description",e)},expression:"selectedTag.description"}})],1),t._v(" "),a("div",{staticClass:"four columns su-input-group"},[a("label",{staticClass:"su-input-label"},[t._v(" ")]),t._v(" "),a("su-button",{staticClass:"btn btn-blue",attrs:{type:"submit",disabled:t.creatingTag,processing:t.creatingTag},nativeOn:{click:function(e){return e.preventDefault(),t.editTag()}}},[t._v("Update")])],1)])])],1)])])])]):t._e(),t._v(" "),t.showModal?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideBreakdown}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showBreakdown.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideBreakdown.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("h2",{staticClass:"positions-breakdown-name"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.breakdownTag)+"\n\t\t\t\t\t\t")]),t._v(" "),a("hr",{staticClass:"modal-separator"}),t._v(" "),t.tagBreakdown.length>0?a("div",[a("div",{staticClass:"positions-breakdown-table-container table-container"},[a("table",{staticClass:"positions-breakdown-table"},[t._m(7),t._v(" "),a("tbody",t._l(t.tagBreakdown,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-left"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.tradingsymbol)+"\n\t\t\t\t\t\t\t\t\t\t\t\t"),a("span",{staticClass:"tags-segment"},[t._v(t._s(t.segmentMap[e.segment]))])]),t._v(" "),a("td",[t._v(t._s(e.trade_count))])])})),0)])])]):a("div",[t._m(8)])])])])])]):t._e(),t._v(" "),t.showDeleteConfirmation?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideDeleteConfirmationBox}},[a("div",{staticClass:"modal-container confirmation-modal",on:{click:function(e){return e.stopPropagation(),t.showDeleteConfirmationBox.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("h4",{staticClass:"text-center"},[t._v('\n\t\t\t\t\t\t\tAre you sure you want to delete "'+t._s(t.selectedTag.tag_name)+'" ?\n\t\t\t\t\t\t')]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"six columns text-right"},[a("su-button",{staticClass:"btn btn-blue",attrs:{processing:t.deleting,disabled:t.deleting,type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.deleteTag()}}},[t._v("Delete")])],1),t._v(" "),a("div",{staticClass:"six columns"},[a("su-button",{staticClass:"btn-grey btn-outline",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.hideDeleteConfirmationBox.apply(null,arguments)}}},[t._v("Cancel")])],1)])])])])])]):t._e(),t._v(" "),t.showTagManager?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideTagManagerModal}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showTagManagerModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("tag-manager",{attrs:{isModal:!0}})],1)])])])]):t._e()])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"tag-head-icon",attrs:{href:"https://zrd.sh/nudge",target:"_blank"}},[a("img",{attrs:{src:"/static/images/nudge_icon.svg"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[a("span",{staticClass:"icon icon-trending-up"}),t._v("\n\t\t\t\t\t\tMost traded\n\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row text-light-grey text-small tag-comp-table"},[a("div",{staticClass:"nine columns"},[t._v("\n\t\t\t\t\t\t\tSymbol\n\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"three columns text-right"},[t._v("\n\t\t\t\t\t\t\tTrades\n\t\t\t\t\t\t")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[a("span",{staticClass:"icon icon-pie-chart"}),t._v("\n\t\t\t\t\t\tMost profitable\n\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row text-light-grey text-small tag-comp-table"},[a("div",{staticClass:"nine columns"},[t._v("\n\t\t\t\t\t\t\tSymbol\n\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"three columns text-right"},[t._v("\n\t\t\t\t\t\t\tTrades\n\t\t\t\t\t\t")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[a("span",{staticClass:"icon icon-pie-chart"}),t._v("\n\t\t\t\t\t\tLeast profitable\n\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row text-light-grey text-small tag-comp-table"},[a("div",{staticClass:"nine columns"},[t._v("\n\t\t\t\t\t\t\tSymbol\n\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"three columns text-right"},[t._v("\n\t\t\t\t\t\t\tTrades\n\t\t\t\t\t\t")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",{staticClass:"text-left"},[t._v("Symbol")]),t._v(" "),a("td",[t._v("Trades")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-light-grey"},[a("span",{staticClass:"icon icon-info"}),t._v("\n\t\t\t\t\t\t\t\tNo results available.\n\t\t\t\t\t\t\t")])}],i=a("8508"),r=a.n(i),o=a("2e34"),l=a("02bc"),c=a("5dfe"),d=a("5975"),u=a("6825"),h=a("e2ac"),p=a("3fb9"),_=a("2f62"),m=a("ba6a"),g=a("5665"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"holdings-treemap"},[t._m(0),t._v(" "),a("form",{staticClass:"text-right",attrs:{id:"treemap_view_types"}},[a("su-radio-group",{model:{value:t.treeType,callback:function(e){t.treeType=e},expression:"treeType"}},t._l(t.treeTypes,(function(e,s){return a("su-radio",{key:s,attrs:{label:e.label,value:e.val}},[t._v(t._s(e.label))])})),1)],1)])},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chart"},[a("div",{staticClass:"canvas"})])}],b=(a("b108"),a("00a5")),y=a("b6f4"),C=a("6bcb"),w=a("1231"),k=a("166a"),x={props:{data:Array,rawData:Array,hideStats:Boolean,maxItems:{type:Number,default:100}},data:function(){return{element:null,node:null,isActive:!1,treeView:"pnl",treeType:"pnlNet",treeTypes:[{val:"pnlRealized",label:"Realized"},{val:"pnlUnrealized",label:"Unrealized"},{val:"pnlNet",label:"Net P&L"}],treeSourceType:"sector",treeSourceTypes:[{val:"sector",label:"Sectors"},{val:"stocks",label:"Instruments"}],selectedSector:""}},created:function(){this.maxItems=this.maxItems||100},mounted:function(){var t=this;this.element=Object(b["a"])(this.$el.querySelector("div.chart .canvas")),this.draw(this.element,this.sectorFormattedData,this.hideStats,this.treeType),this.$nextTick((function(){t.treeType="pnlNet"}))},beforeDestroy:function(){this.postProcess()},activated:function(){this.preProcess()},deactivated:function(){this.postProcess()},computed:{formattedData:function(){return this.formatRawData(this.rawData,!1)},sectorFormattedData:function(){return this.formatRawData(this.rawData,!0)}},watch:{treeType:function(t){this.redraw()},treeSourceType:function(t){this.redraw()},rawData:function(t){}},methods:{changeSource:function(){this.$emit("change-source",this.treeSourceType)},sectorView:function(){this.treeView="sector",this.redraw(),this.$emit("reset-filters",this.treeView)},postProcess:function(){this.isActive=!1},isElementInView:function(t){return document.querySelector("#"+t+"-treemap div.chart .canvas")},handleResize:function(){this.isActive&&this.redraw()},redraw:function(){"sector"===this.treeSourceType?this.draw(this.element,this.sectorFormattedData,this.hideStats,this.treeType,!1,!0):this.draw(this.element,this.formatRawData(this.formattedData.children,!1,!0),this.hideStats,this.treeType,!1,!0)},formatRawData:function(t,e,a){var s=t;if(s){for(var n=[],i={},r=[],o="",l=0,c=0,d=0,u=0;u<s.length;u++)a?(n.push({name:s[u].tag_name,pnlRealized:s[u].pnlRealized,pnlUnrealized:s[u].pnlUnrealized,pnlNet:s[u].pnlRealized+s[u].pnlUnrealized,trades:s[u].total_trades}),l+=s[u].pnlRealized,d+=s[u].pnlUnrealized,c+=s[u].pnlRealized+s[u].pnlUnrealized):(i.hasOwnProperty(s[u].tag_name)?(i[s[u].tag_name][0]+=parseFloat(s[u].pnlRealized),i[s[u].tag_name][1]+=parseFloat(s[u].pnlUnrealized),i[s[u].tag_name][2]+=parseFloat(parseFloat(s[u].pnlRealized)+parseFloat(s[u].pnlUnrealized)),i[s[u].tag_name][3]+=parseFloat(s[u].total_trades)):(i[s[u].tag_name]=[],i[s[u].tag_name][0]=parseFloat(s[u].pnlRealized),i[s[u].tag_name][1]=parseFloat(s[u].pnlUnrealized),i[s[u].tag_name][2]=parseFloat(parseFloat(s[u].pnlRealized)+parseFloat(s[u].pnlUnrealized)),i[s[u].tag_name][3]=parseFloat(s[u].total_trades)),n.push({name:s[u].tag_name,pnlRealized:s[u].pnlRealized,pnlUnrealized:s[u].pnlUnrealized,pnlNet:s[u].pnlRealized+s[u].pnlUnrealized,trades:s[u].total_trades}),l+=s[u].pnlRealized,d+=s[u].pnlUnrealized,c+=s[u].pnlRealized+s[u].pnlUnrealized);for(var h in i)r.push({name:h,pnlRealized:i[h][0],pnlUnrealized:i[h][1],pnlNet:i[h][2],trades:i[h][3]});var p="desc",_="pnlNet";n.sort((function(t,e){var a=t[_],s=e[_];if("asc"===p){if(a<s)return-1;if(a>s)return 1}else{if(a>s)return-1;if(a<s)return 1}return 0})),r.sort((function(t,e){var a=t[_],s=e[_];if("asc"===p){if(a<s)return-1;if(a>s)return 1}else{if(a>s)return-1;if(a<s)return 1}return 0}));var m=JSON.parse(JSON.stringify(r));return m.sort((function(t,e){var a=t["pnlNet"],s=e["pnlNet"];return a>s?-1:a<s?1:0})),o=m[0],n=n.slice(0,this.maxItems),r=r.slice(0,this.maxItems),this.$emit("sectorData",{data1:r,data2:o}),e?{name:"tags",totalRealized:l,totalUnrealized:d,totalNet:c,children:r}:{name:"tags",totalRealized:l,totalUnrealized:d,totalNet:c,children:n}}},draw:function(t,e,a,s,n,i){if(t&&t.node()){i&&(t.html(""),this.node=null),e.children=e.children.sort((function(t,e){return Math.abs(t[s])<Math.abs(e[s])}));var r=e,o={top:0,right:0,bottom:20,left:0},l=50,c=t.node().getBoundingClientRect().width,d=c-o.left-o.right,u=Object(w["a"])(".2f"),h=Object(k["b"])(39,174,96),p=Object(k["b"])(237,42,68),_=function(t){return p.brighter(Math.random(1))},m=function(t){return h.brighter(Math.random(1))},g=this;if(n&&this.node){var v=Object(y["a"])().size([d,l]),f=Object(C["a"])(r).sum((function(t){return Math.abs(Math.round(Math.round(100*t[s]))/100)}));this.node.data(v(f).leaves()).attr("data-balloon-length","small").attr("data-balloon-pos",(function(t){return t.x1<100?"right":t.x1>d-100?"left":"up"})).style("cursor",(function(t){if("sector"===g.treeView&&"sector"===g.treeSourceType)return"pointer"})).attr("data-balloon",(function(t){return t.data.name+"\n Realized: ₹"+u(t.data["pnlRealized"],2)+"\n Unrealized: ₹"+u(t.data["pnlUnrealized"],2)+"\n Trades: "+t.data["trades"]})).text((function(t){if(t.x1-t.x0>45&&t.y1-t.y0>20){if("sector"===g.treeView&&"sector"===g.treeSourceType)return t.data.name;var e=10;return t.data.name.length>e?t.data.name.substring(0,e)+"..":t.data.name}})).style("background",(function(t){return t.data[g.treeType]>0?m(t.data[g.treeType]):_(t.data[g.treeType])})).transition().duration(500).style("left",(function(t){return t.x0+"px"})).style("top",(function(t){return t.y0+"px"})).style("width",(function(t){return Math.max(0,t.x1-t.x0)+"px"})).style("height",(function(t){return Math.max(0,t.y1-t.y0)+"px"}))}else{var b=t.append("div").attr("class","treemap").style("position","relative").style("width",d+"px").style("height",l+"px").style("left",o.left+"px").style("top",o.top+"px"),x=Object(y["a"])().size([d,l]),S=Object(C["a"])(r).sum((function(t){return Math.abs(Math.round(100*Math.round(t[s])))/100}));this.node=b.datum(S).selectAll(".node").data(x(S).leaves()).enter().append("div").attr("class","node").style("cursor",(function(t){if("sector"===g.treeView&&"sector"===g.treeSourceType)return"pointer"})).style("left",(function(t){return t.x0+"px"})).style("top",(function(t){return t.y0+"px"})).style("width",(function(t){return Math.max(0,t.x1-t.x0)+"px"})).style("height",(function(t){return Math.max(0,t.y1-t.y0)+"px"})).style("background",(function(t){return t.data[g.treeType]>0?m(t.data[g.treeType]):_(t.data[g.treeType])})).text((function(t){if(t.x1-t.x0>45&&t.y1-t.y0>20){if("sector"===g.treeView&&"sector"===g.treeSourceType)return t.data.name;var e=10;return t.data.name.length>e?t.data.name.substring(0,e)+"..":t.data.name}})).attr("data-balloon-length","small").attr("data-balloon-pos",(function(t){return t.x1<100?"right":t.x1>d-100&&t.x0>200?"left":"up"})).attr("data-balloon",(function(t){return t.data.name+"\n\n Realized: ₹"+u(t.data["pnlRealized"],2)+"\n\n Unrealized: ₹"+u(t.data["pnlUnrealized"],2)+"\n\n Trades: "+t.data["trades"]})).transition().duration(500).style("left",(function(t){return t.x0+"px"})).style("top",(function(t){return t.y0+"px"})).style("width",(function(t){return Math.max(0,t.x1-t.x0)+"px"})).style("height",(function(t){return Math.max(0,t.y1-t.y0)+"px"}))}}}}},S=x,T=a("2877"),P=Object(T["a"])(S,v,f,!1,null,null,null),D=P.exports,E=a("6157");function I(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function O(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?I(Object(a),!0).forEach((function(e){R(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function R(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var M=[];function A(t){var e=t,a=""+(e.getMonth()+1),s=""+e.getDate(),n=e.getFullYear();return a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),[n,a,s].join("-")}var F={data:function(){return{showModal:!1,job:!1,params:{},tags_items:[],tradingsymbol:"",startDate:new Date((new Date).getFullYear()-1,(new Date).getMonth(),(new Date).getDate()),endDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),dateRange:[new Date((new Date).getFullYear()-1,(new Date).getMonth()-1,(new Date).getDate()),new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())],format:"YYYY-MM-DD",disabled:{to:new Date(2017,3,1)},timeout:"",noResults:!1,fetchingData:!1,showDrop:!0,sortingData:!1,searchQuery:"",tagsError:!1,tagsErrorMsg:"Please try again.",firstPoll:!0,pollCount:0,sortKey:"tag_name",sortBy:"asc",palette:["rgba(3, 155, 229, 1)","rgba(11, 128, 67, 1)","rgba(63, 81, 181, 1)","rgba(244, 81, 30, 1)","rgba(121, 85, 72, 1)","rgba(124, 179, 66, 1)","rgba(240, 147, 0, 1)","rgba(142, 36, 170, 1)","rgba(97, 97, 97, 1)","rgba(255, 205, 86, 1)"],paletteMap:{"rgba(3, 155, 229, 1)":"p1","rgba(11, 128, 67, 1)":"p2","rgba(63, 81, 181, 1)":"p3","rgba(244, 81, 30, 1)":"p4","rgba(121, 85, 72, 1)":"p5","rgba(124, 179, 66, 1)":"p6","rgba(240, 147, 0, 1)":"p7","rgba(142, 36, 170, 1)":"p8","rgba(97, 97, 97, 1)":"p9","rgba(255, 205, 86, 1)":"p10"},tagSummary:[{name:"",colour:"",trades:0,comp:[]},{name:"",colour:"",profit:0,comp:[]},{name:"",colour:"",loss:0,comp:[]}],contextMenuTag:"",showCreate:!1,creatingTag:!1,editing:!1,selectedFiltersModal:!1,showPalette:!1,selectedTag:{},segmentMap:{EQ:"Equity",FO:"F&O",CDS:"Currency",COM:"Commodity",MF:"Mutual funds"},analyticsResults:{},breakdownTag:"",tagBreakdown:[],showDeleteConfirmation:!1,deleting:!1,showTagManager:!1}},mounted:function(){var t=this;window.addEventListener("keyup",(function(e){27===e.keyCode&&(t.hideBreakdown(),t.clearSearch(),t.hideSearch(),t.hideDeleteConfirmationBox(),t.hideTagManagerModal())})),0===this.consoleTags.length?this.fetchTags():this.getTagsJobs()},computed:O({},Object(_["c"])(["isMobileView","pnlStatus","consoleTags","reportEndDate"])),methods:O(O({},Object(_["d"])(["setConsoleTags"])),{},{showTagManagerModal:function(){this.showTagManager=!0},hideTagManagerModal:function(){this.showTagManager=!1},viewTagTrades:function(t){t.hasOwnProperty("comp")?(this.tagBreakdown=t.comp,this.breakdownTag=t.name):(this.tagBreakdown=t.trades,this.breakdownTag=t.tag_name),this.showBreakdown()},showBreakdown:function(){this.showModal=!0},hideBreakdown:function(){this.showModal=!1},getTrades:function(t,e){var a=0;for(var s in t)t[s].segment===e&&(a+=t[s].trade_count);return a},showCreateBox:function(t){this.showCreate||(this.showCreate=!0,this.editing=!0,this.selectedTag=t)},hideCreateBox:function(){this.showCreate=!1},hidePalette:function(){this.showPalette=!1},changeColor:function(t){this.selectedTag.colour=t},editTag:function(){var t=this;if(document.getElementById("create_tag_form")&&document.getElementById("create_tag_form").reportValidity()){this.creatingTag=!0;var e={tag_name:this.selectedTag.text,description:this.selectedTag.description,colour:this.selectedTag.colour,tag_id:parseInt(this.selectedTag.id)},a=g["a"].editTag,s="PUT";m["a"].request(s,!1,a,e,(function(e,a){"SUCCESS"===e.toUpperCase()?m["a"].request("GET",!1,g["a"].getTags,null,(function(e,a){t.creatingTag=!1,"SUCCESS"===e.toUpperCase()?function(){for(var e=a.data.data.result,s=0;s<e.length;s++)"SYSTEM"===e[s].client_id.toUpperCase()?(e[s]["type"]="system",e[s]["classes"]="system-tag"):(e[s]["type"]="custom",e[s]["classes"]="custom-tag "+t.paletteMap[e[s].colour]),e[s]["text"]=e[s].tag_name,e[s]["value"]=e[s].id;t.setConsoleTags(e),t.tags_items=[];var n=t.analyticsResults.trade_summary,i=t.analyticsResults.pnl_summary,r=0,o=function(e){var a=t.tags_items.findIndex((function(t){return parseInt(t.id)===i[e].tag}));if(a>-1)t.tags_items[a].pnlItems.push(i[e]),t.tags_items[a].pnl+=parseFloat(parseFloat(parseFloat(i[e].realized_profit)+parseFloat(i[e].unrealized_profit)).toFixed(2)),t.tags_items[a].pnlRealized+=parseFloat(parseFloat(i[e].realized_profit).toFixed(2)),t.tags_items[a].pnlUnrealized+=parseFloat(parseFloat(i[e].unrealized_profit).toFixed(2));else{var s=t.consoleTags.find((function(t){return parseInt(t.id)===i[e].tag}));if(s){s=JSON.parse(JSON.stringify(s));var r=n.filter((function(t){return i[e].tag===t.tag}));for(var o in s["trades"]=[],s["total_trades"]=0,s["pnl"]=parseFloat(parseFloat(parseFloat(i[e].realized_profit)+parseFloat(i[e].unrealized_profit)).toFixed(2)),s["pnlRealized"]=parseFloat(parseFloat(i[e].realized_profit).toFixed(2)),s["pnlUnrealized"]=parseFloat(parseFloat(i[e].unrealized_profit).toFixed(2)),s["pnlItems"]=[],s["pnlItems"].push(i[e]),r)s["trades"].push(r[o]),s["total_trades"]+=r[o]["trade_count"];s["row"]=e,t.tags_items.push(s)}}};for(var l in i)o(l);var c=0,d=0;for(var u in 0===t.tags_items.length?t.noResults=!0:(t.noResults=!1,c=t.tags_items[0].pnl,d=t.tags_items[0].pnl),t.tags_items)t.tags_items[u].total_trades>=r&&(r=t.tags_items[u].total_trades,t.tagSummary[0].name=t.tags_items[u].tag_name,t.tagSummary[0].colour=t.tags_items[u].colour,t.tagSummary[0].comp=t.tags_items[u].trades,t.tagSummary[0].trades=r),t.tags_items[u].pnl>=c&&(c=t.tags_items[u].pnl,t.tagSummary[1].name=t.tags_items[u].tag_name,t.tagSummary[1].colour=t.tags_items[u].colour,t.tagSummary[1].comp=t.tags_items[u].trades,t.tagSummary[1].profit=c,t.tagSummary[1].pnlRealized=t.tags_items[u].pnlRealized,t.tagSummary[1].pnlUnrealized=t.tags_items[u].pnlUnrealized),t.tags_items[u].pnl<=d&&(d=t.tags_items[u].pnl,t.tagSummary[2].name=t.tags_items[u].tag_name,t.tagSummary[2].colour=t.tags_items[u].colour,t.tagSummary[2].comp=t.tags_items[u].trades,t.tagSummary[2].loss=d,t.tagSummary[2].pnlRealized=t.tags_items[u].pnlRealized,t.tagSummary[2].pnlUnrealized=t.tags_items[u].pnlUnrealized),t.tags_items[u].trades.sort((function(t,e){return e.trade_count-t.trade_count}));t.hideCreateBox(),t.$toast.success({message:"Tag updated.",orientation:t.$toast.TOP_RIGHT,duration:6e3})}():"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching tags: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching tags:"+m["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})})):"FAILURE"===e.toUpperCase()?(t.creatingTag=!1,t.$toast.error({message:"Error updating tags: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3})):(t.creatingTag=!1,t.$toast.error({message:"Error updating tags:"+m["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}))}))}},viewPnl:function(t){this.$router.push({name:"pnl",params:{tag:t,startDate:this.dateRange[0],endDate:this.dateRange[1]}})},viewPortfolio:function(t){this.$router.push({name:"holdings",params:{tag:t}})},fetchTags:function(){var t=this;this.fetchingData=!0,this.deleting=!1,m["a"].request("GET",!1,g["a"].getTags,null,(function(e,a){if(t.hideDeleteConfirmationBox(),"SUCCESS"===e.toUpperCase()){for(var s=a.data.data.result,n=0;n<s.length;n++)"SYSTEM"===s[n].client_id.toUpperCase()?(s[n]["type"]="system",s[n]["classes"]="system-tag"):(s[n]["type"]="custom",s[n]["classes"]="custom-tag "+t.paletteMap[s[n].colour]),s[n]["text"]=s[n].tag_name,s[n]["value"]=s[n].id;t.setConsoleTags(s),t.getTagsJobs()}else"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching tags: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching tags:"+m["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},getTagsJobs:function(){var t=sessionStorage.getItem("console_tags");if(t){var e=JSON.parse(t);this.startDate=new Date(e.from),this.endDate=new Date(e.to),this.dateRange=[this.startDate,this.endDate],this.getTagsData(new Date(e.from),new Date(e.to))}else this.getTagsData(this.dateRange[0],this.dateRange[1])},toShowContextMenu:function(t){this.contextMenuTag=t.tag_name},toHideContextMenu:function(t){this.contextMenuTag=""},showMenu:function(t){t.target.children.length>0?(t.target.children[3].classList.toggle("show"),null!==this.lastClicked&&this.lastClicked!==t.target.children[3]&&this.lastClicked.classList.toggle("show"),this.lastClicked=t.target.children[3]):(t.target.parentNode.children[3].classList.toggle("show"),null!==this.lastClicked&&this.lastClicked!==t.target.parentNode.children[3]&&this.lastClicked.classList.toggle("show"),this.lastClicked=t.target.parentNode.children[3])},isSorted:function(t){return t===this.sortKey?"sorted":""},getsortBy:function(t){return t===this.sortKey?"arrow-show arrow "+this.sortBy:"current_value"===t&&!0===this.isCurrentSorted?"arrow-show arrow "+this.currentSortby:"asc"},sortTable:function(t,e){if(M=[],t===this.sortKey)if("asc"===this.sortBy){this.sortBy="desc";for(var a=document.getElementById("positions_table").querySelectorAll("thead td span"),s=0;s<a.length;s++)a[s].className="arrow asc";e.target.querySelector("span")?e.target.querySelector("span").className="arrow desc":e.target.className="arrow desc"}else{this.sortBy="asc";for(var n=document.getElementById("positions_table").querySelectorAll("thead td span"),i=0;i<n.length;i++)n[i].className="arrow asc";e.target.querySelector("span")?e.target.querySelector("span").className="arrow asc":e.target.className="arrow asc"}else{this.sortKey=t,this.sortBy="asc";for(var r=document.getElementById("positions_table").querySelectorAll("thead td span"),o=0;o<r.length;o++)r[o].className="arrow asc";e.target.querySelector("span")?e.target.querySelector("span").className="arrow asc":e.target.className="arrow asc",this.params.page=1}this.sortingData=!0,this.getTagsData(this.params.segment,this.params.date,!0)},compare:function(t,e){return"tag_name"===this.sortKey?t[this.sortKey]<e[this.sortKey]?"desc"===this.sortBy?1:-1:t[this.sortKey]>e[this.sortKey]?"desc"===this.sortBy?-1:1:0:null===t[this.sortKey]?1:null===e[this.sortKey]?-1:parseFloat(t[this.sortKey])<parseFloat(e[this.sortKey])?"desc"===this.sortBy?1:-1:parseFloat(t[this.sortKey])>parseFloat(e[this.sortKey])?"desc"===this.sortBy?-1:1:0},pollData:function(){var t=this;this.pollCount++,this.firstPoll?setTimeout((function(){return t.getTagsData(t.startDate,t.endDate)}),500):setTimeout((function(){return t.getTagsData(t.startDate,t.endDate)}),1e3),this.firstPoll=!1},getTagsData:function(t,e,a,s){var n=this;if(this.tagsError=!1,this.noResults=!1,s)this.filterData();else{if(a)return M=this.tags_items,M.sort(this.compare),void(this.sortingData=!1);if(this.fetchingData=!0,M=[],!t)return void this.$toast.warning({message:"From date is required",orientation:this.$toast.TOP_RIGHT,duration:6e3});if(this.startDate=new Date(t.getFullYear(),t.getMonth(),t.getDate()),this.endDate=e?new Date(e.getFullYear(),e.getMonth(),e.getDate()):new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),this.startDate>this.endDate)return void this.$toast.warning({message:"'To' parameter should be greater than or equal to 'From'",orientation:this.$toast.TOP_RIGHT,duration:6e3});this.params={from:this.startDate,to:this.endDate},sessionStorage.setItem("console_tags",JSON.stringify(this.params));var i=g["a"].getTagAnalytics+"?from_date="+A(this.startDate)+"&to_date="+A(this.endDate);this.tags_items=[],m["a"].request("GET",!0,i,null,(function(t,e){"PENDING"===t.toUpperCase()?n.pollCount<120?(n.job=!0,n.pollData()):(n.job=!1,n.fetchingData=!1,n.sortingData=!1,n.firstPoll=!0,n.tagsError=!0,n.$toast.error({message:"Error fetching tags: Request timed out",orientation:n.$toast.TOP_RIGHT,duration:6e3}),sessionStorage.getItem("console_tags")&&sessionStorage.removeItem("console_tags"),n.pollCount=0):"SUCCESS"===t.toUpperCase()?function(){n.pollCount=0,n.sortingData=!1,n.fetchingData=!1,n.job=!1,n.firstPoll=!0,n.analyticsResults=e.data.data.result;var t=n.analyticsResults.trade_summary,a=n.analyticsResults.pnl_summary,s=0,i=function(e){var s=n.tags_items.findIndex((function(t){return parseInt(t.id)===a[e].tag}));if(s>-1)n.tags_items[s].pnlItems.push(a[e]),n.tags_items[s].pnl+=parseFloat(parseFloat(parseFloat(a[e].realized_profit)+parseFloat(a[e].unrealized_profit)).toFixed(2)),n.tags_items[s].pnlRealized+=parseFloat(parseFloat(a[e].realized_profit).toFixed(2)),n.tags_items[s].pnlUnrealized+=parseFloat(parseFloat(a[e].unrealized_profit).toFixed(2));else{var i=n.consoleTags.find((function(t){return parseInt(t.id)===a[e].tag}));if(i){i=JSON.parse(JSON.stringify(i));var r=t.filter((function(t){return a[e].tag===t.tag}));for(var o in i["trades"]=[],i["total_trades"]=0,i["pnl"]=parseFloat(parseFloat(parseFloat(a[e].realized_profit)+parseFloat(a[e].unrealized_profit)).toFixed(2)),i["pnlRealized"]=parseFloat(parseFloat(a[e].realized_profit).toFixed(2)),i["pnlUnrealized"]=parseFloat(parseFloat(a[e].unrealized_profit).toFixed(2)),i["pnlItems"]=[],i["pnlItems"].push(a[e]),r)i["trades"].push(r[o]),i["total_trades"]+=r[o]["trade_count"];i["row"]=e,n.tags_items.push(i)}}};for(var r in a)i(r);var o=0,l=0;for(var c in 0===n.tags_items.length?n.noResults=!0:(n.noResults=!1,o=n.tags_items[0].pnl,l=n.tags_items[0].pnl),n.tags_items)n.tags_items[c].total_trades>=s&&(s=n.tags_items[c].total_trades,n.tagSummary[0].name=n.tags_items[c].tag_name,n.tagSummary[0].colour=n.tags_items[c].colour,n.tagSummary[0].comp=n.tags_items[c].trades,n.tagSummary[0].trades=s),n.tags_items[c].pnl>=o&&(o=n.tags_items[c].pnl,n.tagSummary[1].name=n.tags_items[c].tag_name,n.tagSummary[1].colour=n.tags_items[c].colour,n.tagSummary[1].comp=n.tags_items[c].trades,n.tagSummary[1].profit=o,n.tagSummary[1].pnlRealized=n.tags_items[c].pnlRealized,n.tagSummary[1].pnlUnrealized=n.tags_items[c].pnlUnrealized),n.tags_items[c].pnl<=l&&(l=n.tags_items[c].pnl,n.tagSummary[2].name=n.tags_items[c].tag_name,n.tagSummary[2].colour=n.tags_items[c].colour,n.tagSummary[2].comp=n.tags_items[c].trades,n.tagSummary[2].loss=l,n.tagSummary[2].pnlRealized=n.tags_items[c].pnlRealized,n.tagSummary[2].pnlUnrealized=n.tags_items[c].pnlUnrealized),n.tags_items[c].trades.sort((function(t,e){return e.trade_count-t.trade_count}))}():"FAILURE"===t.toUpperCase()?(n.job=!1,n.fetchingData=!1,n.sortingData=!1,n.firstPoll=!0,n.tagsError=!0,n.$toast.error({message:"Error fetching tag data: "+e.data.message,orientation:n.$toast.TOP_RIGHT,duration:6e3}),sessionStorage.getItem("console_tags")&&sessionStorage.removeItem("console_tags"),n.pollCount=0):"UNDEFINED"===t.toUpperCase()&&(n.job=!1,n.fetchingData=!1,n.sortingData=!1,n.firstPoll=!0,n.tagsError=!0,n.$toast.error({message:"Error fetching tags:"+m["a"].errorMessage(),orientation:n.$toast.TOP_RIGHT,duration:6e3}),sessionStorage.getItem("console_tags")&&sessionStorage.removeItem("console_tags"),n.pollCount=0)}))}},filterData:function(t,e){if(this.filteredData=[],t=t.toLowerCase().trim(),t&&t.length>0){this.filtering=!0;var a=this.tags_items.filter((function(e){return e.tag_name.toLowerCase().indexOf(t.toLowerCase())>-1}));for(var s in a)this.filteredData.push(parseInt(a[s]["row"]))}else this.filtering=!1;var n=document.getElementById("positions_table").querySelectorAll("tbody tr");if(this.filtering)for(var i=this.filteredData,r=0;r<n.length;r++)e?i.includes(r)?n[r].className="":n[r].className="blur":i.includes(r)?n[r].className="":n[r].className="hide-row";else for(var o=0;o<n.length;o++)n[o].className=""},clearSearch:function(){this.searchQuery="",this.filtering=!1,this.filteredData=[];for(var t=document.getElementById("positions_table").querySelectorAll("tbody tr"),e=0;e<t.length;e++)t[e].className=""},expandSearch:function(){document.getElementsByClassName("search-table")[0].classList.add("expand"),document.getElementsByClassName("filter-input")[0].setAttribute("placeholder","Filter eg: my tag"),document.getElementsByClassName("clear")[0].style.display="block"},hideSearch:function(){document.getElementsByClassName("search-table")[0].classList.remove("expand"),document.getElementsByClassName("filter-input")[0].setAttribute("placeholder","Search"),document.getElementsByClassName("clear")[0].style.display="none",document.getElementsByClassName("filter-input")[0].blur()},showDeleteConfirmationBox:function(t){this.showDeleteConfirmation=!0,t&&t.tag_name&&(this.selectedTag=t)},hideDeleteConfirmationBox:function(){this.showDeleteConfirmation=!1},deleteTag:function(){var t=this;this.deleting=!0;var e=[];e.push(parseInt(this.selectedTag.id)),m["a"].request("PUT",!1,g["a"].deleteTag,{tag_ids:e},(function(e,a){"SUCCESS"===e.toUpperCase()?(t.fetchTags(),t.$toast.success({message:"Tag deleted.",orientation:t.$toast.TOP_RIGHT,duration:6e3})):"FAILURE"===e.toUpperCase()?(t.deleting=!1,t.$toast.error({message:"Error deleting tags: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3})):(t.deleting=!1,t.$toast.error({message:"Error deleting tags:"+m["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}))}))}}),components:{"date-picker":r.a,jobber:o["a"],Treemap:D,TagManager:E["default"],"su-button":c["a"],"su-loader":d["a"],"context-menu":u["a"],"mobile-context-menu":h["a"],empty:l["a"],error:p["default"]}},L=F,N=Object(T["a"])(L,s,n,!1,null,null,null);e["default"]=N.exports},"89be":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"state-process-container",attrs:{main:t.main,sub:t.sub}},[a("div",{staticClass:"state-process"},[a("img",{attrs:{src:"/static/images/init.svg"}}),t._v(" "),a("h3",{attrs:{id:"mainText"}},[t._v(t._s(t.main))]),t._v(" "),a("p",{attrs:{id:"subText"}},[t._v(t._s(t.sub))])])])},n=[],i=a("5975"),r={name:"init",props:{main:{type:String,default:"Build a report"},sub:{type:String,default:"Use the above form to generate a report"}},components:{"su-loader":i["a"]}},o=r,l=a("2877"),c=Object(l["a"])(o,s,n,!1,null,null,null);e["a"]=c.exports},"8d74":function(t,e,a){var s=a("4cef"),n=/^\s+/;function i(t){return t?t.slice(0,s(t)+1).replace(n,""):t}t.exports=i},b047c:function(t,e,a){var s=a("1a8c"),n=a("408c"),i=a("b4b0"),r="Expected a function",o=Math.max,l=Math.min;function c(t,e,a){var c,d,u,h,p,_,m=0,g=!1,v=!1,f=!0;if("function"!=typeof t)throw new TypeError(r);function b(e){var a=c,s=d;return c=d=void 0,m=e,h=t.apply(s,a),h}function y(t){return m=t,p=setTimeout(k,e),g?b(t):h}function C(t){var a=t-_,s=t-m,n=e-a;return v?l(n,u-s):n}function w(t){var a=t-_,s=t-m;return void 0===_||a>=e||a<0||v&&s>=u}function k(){var t=n();if(w(t))return x(t);p=setTimeout(k,C(t))}function x(t){return p=void 0,f&&c?b(t):(c=d=void 0,h)}function S(){void 0!==p&&clearTimeout(p),m=0,c=_=d=p=void 0}function T(){return void 0===p?h:x(n())}function P(){var t=n(),a=w(t);if(c=arguments,d=this,_=t,a){if(void 0===p)return y(_);if(v)return clearTimeout(p),p=setTimeout(k,e),b(_)}return void 0===p&&(p=setTimeout(k,e)),h}return e=i(e)||0,s(a)&&(g=!!a.leading,v="maxWait"in a,u=v?o(i(a.maxWait)||0,e):u,f="trailing"in a?!!a.trailing:f),P.cancel=S,P.flush=T,P}t.exports=c},b23e:function(t,e,a){"use strict";t.exports=a("f3b7")},b4b0:function(t,e,a){var s=a("8d74"),n=a("1a8c"),i=a("ffd6"),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;function u(t){if("number"==typeof t)return t;if(i(t))return r;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=s(t);var a=l.test(t);return a||c.test(t)?d(t.slice(2),a?2:8):o.test(t)?r:+t}t.exports=u},bad3:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"loan-info-container"},[a("div",{staticClass:"wrapper"},[a("div",{staticClass:"loan-info-wrapper"},[t._m(0),t._v(" "),a("hr",{staticClass:"header-hr"}),t._v(" "),t.hasPendingUnpledgeRequest?a("div",{staticClass:"banner-alert-warning v-align mar-bot-30"},[a("img",{attrs:{src:"/static/images/alert-loans.svg"}}),t._v(" "),a("p",[t._v("You have a pending unpledge request placed on "+t._s(t.pendingUnpledgeSecurities))])]):t._e(),t._v(" "),a("div")])])]),t._v(" "),t.pageLoading||t.pledgeHoldings||!t.initialPageLoadFailed?t._e():a("error"),t._v(" "),t.pageLoading||t.pledgeHoldings||t.initialPageLoadFailed?t._e():a("empty",{attrs:{main:t.emptyMessage,sub:""}}),t._v(" "),t.pageLoading?a("jobber",{attrs:{main:"Fetching your pledges",sub:"",loader:!0}}):t._e(),t._v(" "),t.pledgeHoldings&&!t.pageLoading?a("su-form",{on:{submit:function(e){return e.preventDefault(),t.unpledgeValidation.apply(null,arguments)}}},[t.showModal?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:function(e){return e.stopPropagation(),t.hideUnpledgeModal.apply(null,arguments)}}},[a("div",{class:{"modal-container":!0}},[a("div",{staticClass:"modal-body",on:{click:function(e){return e.stopPropagation(),t.hideUnpledgeModal("cancel")}}},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideUnpledgeModal.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("div",[a("h1",[t._v("\n\t\t\t\t\t\t\t\t\tFollowing securities will be unpledged\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"table-section"},[a("div",{staticClass:"table-container manage-pledge-table-modal-container"},[a("div",[a("su-table",{attrs:{headers:t.unpledgeRequestHeaders,data:t.selectedPledges,"toolbar-header":"",sort:"",tableBorder:"",searchFilterOnly:!1},scopedSlots:t._u([{key:"default",fn:function(e){return[a("td",{staticClass:"textleft table-border"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.row.tradingsymbol)+" "),a("p",{staticClass:"text-light-grey text-xsmall"},[t._v(t._s(e.row.isin))])]),t._v(" "),a("td",[a("span",[t._v(" "+t._s(e.row.selected_qty))])]),t._v(" "),a("td",{staticClass:"textright"},[a("span",[t._v(" ₹"+t._s(t._f("inrFormat")(e.row.market_value)))])])]}}],null,!1,1916259457)})],1)])])])]),t._v(" "),a("p",{staticClass:"unpledge-button"},[a("su-button",{staticClass:"btn-blue",attrs:{processing:t.isProcessing},nativeOn:{click:function(e){return e.preventDefault(),t.unpledge()}}},[t._v("Confirm")])],1)])])])])]):t._e(),t._v(" "),a("div",{staticClass:"section row manage-pledge-container"},[a("div",{staticClass:"seven columns loans-form"},[a("h1",{staticClass:"new-loan-head"},[t._v("\n\t\t\t\t\tManage pledges\n\t\t\t\t\t"),a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideSearch,expression:"hideSearch"}],staticClass:"search-table"},[a("span",{staticClass:"icon icon-search"}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"filter-input",attrs:{maxlength:"15",type:"text",placeholder:"Search"},domProps:{value:t.searchQuery},on:{input:[function(e){e.target.composing||(t.searchQuery=e.target.value)},t.filteringData],click:function(e){return t.expandSearch()}}}),t._v(" "),a("span",{staticClass:"clear icon icon-times",on:{click:t.clearSearch}})])]),t._v(" "),a("span",{staticClass:"text-light-grey text-xsmall"},[t._v("Select securities to unpledge")]),t._v(" "),a("div",{staticClass:"table-section"},[a("div",{staticClass:"table-container manage-pledge-table-container"},[a("div",[a("su-table",{attrs:{headers:t.tableHeader,data:t.filteredPledges,"header-checkbox":"","header-checkbox-checked":t.headerCheckboxChecked,"toolbar-header":"",sort:"",tableBorder:"",searchFilterOnly:!1},on:{headerCheckboxSelect:t.onHeaderCheckboxSelect},scopedSlots:t._u([{key:"default",fn:function(e){return[a("td",{staticClass:"textleft table-border"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.row.tradingsymbol)+" "),a("p",{staticClass:"text-light-grey text-xsmall"},[t._v(t._s(e.row.isin))])]),t._v(" "),e.row.is_verified?a("td",[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.row.pledge_verified_on)+"\n\t\t\t\t\t\t\t\t\t")]):a("td",[a("span",{staticClass:"flag"},[t._v("Pending verification")])]),t._v(" "),a("td",[a("div",{staticClass:"su-input-group"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.row.selected_qty,expression:"props.row.selected_qty",modifiers:{number:!0}}],attrs:{disabled:!e.row.is_verified||t.hasPendingUnpledgeRequest||!t.selectedHoldings[e.row.psn],type:"number",min:1,max:e.row.quantity},domProps:{value:e.row.selected_qty},on:{input:[function(a){a.target.composing||t.$set(e.row,"selected_qty",t._n(a.target.value))},function(a){return t.onQtyChange(e.row.psn,e.row.selected_qty,e.index)}],blur:function(e){return t.$forceUpdate()}}}),t._v(" / "),a("span",{staticClass:"text-blue"},[t._v(t._s(e.row.quantity)+" ")])])]),t._v(" "),a("td",[a("div",[a("div",{staticClass:"su-input-group"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.row.market_value,expression:"props.row.market_value",modifiers:{number:!0}}],attrs:{disabled:!e.row.is_verified||t.hasPendingUnpledgeRequest||!t.selectedHoldings[e.row.psn],type:"number",min:Math.round(e.row.original_market_value/e.row.quantity),max:e.row.original_market_value},domProps:{value:e.row.market_value},on:{input:[function(a){a.target.composing||t.$set(e.row,"market_value",t._n(a.target.value))},function(a){return t.onValueChange(e.row.psn,e.row.market_value,e.index)}],blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("su-checkbox",{attrs:{disabled:!e.row.is_verified||t.hasPendingUnpledgeRequest,title:"Check to unpledge stock",id:e.row.psn},on:{change:function(a){return t.onHoldingSelect(e.index)}},model:{value:t.selectedHoldings[e.row.psn],callback:function(a){t.$set(t.selectedHoldings,e.row.psn,a)},expression:"selectedHoldings[props.row.psn]"}})],1)])]}}],null,!1,3696426914)})],1)])])]),t._v(" "),a("div",{staticClass:"five columns manage-pledge-amounts"},[a("div",{staticClass:"row"},[a("div",{staticClass:"six columns"},[a("label",{staticClass:"label text-grey"},[t._v("Max unpledge possible")]),t._v(" "),a("h2",{staticClass:"text-grey"},[t._v("₹"+t._s(t._f("inrFormat")(t.maxUnpledgePossible,2)))])]),t._v(" "),a("div",{staticClass:"six columns"},[a("label",{staticClass:"label text-grey"},[t._v("Total amount selected")]),t._v(" "),a("div",[a("h2",[t._v("₹"+t._s(t._f("inrFormat")(t.unpledgeAmountSelected,2)))])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"five columns"},[a("label",{staticClass:"label text-grey"},[t._v("Current LTV")]),t._v(" "),a("h2",[t._v(t._s(t.currentLTVRatio)+"%")])]),t._v(" "),t.isMobileView?t._e():a("div",{staticClass:"one columns icon icon-arrow-right"}),t._v(" "),a("div",{staticClass:"five columns"},[a("label",{staticClass:"label text-grey"},[t._v("LTV after unpledge")]),t._v(" "),a("div",[a("h2",[t._v(t._s(t.ltvAfterUnpledge)+"%")])])])]),t._v(" "),a("p",{staticClass:"text-light-grey text-xsmall unpledge-info-text"},[t._v("*Your LTV after unpledge should not cross "+t._s(this.ltvLimit)+"%. Only verified pledges can be unpledged. ")]),t._v(" "),a("su-button",{class:t.unpledgeAmountSelected>0?"btn btn-blue":"btn btn-grey",attrs:{type:"submit",processing:t.isProcessing,disabled:!(t.unpledgeAmountSelected>0)||t.isProcessing||t.hasPendingUnpledgeRequest}},[t._v("Unpledge")])],1)])]):t._e()],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",{staticClass:"v-align"},[a("span",{staticClass:"icon icon-credit-card"}),t._v("\n\t\t\t\t\tLoans\n\t\t\t\t\t"),a("img",{staticClass:"img-zerodha-capital hide-on-mobile",attrs:{src:"/static/images/zerodha-capital.svg"}})])}],i=a("eeee"),r=a("48f1"),o=a("2e34"),l=a("3912"),c=a("02bc"),d=a("3fb9"),u=a("bc3a"),h=a.n(u);function p(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=_(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,o=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){o=!0,i=t},f:function(){try{r||null==a.return||a.return()}finally{if(o)throw i}}}}function _(t,e){if(t){if("string"===typeof t)return m(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}function g(t){var e=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),s=0;s<a.length;s++){var n=a[s].trim();if(n.substring(0,t.length+1)===t+"="){e=decodeURIComponent(n.substring(t.length+1));break}}return e}var v=g("public_token"),f=h.a.create({timeout:1e4,responseType:"json",headers:{"X-CSRFToken":v,"Content-Type":"application/json"}}),b=h.a.create({timeout:15e3,responseType:"json",headers:{"X-CSRFToken":v,"Content-Type":"application/json"}}),y={name:"pledgehistory",components:{"su-table":i["a"],"loan-table":r["a"],jobber:o["a"],empty:c["a"],error:d["default"]},mixins:[l["a"]],data:function(){return{showModal:!1,ltvLimit:45,maxUnpledgePossible:0,emptyMessage:"No pledges found",defaultErrorMessage:"Something went wrong. Please try again later.",initialPageLoadFailed:!1,shortfallAmount:0,pageLoading:!1,headerCheckboxChecked:!1,selectedHoldings:{},isProcessing:!1,pledgeHoldings:null,hasPendingUnpledgeRequest:!1,searchQuery:"",ltvAfterUnpledge:null,currentLTVRatio:null,unpledgeAmountSelected:0,outstandingAmount:0,securityValue:0,unpledgeRequestHeaders:[{class:[],label:"Symbol",field:"tradingsymbol"},{class:["text-right"],label:"Quantity",field:"quantity"},{class:["text-right"],label:"Current value (₹)",field:"market_value"}],tableHeader:[{class:[],label:"Symbol",field:"tradingsymbol"},{class:[],label:"Pledge verified on",field:"pledge_verified_on",sort:!0},{class:[],label:"Quantity",field:"quantity",sort:!0,sortArrow:!0},{class:["text-right"],label:"Current value (₹)",field:"market_value",sort:!1,sortArrow:!0,showHeaderCheckbox:!0}]}},mounted:function(){this.fetchLoansPledgeHistory()},watch:{unpledgeAmountSelected:function(t){this.ltvAfterUnpledge=(this.outstandingAmount/(this.securityValue-t)*100).toFixed(2)}},methods:{hideUnpledgeModal:function(t){"cancel"!==t&&(this.showModal=!1)},fetchLoansPledgeHistory:function(){var t=this;this.pageLoading=!0,f.get("/api/loans/pledgehistory").then((function(e){t.pledgeHoldings=e.data.data.pledge_list,t.pendingUnpledgeSecurities=e.data.data.pending_unpledge_req,t.maxUnpledgePossible=e.data.data.max_unpledge_amount,t.pendingUnpledgeSecurities&&(t.hasPendingUnpledgeRequest=!0),t.shortfallAmount=e.data.data.shortfall_amount,t.ltvAfterUnpledge=e.data.data.current_ltv,t.currentLTVRatio=e.data.data.current_ltv,t.outstandingAmount=e.data.data.outstanding_amount,t.securityValue=e.data.data.security_value,t.ltvLimit=e.data.data.ltv_limit||45;var a=0;t.pledgeHoldings.map((function(e){t.headerCheckboxChecked=!1,t.$set(t.selectedHoldings,e.psn,!1),e.selected_qty=e.quantity,e.original_market_value=e.market_value,e.index=a,e.pledge_verified_on?e.is_verified=!0:e.is_verified=!1,a++})),t.onHoldingsDataChange()})).catch((function(e){var a=e.response.status;-1!==[500,501,502,503,504,505,506,507,508,510,511].indexOf(a)?t.initialPageLoadFailed=!0:t.emptyMessage=e.response.data.message})).then((function(){t.pageLoading=!1}))},onHeaderCheckboxSelect:function(t){var e,a=p(this.pledgeHoldings);try{for(a.s();!(e=a.n()).done;){var s=e.value;s.is_verified&&this.$set(this.selectedHoldings,s.psn,t)}}catch(n){a.e(n)}finally{a.f()}},onHoldingsDataChange:function(){this.unpledgeAmountSelected=0;var t,e=p(this.pledgeHoldings);try{for(e.s();!(t=e.n()).done;){var a=t.value;this.selectedHoldings[a.psn]&&(this.unpledgeAmountSelected+=a.market_value)}}catch(s){e.e(s)}finally{e.f()}},onHoldingSelect:function(t){this.headerCheckboxChecked=!1;var e,a=p(this.pledgeHoldings);try{for(a.s();!(e=a.n()).done;){var s=e.value;if(this.selectedHoldings[s.psn]){this.headerCheckboxChecked=!0;break}}}catch(n){a.e(n)}finally{a.f()}this.onHoldingsDataChange()},onValueChange:function(t,e,a){var s=this.pledgeHoldings.find((function(e){return e.psn===t}));s.original_market_value<e||!e||(s.market_value=e,s.selected_qty=Math.floor(e/Number(parseFloat(s.original_market_value/s.quantity).toFixed(2))),this.onHoldingsDataChange(),this.$set(this.pledgeHoldings,s.index,s))},onQtyChange:function(t,e,a){var s=this.pledgeHoldings.find((function(e){return e.psn===t}));s.quantity<e||!e||(s.market_value=s.quantity===e?s.original_market_value:Math.round(s.original_market_value/s.quantity)*e,s.selected_qty=e,this.onHoldingsDataChange(),this.$set(this.pledgeHoldings,s.index,s))},unpledgeValidation:function(){this.shortfallAmount>0?this.$toast.error({message:"You have a shortfall of ₹".concat(this.shortfallAmount,". Please pay the shortfall before unpledging."),orientation:this.$toast.TOP_RIGHT,duration:6e3}):this.hasPendingUnpledgeRequest?this.$toast.error({message:"You have already requested for an unpledge.",orientation:this.$toast.TOP_RIGHT,duration:6e3}):this.ltvAfterUnpledge>this.ltvLimit?this.$toast.error({message:"Your LTV after unpledge is "+this.ltvAfterUnpledge+"% which is greater than the limit of "+this.ltvLimit+"%. Please reduce the quantity of securities.",orientation:this.$toast.TOP_RIGHT,duration:6e3}):this.showModal=!0},unpledge:function(){var t=this;this.showModal=!1;var e,a=[],s=p(this.pledgeHoldings);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.selectedHoldings[n.psn]&&n.selected_qty>0&&a.push({psn:n.psn,qty:n.selected_qty})}}catch(i){s.e(i)}finally{s.f()}this.isProcessing=!0,b.post("/api/loans/unpledge",{securities:a}).then((function(e){"SUCCESS"===e.data.status.toUpperCase()&&(t.$toast.success({message:"Unpledge request placed",orientation:t.$toast.TOP_RIGHT,duration:15e3}),t.fetchLoansPledgeHistory())})).catch((function(e){var a=t.defaultErrorMessage;if(e.response){var s=e.response.data;a=s.message}t.$toast.error({message:a,orientation:t.$toast.TOP_RIGHT,duration:6e3})})).then((function(){t.isProcessing=!1}))}},computed:{filteredPledges:function(){var t=this;return this.pledgeHoldings?this.pledgeHoldings.filter((function(e){return e.tradingsymbol.toLowerCase().includes(t.searchQuery.toLowerCase())})):[]},selectedPledges:function(){var t=this;return this.pledgeHoldings?this.pledgeHoldings.filter((function(e){return t.selectedHoldings[e.psn]})):[]},isMobileView:function(){return this.$store.getters.isMobileView}}},C=y,w=a("2877"),k=Object(w["a"])(C,s,n,!1,null,null,null);e["default"]=k.exports},d1df:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoanInWaitList&&!t.isLoansStatusFailed?a("div",{staticClass:"text-center"},[a("init",{attrs:{main:t.waitListTextMessage,sub:t.waitListSubTextMessage}}),t._v(" "),a("su-button",{staticClass:"btn btn-blue",nativeOn:{click:function(e){return e.preventDefault(),t.redirectToLoanInvite()}}},[t._v("Join waiting list")])],1):t._e(),t._v(" "),t.isLoansStatusFailed&&t.isKycCorrectionShown?a("div",[a("div",{staticClass:"text-center"},[a("p",[t._v("Some of the KYC details you have entered needs correction.")]),t._v(" "),t.isFATCACorrectionShown?a("a",{staticClass:"btn btn-blue",attrs:{href:"http://console.zerodha.com/loans/fatca_correction"}},[t._v("Redo FATCA")]):t._e(),t._v(" "),t.isIPVCorrectionShown?a("a",{staticClass:"btn btn-blue",attrs:{href:t.ipvRedoUrl,target:"_self"}},[t._v("Redo IPV")]):t._e()])]):t._e(),t._v(" "),t.loanClosurePopUp?a("div",{staticClass:"loans-closure"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideLoanClosurePopUp}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showLoanClosurePopUp.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideLoanClosurePopUp.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"row modal-body-rowinput-container"},[a("su-input",{attrs:{value:t.loansClosureAmount,"static-label":"","no-error":"",label:""}}),t._v(" "),a("su-button",{staticClass:"btn btn-blue",nativeOn:{click:function(e){return t.confirmPayLoanClosureAmount.apply(null,arguments)}}},[t._v("Confirm")])],1)])])])])]):t._e(),t._v(" "),t.isLoanInWaitList||t.isLoansStatusFailed?t._e():a("div",{staticClass:"loan-info-container",class:null!==t.existingLoan&&Object.keys(t.existingLoan).length>0?"existing-loan":""},[a("div",{staticClass:"wrapper"},[a("div",{staticClass:"loan-info-wrapper"},[a("h1",{staticClass:"v-align"},[a("span",{staticClass:"icon icon-credit-card"}),t._v("\n\t\t\t\t\tLoans\n\t\t\t\t\t"),t.showNBFCInitiate?t._e():a("img",{staticClass:"img-zerodha-capital hide-on-mobile",attrs:{src:"/static/images/zerodha-capital.svg"}})]),t._v(" "),a("hr",{staticClass:"header-hr"}),t._v(" "),t.showFatcaContainer?t._e():a("div",[null!==t.existingLoan&&Object.keys(t.existingLoan).length>0&&t.shortfallAmount>0&&!t.repaymentSuccess?a("div",{staticClass:"banner-alert-warning v-align"},[a("img",{attrs:{src:"/static/images/alert-loans.svg"}}),t._v(" "),a("p",[t._v("Your pledged holdings value is depreciated below required amount. You need to pay or pledge holdings worth ₹"+t._s(t._f("inrFormat")(t.shortfallAmount,2))+".")])]):t._e(),t._v(" "),null!==t.existingLoan&&Object.keys(t.existingLoan).length>0?a("div",{staticClass:"row loans-card-container",class:t.isMobileView?"":"v-align"},[a("div",{staticClass:"five columns loanamt-card left"},[a("div",{staticClass:"row outstanding-loan-amount"},[a("div",{staticClass:"six columns"},[a("label",{staticClass:"label text-light-grey"},[t._v("Outstanding loan amount")]),t._v(" "),a("h2",{staticClass:"text-blue"},[t._v("₹"+t._s(t._f("inrFormat")(t.totalOutstanding,2)))])]),t._v(" "),a("div",{staticClass:"six columns"},[a("div",{staticClass:"interest-rate"},[a("label",{staticClass:"label text-light-grey"},[t._v("Interest rate")]),t._v(" "),a("p",[t._v(t._s(t.existingLoanInterest)+"%")])]),t._v(" "),t._m(2),t._v(" "),a("div",{staticClass:"ltv-ratio"},[a("label",{staticClass:"label text-light-grey"},[t._v("Current LTV ratio")]),t._v(" "),a("p",[t._v(t._s(t.currentLTVRatio)+"%")])])])])]),t._v(" "),a("div",{staticClass:"seven columns loanamt-card right"},[a("div",{staticClass:"row payment-title"},[a("div",{staticClass:"six columns"},[t._v("\n\t\t\t\t\t\t\t\t\tPayments\n\t\t\t\t\t\t\t\t")]),t._v(" "),t.isMobileView?t._e():a("div",{staticClass:"six columns"},[a("p",{staticClass:"label text-xsmall text-light-grey"},[t._v("Through net banking or UPI")])])]),t._v(" "),t.shortfallAmount>0?a("div",{staticClass:"payment-card-text row shortfall-payment"},[a("div",{staticClass:"four columns"},[a("label",{staticClass:"label text-light-grey"},[t._v("Minimum payment")]),t._v(" "),a("h2",{staticClass:"text-blue"},[t._v("₹"+t._s(t._f("inrFormat")(t.shortfallAmount,2)))])]),t._v(" "),t._m(3),t._v(" "),a("div",{staticClass:"four columns"},[t.isMobileView?a("p",{staticClass:"label text-xsmall text-light-grey"},[t._v("Through net banking or UPI")]):t._e(),t._v(" "),a("su-button",{staticClass:"btn-blue make-payment-btn",nativeOn:{click:function(e){return t.existingLoanPayment.apply(null,arguments)}}},[t._v("Make payment")])],1)]):a("div",{staticClass:"payment-card-text row repayment"},[a("div",{staticClass:"four columns"},[a("label",{staticClass:"label text-light-grey"},[t._v("Minimum payment due")]),t._v(" "),a("h2",{staticClass:"text-blue"},[t._v("₹"+t._s(t._f("inrFormat")(t.minimumPaymentAmount,2)))])]),t._v(" "),a("div",{staticClass:"four columns"},[a("label",{staticClass:"label text-light-grey"},[t._v("Due date")]),t._v(" "),t.shortfallDuedate?a("h2",[t._v(t._s(t._f("dateToReadableStr")(t.shortfallDuedate)))]):t._e(),t._v(" "),t.shortfallDuedate?t._e():a("h2",{staticClass:"text-light-grey"},[t._v("N/A")])]),t._v(" "),a("div",{staticClass:"four columns"},[t.isMobileView?a("p",{staticClass:"label text-xsmall text-light-grey"},[t._v("Through net banking or UPI")]):t._e(),t._v(" "),a("su-button",{staticClass:"make-payment-btn",class:[-1!==["Closed","Loan Closure Requested"].indexOf(t.existingLoan.status)?"btn btn-grey":"btn btn-blue",t.isMobileView?"sm":""],attrs:{type:"button",disabled:-1!==["Closed","Loan Closure Requested"].indexOf(t.existingLoan.status)},nativeOn:{click:function(e){return t.existingLoanPayment.apply(null,arguments)}}},[t._v("Make re-payment")]),t._v(" "),a("p",{staticClass:"close-loan-text",class:t.isMobileView?"sm":"",on:{click:t.existingLoanPayment}},[t._v("Close loan")])],1)])])]):t._e()]),t._v(" "),t.showFatcaContainer?a("div",[a("fatca")],1):t._e()])])]),t._v(" "),t.isLoansStatusFailed||t.showFatcaContainer?t._e():a("div",{staticClass:"section"},[t.nbfcInitiating?a("jobber",{attrs:{main:"Hold on",sub:"",loader:!0}}):t._e(),t._v(" "),t.dashboardHoldingsDataFailed?a("div",[a("empty",{attrs:{main:"You do not have any approved stocks in your holdings!",sub:"Check approved list <a target=_blank href=https://zerodhacapital.com/approved-list>here.</a>"}})],1):t._e(),t._v(" "),t.dashboardHoldingsDataFetchFailed?a("div",[a("empty",{attrs:{main:"Could not fetch your holdings. Try again later.",sub:""}})],1):t._e(),t._v(" "),!t.loadHoldingsDataJobber||t.dashboardHoldingsDataFailed||t.dashboardHoldingsDataFetchFailed?t._e():a("jobber",{attrs:{main:"Fetching your equity holdings",sub:"",loader:!0}}),t._v(" "),t.showHoldingsData&&!t.showOffers?a("div",[t.existingLoanAmountPopUp?a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper loans-confirm",on:{click:t.hideExistingLoanAmountPopUp}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.existingLoanPayment.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"modal-body-header"},[a("span",{staticClass:"icon icon-credit-card"},[t._v("Make re-payment")]),t._v(" "),a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideExistingLoanAmountPopUp.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})])]),t._v(" "),t.shortfallAmount>0&&null!==t.existingLoan&&Object.keys(t.existingLoan).length>0?a("div",{staticClass:"row modal-body-rowinput-container loan-repayment-row"},[a("div",{staticClass:"row payment-mode"},[a("label",[t._v("Select payment mode")]),t._v(" "),a("su-radio-group",{model:{value:t.paymentMode,callback:function(e){t.paymentMode=e},expression:"paymentMode"}},[a("su-radio",{attrs:{value:"cashier",label:"UPI"}}),t._v(" "),a("su-radio",{attrs:{value:"razorpay",label:"Net Banking"}})],1)],1),t._v(" "),"cashier"===t.paymentMode?a("div",{staticClass:"row loan-custom-row"},[a("div",{staticClass:"su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("UPI ID")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.vpa,expression:"vpa"}],staticClass:"upi-input",attrs:{type:"text",noerror:"true",staticlabel:"true",label:"UPI ID"},domProps:{value:t.vpa},on:{input:function(e){e.target.composing||(t.vpa=e.target.value)}}})])]):t._e(),t._v(" "),a("div",{staticClass:"row loan-custom-row"},[a("span",{staticClass:"pre-rupee"},[t._v("₹")]),t._v(" "),a("su-input",{attrs:{type:"number","static-label":"","no-error":"",label:"Enter amount"},model:{value:t.shortfallAmountEntered,callback:function(e){t.shortfallAmountEntered=t._n(e)},expression:"shortfallAmountEntered"}}),t._v(" "),a("su-button",{class:t.shortfallAmount>t.shortfallAmountEntered?"btn btn-grey":"btn btn-blue",attrs:{disabled:t.shortfallAmount>t.shortfallAmountEntered||t.processingRazorPayment,processing:t.processingRazorPayment},nativeOn:{click:function(e){return t.confirmPaymentAmount.apply(null,arguments)}}},[t._v("Confirm")])],1)]):a("div",{staticClass:"row modal-body-rowinput-container"},[a("div",{staticClass:"loan-close-repayment"},[a("su-radio-group",{model:{value:t.reqClosure,callback:function(e){t.reqClosure=e},expression:"reqClosure"}},[a("su-radio",{attrs:{value:"0",label:"Minimum or custom amount"}}),t._v(" "),a("su-radio",{attrs:{value:"1",label:"Close the loan"}})],1)],1),t._v(" "),t.panConsentRequired?a("div",{staticClass:"row pan-consent-required"},[a("su-checkbox",{attrs:{label:"I agree to share my PAN with Zerodha Capital Private Limited which are as per the records of Zerodha Broking Limited for KYC and record keeping purposes."},model:{value:t.isPanConsentChecked,callback:function(e){t.isPanConsentChecked=e},expression:"isPanConsentChecked"}})],1):t._e(),t._v(" "),a("div",{staticClass:"row payment-mode"},[a("label",[t._v("Select payment mode")]),t._v(" "),a("su-radio-group",{model:{value:t.paymentMode,callback:function(e){t.paymentMode=e},expression:"paymentMode"}},[a("su-radio",{attrs:{value:"cashier",label:"UPI"}}),t._v(" "),a("su-radio",{attrs:{value:"razorpay",label:"Net Banking"}})],1)],1),t._v(" "),"cashier"===t.paymentMode?a("div",{staticClass:"row loan-custom-row"},[a("div",{staticClass:"su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("UPI ID")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.vpa,expression:"vpa"}],staticClass:"upi-input",attrs:{type:"text",noerror:"true",staticlabel:"true",label:"UPI ID"},domProps:{value:t.vpa},on:{input:function(e){e.target.composing||(t.vpa=e.target.value)}}})])]):t._e(),t._v(" "),"0"==t.reqClosure?a("div",{staticClass:"row loan-custom-row"},[a("span",{staticClass:"pre-rupee"},[t._v("₹")]),t._v(" "),a("div",{staticClass:"su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Enter amount")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.repaymentAmount,expression:"repaymentAmount",modifiers:{number:!0}}],attrs:{type:"number",noerror:"true",staticlabel:"true",label:"Enter amount"},domProps:{value:t.repaymentAmount},on:{input:function(e){e.target.composing||(t.repaymentAmount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("su-button",{class:t.repaymentAmount<t.minimumRepaymentPossible?"btn btn-grey":"btn btn-blue",attrs:{disabled:t.repaymentAmount<t.minimumRepaymentPossible||"cashier"===t.paymentMode&&!t.vpa||t.processingRazorPayment||!(!t.panConsentRequired||t.isPanConsentChecked),processing:t.processingRazorPayment},nativeOn:{click:function(e){return t.confirmPaymentAmount.apply(null,arguments)}}},[t._v("Confirm")])],1):a("div",{staticClass:"row loan-close-row"},[a("span",{staticClass:"pre-rupee"},[t._v("₹")]),t._v(" "),a("div",{staticClass:"su-input-group su-static-label"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.loansClosureAmount,expression:"loansClosureAmount",modifiers:{number:!0}}],attrs:{type:"number",noerror:"true",staticlabel:"true"},domProps:{value:t.loansClosureAmount},on:{input:function(e){e.target.composing||(t.loansClosureAmount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("su-button",{staticClass:"btn btn-blue",attrs:{disabled:t.panConsentRequired&&!t.isPanConsentChecked||"cashier"===t.paymentMode&&!t.vpa},nativeOn:{click:function(e){return t.confirmPaymentAmount.apply(null,arguments)}}},[t._v("Confirm")])],1),t._v(" "),"1"==t.reqClosure?a("div",[a("p",{staticClass:"text-xsmall text-light-grey repay-loanclose-text"},[t._v("\n\t\t\t\t\t\t\t\t\t\tRepay the following amount to close your loan. We will unpledge all the pledged stocks after due procedure.\n\t\t\t\t\t\t\t\t\t")])]):t._e()])])])])]):t._e(),t._v(" "),a("div",{staticClass:"row"},[a("su-form",{ref:"holdings",staticClass:"loans-form",on:{submit:function(e){return e.preventDefault(),t.redirectToOffersPage.apply(null,arguments)}}},[a("div",{staticClass:"seven columns"},[a("h1",{staticClass:"new-loan-head"},[t._v("\n\t\t\t\t\t\t\t"+t._s(null!==t.existingLoan&&Object.keys(t.existingLoan).length>0?"Top-up your existing loan":"Apply for a new loan")+"\n\t\t\t\t\t\t\t"),a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideSearch,expression:"hideSearch"}],staticClass:"search-table"},[a("span",{staticClass:"icon icon-search"}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"filter-input",attrs:{maxlength:"15",type:"text",placeholder:"Search"},domProps:{value:t.searchQuery},on:{input:[function(e){e.target.composing||(t.searchQuery=e.target.value)},t.filteringData],click:function(e){return t.expandSearch()}}}),t._v(" "),a("span",{staticClass:"clear icon icon-times",on:{click:t.clearSearch}})])]),t._v(" "),a("p",{staticClass:"text-light-grey text-xsmall new-loan-para"},[t._v("Maximum available amount is shown after haircut. "),a("a",{attrs:{href:"https://zerodhacapital.com/tos/faq#max",target:"_blank"}},[t._v("Learn more")])]),t._v(" "),a("div",{staticClass:"table-section"},[t.holdings&&t.holdings.length>0?a("div",{staticClass:"table-container"},[a("loan-table",{attrs:{holdings:t.holdings,searchQuery:t.searchQuery},on:{pledgedHoldings:t.onPledgedHoldings}})],1):t._e(),t._v(" "),t.holdings&&0===t.holdings.length?a("div",[a("empty",{attrs:{main:"No Holdings data found",sub:""}})],1):t._e()]),t._v(" "),t.holdings&&t.holdings.length>0?a("h3",{staticClass:"holdings-total",class:t.holdings.length>9?"px-60":"px-45"},[a("span",[t._v("Total")]),a("span",[t._v("₹"+t._s(t._f("inrFormat")(t.loanValue,2)))])]):t._e(),t._v(" "),a("div",{staticClass:"key-points"},[a("p",{staticClass:"text-light-grey text-xsmall"},[t._v("*Securities shown here are only as per the "),a("a",{attrs:{href:"https://zerodhacapital.com/approved-list",target:"_blank"}},[t._v("Approved List of Securities")]),t._v(" as permitted by Zerodha Capital Private Ltd.")]),t._v(" "),a("p",{staticClass:"text-light-grey text-xsmall"},[t._v("*The minimum amount of loan that can be availed is Rs. 25,000, after the applicable haircuts.")]),t._v(" "),a("p",{staticClass:"text-light-grey text-xsmall"},[t._v("*You declare that none of the above holdings are promoter shares, and are free from any lien marking. In case of declaration to be provided with respect to Promoter shares or for any liens that may be marked, please "),a("a",{attrs:{href:"https://support.zerodha.com/category/console/profile/articles/nbfc-support",target:"_blank"}},[t._v("create a ticket here")]),t._v(" to inform our team.")])])]),t._v(" "),a("div",{staticClass:"five columns loans-form-textarea"},[a("div",{staticClass:"row"},[a("div",{staticClass:"six columns"},[a("label",{staticClass:"label text-grey"},[t._v("Total amount required")]),t._v(" "),a("h2",[t._v("₹"+t._s(t._f("inrFormat")(t.loanValue,2)))])]),t._v(" "),a("div",{staticClass:"six columns"},[a("label",{staticClass:"label text-grey"},[t._v("Applicable interest rate")]),t._v(" "),a("div",[a("h2",[t._v(t._s(t.interestRate)+"%  ")])])])]),t._v(" "),a("p",{staticClass:"text-light-grey text-xsmall annum-charge"},[t._v("*Interest rate per annum charged on a monthly basis. Tenure is 1 year (Auto renewable).")]),t._v(" "),a("su-button",{class:t.loanValue>0?"btn btn-blue":"btn btn-grey",attrs:{processing:t.isProcessing,type:"submit",disabled:!(t.loanValue>0)||t.isProcessing}},[t._v("Continue")])],1)])],1)]):t._e(),t._v(" "),t.showOffers?a("div",[a("offers",{on:{offersToLoansDashboard:t.onSwitchToLoansDashboard}})],1):t._e(),t._v(" "),t.loadNBFCInitiateJobber&&!t.eligibilityFailed?a("jobber",{attrs:{main:"KYC details to enter",sub:"",loader:!0}}):t._e(),t._v(" "),t.showNBFCInitiate&&!t.eligibilityFailed?a("div",{staticClass:"kyc-main-container"},[a("div",{staticClass:"body-section"},[a("h2",[t._v("Confirm your KYC")]),a("hr"),t._v(" "),a("div",{staticClass:"row v-align"},[a("div",{staticClass:"seven columns"},[a("div",{staticClass:"row kyc-details input-container"},[a("div",{staticClass:"four columns"},[a("div",{staticClass:"su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("CKYC number")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.ckycNumber,expression:"ckycNumber"}],attrs:{type:"text",maxlength:"14",placeholder:"Enter CKYC number",autocorrect:"off",autocapitalize:"none",noerror:"true",staticlabel:"true",animate:"true",label:"CKYC number"},domProps:{value:t.ckycNumber},on:{input:function(e){e.target.composing||(t.ckycNumber=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"three columns su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("D.O.B")]),t._v(" "),a("datepicker",{attrs:{format:t.format,lang:"en","not-before":"1900-01-01","not-after":t.currentDate,placeholder:"Date of birth"},model:{value:t.dateOfBirth,callback:function(e){t.dateOfBirth=e},expression:"dateOfBirth"}})],1)]),t._v(" "),t._m(4),t._v(" "),a("div",{staticClass:"eligible-tac"},[a("p",[a("su-checkbox",{attrs:{label:"I agree to share my CKYC number and PAN with Zerodha Capital Private Limited which are as per the records of Zerodha Broking Limited. I confirm that my date of birth mentioned above is correct."},model:{value:t.isCkycDetailsCorrect,callback:function(e){t.isCkycDetailsCorrect=e},expression:"isCkycDetailsCorrect"}})],1),t._v(" "),a("p",[a("su-checkbox",{attrs:{label:"I agree and confirm to allow Zerodha Capital Private Limited to fetch my KYC details, using my CKYC number stated above."},model:{value:t.isAgreedToFetchKycDetails,callback:function(e){t.isAgreedToFetchKycDetails=e},expression:"isAgreedToFetchKycDetails"}})],1),t._v(" "),a("p",[a("su-checkbox",{attrs:{label:"I agree and confirm to share my demat account number along with my holdings information, and my bank account number, with Zerodha Capital Private Limited."},model:{value:t.isAgreedToShareDematAccount,callback:function(e){t.isAgreedToShareDematAccount=e},expression:"isAgreedToShareDematAccount"}})],1),t._v(" "),a("p",[a("su-checkbox",{attrs:{label:"I agree and confirm to read and understand English as a language and confirm to have read and understood the Fair Practice Code of Zerodha Capital Private Limited."},model:{value:t.isAgreedToShareBankAccount,callback:function(e){t.isAgreedToShareBankAccount=e},expression:"isAgreedToShareBankAccount"}})],1)]),t._v(" "),a("div",[a("su-button",{class:t.checkCKYCVerification?"btn-grey":"btn-blue",attrs:{disabled:t.checkCKYCVerification},nativeOn:{click:function(e){return e.preventDefault(),t.onClickKyc.apply(null,arguments)}}},[t._v("\n\t\t\t\t\t\t\t\tContinue\n\t\t\t\t\t\t\t")])],1)]),t._v(" "),t._m(5)])])]):t._e(),t._v(" "),t.loadFetchingKYCDetailsJobber?a("jobber",{attrs:{main:"Fetching your KYC details",sub:"",loader:!0}}):t._e(),t._v(" "),t.showFetchedKYCDetails?a("div",{staticClass:"eligible-main-container"},[t._m(6),t._v(" "),t.nbfcInitiated?a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"five columns"},[a("img",{staticClass:"profile-img",attrs:{src:"data:image/"+t.ckycData.photograph.image_type+";base64,"+t.ckycData.photograph.image_data}})]),t._v(" "),a("div",{staticClass:"two columns"},[t._v(" ")]),t._v(" "),a("div",{staticClass:"five columns"},[a("label",{staticClass:"label text-grey"},[t._v("\n\t\t\t\t\t\t\tMobile\n\t\t\t\t\t\t\t"),t.editingKyc||"mobile"===t.editKycSection?t._e():a("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"edit-mobile",attrs:{title:"Edit mobile"}},[t._e()]),t._v(" "),t.editingKyc&&"mobile"===t.editKycSection?a("div",{staticClass:"edit-mobile"},[a("su-loader")],1):t._e()]),t._v(" "),a("h3",[t._v(t._s(t.ckycData.mobile))]),t._v(" "),a("label",{staticClass:"label text-grey"},[t._v("E-mail ")]),t._v(" "),a("h3",[t._v(t._s(t.ckycData.email)+" ")]),t._v(" "),a("label",{staticClass:"label text-grey"},[t._v("Gender")]),t._v(" "),a("h3",[t._v(t._s("M"===t.ckycData.gender?"Male":"Female"))])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"five columns"},[a("label",{staticClass:"label text-grey"},[t._v("CKYC number ")]),t._v(" "),a("h3",[t._v(t._s(t.ckycData.ckyc_number))])]),t._v(" "),a("div",{staticClass:"two columns"},[t._v(" ")]),t._v(" "),a("div",{staticClass:"five columns"},[a("label",{staticClass:"label text-grey"},[t._v("Date of birth ")]),t._v(" "),a("h3",[t._v(t._s(t.ckycData.dob)+" ")])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"five columns"},[a("label",{staticClass:"label text-grey"},[t._v("Permanent address ")]),t._v(" "),a("h3",[t._v(t._s(t.ckycData.permanent_address))])]),t._v(" "),a("div",{staticClass:"two columns"},[t._v(" ")]),t._v(" "),a("div",{staticClass:"five columns"},[a("label",{staticClass:"label text-grey"},[t._v("Correspondence address ")]),t._v(" "),a("h3",[t._v(t._s(t.ckycData.correspondence_address)+" ")])])]),t._v(" "),t._m(7)]):t._e(),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"six columns"},[a("h2",[t._v("Bank account")]),a("hr"),a("br"),t._v(" "),t._l(t.ckycData.bank_details,(function(e,s){return a("div",{key:s},[t._v("\n\t\t\t\t\t\t"+t._s(e.account_number)+" — "+t._s(e.name)+"\n\t\t\t\t\t")])}))],2),t._v(" "),a("div",{staticClass:"one columns"},[t._v(" ")]),t._v(" "),a("div",{staticClass:"five columns"},[a("h2",[t._v("Demat account")]),a("hr"),a("br"),t._v(" "),a("div",[t._v(t._s(t.ckycData.dp_details.dp_account_no)+" — "+t._s(t.ckycData.dp_details.dp_name))])])]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"six columns"},[a("h2",[t._v("PAN number")]),a("hr"),a("br"),t._v(" "),a("div",[t._v(t._s(t.ckycData.pan))])])]),t._v(" "),a("div",{staticClass:"eligible-tac"},[a("p",[a("su-checkbox",{attrs:{label:"I confirm that all my details mentioned above are correct and up to date"},model:{value:t.isKycDetailsAreCorrect,callback:function(e){t.isKycDetailsAreCorrect=e},expression:"isKycDetailsAreCorrect"}})],1),t._v(" "),a("p",[a("su-checkbox",{attrs:{label:"I allow Zerodha Capital Private Limited to check my credit score with a RBI recognized credit information company"},model:{value:t.isZerodhaCapitalToCheckCreditScore,callback:function(e){t.isZerodhaCapitalToCheckCreditScore=e},expression:"isZerodhaCapitalToCheckCreditScore"}}),a("br")],1)]),t._v(" "),t.nbfcInitiated?a("su-button",{class:t.isKycDetailsAreCorrect&&t.isZerodhaCapitalToCheckCreditScore?"btn-blue":"btn-grey",attrs:{disabled:!(t.isKycDetailsAreCorrect&&t.isZerodhaCapitalToCheckCreditScore)||t.processingFatcaRedirect,processing:t.processingFatcaRedirect},nativeOn:{click:function(e){return e.preventDefault(),t.redirectToFatcaPage.apply(null,arguments)}}},[a("span",[t._v("Continue")])]):t._e()],1):t._e(),t._v(" "),t.eligibilityFailed?a("div",[a("div",{staticClass:"text-center"},[a("img",{staticClass:"img-loan-sub",attrs:{src:"/static/images/aadhaar.svg"}}),t._v(" "),a("p",[t._v(t._s(t.reKycMessage))]),t._v(" "),t.isReKycRequired?a("su-button",{staticClass:"btn-blue",nativeOn:{click:function(e){return e.preventDefault(),t.redirectToKiteLogin()}}},[t._v("Update KYC details")]):t._e()],1)]):t._e(),t._v(" "),t.processingFeePaid?a("div",[t._m(8)]):t._e(),t._v(" "),t.processingDocuments?a("div",[a("div",{staticClass:"row processing-documents"},[t._m(9),t._v(" "),a("div",{staticClass:"six columns processing-documents-textarea"},[a("div",{staticClass:"row"},[a("div",{staticClass:"six columns"},[a("label",{staticClass:"label text-grey"},[t._v("Loan amount offered")]),t._v(" "),a("h2",[t._v("₹"+t._s(t.loanInfoPledgingAmount))])]),t._v(" "),a("div",{staticClass:"six columns"},[a("label",{staticClass:"label text-grey"},[t._v("Applicable interest rate")]),t._v(" "),a("div",[a("h2",[t._v(t._s(t.loanInfoInterestRate)+"%  ")])])])]),t._v(" "),a("p",{staticClass:"text-light-grey text-xsmall annum-charge"},[t._v("*Interest rate per annum charged on a monthly basis. Tenure is 1 year (Auto renewable).")]),t._v(" "),a("hr"),t._v(" "),a("div",[a("label",{staticClass:"label text-grey"},[t._v("Purpose of the loan")]),t._v(" "),a("h3",[t._v(t._s(t.loanInfoPurpose))])]),t._v(" "),a("div",[a("label",{staticClass:"label text-grey"},[t._v("Bank account")]),t._v(" "),a("h3",[t._v(t._s(t.loanInfoBankDetail))])])])])]):t._e(),t._v(" "),t.loanRequestInitiated?a("div",[a("div",{staticClass:"row loan-request-initiated"},[t._m(10),t._v(" "),a("div",{staticClass:"six columns loan-request-initiated-textarea"},[a("div",{staticClass:"row"},[a("div",{staticClass:"six columns"},[a("label",{staticClass:"label text-grey"},[t._v("Loan amount offered")]),t._v(" "),a("h2",[t._v("₹"+t._s(t.loanInfoPledgingAmount))])]),t._v(" "),a("div",{staticClass:"six columns"},[a("label",{staticClass:"label text-grey"},[t._v("Applicable interest rate")]),t._v(" "),a("div",[a("h2",[t._v(t._s(t.loanInfoInterestRate)+"%  ")])])])]),t._v(" "),a("p",{staticClass:"text-light-grey text-xsmall annum-charge"},[t._v("*Interest rate per annum charged on a monthly basis. Tenure is 1 year (Auto renewable).")]),t._v(" "),a("hr"),t._v(" "),a("div",[a("label",{staticClass:"label text-grey"},[t._v("Purpose of the loan")]),t._v(" "),a("h3",[t._v(t._s(t.loanInfoPurpose))])]),t._v(" "),a("div",[a("label",{staticClass:"label text-grey"},[t._v("Bank account")]),t._v(" "),a("h3",[t._v(t._s(t.loanInfoBankDetail))])])])])]):t._e(),t._v(" "),t.stampDutyPaid?a("div",[t.fetchingLoanDocuments?a("jobber",{attrs:{main:"Fetching your loan documents",sub:"",loader:!0}}):t._e(),t._v(" "),t.fetchingLoanDocuments?t._e():a("div",{staticClass:"row stamp-duty-paid"},[a("div",{staticClass:"six columns"},[t.documentsList.length>0?a("div",{staticClass:"steps-container"},[a("div",{staticClass:"step",class:{active:1===t.step,done:t.step>1}},[t.step>1?a("span",{staticClass:"icon icon-check"}):a("span",[t._v("1")])]),t._v(" "),a("h2",{staticClass:"text-grey"},[t._v("e-Sign "+t._s(1===t.step?t.documentsList[0].name:""))]),t._v(" "),1===t.step?a("div",{staticClass:"step-vertical",class:{active:1===t.step,done:t.step>1}},[a("p",[t._v(t._s(t.documentDescriptions[t.documentsList[0].file_type]))]),t._v(" "),a("su-button",{staticClass:"btn-blue",attrs:{processing:t.digioBtnProcessing,disabled:t.digioBtnProcessing},nativeOn:{click:function(e){return e.preventDefault(),t.uploadToDigio(t.documentsList[0])}}},[t._v("Continue")])],1):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"steps-container"},[a("div",{staticClass:"step",class:{active:2===t.step,done:t.step>2}},[t.step>2?a("span",{staticClass:"icon icon-check"}):a("span",[t._v("2")])]),t._v(" "),a("h2",{staticClass:"text-grey"},[t._v("e-Pledge")]),t._v(" "),2===t.step?a("div",{staticClass:"step-vertical",class:{active:2===t.step,done:t.step>2}},[a("p",[t._v("Pledge the selected holdings to Zerodha Capital Pvt. Ltd. via CDSL e-Pledge facility.")]),t._v(" "),a("div",{staticClass:"invoke-table-container"},[a("su-table",{attrs:{headers:t.invokePledgeDetailsHeaders,data:t.invokePledgeDetails},scopedSlots:t._u([{key:"default",fn:function(e){return[a("td",{staticClass:"textleft"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.row.tradingsymbol)+"\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("td",{staticClass:"textleft"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.row.isin)+"\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.row.quantity)+"\n\t\t\t\t\t\t\t\t\t\t")])]}}],null,!1,238643729)}),t._v(" "),a("div",{staticClass:"invoke-table-footer"},[t.isTopupAvailableOnInitiatePledge?a("su-checkbox",{attrs:{label:"Disbursement not required"},model:{value:t.isDisbursementNotRequired,callback:function(e){t.isDisbursementNotRequired=e},expression:"isDisbursementNotRequired"}}):t._e(),t._v(" "),t.btnContinueInvokePledge?a("su-button",{staticClass:"btn-blue",nativeOn:{click:function(e){return e.preventDefault(),t.continueInvokePledge.apply(null,arguments)}}},[t._v("Initiate e-Pledge")]):t._e(),t._v(" "),t.btnConfirmInvokePledge?a("su-button",{staticClass:"btn-blue",attrs:{processing:t.invokePledgeProcessing,disabled:t.invokePledgeProcessing},nativeOn:{click:function(e){return e.preventDefault(),t.confirmInvokePledge.apply(null,arguments)}}},[t._v("Confirm e-Pledge")]):t._e()],1)],1)]):t._e()])]),t._v(" "),a("div",{staticClass:"six columns stamp-duty-paid-textarea"},[a("div",{staticClass:"row"},[a("div",{staticClass:"six columns"},[a("label",{staticClass:"label text-grey"},[t._v("Loan amount offered")]),t._v(" "),a("h2",[t._v("₹"+t._s(t.loanInfoPledgingAmount))])]),t._v(" "),a("div",{staticClass:"six columns"},[a("label",{staticClass:"label text-grey"},[t._v("Applicable interest rate")]),t._v(" "),a("div",[a("h2",[t._v(t._s(t.loanInfoInterestRate)+"%  ")])])])]),t._v(" "),a("p",{staticClass:"text-light-grey text-xsmall annum-charge"},[t._v("*Interest rate per annum is charged on a monthly basis. Tenure is 1 year (Automatic renewable).")]),t._v(" "),a("hr"),t._v(" "),a("div",[a("label",{staticClass:"label text-grey"},[t._v("Purpose of the loan")]),t._v(" "),a("h3",[t._v(t._s(t.loanInfoPurpose))])]),t._v(" "),a("div",[a("label",{staticClass:"label text-grey"},[t._v("Bank account")]),t._v(" "),a("h3",[t._v(t._s(t.loanInfoBankDetail))])])])])],1):t._e()],1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[a("span",{staticClass:"icon icon-credit-card"}),t._v("\n\t\t\t\t\t\t\tClose loan\n\t\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notice text-box yellow"},[a("ul",[a("li",[a("span",[t._v("\n\t\t\t\t\t\t\t\t\t\tRepay the following amount to close your loan. We will unpledge all the pledged stocks after due procedure.\n\t\t\t\t\t\t\t\t\t")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tenure"},[a("label",{staticClass:"label text-light-grey"},[t._v("Tenure")]),t._v(" "),a("p",[t._v("1 Year")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"four columns"},[a("label",{staticClass:"label text-light-grey"},[t._v("Due date")]),t._v(" "),a("h2",{staticClass:"text-light-grey"},[t._v("N/A")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"text-small",attrs:{href:"https://zerodhacapital.com/tos/faq#ckyc",target:"_blank"}},[a("span",{staticClass:"icon icon-help-circle"}),a("span",[t._v("Learn more")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"five columns img-kyc-confirm hide-on-mobile"},[a("img",{attrs:{src:"/static/images/kyc-confirm.svg"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v("Confirm your KYC")]),t._v(" "),a("hr"),a("br")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"five columns"},[a("a",{attrs:{href:"https://signup.zerodha.com/kite/login?source=nbfc",target:"_blank"}},[t._v("Have your KYC details changed?")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center"},[a("img",{staticClass:"img-loan-sub",attrs:{src:"/static/images/loan-req.svg"}}),t._v(" "),a("p",[t._v("Processing fee successfully paid! "),a("br"),t._v("Your documents are being prepared. We let you know once they are ready.")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"six columns processing-documents-imgarea text-center"},[a("img",{staticClass:"img-loan-sub",attrs:{src:"/static/images/loan-req.svg"}}),t._v(" "),a("h2",[t._v("Preparing your documents")]),t._v(" "),a("p",[t._v("Your loan documents are currently being prepared for you to e-Sign. We will notify you within 2-3 working days on your registered email ID and mobile number.")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"six columns loan-request-initiated-imgarea text-center"},[a("img",{staticClass:"img-loan-sub",attrs:{src:"/static/images/loan-req.svg"}}),t._v(" "),a("h2",[t._v("Loan request initiated")]),t._v(" "),a("p",[t._v("It takes 2-3 working days for the loan amount to be disbursed to your bank account. We will notify you when the process is complete.")])])}],i=a("bc3a"),r=a.n(i),o=a("2f62"),l=a("8508"),c=a.n(l),d=a("1fa4"),u=a("ee54"),h=a("2e34"),p=a("eeee"),_=a("5dfe"),m=a("a210"),g=a("0138"),v=a("02bc"),f=a("48f1"),b=a("19b7"),y=a("3fb9"),C=a("89be"),w=a("3912");function k(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=x(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,o=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){o=!0,i=t},f:function(){try{r||null==a.return||a.return()}finally{if(o)throw i}}}}function x(t,e){if(t){if("string"===typeof t)return S(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?S(t,e):void 0}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}function T(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function P(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?T(Object(a),!0).forEach((function(e){D(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function D(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function E(t){return E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function I(t){var e=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),s=0;s<a.length;s++){var n=a[s].trim();if(n.substring(0,t.length+1)===t+"="){e=decodeURIComponent(n.substring(t.length+1));break}}return e}var O=b["b"],R=I("public_token"),M=r.a.create({timeout:1e4,responseType:"json",headers:{"X-CSRFToken":R,"Content-Type":"application/json"}}),A=r.a.create({timeout:1e4,responseType:"json",headers:{"X-CSRFToken":R,"Content-Type":"application/json"}}),F=r.a.create({timeout:15e3,responseType:"json",headers:{"X-CSRFToken":R,"Content-Type":"application/json"}});function L(t){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a="",s=t;return"object"===E(s)?(s=s.toString(),a+=s.split(" ")[3]+"-",e.indexOf(s.split(" ")[1])+1<10?a+="0"+(e.indexOf(s.split(" ")[1])+1):a+=e.indexOf(s.split(" ")[1])+1,a+="-"+s.split(" ")[2]):"string"===typeof s&&(a=s),a}var N={components:{"su-button":_["a"],"su-input":m["a"],"su-select":g["a"],"loan-table":f["a"],offers:u["a"],jobber:h["a"],empty:v["a"],"su-table":p["a"],error:y["default"],init:C["a"],fatca:d["a"],datepicker:c.a},mixins:[w["a"]],data:function(){return{step:1,ckycNumber:"",format:"YYYY-MM-DD",dateOfBirth:"",pledgedDetails:{selected:1,tenureOptions:[{text:"1 Year",value:1}]},razorpayPaymentId:null,reqClosure:"0",paymentMode:"cashier",additionalPledgeAmount:0,searchQuery:"",filterBy:"",sortKey:"tradingsymbol",sortBy:"asc",columns:["","loan_available","enter_loan_value","pledge_qty","pledge_value"],ckycData:{},holdings:[],editingKyc:!1,editKycSection:"",totalPledgeValue:0,pledgedHoldings:{},showLoansDashboard:!1,showOffers:!1,isCkycDataAvailable:!1,isKycDetailsAreCorrect:!1,isZerodhaCapitalToCheckCreditScore:!1,isCkycDetailsCorrect:!1,isAgreedToFetchKycDetails:!1,isAgreedToShareDematAccount:!1,isAgreedToShareBankAccount:!1,imageBytes:"",interestRate:0,loanInfoInterestRate:0,loanInfoPledgingAmount:0,loanInfoPurpose:"",loanInfoBankDetail:"",existingLoan:null,repaymentSuccess:!1,totalRepaymentAmount:0,minimumPaymentAmount:0,minimumRepaymentPossible:50,currentLTVRatio:0,repaymentAmount:50,existingLoanInterest:0,loanApplicantEmailId:"",loanApplicantName:"",loanApplicantMobile:"",totalOutstanding:0,shortfallAmount:0,shortfallAmountEntered:0,shortfallDuedate:"",nbfcInitiating:!0,nbfcInitiated:!1,isLoansStatusFailed:!1,isKycCorrectionShown:!1,isFATCACorrectionShown:!1,isIPVCorrectionShown:!1,ipvRedoUrl:"",eligibilityFailed:!1,preparingEligibility:!1,dashboardHoldingsDataLoaded:!1,dashboardHoldingsDataFailed:!1,dashboardHoldingsDataFetchFailed:!1,processingFeePaid:!1,processingDocuments:!1,loanRequestInitiated:!1,stampDutyPaid:!1,fetchingLoanDocuments:!1,documentsList:[],currentDate:"",processingFatcaRedirect:!1,showFatcaContainer:!1,eligibilityEmptyStatus:{message:"",data:{dp_details:{},stocks:[],kyc_data:{},bank_details:[]},status:""},bankDetailsHeader:[{class:[],label:"",field:""},{class:[],label:"Account No",field:"account_no"},{class:[],label:"Bank",field:"bank"}],errors:"",digioBtnProcessing:!1,processingRazorPayment:!1,isProcessing:!1,documentDescriptions:{Termsheet:"A term sheet is an express acknowledgement given by the borrower to the lender with respect to understanding all the lender's terms, policies, conditions with respect to each loan and disbursement availed, along with the details of the securities so moved by the borrower towards the lender to secure each loan or disbursement.","MLA+Termsheet":"The Master Loan Agreement is a written contract between a Borrower & Lender stating in detail all terms, conditions, and stipulations regarding the sanctioned loan, and such future part loans or disbursements falling under the same sanctioned loan."},invokePledgeProcessing:!1,invokePledgeDetails:[],isTopupAvailableOnInitiatePledge:!1,isDisbursementNotRequired:!1,btnContinueInvokePledge:!1,btnConfirmInvokePledge:!1,invokePledgeDetailsHeaders:[{class:[],label:"Symbol",field:"tradingsymbol"},{class:[],label:"ISIN",field:"isin"},{class:[],label:"Quantity",field:"quantity"}],isReKycRequired:!1,isReKycProcessing:!1,reKycMessage:"",loansStatusErrorMessage:"",loansClosureAmount:0,isLoanInWaitList:!1,waitListTextMessage:"",waitListSubTextMessage:"",loanClosureRepaymentOrderId:"",cashierPopupUrl:"",loanRepaymentOrderId:"",panConsentRequired:0,isPanConsentChecked:!1,vpa:""}},beforeCreate:function(){var t=document.createElement("script"),e=document.createElement("script");t.setAttribute("src","https://checkout.razorpay.com/v1/checkout.js"),document.head.appendChild(t);for(var a=document.getElementsByTagName("script"),s=!1,n=0;n<a.length;n++)"https://otp.zerodha.com/static/otp.js"===a[n].getAttribute("src")&&(s=!0);s||(e.setAttribute("src","https://otp.zerodha.com/static/otp.js?v=1.2.1"),e.setAttribute("id","otpgateway-script"),document.head.appendChild(e))},created:function(){document.addEventListener("beforeunload",(function(t){this.stocksPledged=[],this.loanTotalValue=0}))},mounted:function(){var t=this,e=this;if(window.addEventListener("keyup",(function(t){27===t.keyCode&&e.hideSearch()})),this.currentDate=this.getCurrentDate(),void 0!==this.$route.query.auth_hash&&void 0!==this.$route.query.client_id){var a={};a.auth_hash=this.$route.query.auth_hash,a.client_id=this.$route.query.client_id,A.post("/api/loans/ipv",a).then((function(e){t.onIPVFetchSuccess(e)})).catch((function(e){t.onIPVFetchFailed(e),401===e.response.status&&(window.location.href="/")}))}else this.getLoansStatus()},computed:P(P({},Object(o["c"])(O,["stocksPledged","loanTotalValue","collateralList","existingLoanAmountPopUp","loanClosurePopUp"])),{},{isMobileView:function(){return this.$store.getters.isMobileView},loanValue:function(){var t,e=0;if(this.pledgedHoldings.holdingsSelect){var a,s=k(this.pledgedHoldings.holdings);try{for(s.s();!(a=s.n()).done;){var n=a.value;e+=n.loan_value}}catch(i){s.e(i)}finally{s.f()}t=e}else t=this.totalPledgeValue;return t},checkCKYCVerification:function(){return!this.dateOfBirth||""===this.ckycNumber||!this.isCkycDetailsCorrect||!this.isAgreedToFetchKycDetails||!this.isAgreedToShareDematAccount||!this.isAgreedToShareBankAccount},loadNBFCInitiateJobber:function(){return!this.nbfcInitiating&&!this.nbfcInitiated&&!this.isCkycDataAvailable&&!this.preparingEligibility&&!this.showLoansDashboard&&!this.processingDocuments&&!this.loanRequestInitiated&&!this.stampDutyPaid&&!this.processingFeePaid&&!this.eligibilityFailed&&!this.isLoanInWaitList},showNBFCInitiate:function(){return this.nbfcInitiated&&!this.isCkycDataAvailable&&!this.preparingEligibility&&!this.showLoansDashboard&&!this.processingDocuments&&!this.loanRequestInitiated},loadFetchingKYCDetailsJobber:function(){return this.nbfcInitiated&&!this.isCkycDataAvailable&&this.preparingEligibility&&!this.processingDocuments&&!this.loanRequestInitiated&&!this.eligibilityFailed},showFetchedKYCDetails:function(){return this.nbfcInitiated&&!this.processingDocuments&&!this.loanRequestInitiated&&!this.showLoansDashboard&&this.isCkycDataAvailable&&!this.preparingEligibility&&!this.eligibilityFailed},loadHoldingsDataJobber:function(){return this.showLoansDashboard&&!this.dashboardHoldingsDataLoaded&&!this.eligibilityFailed},showHoldingsData:function(){return this.showLoansDashboard&&this.dashboardHoldingsDataLoaded},repaymentTextColor:function(){return-1!==["Closed","Loan Closure Requested"].indexOf(this.existingLoan.status)?"#9b9b9b":""}}),methods:P(P({},Object(o["b"])(O,["postStocksPledgeData","getPledgedHoldingsData","postStocksTotalAmount","makeRepayment","makeLoanClosurePayment","activatePopUp","activateLoanClosurePopup"])),{},{closeLoan:function(){var t=this;M.get("/api/loans/closure").then((function(e){var a=e.data;"SUCCESS"===a.status.toUpperCase()&&(t.loansClosureAmount=a.data&&a.data.payable_amount)}))},hideLoanClosurePopUp:function(){this.activateLoanClosurePopup(!1)},showLoanClosurePopUp:function(){this.activateLoanClosurePopup(!0)},redirectToLoanInvite:function(){this.$router.push("/loans/get-invite")},getLoansStatus:function(){var t=this;M.get("/api/loans/status").then((function(e){var a=e.data;t.nbfcInitiating=!1,"ELIGIBILITY_SUCCESS"===a.message?(t.showLoansDashboard=!0,t.isCkycDataAvailable=!0):"WAITLIST_REQUIRED"===a.message&&(t.isLoanInWaitList=!0,t.waitListTextMessage="Get early access to Loan Against Securities",t.waitListSubTextMessage="Thank you for your interest in the Loan Against Securities (LAS) beta programme. Please join the waitlist for early access. You'll receive an email from us once your LAS account is approved."),t.getLoansOverview(a)})).catch((function(e){t.isLoansStatusFailed=!0;var a=e.response.status;420===a?(M.get("/api/loans/kyc_correction").then((function(e){var a=e.data;if("SUCCESS"===a.status){var s=a.data&&a.data.correction_required;t.isFATCACorrectionShown=-1!==s.indexOf("fatca"),t.isIPVCorrectionShown=-1!==s.indexOf("ipv"),t.isIPVCorrectionShown&&(t.ipvRedoUrl=a.data&&a.data.ipv||"")}})),t.isKycCorrectionShown=!0):422===a?t.$toast.error({message:"Error: "+e.response.data.message,orientation:t.$toast.TOP_RIGHT,duration:1e5}):-1!==[500,501,502,503,504,505,506,507,508,510,511].indexOf(a)?t.loansStatusErrorMessage="NBFC server is unavailable. Please try after some time.":t.loansStatusErrorMessage=""}))},onIPVFetchSuccess:function(t){200===t.status?(this.$router.push("/loans/"),this.getLoansStatus()):this.$toast.error({message:"Error fetching IPV status: "+t.data.message||!1,orientation:this.$toast.TOP_RIGHT,duration:6e3})},onIPVFetchFailed:function(t){var e="Failed to fetch IPV status";t.response?e+=": "+t.response.data.message:t.message&&(e+=": "+t.message),this.$toast.error({message:e,orientation:this.$toast.TOP_RIGHT,duration:6e3})},onSwitchToLoansDashboard:function(t){Object.keys(t).length>0?this.getLoansOverview(t):(this.showHoldingsData=!0,this.showOffers=!1)},continueInvokePledge:function(){var t=this;A.post("/api/loans/otpcreate",{reason:"pledge",provider:"mobile"}).then((function(e){var a=t;"SUCCESS"===e.data.status.toUpperCase()&&e.data.data&&e.data.data.id&&e.data.data.namespace&&OTPGateway(e.data.data.namespace,e.data.data.id,(function(t,e){a.verifyOtpProcessInvokePledge()}),(function(){this.btnContinueInvokePledge=!1,this.btnConfirmInvokePledge=!0}))}))},confirmInvokePledge:function(){var t=this;this.invokePledgeProcessing=!0;var e=!this.isDisbursementNotRequired;r.a.create({timeout:3e4,responseType:"json",headers:{"X-CSRFToken":R,"Content-Type":"application/json"}}).post("/api/loans/epledge",{disbursement_required:+e}).then((function(e){t.invokePledgeProcessing=!1;var a=e.data;"SUCCESS"===a.status.toUpperCase()&&(t.step+=1,t.getLoansOverview(a))})).catch((function(e){t.invokePledgeProcessing=!1;var a="Failed to initiate e-Pledge";e.response?a+=": "+e.response.data.message:e.message&&(a+=": "+e.message),t.$toast.error({message:a,orientation:t.$toast.TOP_RIGHT,duration:6e3}),401===e.response.status&&(window.location.href="/")}))},invokePledge:function(){var t=this;M.get("/api/loans/initiatepledge").then((function(e){var a=e.data;if("SUCCESS"===a.status){var s=a.data;t.invokePledgeDetails=s&&s.stocks,t.btnContinueInvokePledge=!0,t.isTopupAvailableOnInitiatePledge=s&&s.topup}})).catch((function(e){var a="Failed to fetch pledge details";e.response?a+=": "+e.response.data.message:e.message&&(a+=": "+e.message),t.$toast.error({message:a,orientation:t.$toast.TOP_RIGHT,duration:6e3}),401===e.response.status&&(window.location.href="/")}))},existingLoanPayment:function(){this.activatePopUp(!0),this.closeLoan()},editMobileModal:function(t){this.editKycSection=t,this.showEditKycModal()},hideEditKycModal:function(){this.editingKyc=!1},verifyOtp:function(){var t=this;A.post("/api/loans/otpverify",{provider:"mobile"}).then((function(e){t.editingKyc=!1,t.editKycSection="","SUCCESS"===e.data.status.toUpperCase()?(t.$toast.success({message:"Your mobile number is updated to "+e.data.data.to,orientation:t.$toast.TOP_RIGHT,duration:6e3}),t.ckycData.mobile=e.data.data.to):t.$toast.error({message:"Error editing profile data: "+e.data.message||!1,orientation:t.$toast.TOP_RIGHT,duration:6e3})})).catch((function(e){t.editingKyc=!1,t.editKycSection="";var a="Failed to edit data";e.response?(a+=": "+e.response.data.message,t.errorMessage=e.response.data.message):e.message&&(a+=": "+e.message,t.errorMessage=e.message),t.$toast.error({message:a,orientation:t.$toast.TOP_RIGHT,duration:6e3}),401===e.response.status&&(window.location.href="/")}))},verifyOtpProcessInvokePledge:function(){var t=this;A.post("/api/loans/otpverify",{reason:"pledge"}).then((function(e){"SUCCESS"===e.data.status.toUpperCase()?(t.$toast.success({message:"OTP verified "+e.data.data.to,orientation:t.$toast.TOP_RIGHT,duration:6e3}),t.btnContinueInvokePledge=!1,t.btnConfirmInvokePledge=!0):t.$toast.error({message:"Error verifying OTP: "+e.data.message||!1,orientation:t.$toast.TOP_RIGHT,duration:6e3})})).catch((function(e){t.btnContinueInvokePledge=!0,t.btnConfirmInvokePledge=!1;var a="Failed to verify OTP";e.response?(a+=": "+e.response.data.message,t.errorMessage=e.response.data.message):e.message&&(a+=": "+e.message,t.errorMessage=e.message),t.$toast.error({message:a,orientation:t.$toast.TOP_RIGHT,duration:6e3}),401===e.response.status&&(window.location.href="/")}))},showEditKycModal:function(){var t=this;this.editingKyc=!0,A.post("/api/loans/otpcreate",{provider:"mobile"}).then((function(e){t.hideEditKycModal();var a=t;"SUCCESS"===e.data.status.toUpperCase()&&e.data.data&&e.data.data.id&&e.data.data.namespace?OTPGateway(e.data.data.namespace,e.data.data.id,(function(t,e){a.verifyOtp()}),(function(){a.editingKyc=!1,a.editKycSection=""})):(t.editingKyc=!1,t.editKycSection="",t.$toast.error({message:"Error editing profile data: "+e.data.message||!1,orientation:t.$toast.TOP_RIGHT,duration:6e3}))})).catch((function(e){t.editingKyc=!1,t.editKycSection="";var a="Failed to edit profile data";e.response?(a+=": "+e.response.data.message,t.errorMessage=e.response.data.message):e.message&&(a+=": "+e.message,t.errorMessage=e.message),t.$toast.error({message:a,orientation:t.$toast.TOP_RIGHT,duration:6e3}),401===e.response.status&&(window.location.href="/")}))},hideExistingLoanAmountPopUp:function(){this.activatePopUp(!1)},loanInfoDetails:function(t){this.loanInfoInterestRate=t.interest_rate,this.loanInfoPledgingAmount=t.loan_amount,this.loanInfoPurpose=t.loan_purpose;var e=t.bank_details.account_number.toString().length;this.loanInfoBankDetail=t.bank_details.name+" — XXX "+t.bank_details.account_number.toString().slice(e-4,e)},confirmPayLoanClosureAmount:function(){var t=this;this.processingRazorPayment=!0,A.post("/api/loans/orderid",{amount:this.loansClosureAmount,closure:1}).then((function(e){var a=e.data;t.loanClosureRepaymentOrderId=a.data&&a.data.order_id})).then((function(){var e=t.loansClosureAmount,a=t,s={key:Object({NODE_ENV:"production",BASE_URL:"/"}).RAZORPAY_KEY,amount:(100*e).toFixed(2),name:"Zerodha",description:"Repayment towards loan",image:"https://zerodha.com/static/images/logo.svg",order_id:t.loanClosureRepaymentOrderId,transfers:[{account:"acc_IUuDn6aEdxWpeY",amount:(100*e).toFixed(2),currency:"INR",notes:{branch:"Richmond Road",name:"ZERODHA CAPITAL PVT LTD COLLECTION A/C"},linked_account_notes:["branch"],on_hold:0}],config:{display:{hide:[{method:"card"}],preferences:{show_default_blocks:!0}}},handler:function(a){t.makeLoanClosurePayment({panConsent:t.panConsentRequired,amount:e,paymentId:a.razorpay_payment_id,orderId:t.loanClosureRepaymentOrderId}).then((function(e){t.repaymentSuccess=!0,200===e.status&&(t.$toast.success({message:"Loan closure repayment is successful",orientation:t.$toast.TOP_RIGHT,duration:6e3}),window.location.href="/loans/",t.getLoansStatus())})).catch((function(e){var a="Failed to pay the amount";e.response?a+=": "+e.response.data.message:e.message&&(a+=": "+e.message),t.$toast.error({message:a,orientation:t.$toast.TOP_RIGHT,duration:6e3}),401===e.response.status&&(window.location.href="/")}))},modal:{ondismiss:function(){a.processingRazorPayment=!1}},prefill:{name:t.loanApplicantName,email:t.loanApplicantEmailId,contact:t.loanApplicantMobile},theme:{color:"#0259c1"}},n=new window.Razorpay(s);n.open()})).catch((function(e){var a=e.response.data;t.$toast.error({message:a.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}),401===e.response.status&&(window.location.href="/")}))},updateDashboard:function(){var t=this;F.get("/api/loans/overview").then((function(e){var a=e.data;t.isCkycDataAvailable=!1,t.showLoansDashboard=!0,a.data&&Object.keys(a.data).length&&(t.interestRate=a.data.interest_rate,t.panConsentRequired=a.data.pan_consent_required||0,t.existingLoanInterest=a.data.existing_loan&&a.data.existing_loan.interest_rate,t.totalOutstanding=a.data.existing_loan&&a.data.existing_loan.pending_principal_amount,t.minimumPaymentAmount=a.data.existing_loan&&a.data.existing_loan.payable_amount,t.currentLTVRatio=a.data.existing_loan&&a.data.existing_loan.current_ltv_ratio,t.shortfallAmount=a.data.existing_loan&&a.data.existing_loan.shortfall_amount,t.shortfallAmountEntered=a.data.existing_loan&&a.data.existing_loan.shortfall_amount,t.shortfallDuedate=a.data.existing_loan&&a.data.existing_loan.due_date,t.additionalPledgeAmount=a.data.existing_loan&&a.data.existing_loan.additional_pledge_amount)})).catch((function(e){var a="";e.response?(a=e.response.data.message,t.dashboardHoldingsDataFailed=!0):e.request?(a="Could not fetch your holdings. Try again later.",t.dashboardHoldingsDataFetchFailed=!0):e.message&&(a=e.message),t.$toast.error({message:a,orientation:t.$toast.TOP_RIGHT,duration:6e3}),401===e.response.status&&(window.location.href="/")}))},_makeRepayment:function(){var t=this;this.makeRepayment({panConsent:this.panConsentRequired,amount:this.totalRepaymentAmount,orderId:this.loanRepaymentOrderId,paymentMode:this.paymentMode,reqClosure:parseInt(this.reqClosure),paymentId:this.razorpayPaymentId}).then((function(e){t.repaymentSuccess=!0,"SUCCESS"===e.status&&(t.$toast.success({message:"Repayment successful",orientation:t.$toast.TOP_RIGHT,duration:6e3}),t.updateDashboard()),t.processingRazorPayment=!1})).catch((function(e){var a="Error";e.response?a+=": "+e.response.data.message:e.message&&(a+=": "+e.message),t.$toast.error({message:a,orientation:t.$toast.TOP_RIGHT,duration:6e3}),401===e.response.status&&(window.location.href="/"),t.processingRazorPayment=!1}))},openPopup:function(){var t=900,e=700,a=screen.width?(screen.width-t)/2:100,s=screen.height?(screen.height-e)/2:100,n="width="+t+",height="+e+",top="+s+",left="+a+",scrollbars=yes,location=no,directories=no,status=no,menubar=no,toolbar=no,resizable=no",i=window.open(this.cashierPopupUrl,"Make loan repayment",n);function r(){i&&!i.closed&&i.focus()}i.focus(),document.onclick=r,document.onkeyup=r,document.onmousemove=r;var o=this,l=window.setInterval((function(){!1!==i.closed&&(window.clearInterval(l),o._makeRepayment())}),200)},confirmPaymentAmount:function(){this.processingRazorPayment=!0,"1"===this.reqClosure?this.totalRepaymentAmount=Number(this.loansClosureAmount.toFixed(2)):this.totalRepaymentAmount=Number(this.shortfallAmountEntered.toFixed(2))||Number(this.repaymentAmount.toFixed(2)),"cashier"===this.paymentMode?this.createCashierOrder():this.createRazorpayOrder()},createCashierOrder:function(){var t=this;A.post("/api/loans/orderid",{amount:this.totalRepaymentAmount,vpa:this.vpa,closure:parseInt(this.reqClosure),payment_mode:this.paymentMode}).then((function(e){var a=e.data;t.cashierPopupUrl=a.data&&a.data.url,t.loanRepaymentOrderId=a.data&&a.data.id})).then((function(){t.processingRazorPayment=!0,t.openPopup()})).catch((function(e){var a=e.response.data;t.processingRazorPayment=!1,t.$toast.error({message:a.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}),401===e.response.status&&(window.location.href="/")}))},createRazorpayOrder:function(){var t=this;A.post("/api/loans/orderid",{amount:this.totalRepaymentAmount,closure:parseInt(this.reqClosure),payment_mode:this.paymentMode}).then((function(e){var a=e.data;t.loanRepaymentOrderId=a.data&&a.data.order_id})).then((function(){var e=t,a={key:Object({NODE_ENV:"production",BASE_URL:"/"}).RAZORPAY_KEY,amount:(100*t.totalRepaymentAmount).toFixed(2),name:"Zerodha",description:"Paying amount",image:"https://zerodha.com/static/images/logo.svg",order_id:t.loanRepaymentOrderId,transfers:[{account:"acc_IUuDn6aEdxWpeY",amount:(100*t.totalRepaymentAmount).toFixed(2),currency:"INR",notes:{branch:"Richmond Road",name:"ZERODHA CAPITAL PVT LTD COLLECTION A/C"},linked_account_notes:["branch"],on_hold:0}],config:{display:{hide:[{method:"card"},{method:"upi"}],preferences:{show_default_blocks:!0}}},handler:function(e){t.razorpayPaymentId=e.razorpay_payment_id,t._makeRepayment()},modal:{ondismiss:function(){e.processingRazorPayment=!1}},prefill:{name:t.loanApplicantName,email:t.loanApplicantEmailId,contact:t.loanApplicantMobile},theme:{color:"#0259c1"}},s=new window.Razorpay(a);s.open()})).catch((function(e){var a=e.response.data;t.processingRazorPayment=!1,t.$toast.error({message:a.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}),401===e.response.status&&(window.location.href="/")}))},digioSuccess:function(t){var e=this;A.post("/api/loans/updatedocs",{id:t}).then((function(t){if("SUCCESS"===t.data.status.toUpperCase()){var a=t.data;e.getLoansOverview(a)}})).catch((function(t){var a="Update documents failed";t.response?a+=": "+t.response.data.message:t.message&&(a+=": "+t.message),e.$toast.error({message:a,orientation:e.$toast.TOP_RIGHT,duration:6e3}),401===t.response.status&&(window.location.href="/")}))},getCurrentDate:function(){var t=new Date,e=t.getDate(),a=t.getMonth()+1,s=t.getFullYear();return e<10&&(e="0"+e),a<10&&(a="0"+a),t=s+"-"+a+"-"+e,t},uploadToDigio:function(t){var e=this;this.digioBtnProcessing=!0;var a="https://notary.zerodha.com/notary/api/v1/sign/"+t.id,s=1e3,n=700,i=screen.width?(screen.width-s)/2:100,r=screen.height?(screen.height-n)/2:100,o="width="+s+",height="+n+",top="+r+",left="+i+",scrollbars=yes,location=no,directories=no,status=no,menubar=no,toolbar=no,resizable=no",l=window.open(a,"digio",o);setTimeout((function(){function a(){l&&!l.closed&&l.focus()}l.focus(),document.onclick=a,document.onkeyup=a,document.onmousemove=a;var s=e,n=window.setInterval((function(){!1!==l.closed&&(window.clearInterval(n),s.digioBtnProcessing=!1,s.digioSuccess(t.id))}),200)}),1e3)},onClickKyc:function(){var t=this,e=this.dateOfBirth,a=L(e),s={ckyc_number:this.ckycNumber,dob:a};this.isCkycDataAvailable=!1,this.preparingEligibility=!0,r.a.create({timeout:3e4,responseType:"json",headers:{"X-CSRFToken":R,"Content-Type":"application/json"}}).post("/api/loans/kyc",s).then((function(e){var a=e.data;t.ckycData=a.data,t.preparingEligibility=!1,t.isCkycDataAvailable=!0})).catch((function(e){t.isCkycDataAvailable=!1,t.preparingEligibility=!1;var a=e.response.data;t.reKycMessage=a.message,417===e.response.status?(t.eligibilityFailed=!0,t.isReKycRequired=!0):419===e.response.status?(t.eligibilityFailed=!0,t.isReKycProcessing=!0):420===e.response.status?t.$router.push("/loans/kyc"):t.$toast.error({message:a.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}),401===e.response.status&&(window.location.href="/")}))},getLoansOverview:function(t){var e=this;"ONBOARDING_PENDING"===t.message?(this.nbfcInitiated=!0,this.preparingEligibility=!1,M.get("/api/user_profile").then((function(t){var a=t.data;if("SUCCESS"===a.status.toUpperCase()){var s=a.data.result[0].dob;e.ckycNumber=a.data.result[0].ckyc_number,e.dateOfBirth=s.slice(0,10)}})).catch((function(t){if(408===t.response.status||"ECONNABORTED"===t.code)e.$toast.error({message:"Request timed out. Please try again.",orientation:e.$toast.TOP_RIGHT,duration:6e3});else{var a="Failed to load profile data";t.response?a+=": "+t.response.data.message:t.message&&(a+=": "+t.message),e.$toast.error({message:a,orientation:e.$toast.TOP_RIGHT,duration:6e3})}401===t.response.status&&(window.location.href="/")}))):"ELIGIBILITY_SUCCESS"===t.message?this.showLoansDashboard&&F.get("/api/loans/overview").then((function(t){var a=t.data;if(e.isCkycDataAvailable=!1,e.showLoansDashboard=!0,a.data&&Object.keys(a.data).length){e.existingLoan=a.data.existing_loan,e.interestRate=a.data.interest_rate,e.panConsentRequired=a.data.pan_consent_required||0,e.holdings=a.data.holdings_estimate,e.existingLoanInterest=a.data.existing_loan&&a.data.existing_loan.interest_rate,e.totalOutstanding=a.data.existing_loan&&a.data.existing_loan.pending_principal_amount,e.loanApplicantEmailId=a.data.existing_loan&&a.data.existing_loan.email,e.loanApplicantName=a.data.existing_loan&&a.data.existing_loan.loan_applicant,e.loanApplicantMobile=a.data.existing_loan&&a.data.existing_loan.mobile,e.minimumPaymentAmount=a.data.existing_loan&&a.data.existing_loan.payable_amount,e.currentLTVRatio=a.data.existing_loan&&a.data.existing_loan.current_ltv_ratio,e.shortfallAmount=a.data.existing_loan&&a.data.existing_loan.shortfall_amount,e.shortfallAmountEntered=a.data.existing_loan&&a.data.existing_loan.shortfall_amount,e.shortfallDuedate=a.data.existing_loan&&a.data.existing_loan.due_date,e.additionalPledgeAmount=a.data.existing_loan&&a.data.existing_loan.additional_pledge_amount;var s=0;e.holdings.map((function(t,e){s+=t.amount})),e.totalPledgeValue=s}else e.dashboardHoldingsDataLoaded=!0})).then((function(){e.dashboardHoldingsDataLoaded=!0})).catch((function(t){var a="";t.response?(a=t.response.data.message,e.dashboardHoldingsDataFailed=!0):t.request?(a="Could not fetch your holdings. Try again later.",e.dashboardHoldingsDataFetchFailed=!0):t.message&&(a=t.message),e.$toast.error({message:a,orientation:e.$toast.TOP_RIGHT,duration:6e3}),401===t.response.status&&(window.location.href="/")})):"ELIGIBILITY_FAILED"===t.message?this.eligibilityFailed=!0:"PROCESSING_FEE_PAID"===t.message?this.processingFeePaid=!0:"PROCESSING_DOCUMENTS"===t.message?(this.showLoansDashboard=!1,this.showOffers=!1,this.processingDocuments=!0,this.loanInfoDetails(t.data.loan_info)):"PLEDGE_SUCCESS"===t.message||"PLEDGE_PENDING"===t.message?(this.stampDutyPaid=!1,this.loanRequestInitiated=!0,this.loanInfoDetails(t.data.loan_info)):"DOCUMENTS_READY"!==t.message&&"DOCUMENTS_SIGNED"!==t.message||("DOCUMENTS_SIGNED"===t.message?(this.stampDutyPaid=!0,this.step=2,this.invokePledge(),this.loanInfoDetails(t.data.loan_info)):(this.fetchingLoanDocuments=!0,M.get("/api/loans/documents").then((function(t){e.step=1,e.documentsList=[];var a=t.data,s=a.data.documents,n=a.data.loan_info;for(var i in e.fetchingLoanDocuments=!1,s){var r={};r["id"]=s[i]["id"],r["identifier"]=s[i]["identifier"],r["file_type"]=s[i]["file_type"],e.documentsList.push(r)}e.showLoansDashboard=!1,e.showOffers=!1,e.loanInfoDetails(n)})).catch((function(t){var a="Failed to fetch loan documents";t.response?a+=": "+t.response.data.message:t.message&&(a+=": "+t.message),e.$toast.error({message:a,orientation:e.$toast.TOP_RIGHT,duration:6e3}),401===t.response.status&&(window.location.href="/")})),this.stampDutyPaid=!0))},onPledgedHoldings:function(t){this.pledgedHoldings=t},redirectToOffersPage:function(){var t,e=this,a=[],s=[];this.isProcessing=!0,t=void 0!==this.pledgedHoldings&&void 0!==this.pledgedHoldings.holdings&&this.pledgedHoldings.holdings.length>0?this.pledgedHoldings.holdings:this.stocksPledged;var n,i=k(t);try{for(i.s();!(n=i.n()).done;){var r=n.value,o={},l={};l.instrument_id=o.instrument_id=r.instrument_id,l.isin=o.isin=r.isin,l.quantity=o.quantity=r.pledge_qty,l.loan_value=r.loan_value,a.push(o),s.push(l)}}catch(c){i.e(c)}finally{i.f()}!s.length>0&&(s=this.stocksPledged),this.postStocksPledgeData(s),this.postStocksTotalAmount(this.loanValue),this.getPledgedHoldingsData(this.eligibilityEmptyStatus),A.post("/api/loans/offers",{stocks:a,amount:this.loanValue}).then((function(t){e.getPledgedHoldingsData(t.data)})).then((function(){e.showOffers=!0,e.isProcessing=!1})).catch((function(t){e.isProcessing=!1,e.showOffers=!1;var a="";t.response?a+=t.response.data.message:t.message&&(a+=t.message),e.$toast.error({message:a,orientation:e.$toast.TOP_RIGHT,duration:6e3}),401===t.response.status&&(window.location.href="/")}))},redirectToFatcaPage:function(){var t=this;this.isKycDetailsAreCorrect&&this.isZerodhaCapitalToCheckCreditScore&&(this.processingFatcaRedirect=!0,A.post("/api/loans/acceptkyc",{ckyc_status:1}).then((function(e){t.processingFatcaRedirect=!1,t.showFatcaContainer=!0})).catch((function(e){var a="Failed to redirect to fatca";e.response?a+=": "+e.response.data.message:e.message&&(a+=": "+e.message),t.$toast.error({message:a,orientation:t.$toast.TOP_RIGHT,duration:6e3}),401===e.response.status&&(window.location.href="/")})))},redirectToKiteLogin:function(){window.open("https://signup.zerodha.com/kite/login?source=nbfc","_self")}}),filters:{dateToReadableStr:function(t){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a="",s=t.split("-");return a+=s[2]+" "+e[Number(s[1]-1)]+" "+s[0],a}}},$=N,U=a("2877"),H=Object(U["a"])($,s,n,!1,null,null,null);e["default"]=H.exports},d361:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),a("hr",{staticClass:"header-hr"}),t._v(" "),a("div",{staticClass:"section"},[a("su-form",[a("div",{class:{locked:t.fetchingLedger,inputcontainer:!0,row:!0}},[a("div",{class:{three:!0,columns:!0,lockContainer:t.fetchingLedger,"su-input-group  su-static-label":!0}},[t.fetchingLedger?a("div",{staticClass:"input-lock"}):t._e(),t._v(" "),a("label",{staticClass:"su-input-label"},[t._v("Date")]),t._v(" "),a("datepicker",{attrs:{range:"",lang:"en","not-before":"2016-04-01","not-after":t.reportEndDate,format:t.format,placeholder:"To date"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t._v(" "),a("div",{class:{two:!0,columns:!0,lockContainer:t.fetchingLedger}},[a("label",[t._v(" ")]),a("br"),t._v(" "),t.fetchingLedger?t._e():a("su-button",{staticClass:"btn-blue",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.getLedgerDetails(t.dateRange[0],t.dateRange[1])}}},[t._v("View")]),t._v(" "),t.fetchingLedger?a("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"lock-img-container",attrs:{title:"Please wait while your report is being built"}},[a("img",{staticClass:"lock-class",attrs:{src:"/static/images/lock.svg"}}),t._v(" "),a("su-loader")],1):t._e()],1)])]),t._v(" "),t.fetchingLedger?a("div",{staticClass:"section text-center"},[a("jobber",{attrs:{main:"Fetching your interest statement",sub:"",loader:!0}})],1):t._e(),t._v(" "),t.initScreen?a("div",{staticClass:"section text-center"},[a("init")],1):t._e(),t._v(" "),!t.noResults||t.fetchingLedger||t.ledgerError?t._e():a("div",{staticClass:"section text-center"},[a("empty")],1)],1),t._v(" "),t.ledger_items.length>0?a("div",{staticClass:"loans section"},[a("div",{staticClass:"pledge-statements-container"},[a("su-table",{attrs:{headers:t.ledgerDetailsHeaders,data:t.ledger_items,pagination:"","per-page":t.perPage,"current-page":t.currentPage,"next-text":">","prev-text":"<"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("td",{staticClass:"textleft"},[t._v("\n\t\t\t\t\t\t"+t._s(e.row.posting_date)+"\n\t\t\t\t\t")]),t._v(" "),a("td",{staticClass:"textleft"},[t._v("\n\t\t\t\t\t\t"+t._s(e.row.remarks)+"\n\t\t\t\t\t")]),t._v(" "),a("td",{staticClass:"textright"},[t._v("\n\t\t\t\t\t\t"+t._s(e.row.debit)+"\n\t\t\t\t\t")]),t._v(" "),a("td",{staticClass:"textright"},[t._v("\n\t\t\t\t\t\t"+t._s(e.row.credit)+"\n\t\t\t\t\t")]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t"+t._s(e.row.net_balance)+"\n\t\t\t\t\t")])]}}],null,!1,754602693)})],1)]):t._e()])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",{staticClass:"v-align"},[a("span",{staticClass:"icon icon-credit-card"}),t._v("\n\t\tLoans\n\t\t"),a("img",{staticClass:"img-zerodha-capital hide-on-mobile",attrs:{src:"/static/images/zerodha-capital.svg"}})])}],i=a("8508"),r=a.n(i),o=a("bc3a"),l=a.n(o),c=a("2e34"),d=a("02bc"),u=a("89be"),h=a("3fb9"),p=a("5dfe"),_=a("5975"),m=a("eeee"),g=a("2f62");function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){b(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function b(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function y(t){var e=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),s=0;s<a.length;s++){var n=a[s].trim();if(n.substring(0,t.length+1)===t+"="){e=decodeURIComponent(n.substring(t.length+1));break}}return e}var C=y("public_token"),w=l.a.create({timeout:1e4,responseType:"json",headers:{"X-CSRFToken":C,"Content-Type":"application/json"}}),k="/api/loans/ledger";function x(t){var e=t,a=""+(e.getMonth()+1),s=""+e.getDate(),n=e.getFullYear();return a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),[n,a,s].join("-")}var S={components:{datepicker:r.a,jobber:c["a"],init:u["a"],empty:d["a"],error:h["default"],"su-button":p["a"],"su-loader":_["a"],"su-table":m["a"]},data:function(){return{perPage:20,currentPage:1,jobDone:!1,ledger_items:[],params:{},startDate:new Date,endDate:new Date,dateRange:[new Date,new Date],format:"YYYY-MM-DD",fetchingLedgerDetails:!1,noResults:!1,initScreen:!0,fetchingLedger:!1,ledgerError:!1,ledgerErrorMsg:"Please try again",ledgerDetailsHeaders:[{class:[],label:"Date",field:"posting_date"},{class:[],label:"Remarks",field:"remarks"},{class:[],label:"Debit",field:"debit"},{class:[],label:"Credit",field:"credit"},{class:[],label:"Net balance",field:"net_balance"}]}},computed:f({},Object(g["c"])(["reportEndDate"])),methods:{getLedgerDetails:function(t,e){var a=this;t?(this.startDate=new Date(t.getFullYear(),t.getMonth(),t.getDate()),this.endDate=e?new Date(e.getFullYear(),e.getMonth(),e.getDate()):new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),this.startDate>this.endDate?this.$toast.warning({message:"'To' parameter should be greater than or equal to 'From'",orientation:this.$toast.TOP_RIGHT,duration:6e3}):(this.noResults=!1,this.initScreen=!1,this.fetchingLedger=!0,this.ledgerError=!1,this.jobDone=!1,w.post(k,{from_date:x(this.startDate),to_date:x(this.endDate)}).then((function(t){a.ledger_items=[],"SUCCESS"===t.data.status.toUpperCase()?(a.fetchingLedger=!1,a.jobDone=!0,a.params={startDate:a.startDate,endDate:a.endDate},a.ledger_items=t.data.data.ledger.map((function(t,e){return t})),0===t.data.data.ledger.length?a.noResults=!0:(a.pages=Math.round(t.data.data.ledger.length/20)+1,a.noResults=!1)):(a.fetchingLedger=!1,a.ledgerError=!0,a.$toast.error({message:"Error fetching interest statement: "+t.data.message||!1,orientation:a.$toast.TOP_RIGHT,duration:6e3}))})).catch((function(t){a.fetchingLedger=!1,a.ledgerError=!0;var e="Failed to fetch interest statement";t.response?(e+=": "+t.response.data.message,a.ledgerErrorMsg=t.response.data.message):t.message&&(e+=": "+t.message,a.ledgerErrorMsg=t.message),a.$toast.error({message:e,orientation:a.$toast.TOP_RIGHT,duration:6e3}),401===t.response.status&&(window.location.href="/")})))):this.$toast.warning({message:"From date is required",orientation:this.$toast.TOP_RIGHT,duration:6e3})}}},T=S,P=a("2877"),D=Object(P["a"])(T,s,n,!1,null,null,null);e["default"]=D.exports},d68e:function(t,e,a){"use strict";e.asyncEach=function(t){t=t.slice(0);var e=arguments[arguments.length-1],a=Array.prototype.slice.call(arguments,1);function s(){if(0!==t.length){var a=t.shift();a.apply(this,Array.prototype.slice.call(arguments,0).concat(s))}else e.apply(this,arguments)}a.pop(),s.apply(this,a)},e.addEvent=function(t,e,a){document.addEventListener?t.addEventListener(e,a):t.attachEvent("on"+e,a)}},d796:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("su-form",{on:{submit:function(e){return e.preventDefault(),t.doneFatcaCorrection.apply(null,arguments)}}},[a("div",{staticClass:"section fatca"},[a("h2",[t._v("FATCA declaration "),a("span",{staticClass:"text-small text-light-grey"},[t._v("(Foreign Account Tax Compliance Act.)"),a("a",{attrs:{href:"https://zerodhacapital.com/tos/faq#fatca",target:"_blank"}},[a("span",{staticClass:"icon icon-help-circle"})])])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row input-container"},[a("div",{staticClass:"four columns"},[a("su-input",{attrs:{type:"text","dynamic-label":"","no-error":"",label:"City of birth",placeholder:"City of birth"},model:{value:t.birthCity,callback:function(e){t.birthCity=e},expression:"birthCity"}})],1),t._v(" "),a("div",{staticClass:"four columns su-input-group su-static-label"},[t.birthCountry?a("label",{staticClass:"su-input-label"},[t._v("Country of birth")]):t._e(),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.birthCountry,expression:"birthCountry"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.birthCountry=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Country of birth")]),t._v(" "),t._l(t.fatcaISOCountryCode,(function(e,s){return a("option",{key:s},[t._v(t._s(e))])}))],2)]),t._v(" "),a("div",{staticClass:"four columns"},[a("label",[t._v("Do you have any other country of tax residence?")]),t._v(" "),a("su-radio-group",{model:{value:t.hasOtherCountryTaxResidence,callback:function(e){t.hasOtherCountryTaxResidence=e},expression:"hasOtherCountryTaxResidence"}},[a("su-radio",{attrs:{value:"yes",label:"Yes"}}),t._v(" "),a("su-radio",{attrs:{value:"no",label:"No"}})],1)],1)]),t._v(" "),"yes"===t.hasOtherCountryTaxResidence?a("div",{staticClass:"row input-container"},[a("div",{staticClass:"four columns su-input-group su-static-label"},[t.otherCountryTaxResidence?a("label",{staticClass:"su-input-label"},[t._v("Other country of tax residence")]):t._e(),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.otherCountryTaxResidence,expression:"otherCountryTaxResidence"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.otherCountryTaxResidence=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Other country of tax residence")]),t._v(" "),t._l(t.fatcaISOCountryCode,(function(e,s){return a("option",{key:s},[t._v(t._s(e))])}))],2)]),t._v(" "),a("div",{staticClass:"four columns"},[a("su-input",{attrs:{type:"text","dynamic-label":"","no-error":"",label:"Tax identification number",placeholder:"Tax identification number"},model:{value:t.taxID,callback:function(e){t.taxID=e},expression:"taxID"}})],1),t._v(" "),a("br")]):t._e(),t._v(" "),a("div",{staticClass:"row input-container"},[a("div",{staticClass:"three columns su-input-group su-static-label"},[t.incomeSlab?a("label",{staticClass:"su-input-label"},[t._v("Income slab")]):t._e(),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.incomeSlab,expression:"incomeSlab"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.incomeSlab=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Income slab")]),t._v(" "),t._l(t.fatcaIncomeSlab,(function(e,s){return a("option",{key:s},[t._v(t._s(e))])}))],2)]),t._v(" "),a("div",{staticClass:"three columns su-input-group su-static-label"},[t.wealthSource?a("label",{staticClass:"su-input-label"},[t._v("Source of wealth")]):t._e(),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.wealthSource,expression:"wealthSource"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.wealthSource=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Source of wealth")]),t._v(" "),t._l(t.fatcaSourceWealth,(function(e,s){return a("option",{key:s},[t._v(t._s(e))])}))],2)]),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"number","dynamic-label":"","no-error":"",label:"Net worth (optional)",placeholder:"Net worth (optional)"},model:{value:t.netWorth,callback:function(e){t.netWorth=e},expression:"netWorth"}})],1),t._v(" "),a("div",{staticClass:"three columns su-input-group su-static-label"},[t.netWorthDate?a("label",{staticClass:"su-input-label"},[t._v("Net worth date (optional)")]):t._e(),t._v(" "),a("datepicker",{attrs:{format:t.format,lang:"en","not-before":"1900-01-01","not-after":t.currentDate,placeholder:"Net worth date (optional)"},model:{value:t.netWorthDate,callback:function(e){t.netWorthDate=e},expression:"netWorthDate"}})],1)]),t._v(" "),a("div",{staticClass:"row input-container"},[a("div",{staticClass:"four columns"},[a("label",[t._v("Are you a politically exposed person? "),a("a",{attrs:{href:"https://zerodhacapital.com/tos/faq#pep",target:"_blank"}},[a("span",{staticClass:"icon icon-help-circle"})])]),t._v(" "),a("su-radio-group",{model:{value:t.isPoliticallyExposed,callback:function(e){t.isPoliticallyExposed=e},expression:"isPoliticallyExposed"}},[a("su-radio",{attrs:{value:"yes",label:"Yes"}}),t._v(" "),a("su-radio",{attrs:{value:"no",label:"No"}})],1)],1)]),t._v(" "),a("br"),t._v(" "),a("h2",[t._v("Personal details")]),t._v(" "),a("div",{staticClass:"row input-container"},[a("div",{staticClass:"three columns su-input-group su-static-label"},[t.mStatus?a("label",{staticClass:"su-input-label"},[t._v("Marital status")]):t._e(),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.mStatus,expression:"mStatus"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.mStatus=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Select marital status")]),t._v(" "),t._l(t.maritalStatusChoices,(function(e,s){return a("option",{key:s},[t._v(t._s(e))])}))],2)]),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"text","dynamic-label":"","no-error":"",label:"Mother's first name",placeholder:"Mother's first name"},model:{value:t.mothersFirstName,callback:function(e){t.mothersFirstName=e},expression:"mothersFirstName"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"text","dynamic-label":"","no-error":"",label:"Mother's middle name (optional)",placeholder:"Mother's middle name (optional)"},model:{value:t.mothersMiddleName,callback:function(e){t.mothersMiddleName=e},expression:"mothersMiddleName"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"text","dynamic-label":"","no-error":"",label:"Mother's last name",placeholder:"Mother's last name"},model:{value:t.mothersLastName,callback:function(e){t.mothersLastName=e},expression:"mothersLastName"}})],1)]),t._v(" "),a("div",{staticClass:"fatca-tac"},[a("p",[a("su-checkbox",{attrs:{label:"I confirm that the information provided above is true, correct and complete to the best of my knowledge. In case any of the above specified information is found to be false or untrue, I am aware that I will be liable for it"},model:{value:t.confirmFatcaInfo,callback:function(e){t.confirmFatcaInfo=e},expression:"confirmFatcaInfo"}})],1),t._v(" "),a("p",[a("su-checkbox",{attrs:{label:"In case of any change in the above given status on a future date, I undertake to inform Zerodha Capital Private Limited within 30 days"},model:{value:t.fatcaStatusChangeOnFuture,callback:function(e){t.fatcaStatusChangeOnFuture=e},expression:"fatcaStatusChangeOnFuture"}}),a("br")],1)]),t._v(" "),a("div",[a("su-button",{class:t.validateFatcaDeclaration?"btn-grey":"btn-blue",attrs:{disabled:t.validateFatcaDeclaration||t.isFatcaCorrectionProcessing,type:"submit"}},[t._v("Confirm")])],1)])])],1)},n=[],i=a("bc3a"),r=a.n(i),o=a("8508"),l=a.n(o),c=a("eeee");function d(t){var e=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),s=0;s<a.length;s++){var n=a[s].trim();if(n.substring(0,t.length+1)===t+"="){e=decodeURIComponent(n.substring(t.length+1));break}}return e}var u=d("public_token"),h=r.a.create({timeout:1e4,responseType:"json",headers:{"X-CSRFToken":u,"Content-Type":"application/json"}}),p={name:"fatcacorrection",components:{"su-table":c["a"],datepicker:l.a},data:function(){return{birthCity:"",birthCountry:"IN",hasOtherCountryTaxResidence:"no",isPoliticallyExposed:"no",otherCountryTaxResidence:"",confirmFatcaInfo:!1,fatcaStatusChangeOnFuture:!1,taxID:"",incomeSlab:"",wealthSource:"",netWorth:"",format:"YYYY-MM-DD",netWorthDate:"",currentDate:"",mStatus:"",mothersFirstName:"",mothersMiddleName:"",mothersLastName:"",fatcaSourceWealth:{"01":"Salary","02":"Business Income","03":"Gift","04":"Ancestral Property","05":"Rental Income","06":"Prize Money","07":"Royalty","08":"Others"},fatcaIncomeSlab:{"<1":"Below 1 Lakh","1-5":"1-5 Lacs","5-10":"5-10 Lacs","10-25":"10-25 Lacs","25-1cr":"25 Lacs - 1 crore",">1cr":"Above 1 Crore"},maritalStatusChoices:{M:"Married",S:"Single",W:"Widow/Widower",D:"Divorced",NA:"Not Applicable"},fatcaISOCountryCode:{AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia, Plurinational State of",BQ:"Bonaire, Sint Eustatius and Saba",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, the Democratic Republic of the",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote d'Ivoire",HR:"Croatia",CU:"Cuba",CW:"Curacao",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic of",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia, the Former Yugoslav Republic of",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States of",MD:"Moldova, Republic of",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena, Ascension and Tristan da Cunha",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",MF:"Saint Martin (French part)",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten (Dutch part)",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and the South Sandwich Islands",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan, Province of China",TJ:"Tajikistan",TZ:"Tanzania, United Republic of",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela, Bolivarian Republic of",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},isFatcaCorrectionProcessing:!1}},mounted:function(){this.pageScrollToTop(),this.currentDate=this.getCurrentDate()},computed:{validateFatcaDeclaration:function(){var t;return t="yes"===this.hasOtherCountryTaxResidence?""===this.birthCity||""===this.birthCountry||""===this.otherCountryTaxResidence||""===this.taxID||""===this.incomeSlab||""===this.wealthSource||""===this.mStatus||""===this.mothersFirstName||""===this.mothersLastName||!this.confirmFatcaInfo||!this.fatcaStatusChangeOnFuture:""===this.birthCity||""===this.birthCountry||""===this.incomeSlab||""===this.wealthSource||""===this.mStatus||""===this.mothersFirstName||""===this.mothersLastName||!this.confirmFatcaInfo||!this.fatcaStatusChangeOnFuture,t}},methods:{pageScrollToTop:function(){window.scrollTo(0,0)},getCurrentDate:function(){var t=new Date,e=t.getDate(),a=t.getMonth()+1,s=t.getFullYear();return e<10&&(e="0"+e),a<10&&(a="0"+a),t=s+"-"+a+"-"+e,t},doneFatcaCorrection:function(){var t=this,e={other_country_tax_residence:{}};e.birth_city=this.birthCity,e.birth_country=this.birthCountry,e.other_country_tax_residence.country=this.otherCountryTaxResidence,e.other_country_tax_residence.tax_identification_number=this.taxID,e.income_slab=this.incomeSlab,e.source_of_wealth=this.wealthSource,e.net_worth=this.netWorth,e.net_worth_date=this.netWorthDate,e.maritial_status=this.mStatus,e.mothers_first_name=this.mothersFirstName,e.mothers_middle_name=this.mothersMiddleName,e.mothers_last_name=this.mothersLastName,e.politically_exposed=this.isPoliticallyExposed,"no"===this.hasOtherCountryTaxResidence&&(e.other_country_tax_residence=null),this.isFatcaCorrectionProcessing=!0,h.post("/api/loans/fatca_correction",e).then((function(e){var a=e.data;"SUCCESS"===a.status&&(t.isFatcaCorrectionProcessing=!1,t.$router.push("/loans/"))})).catch((function(e){var a="";e.response?a+=e.response.data.message:e.message&&(a+=e.message),t.$toast.error({message:a,orientation:t.$toast.TOP_RIGHT,duration:6e3}),t.isFatcaCorrectionProcessing=!1,401===e.response.status&&(window.location.href="/")}))}}},_=p,m=a("2877"),g=Object(m["a"])(_,s,n,!1,null,null,null);e["default"]=g.exports},e2ac:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"dropdown"}},[t.isMenu?a("div",{staticClass:"mobile-context-menu",attrs:{id:"mobile-context-menu-"+t._uid},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.close.apply(null,arguments)}}},[a("ul",{staticClass:"mobile-context-menu-list list-flat"},[t._t("menu")],2)]):a("div",{staticClass:"mobile-context-menu",attrs:{id:"mobile-context-menu-"+t._uid},on:{click:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.close.apply(null,arguments))}}},[a("ul",{staticClass:"mobile-context-menu-list list-flat"},[t._t("menu")],2)])])},n=[],i={name:"context-menu",props:{isMenu:!0},data:function(){return{}},deactivated:function(){},methods:{close:function(){this.$emit("close")}}},r=i,o=a("2877"),l=Object(o["a"])(r,s,n,!1,null,null,null);e["a"]=l.exports},e9dd:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container holdings"},[a("div",{staticClass:"section"},[t.job?a("jobber",{attrs:{main:"Fetching holdings with discrepancies",sub:"",loader:!0}}):t._e(),t._v(" "),t.discrepant_items.length>0&&!t.job?a("div",{staticClass:"row",attrs:{id:"disc_basic"}},[a("div",{staticClass:"four columns"},[a("h1",[t._v("Holdings discrepancies")]),t._v(" "),a("p",{staticClass:"text-small text-light-grey"},[t._v("These are the holdings for which we have not received a buy price. These may have come from transfers, corporate actions, IPOs etc.\n\t\t\t\t\tFor us to compute the P&L properly for these entries, you need to manually add trades with the right values.")]),t._v(" "),a("hr",{staticClass:"no-bottom"}),t._v(" "),a("span",{staticClass:"open-side-nav show-inline-on-mobile",on:{click:function(e){return t.openSideNav()}}},[t._v("☰ View all scrips")]),t._v(" "),a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeSideNav,expression:"closeSideNav"}],staticClass:"disc-list-container",attrs:{id:"mobile-side-nav"}},[a("a",{staticClass:"close-side-nav show-on-mobile",attrs:{href:"javascript:void(0)"},on:{click:t.closeSideNav}},[t._v("×")]),t._v(" "),t._l(t.discrepant_items,(function(e,s){return a("div",{key:s,class:[e["instrument_id"]===t.initInstrument&&t.discSelected==={}||e["instrument_id"]===t.discSelected["instrument_id"]?"activeInstrument":"","disc-list"],on:{click:function(a){return t.getExternalTrades(e,a)}}},[a("span",{staticClass:"instrument-name"},[t._v(t._s(e["tradingsymbol"]))]),t._v(" "),e["quantity_discrepant"]>0?a("span",{staticClass:"status-flag"},[t._v(t._s(e["quantity_discrepant"])+" Qty.")]):t._e()])}))],2)]),t._v(" "),a("div",{staticClass:"eight columns disc-info"},[a("h1",[t._v(t._s(t.discSelected["tradingsymbol"]))]),t._v(" "),a("hr"),a("br"),a("br"),t._v(" "),a("div",{staticClass:"row"},[t.discSelected["isin"]?a("div",{staticClass:"six columns"},[a("label",[t._v("ISIN")]),t._v(" "),a("h2",[t._v(t._s(t.discSelected["isin"]))])]):t._e(),t._v(" "),a("div",{staticClass:"six columns"},[a("label",[t._v("Discrepancy (Qty.)")]),t._v(" "),a("h2",[t._v(t._s(t._f("round")(t.discSelected["quantity_discrepant"],4)))])])]),a("br"),t._v(" "),a("h2",{staticClass:"add-trade-container"},[t._v("\n\t\t\t\t\tTrades\n\t\t\t\t\t"),t.fetchingExternal?a("su-loader"):t._e(),t._v(" "),a("su-button",{staticClass:"add-external-trade btn btn-blue",nativeOn:{click:function(e){return e.preventDefault(),t.computeAdd()}}},[t._v("+ Add trade")])],1),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:" table-container"},[t.isPending?a("p",{staticClass:"text-small text-light-grey"},[t._v("The pending trades will be computed and added to your P&L within 48 hours.")]):t._e(),t._v(" "),t.externalTrades.length>0&&!t.fetchingExternal?a("table",{staticClass:"external-trades",attrs:{id:"external_trades"}},[t._m(0),t._v(" "),a("tbody",t._l(t.externalTrades,(function(e,s){return a("tr",{key:s,on:{mouseleave:function(e){t.showDrop=!1},mouseenter:function(e){t.showDrop=!0}}},[a("td",{staticClass:"text-left"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e["trade_date"])+"\n\t\t\t\t\t\t\t\t\t"),e["pending_recalc"]?a("span",{staticClass:"pending-flag"},[t._v("Pending")]):t._e(),t._v(" "),t.showDrop?a("context-menu",{staticClass:"table"},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"context-menu-button",attrs:{slot:"button",title:"Options"},slot:"button"},[a("span",{staticClass:"icon icon-ellipsis"})]),t._v(" "),a("template",{slot:"menu"},[a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.showEditDiscrepant(e)}}},[t._v("Edit trade")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.deleteDiscrepant(e)}}},[t._v("Delete trade")])])])],2):t._e()],1),t._v(" "),"ipo"==e["external_trade_type"]?a("td",{staticClass:"text-left"},[t._v(t._s(t._f("uppercase")(e["external_trade_type"])))]):a("td",{staticClass:"text-left"},[t._v(t._s(t._f("capitalize")(e["external_trade_type"])))]),t._v(" "),a("td",[t._v(t._s(t._f("inrFormat")(e["price"],4)))]),t._v(" "),a("td",[t._v(t._s(t._f("qtyFormat")(e["quantity"],4)))])])})),0)]):t._e()]),t._v(" "),0!==t.externalTrades.length||t.fetchingExternal?t._e():a("p",[t._v("\n\t\t\t\t\tTo fix the discrepancy, you should add manual trades here with matching quantities. Trades added can not be edited/deleted once the price is updated. "),a("a",{attrs:{href:"https://support.zerodha.com/category/q-backoffice/portfolio/articles/why-is-the-buy-average-for-some-shares-shown-as-n-a",target:"_blank"}},[t._v("Read more")]),t._v(".\n\t\t\t\t")])])]):t._e(),t._v(" "),t.noResults&&!t.job?a("div",{staticClass:"text-center"},[a("empty",{attrs:{main:"Nothing to show here",sub:""}})],1):t._e()],1),t._v(" "),t.showAddModal?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask add-disc-modal"},[a("div",{staticClass:"modal-wrapper",on:{click:function(e){return e.stopPropagation(),t.hideAdd.apply(null,arguments)}}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showAdd.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideAdd.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("h2",[t._v(t._s(t.discSelected["tradingsymbol"])+" — Add a trade")]),t._v(" "),a("su-form",[a("div",{staticClass:"row input-container"},[a("div",{staticClass:"three columns su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Purchase date")]),t._v(" "),a("datepicker",{attrs:{format:t.format,lang:"en","not-before":"1975-01-01","not-after":t.reportEndDate,placeholder:"YYYY-MM-DD"},model:{value:t.addExternalDate,callback:function(e){t.addExternalDate=e},expression:"addExternalDate"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"number",maxlength:8,"static-label":"","no-error":"",label:"Avg. price"},model:{value:t.addExternalPrice,callback:function(e){t.addExternalPrice=e},expression:"addExternalPrice"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"number",maxlength:8,"static-label":"","no-error":"",label:"Qty."},model:{value:t.addExternalQty,callback:function(e){t.addExternalQty=e},expression:"addExternalQty"}})],1),t._v(" "),a("div",{staticClass:"three columns su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Type")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.addExternalType,expression:"addExternalType"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.addExternalType=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Select type")]),t._v(" "),a("option",{attrs:{value:"ipo"}},[t._v("IPO")]),t._v(" "),a("option",{attrs:{value:"discrepant"}},[t._v("Others")])])])]),a("br"),t._v(" "),a("div",{staticClass:"text-right"},[a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.addingExternal,disabled:t.addingExternal},nativeOn:{click:function(e){return e.preventDefault(),t.addDiscrepant.apply(null,arguments)}}},[t._v("Add")])],1)])],1)])])])]):t._e(),t._v(" "),t.showEditModal?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask add-disc-modal"},[a("div",{staticClass:"modal-wrapper",on:{click:function(e){return e.stopPropagation(),t.hideEdit.apply(null,arguments)}}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showEdit.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideEdit.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("h2",[t._v(t._s(t.discSelected["tradingsymbol"])+" — Edit trade")]),t._v(" "),a("su-form",[a("div",{staticClass:"row input-container"},[a("div",{staticClass:"three columns"},[a("su-input",{attrs:{"static-label":"","not-before":"1975-01-01","not-after":t.reportEndDate,"no-error":"",label:"Purchase date",disabled:!0},model:{value:t.editExternalDate,callback:function(e){t.editExternalDate=e},expression:"editExternalDate"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"number","static-label":"","no-error":"",label:"Avg. price"},model:{value:t.editExternalPrice,callback:function(e){t.editExternalPrice=e},expression:"editExternalPrice"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"number","static-label":"","no-error":"",label:"Qty",disabled:!0},model:{value:t.editExternalQty,callback:function(e){t.editExternalQty=e},expression:"editExternalQty"}})],1),t._v(" "),a("div",{staticClass:"three columns su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Type")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.editExternalType,expression:"editExternalType"}],attrs:{disabled:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.editExternalType=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"ipo"}},[t._v("IPO")]),t._v(" "),a("option",{attrs:{value:"discrepant"}},[t._v("Others")])])])]),a("br"),t._v(" "),a("div",{staticClass:"text-right"},[a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.editingExternal,disabled:t.editingExternal},nativeOn:{click:function(e){return e.preventDefault(),t.editDiscrepant.apply(null,arguments)}}},[t._v("Update")])],1)])],1)])])])]):t._e()])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",{staticClass:"text-left"},[t._v("Purchase date")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("Type")]),t._v(" "),a("td",[t._v("Avg. price")]),t._v(" "),a("td",[t._v("Qty.")])])])}],i=a("8508"),r=a.n(i),o=a("6825"),l=a("2e34"),c=a("02bc"),d=a("ba6a"),u=a("5665"),h=a("2f62");function p(t){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),!0).forEach((function(e){g(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function g(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function v(t,e,a){return u["a"].getDiscrepants+"?date="+t+"&segment="+e}function f(t){return t?u["a"].getExternalTrades+"?instrument_id="+t:u["a"].getExternalTrades}function b(t){var e=new Date(t),a=""+(e.getMonth()+1),s=""+e.getDate(),n=e.getFullYear();return a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),[n,a,s].join("-")}function y(t){var e=null,a=[];return location.search.substr(1).split("&").forEach((function(s){a=s.split("="),a[0]===t&&(e=decodeURIComponent(a[1]))})),e}var C={data:function(){return{instrument:null,showModal:!1,job:!1,params:{},holdings_items:[],discrepant_items:[],holdings_aggregation:{},tradingsymbol:"",date:null,segment:"EQ",format:"YYYY-MM-DD",sortKey:"tradingsymbol",sortBy:"asc",disabled:{to:new Date(2017,3,1)},timeout:"",lastClicked:null,noResults:!1,externalTrades:[],discSelected:{},tradesExist:!1,showAddModal:!1,addExternalDate:"",addExternalPrice:"",addExternalQty:"",addExternalType:"",addingExternal:!1,fetchingExternal:!1,showEditModal:!1,editExternalDate:"",editExternalPrice:"",editExternalQty:"",editExternalType:"",editExternalId:"",editingExternal:!1,oldExternalQty:"",initInstrument:"",showDrop:!0,isPending:!1,isinFetching:""}},mounted:function(){var t=this;if(window.addEventListener("keyup",(function(e){27===e.keyCode&&(t.hideAdd(),t.hideEdit())})),this.$route.params&&this.$route.params.segment)this.getHoldingsData(new Date,this.$route.params.segment);else{var e=y("ISIN");e&&(this.isinFetching=e),this.$router.push({name:"discrepancies",params:{segment:"EQ"}}),this.getHoldingsData(new Date,"EQ")}},computed:m(m({},Object(h["c"])(["reportEndDate"])),{},{filteredData:function(){var t=this.sortKey,e=this.sortOrders[t]||1,a=this.holdings;return t&&(a=a.slice().sort((function(a,s){return a=a[t],s=s[t],(a===s?0:a>s?1:-1)*e}))),a}}),methods:{openSideNav:function(){document.getElementById("mobile-side-nav")&&(document.getElementById("mobile-side-nav").className.indexOf("hidden")>-1&&document.getElementById("mobile-side-nav").classList.remove("hidden"),document.getElementById("mobile-side-nav").classList.add("show"))},closeSideNav:function(t,e){if(t&&t.target.className&&(-1===t.target.className.indexOf("open-side-nav")||t.target.className.indexOf("disc-list")>-1)){if(document.getElementById("mobile-side-nav")&&window.innerWidth<=800){-1!==document.getElementById("mobile-side-nav").className.indexOf("show")&&document.getElementById("mobile-side-nav").classList.remove("show"),document.getElementById("mobile-side-nav").classList.add("hidden");var a=this.$el.querySelector("#disc_basic");a.scrollTop=a.scrollHeight}}else 1===e&&document.getElementById("mobile-side-nav")&&-1!==document.getElementById("mobile-side-nav").className.indexOf("show")&&document.getElementById("mobile-side-nav").classList.remove("show")},addDiscrepant:function(){var t=this;if(this.addExternalDate&&this.addExternalPrice&&this.addExternalQty&&this.addExternalType){for(var e=0,a=0;a<this.externalTrades.length;a++){if(b(this.addExternalDate)===this.externalTrades[a]["trade_date"]&&this.addExternalType===this.externalTrades[a]["external_trade_type"])return void this.$toast.warning({message:"Adding external trade of same type is not allowed",orientation:this.$toast.TOP_RIGHT,duration:6e3});this.externalTrades[a]["pending_recalc"]&&(e+=parseFloat(this.externalTrades[a]["quantity"]))}var s=new Date(this.addExternalDate),n=new Date;if(s>n)return void this.$toast.warning({message:"Adding external trade for future dates is not allowed",orientation:this.$toast.TOP_RIGHT,duration:6e3});if(null===this.discSelected["isin"]||0===this.discSelected["isin"].length||null===this.discSelected["instrument_id"]||0===this.discSelected["instrument_id"].length)return void this.$toast.warning({message:"Required information to perform this action is not available",orientation:this.$toast.TOP_RIGHT,duration:6e3});var i=parseFloat(parseFloat(parseFloat(this.discSelected["quantity_discrepant"])-parseFloat(e)).toFixed(4));if(this.addExternalQty<=i){this.addingExternal=!0;var r={instrument_id:this.discSelected["instrument_id"],trade_date:b(this.addExternalDate),segment:this.segment,price:parseFloat(this.addExternalPrice),quantity:parseFloat(this.addExternalQty),external_trade_type:this.addExternalType},o=[];o.push(r);var l=f();d["a"].request("POST",!1,l,o,(function(e,a){t.addingExternal=!1,t.hideAdd(),"SUCCESS"===e.toUpperCase()?(t.$toast.success({message:"Trade added",orientation:t.$toast.TOP_RIGHT,duration:6e3}),t.getExternalTrades(t.discSelected)):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error adding trade: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error adding trade:"+d["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))}else this.$toast.warning({message:"Quantity can not be greater than total discrepant quantity",orientation:this.$toast.TOP_RIGHT,duration:6e3})}else this.$toast.warning({message:"Date, price, qty and type are required fields",orientation:this.$toast.TOP_RIGHT,duration:6e3})},showEditDiscrepant:function(t){this.editExternalDate=t["trade_date"],this.editExternalPrice=parseFloat(t["price"]).toFixed(2),this.editExternalQty=parseFloat(t["quantity"]).toFixed(4),this.editExternalType=t["external_trade_type"],this.oldExternalQty=parseFloat(t["quantity"]).toFixed(4),this.editExternalId=t["id"],this.showEdit()},editDiscrepant:function(){var t=this;if(this.editExternalDate&&this.editExternalPrice&&this.editExternalQty&&this.editExternalType){for(var e=0,a=0;a<this.externalTrades.length;a++)this.externalTrades[a]["pending_recalc"]&&(e+=parseFloat(this.externalTrades[a]["quantity"]));e-=this.oldExternalQty;var s=this.discSelected["quantity_discrepant"]-e;if(this.editExternalQty<=s){this.editingExternal=!0;var n={id:this.editExternalId.toString(),trade_date:this.editExternalDate,price:parseFloat(this.editExternalPrice),quantity:parseFloat(this.editExternalQty),external_trade_type:this.editExternalType,instrument_id:this.discSelected["instrument_id"],tradingsymbol:this.discSelected["tradingsymbol"],isin:this.discSelected["isin"],segment:this.segment},i=[];i.push(n);var r=f();d["a"].request("PUT",!1,r,i,(function(e,a){t.editingExternal=!1,t.hideEdit(),"SUCCESS"===e.toUpperCase()?(t.getExternalTrades(t.discSelected),t.$toast.success({message:"Edit successful",orientation:t.$toast.TOP_RIGHT,duration:6e3})):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error editing trade: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error editing trade:"+d["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))}else this.$toast.warning({message:"Quantity can not be grater than discrepant quantity",orientation:this.$toast.TOP_RIGHT,duration:6e3})}else this.$toast.warning({message:"Date, price, qty and type are required fields",orientation:this.$toast.TOP_RIGHT,duration:6e3})},deleteDiscrepant:function(t){var e=this;this.fetchingExternal=!0;var a={id:t["id"].toString(),instrument_id:this.discSelected["instrument_id"],trade_date:t["trade_date"],segment:this.segment},s=[];s.push(a);var n=f();d["a"].request("DELETE",!1,n,s,(function(t,a){"SUCCESS"===t.toUpperCase()?(e.getExternalTrades(e.discSelected),e.$toast.success({message:"Deleted successfully",orientation:e.$toast.TOP_RIGHT,duration:6e3})):"FAILURE"===t.toUpperCase()?(e.fetchingExternal=!1,e.$toast.error({message:"Error deleting trade: "+a.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3})):(e.fetchingExternal=!1,e.$toast.error({message:"Error deleting trade:"+d["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3}))}))},getExternalTrades:function(t,e){var a=this;this.addExternalDate="",this.addExternalPrice="",this.addExternalQty="",this.addExternalType="",this.closeSideNav(null,1),this.fetchingExternal=!0,this.isPending=!1;var s="";"object"===p(t)?(s=t["instrument_id"],this.discSelected=t):(s=t,this.discSelected=this.discrepant_items.find((function(e){return e.instrument_id===t})));var n=f(s);n+="&segment="+this.segment,this.$router.push({name:"discrepancies",params:{tradingsymbol:this.discSelected["tradingsymbol"],instrument_id:this.discSelected["instrument_id"]}}),d["a"].request("GET",!1,n,null,(function(t,e){if(a.externalTrades=[],"SUCCESS"===t.toUpperCase()){a.fetchingExternal=!1;var s=e.data.data.result;if(s.hasOwnProperty("length")){for(var n=0;n<s.length;n++)!0===s[n]["pending_recalc"]&&(a.isPending=!0);a.externalTrades=s}else a.externalTrades.push(s);a.externalTrades.length>0?a.tradesExist=!0:a.tradesExist=!1}else"FAILURE"===t.toUpperCase()?(a.fetchingExternal=!1,a.$toast.error({message:"Error fetching trades: "+e.data.message,orientation:a.$toast.TOP_RIGHT,duration:6e3})):(a.fetchingExternal=!1,a.$toast.error({message:"Error fetching trades:"+d["a"].errorMessage(),orientation:a.$toast.TOP_RIGHT,duration:6e3}))}))},showMenu:function(t){t.target.children.length>0?(t.target.children[3].classList.toggle("show"),null!==this.lastClicked&&this.lastClicked!==t.target.children[3]&&this.lastClicked.classList.toggle("show"),this.lastClicked=t.target.children[3]):(t.target.parentNode.children[3].classList.toggle("show"),null!==this.lastClicked&&this.lastClicked!==t.target.parentNode.children[3]&&this.lastClicked.classList.toggle("show"),this.lastClicked=t.target.parentNode.children[3])},pollData:function(){var t=this;setTimeout((function(){return t.getHoldingsData(t.date,t.segment)}),2e3)},getHoldingsData:function(t,e){var a=this;this.job=!0,this.noResults=!1,this.date=b(t||new Date),this.segment=e?e.toUpperCase():"EQ";var s=v(this.date,this.segment);d["a"].request("GET",!0,s,null,(function(t,s){if(a.holdings_items=[],"PENDING"===t.toUpperCase())a.job=!0,a.pollData();else if("SUCCESS"===t.toUpperCase()){a.params={date:a.date,segment:e},a.job=!1,a.holdings_items=s.data.data.result;for(var n=0;n<a.holdings_items.length;n++)a.totalPresentValue+=parseFloat(a.holdings_items[n]["closing_value"])||0,a.holdings_items[n]["quantity_discrepant"]>0&&a.discrepant_items.push(a.holdings_items[n]);if(a.$route.params&&a.$route.params.instrument_id)a.initInstrument=a.$route.params.instrument_id,a.getExternalTrades(a.initInstrument);else if(a.discrepant_items.length>0){var i={};a.isinFetching&&a.isinFetching.length>0&&(i=a.discrepant_items.find((function(t){return t.isin===a.isinFetching}))),(void 0===i||"object"===p(i)&&0===Object.keys(i).length)&&(i=a.discrepant_items[0]),a.initInstrument=i["instrument_id"],a.getExternalTrades(i)}else a.noResults=!0}else"FAILURE"===t.toUpperCase()?(a.job=!1,a.$toast.error({message:"Error fetching holdings: "+s.data.message,orientation:a.$toast.TOP_RIGHT,duration:6e3})):(a.job=!1,a.$toast.error({message:"Error fetching holdings:"+d["a"].errorMessage(),orientation:a.$toast.TOP_RIGHT,duration:6e3}))}))},computeAdd:function(){this.showAdd()},showAdd:function(){this.showAddModal=!0,document.getElementsByTagName("body")[0].style.overflowY="hidden"},hideAdd:function(){this.showAddModal=!1,document.getElementsByTagName("body")[0].style.overflowY="scroll"},showEdit:function(){this.showEditModal=!0,document.getElementsByTagName("body")[0].style.overflowY="hidden"},hideEdit:function(){this.showEditModal=!1,document.getElementsByTagName("body")[0].style.overflowY="scroll"}},components:{datepicker:r.a,"context-menu":o["a"],jobber:l["a"],empty:c["a"]}},w=C,k=a("2877"),x=Object(k["a"])(w,s,n,!1,null,null,null);e["default"]=x.exports},ee54:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.stocksPledged.length!==t.collateralList.length?a("jobber",{attrs:{main:"Fetching loan offer",sub:"",loader:!0}}):t._e(),t._v(" "),t.collateralList.length>0&&t.stocksPledged.length===t.collateralList.length&&!t.isRedirecting?a("div",{staticClass:"row loan-confirm-wrapper"},[a("div",{staticClass:"six columns"},[a("h1",[t._v("Confirm loan "+t._s(t.topup?"top-up":""))]),t._v(" "),a("h3",[t._v("The below stocks will be pledged for the loan.")]),t._v(" "),a("div",{staticClass:"row loan-pledge-confirm"},[a("div",[a("label",{staticClass:"label text-grey"},[t._v("Your demat")]),t._v(" "),a("p",[t._v(t._s(t.dpDetails.dp_account_no))])]),t._v(" "),t._m(0),t._v(" "),a("div",[a("label",{staticClass:"label text-grey"},[t._v("Zerodha Capital Pvt. Ltd. demat")]),t._v(" "),a("p",[t._v(t._s(t.nbfcDp))])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"twelve columns"},[a("h3",{staticClass:"edit-pledge-stocks-header"},[t._v("\n\t\t\t\t\t\tSelected stocks ("+t._s(t.collateralList.length)+")\n\t\t\t\t\t\t"),a("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"edit-pledge-stocks",attrs:{title:"Edit"}},[a("span",{staticClass:"icon icon-edit",on:{click:function(e){return t.redirectToLoansDashboardPage(!0)}}})])]),t._v(" "),a("div",{staticClass:"table-section"},[a("div",{staticClass:"table-container confirm-table-container"},[a("div",[a("su-table",{attrs:{sort:"",tableBorder:"",headers:t.pledgeStocksHeader,data:t.collateralList},scopedSlots:t._u([{key:"default",fn:function(e){return[a("td",{staticClass:"textleft table-border"},[t._v(t._s(e.row.tradingsymbol)+" "),a("p",{staticClass:"text-light-grey text-xsmall"},[t._v(t._s(e.row.isin))])]),t._v(" "),a("td",[t._v(t._s(e.row.quantity))]),t._v(" "),a("td",{staticClass:"textright"},[t._v(t._s(t._f("inrFormat")(e.row.amount,0,null,!1)))])]}}],null,!1,2563554014)})],1)])]),t._v(" "),a("p",{staticClass:"text-light-grey text-xsmall"},[t._v("*Note: Auto Renewal of your loan after 1 year shall be subject to periodical review with the terms of sanction during your loan term.")])])])]),t._v(" "),a("div",{staticClass:"six columns confirm-kyc-details"},[a("div",{staticClass:"row"},[a("div",{staticClass:"six columns"},[a("label",{staticClass:"label text-grey"},[t._v("Loan amount offered")]),t._v(" "),a("h2",[t._v("₹"+t._s(t._f("inrFormat")(Math.ceil(t.eligibleAmount),0)))])]),t._v(" "),a("div",{staticClass:"six columns"},[a("label",{staticClass:"label text-grey"},[t._v("Applicable interest rate")]),t._v(" "),a("div",{staticClass:"interest-rate"},[a("h2",[t._v(t._s(t.interestRate)+"%  ")])])])]),t._v(" "),a("p",{staticClass:"text-grey text-xsmall annum-charge"},[t._v("*Interest rate per annum charged on a monthly basis. Tenure is 1 year (Auto renewable).")]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"kyc-details"},[a("div",{staticClass:"loan-purpose-details su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Purpose of the loan")]),t._v(" "),a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.loanPurpose,expression:"loanPurpose"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.loanPurpose=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Select purpose")]),t._v(" "),t._l(t.loanPurposes,(function(e,s){return a("option",{domProps:{value:s}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t\t\t")])}))],2)]),t._v(" "),t.topup&&t.purposeOfLoan?a("div",[a("select",[a("option",{domProps:{value:t.purposeOfLoan}},[t._v(t._s(t.purposeOfLoan))])])]):t._e()]),t._v(" "),"Other"===t.loanPurpose?a("div",{staticClass:"loan-purpose-text su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Please mention the purpose")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.loanPurposeText,expression:"loanPurposeText"}],attrs:{type:"text",maxlength:100,autocorrect:"off",autocapitalize:"none",noerror:"true",staticlabel:"true",animate:"true"},domProps:{value:t.loanPurposeText},on:{keypress:function(e){return t.validateAlphabet(e)},input:function(e){e.target.composing||(t.loanPurposeText=e.target.value)}}})]):t._e(),t._v(" "),a("div",{staticClass:"bank-account-details su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Bank account you would like to get the loan on")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.bankDetailsFormat[0],expression:"bankDetailsFormat[0]"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.bankDetailsFormat,0,e.target.multiple?a:a[0])}}},t._l(t.bankDetailsFormat,(function(e,s){return a("option",{key:s},[t._v(t._s(e))])})),0)])]),t._v(" "),a("p",{staticClass:"confirm-termsheet"},[a("su-checkbox",{attrs:{label:t.termsheetLabel},model:{value:t.confirmTermsheetInfo,callback:function(e){t.confirmTermsheetInfo=e},expression:"confirmTermsheetInfo"}})],1),t._v(" "),t._m(1),t._v(" "),t.topup||0===t.processingFee?t._e():a("div",{staticClass:"processing-fee"},[a("p",[t._v("\n\t\t\t\t\tPay the processing fee of\n\t\t\t\t\t"),a("span",[t._v("₹"+t._s(t.processingFee))]),t._v(" to continue.\n\t\t\t\t\t"),t._m(2)]),a("br"),t._v(" "),a("p",{staticClass:"text-grey text-xsmall annum-charge"},[t._v("This is non-refundable fee.")])]),t._v(" "),0!==t.processingFee?a("div",[a("su-button",{staticClass:"btn confirm-btn",class:("Other"===t.loanPurpose?""!==t.loanPurposeText:t.loanPurpose)&&t.confirmTermsheetInfo?"btn-blue":"btn-grey",attrs:{disabled:!(("Other"===t.loanPurpose?""!==t.loanPurposeText:t.loanPurpose)&&t.confirmTermsheetInfo)||t.isRzPayProcessing,processing:t.isRzPayProcessing},nativeOn:{click:function(e){return t.rzpPay.apply(null,arguments)}}},[t._v("Continue")])],1):0===t.processingFee?a("div",[a("su-button",{staticClass:"btn confirm-btn",class:("Other"===t.loanPurpose?""!==t.loanPurposeText:t.loanPurpose)&&t.confirmTermsheetInfo?"btn-blue":"btn-grey",attrs:{disabled:!(("Other"===t.loanPurpose?""!==t.loanPurposeText:t.loanPurpose)&&t.confirmTermsheetInfo)||t.isProcessing,processing:t.isProcessing},nativeOn:{click:function(e){return t.acceptOffer.apply(null,arguments)}}},[t._v("Continue")])],1):t._e()])]):t._e()],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticClass:"icon icon-arrow-right"}),t._v(" "),a("br")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"verify-aadhaar-text"},[t._v("\n\t\t\t\tYou have to e-Sign the loan documents with your Aadhaar.\n\t\t\t\t"),a("a",{attrs:{href:"https://resident.uidai.gov.in/verify-email-mobile",target:"_blank"}},[t._v("Please verify here")]),t._v(" if your mobile/email is linked to your Aadhaar.\n\t\t\t")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{href:"https://zerodhacapital.com/tos/faq#fee",target:"_blank"}},[a("span",{staticClass:"icon icon-help-circle"})])}],i=a("5dfe"),r=a("eeee"),o=a("2f62"),l=a("19b7"),c=a("2e34"),d=a("bc3a"),u=a.n(d);function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),!0).forEach((function(e){_(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function _(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function m(t){var e=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),s=0;s<a.length;s++){var n=a[s].trim();if(n.substring(0,t.length+1)===t+"="){e=decodeURIComponent(n.substring(t.length+1));break}}return e}var g=m("public_token"),v=u.a.create({timeout:1e4,responseType:"json",headers:{"X-CSRFToken":g,"Content-Type":"application/json"}}),f=u.a.create({timeout:1e4,responseType:"json",headers:{"X-CSRFToken":g,"Content-Type":"application/json"}}),b=l["b"],y={components:{"su-button":i["a"],"su-table":r["a"],jobber:c["a"]},data:function(){return{loanPurpose:"",loanPurposeText:"",accountNumber:"",orderId:"",isRzPayProcessing:!1,isProcessing:!1,confirmTermsheetInfo:!1,loanPurposes:{"Home / Office improvement & renovation":"Home / Office improvement & renovation","Hospital or Medical expenses":"Hospital or Medical expenses","Repaying / Part payment of a separate loan or consolidation of debt":"Repaying / Part payment of a separate loan or consolidation of debt",Education:"Education","Travel / Vacation":"Travel / Vacation",Wedding:"Wedding","Purchasing vehicle":"Purchasing vehicle","Business Expansion / Capital":"Business Expansion / Capital","Personal / Family / Household Expenses":"Personal / Family / Household Expenses","Emergency / Contingency Expenditure":"Emergency / Contingency Expenditure","Purchase of Asset - Home / Land":"Purchase of Asset - Home / Land","Event / Function in the household":"Event / Function in the household","Credit Card Bill":"Credit Card Bill","To invest in IPO":"To invest in IPO","Long term investment in Capital / Share Market":"Long term investment in Capital / Share Market",Other:"Other"},pledgeStocksHeader:[{class:[],label:"Symbol",field:"tradingsymbol",sort:!0,tableBorder:!0,sortArrow:!0,arrowShowDefault:!0},{class:[],label:"Quantity",field:"quantity",sort:!0,arrowShowDefault:!1,sortArrow:!0},{class:[],label:"Amount required (₹)",field:"amount",sort:!0,arrowShowDefault:!1,sortArrow:!0}],isRedirecting:!1}},beforeCreate:function(){var t=document.createElement("script");t.setAttribute("src","https://checkout.razorpay.com/v1/checkout.js"),document.head.appendChild(t)},computed:p(p(p({},Object(o["c"])(b,["stocksPledged","collateralList","bankDetails","bankDetailsFormat","dpDetails","nbfcDp","topup","purposeOfLoan","eligibleAmount","processingFee","interestRate","dateOfBirth","mobile","fullName","eMail","correspondenceAddress","permanentAddress"])),Object(o["c"])(["csrf"])),{},{termsheetLabel:function(){var t="/api/loans/termsheet_download?csrf="+this.csrf;return"I agree to the terms in the <a href="+t+" target=_blank>termsheet</a>."}}),methods:p(p({},Object(o["b"])(b,["makePayment"])),{},{redirectToLoansDashboardPage:function(t){this.isRedirecting=!0,this.$emit("offersToLoansDashboard",t)},validateAlphabet:function(t){var e=String.fromCharCode(t.keyCode);if(/^[A-Za-z\s]+$/.test(e))return!0;t.preventDefault()},rzpPay:function(){var t=this;this.isRzPayProcessing=!0,v.get("/api/loans/orderid").then((function(e){var a=e.data;t.orderId=a.data&&a.data.order_id})).then((function(){var e={key:Object({NODE_ENV:"production",BASE_URL:"/"}).RAZORPAY_KEY,amount:(100*t.processingFee).toFixed(2),name:"Zerodha",description:"Processing Fee for Loan",image:"https://zerodha.com/static/images/logo.svg",order_id:t.orderId,config:{display:{hide:[{method:"card"}],preferences:{show_default_blocks:!0}}},transfers:[{account:"acc_IVFMoaR3vZ2dwn",amount:(100*t.processingFee).toFixed(2),currency:"INR",notes:{branch:"Richmond Road",name:"ZERODHA CAPITAL PVT LTD CHGB COLLECT A/C"},linked_account_notes:["branch"],on_hold:0}],handler:function(e){var a="Other"===t.loanPurpose?t.loanPurposeText:t.loanPurpose;t.makePayment({bankAccount:t.bankDetails[0].account_number,paymentId:e.razorpay_payment_id,loanPurpose:a}).then((function(e){t.isRzPayProcessing=!1,t.redirectToLoansDashboardPage(e)})).catch((function(e){t.isRzPayProcessing=!1;var a=e.response.data;"ERROR"===a.status.toUpperCase()&&t.$toast.error({message:"NBFC Status Error: Not allowed to view this page!",orientation:t.$toast.TOP_RIGHT,duration:6e3}),401===e.response.status&&(window.location.href="/")}))},prefill:{name:t.fullName,email:t.eMail,contact:t.mobile},theme:{color:"#0259c1"}},a=new window.Razorpay(e);a.open()})).catch((function(e){var a=e.response.data;"ERROR"===a.status&&t.$toast.error({message:a.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}),401===e.response.status&&(window.location.href="/")}))},acceptOffer:function(){var t=this,e="Other"===this.loanPurpose?this.loanPurposeText:this.loanPurpose;this.isProcessing=!0,f.post("/api/loans/acceptoffer",{loan_purpose:e}).then((function(e){t.isProcessing=!1,t.redirectToLoansDashboardPage(e.data)})).catch((function(e){var a=e.response.data;"ERROR"===a.status&&t.$toast.error({message:a.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}),401===e.response.status&&(window.location.href="/")}))}})},C=y,w=a("2877"),k=Object(w["a"])(C,s,n,!1,null,null,null);e["a"]=k.exports},eeee:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.data?a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],staticClass:"data-table",attrs:{tabindex:"1"}},[t.toolbarHeader?a("div",{staticClass:"toolbar-header"},[a("h3",[t._v(t._s(t.toolbarHeaderText))])]):t._e(),t._v(" "),t.toolbar?a("div",{staticClass:"toolbar"},[t.search?a("span",{staticClass:"search",class:{expand:t.isSearchExpaned}},[a("span",{staticClass:"icon icon-search"}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.currentSearchTerm.length>0,expression:"currentSearchTerm.length > 0"}],staticClass:"clear icon icon-times",on:{click:t.clearSerachTerm}}),t._v(" "),a("su-input",{ref:"searchInput",staticClass:"search-input",attrs:{type:"search",maxlength:15,animate:!1,placeholder:t.customSearchPlaceHolder},on:{blur:t.onSearchBlur,focus:t.onSearchFocus,input:t.doDebounceFilterSearch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doSearch(!1)}},model:{value:t.currentSearchTerm,callback:function(e){t.currentSearchTerm="string"===typeof e?e.trim():e},expression:"currentSearchTerm"}})],1):t._e(),t._v(" "),t._t("toolbar-before"),t._v(" "),a("span",{staticClass:"download"},[t.downloadCsv?a("span",{staticClass:"download-csv link",on:{click:t.doCSVDownload}},[a("span",{staticClass:"icon icon-download"}),t._v("Download\n\t\t\t\t"),a("a",{ref:"csvDownloadLink",staticClass:"hide download-link",attrs:{href:"#"}})]):t._e()]),t._v(" "),t._t("toolbar-after")],2):t._e(),t._v(" "),a("table",[t.tableHeaders?a("thead",[a("tr",[t.select&&t.uid?a("th",{staticClass:"select"},[a("div",{class:["su-checkbox-group",{indeterminate:this.isSelectAllIndeterminate}]},["hide"!==t.selectAll?a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectAllValue,expression:"selectAllValue"}],staticClass:"su-checkbox",attrs:{id:"selectall",type:"checkbox",disabled:"disable"===t.selectAll},domProps:{checked:Array.isArray(t.selectAllValue)?t._i(t.selectAllValue,null)>-1:t.selectAllValue},on:{input:t.handleSelectAll,change:function(e){var a=t.selectAllValue,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.selectAllValue=a.concat([i])):r>-1&&(t.selectAllValue=a.slice(0,r).concat(a.slice(r+1)))}else t.selectAllValue=n}}}):t._e(),t._v(" "),t._m(0)])]):t._e(),t._v(" "),t._l(t.tableHeaders,(function(e,s){return a("th",t._g({key:s,class:[e.class,e._style,{sortable:t.sort&&e.sort,"table-border":t.tableBorder&&e.tableBorder}]},t.sort&&e.sort?{click:function(){return t.doSort(e)}}:{}),[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.description,expression:"header.description"}],attrs:{title:e.description}},[t._v("\n\t\t\t\t\t\t"+t._s(e.label||e.field)+"\n\t\t\t\t\t")]),t._v(" "),t.headerCheckbox&&e.showHeaderCheckbox?a("div",{staticClass:"su-checkbox-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentHeaderCheckboxChecked,expression:"currentHeaderCheckboxChecked"}],staticClass:"su-checkbox",attrs:{id:"header-"+e.field,type:"checkbox"},domProps:{checked:Array.isArray(t.currentHeaderCheckboxChecked)?t._i(t.currentHeaderCheckboxChecked,null)>-1:t.currentHeaderCheckboxChecked},on:{change:[function(e){var a=t.currentHeaderCheckboxChecked,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.currentHeaderCheckboxChecked=a.concat([i])):r>-1&&(t.currentHeaderCheckboxChecked=a.slice(0,r).concat(a.slice(r+1)))}else t.currentHeaderCheckboxChecked=n},t.handleHeaderCheckboxSelect]}}),t._v(" "),a("label",{staticClass:"su-checkbox-label",attrs:{for:"header-"+e.field}},[t._m(1,!0)])]):t._e(),t._v(" "),e.sortArrow?a("span",{class:["arrow "+(e.arrowShowDefault?"arrow-show":"")+" arrow "+(void 0===e._sortOrder?"desc":e._sortOrder)]}):t._e()])}))],2)]):t._e(),t._v(" "),a("tbody",[t._l(t.limitTableData,(function(e,s){return a("tr",{key:t.uid&&e[t.uid]||s,class:[e._style,{focused:t.focus&&t.focusedRow&&e[t.uid]===t.focusedRow[t.uid]}],attrs:{"data-uid":t.uid&&e[t.uid]||s},on:{click:function(a){return t.handleRowClick(e,a)},mouseenter:function(a){return t.handleMouseEnter(e,a)},mouseleave:function(a){return t.handleMouseLeave(e,a)}}},[t.select&&t.uid?a("td",{staticClass:"select",on:{click:function(t){return t.stopPropagation(),function(){}.apply(null,arguments)}}},[a("div",{staticClass:"su-checkbox-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedUIDs[e[t.uid]],expression:"selectedUIDs[row[uid]]"}],staticClass:"su-checkbox",attrs:{id:e[t.uid],type:"checkbox",disabled:e.disableSelect},domProps:{checked:Array.isArray(t.selectedUIDs[e[t.uid]])?t._i(t.selectedUIDs[e[t.uid]],null)>-1:t.selectedUIDs[e[t.uid]]},on:{change:[function(a){var s=t.selectedUIDs[e[t.uid]],n=a.target,i=!!n.checked;if(Array.isArray(s)){var r=null,o=t._i(s,r);n.checked?o<0&&t.$set(t.selectedUIDs,e[t.uid],s.concat([r])):o>-1&&t.$set(t.selectedUIDs,e[t.uid],s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.selectedUIDs,e[t.uid],i)},t.handleSelectRow]}}),t._v(" "),a("label",{staticClass:"su-checkbox-label",attrs:{for:e[t.uid]}},[t._m(2,!0)])])]):t._e(),t._v(" "),t._t("default",null,{row:e,index:s})],2)})),t._v(" "),t.currentLimit>-1&&t.data.length>t.limit?a("tr",{staticClass:"show-all-row"},[t.select&&t.uid?a("td"):t._e(),t._v(" "),a("td",{staticClass:"show-all-col",attrs:{colspan:t.tableHeaders.length}},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showAllRows.apply(null,arguments)}}},[t._v(t._s(t.showAllLabel)+" ("+t._s(t.data.length-t.currentLimit)+" remaining items)")])])]):t._e()],2),t._v(" "),a("tfoot",[t._t("footer")],2)]),t._v(" "),t.pages>1?a("ul",{staticClass:"pagination"},[t.prevText?a("li",{class:1===t.currentPageIndex?"disabled":"",on:{click:function(e){return e.stopPropagation(),t.goToPrev.apply(null,arguments)}}},[a("a",[t._v(t._s(t.prevText))])]):t._e(),t._v(" "),t._l(t.pages,(function(e,s){return a("li",{key:s,class:s===t.currentPageIndex-1?"selected":"unselected",on:{click:function(e){return e.stopPropagation(),t.selectPage(s)}}},[a("a",[t._v(t._s(e))])])})),t._v(" "),t.nextText?a("li",{class:t.currentPageIndex===t.pages?"disabled":"",on:{click:function(e){return e.stopPropagation(),t.goToNext.apply(null,arguments)}}},[a("a",[t._v(t._s(t.nextText))])]):t._e()],2):t._e()]):t._e()},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"su-checkbox-label",attrs:{for:"selectall"}},[a("span",{staticClass:"su-checkbox-box"},[a("span",{staticClass:"su-checkbox-tick"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"su-checkbox-box"},[a("span",{staticClass:"su-checkbox-tick"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"su-checkbox-box"},[a("span",{staticClass:"su-checkbox-tick"})])}],i=a("b047c"),r=a.n(i);function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=c(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,o=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){o=!0,i=t},f:function(){try{r||null==a.return||a.return()}finally{if(o)throw i}}}}function c(t,e){if(t){if("string"===typeof t)return d(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}var u={props:{perPage:Number,currentPage:Number,pagination:Boolean,nextText:String,prevText:String,data:{required:!0,type:Array,default:[]},headers:{type:Array,default:null},uid:{type:String,default:null},toolbar:{type:Boolean,default:!0},toolbarHeader:{type:Boolean,default:!1},toolbarHeaderText:{type:String,default:""},headerCheckbox:{type:Boolean,default:!1},headerCheckboxChecked:{type:Boolean,default:!0},downloadCsv:String||Boolean,sort:Boolean,tableBorder:Boolean,focus:Boolean,select:Boolean,selectAll:String,search:Boolean,searchFilterOnly:{type:Boolean,default:!0},searchPlaceHolder:{type:String,default:"Search table"},limit:{type:Number,default:-1},showAllLabel:{type:String,default:"Show all rows"},rowEvents:Boolean,rowClick:Function,rowEnter:Function,rowLeave:Function,rowKeyDown:Function},data:function(){return{currentSearchTerm:"",isSearchExpaned:!1,customSearchPlaceHolder:"Search",tableHeaders:[],tableData:[],selectedUIDs:{},selectAllValue:!1,isSelectAllIndeterminate:!1,currentHeaderCheckboxChecked:this.headerCheckboxChecked,currentLimit:this.limit,focusedRow:null,pages:0,currentPageIndex:this.currentPage}},created:function(){if(this.pagination){var t=this.perPage<1?1:this.perPage;this.pages=Math.ceil(Math.abs(this.data.length/t))}this.tableHeaders=this.$clone(this.headers),this.setData(this.data,this.currentLimit),this.currentSortedHeader=null,this.currentSearchFilterOnly=this.searchFilterOnly,this.searchableFields=this.tableHeaders.filter((function(t){return t.search})).map((function(t){return t.field}))},mounted:function(){this.focus&&this.$el.addEventListener("keydown",this.handleKeyDown)},beforeDestroy:function(){this.focus&&this.$el.removeEventListener("keydown",this.handleKeyDown),this.select&&(this.selectAllValue=!1,this.handleSelectAll({target:{checked:!1}}))},activated:function(){},deactivated:function(){this.select&&(this.selectAllValue=!1,this.handleSelectAll({target:{checked:!1}}))},watch:{data:function(t){this.setData(t,this.currentLimit)},headerCheckboxChecked:function(t){this.currentHeaderCheckboxChecked=t}},computed:{limitTableData:function(){if(this.pagination){var t=(this.currentPageIndex-1)*this.perPage,e=this.currentPageIndex*this.perPage-1;return this.tableData.filter((function(a,s){if(t<=s&&e>=s)return a}))}return this.tableData}},methods:{goToPrev:function(){this.currentPageIndex>1&&this.currentPageIndex--},goToNext:function(){this.currentPageIndex<this.pages&&this.currentPageIndex++},selectPage:function(t){var e=t+1;this.currentPageIndex=e},setData:function(t,e){var a=this;this.tableData=-1===e?this.$clone(t):this.$clone(t.slice(0,e)),this.currentSortedHeader&&this.doSort(this.currentSortedHeader,!0),this.currentSearchTerm&&this.doSearch(this.currentSearchFilterOnly);var s,n={},i=l(this.tableData);try{for(i.s();!(s=i.n()).done;){var r=s.value,o=this.uid&&r[this.uid];r.disableSelect?n[o]=!1:n[o]=this.selectedUIDs[o]}}catch(c){i.e(c)}finally{i.f()}this.selectedUIDs=n,this.$nextTick((function(){return a.emitSelectedEvent()}))},onClickOutside:function(){this.focusedRow=null},clearSerachTerm:function(){this.currentSearchTerm="",this.doSearch()},onSearchBlur:function(){var t=this;this.currentSearchTerm.length||this.$nextTick((function(){t.isSearchExpaned=!1,t.customSearchPlaceHolder="Search"}))},onSearchFocus:function(){var t=this;this.$nextTick((function(){t.isSearchExpaned=!0,t.customSearchPlaceHolder=t.searchPlaceHolder}))},doDebounceFilterSearch:r()((function(t){this.doSearch(this.currentSearchFilterOnly)}),200),doSearch:function(t){this.currentSearchFilterOnly=t;var e,a=l(this.tableData);try{for(a.s();!(e=a.n()).done;){var s=e.value,n=!1;if(this.currentSearchTerm.length>0){var i,r=l(this.searchableFields);try{for(r.s();!(i=r.n()).done;){var o=i.value,c=s[o].toString().toUpperCase();if(c&&-1!==c.indexOf(this.currentSearchTerm.toUpperCase())){n=!0;break}}}catch(d){r.e(d)}finally{r.f()}}else n=!0;s._style||this.$set(s,"_style",{}),this.$set(s,"_hide",!(n||t)),this.$set(s._style,"search-term-present",n),this.$set(s._style,"search-term-absent",!n)}}catch(d){a.e(d)}finally{a.f()}},doSort:function(t,e){e?t._sortOrder||(t._sortOrder="asc"):t._sortOrder="asc"===t._sortOrder?"desc":"asc",this.tableData.sort((function(e,a){var s=t.sortMethod&&t.sortMethod(e)||e[t.field],n=t.sortMethod&&t.sortMethod(a)||a[t.field];if("asc"===t._sortOrder){if(s<n)return-1;if(s>n)return 1}else{if(s>n)return-1;if(s<n)return 1}return 0}));var a,s=l(this.tableHeaders);try{for(s.s();!(a=s.n()).done;){var n=a.value;n._style={sortable:n.sort}}}catch(i){s.e(i)}finally{s.f()}t._style=o({sortable:!0,sorted:!0},t._sortOrder,!0),this.currentSortedHeader=t},handleSelectAll:function(t){var e,a=this,s={},n=l(this.tableData);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(!i.disableSelect){var r=this.uid&&i[this.uid];s[r]=t.target.checked}}}catch(o){n.e(o)}finally{n.f()}this.selectedUIDs=s,this.$nextTick((function(){return a.emitSelectedEvent()}))},handleSelectRow:function(t){var e=this;!t.target.checked&&this.selectAllValue&&(this.selectAllValue=!1),this.$nextTick((function(){return e.emitSelectedEvent()}))},handleHeaderCheckboxSelect:function(t){this.$emit("headerCheckboxSelect",t.target.checked),this.currentHeaderCheckboxChecked=t.target.checked},emitSelectedEvent:function(){if(this.rowEvents){var t,e=[],a=l(this.tableData);try{for(a.s();!(t=a.n()).done;){var s=t.value;this.selectedUIDs[s[this.uid]]&&e.push(s)}}catch(n){a.e(n)}finally{a.f()}this.$emit("selected",e)}},showAllRows:function(){this.currentLimit=-1,this.setData(this.data,this.currentLimit)},handleRowClick:function(t,e){if(this.focusedRow=t,this.select&&!t.disableSelect){var a=this.uid&&t[this.uid];this.$set(this.selectedUIDs,a,!this.selectedUIDs[a]),this.emitSelectedEvent()}this.rowEvents&&this.$emit("rowClick",{row:t,event:e})},scrollToFocusedRow:function(){if(this.focusedRow){var t=this.$el.querySelector("tr[data-uid='"+this.focusedRow[this.uid]+"']");t&&t.scrollIntoView&&t.scrollIntoView(!1)}},handleKeyDown:function(t){var e=this;if(null!==this.focusedRow){if(t.preventDefault(),t.stopPropagation(),!this.select||13!==t.keyCode&&32!==t.keyCode||this.$set(this.selectedUIDs,this.focusedRow[this.uid],!this.selectedUIDs[this.focusedRow[this.uid]]),38===t.keyCode||40===t.keyCode)for(var a=0;a<this.tableData.length;a++){var s=this.tableData[a-1<0?this.tableData.length-1:a-1],n=this.tableData[a+1>this.tableData.length-1?0:a+1];if(this.focusedRow[this.uid]===this.tableData[a][this.uid]){if(38===t.keyCode){this.focusedRow=s,this.$nextTick((function(){return e.scrollToFocusedRow()}));break}if(40===t.keyCode){this.focusedRow=n,this.$nextTick((function(){return e.scrollToFocusedRow()}));break}}}this.rowEvents&&this.$emit("rowKeyDown",{row:this.focusedRow,event:t})}},handleMouseEnter:function(t,e){this.rowEvents&&this.$emit("rowEnter",{row:t,event:e})},handleMouseLeave:function(t,e){this.rowEvents&&this.$emit("rowLeave",{row:t,event:e})}}},h=u,p=a("2877"),_=Object(p["a"])(h,s,n,!1,null,null,null);e["a"]=_.exports},f3b7:function(t,e,a){"use strict";var s=a("29db"),n=a("1a5a"),i=a("506b"),r={},o={_:{}};o._.Router=s,o._.Client=n,o._.Tunnel=i,o.client=function(t){t=t||{};var e,a=t.namespace||"tabex_default_";return t.iframe?e=new i.TunnelClient(t):(r[a]||(r[a]=new s({namespace:a})),e=r[a]),new n({router:e})},o.router=function(t){t=t||{};var e=t.namespace||"tabex_default_";return r[e]||(r[e]=new s({namespace:e})),new i.TunnelRouter({router:r[e],namespace:e,origin:t.origin}),r[e]},t.exports=o},ffd6:function(t,e,a){var s=a("3729"),n=a("1310"),i="[object Symbol]";function r(t){return"symbol"==typeof t||n(t)&&s(t)==i}t.exports=r}}]);