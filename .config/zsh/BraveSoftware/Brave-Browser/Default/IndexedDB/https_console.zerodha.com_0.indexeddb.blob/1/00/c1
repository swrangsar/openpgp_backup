(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["portfolio","chunk-35d3e074"],{"02bc":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"state-process-container",attrs:{main:t.main,sub:t.sub}},[a("div",{staticClass:"state-process"},[a("img",{staticClass:"empty-img",attrs:{src:t.imgSrc}}),t._v(" "),a("h3",{attrs:{id:"mainText"},domProps:{innerHTML:t._s(t.main)}}),t._v(" "),t.sub?a("p",{attrs:{id:"subText"},domProps:{innerHTML:t._s(t.sub)}}):t._e()])])},s=[],n=a("5975"),r={name:"empty",props:{main:{type:String,default:"Report's empty"},sub:{type:String,default:"We couldn't find any results for your query"},imgSrc:{type:String,default:"/static/images/noresults.svg"}},components:{"su-loader":n["a"]}},o=r,l=a("2877"),c=Object(l["a"])(o,i,s,!1,null,null,null);e["a"]=c.exports},2388:function(t,e,a){"use strict";var i=a("14f3"),s=a("ec83"),n=(1+Math.sqrt(5))/2;function r(t,e,a,n,r,o){var l,c,d,u,g,p,h,_,f,m,v,A=[],y=e.children,b=0,C=0,w=y.length,k=e.value;while(b<w){d=r-a,u=o-n;do{g=y[C++].value}while(!g&&C<w);for(p=h=g,m=Math.max(u/d,d/u)/(k*t),v=g*g*m,f=Math.max(h/v,v/p);C<w;++C){if(g+=c=y[C].value,c<p&&(p=c),c>h&&(h=c),v=g*g*m,_=Math.max(h/v,v/p),_>f){g-=c;break}f=_}A.push(l={value:g,dice:d<u,children:y.slice(b,C)}),l.dice?Object(i["a"])(l,a,n,r,k?n+=u*g/k:o):Object(s["a"])(l,a,n,k?a+=d*g/k:r,o),k-=g,b=C}return A}e["a"]=function t(e){function a(t,a,i,s,n){r(e,t,a,i,s,n)}return a.ratio=function(e){return t((e=+e)>1?e:1)},a}(n)},"37bf":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filter-box",attrs:{holding:t.holding,tags:t.tags,target:t.target,isAll:t.isAll}},[t.tags.length?a("div",[a("div",{class:{"filter-link":!0,active:t.selectedFiltersModal},on:{click:function(e){return e.stopPropagation(),t.showSelectedFilters.apply(null,arguments)}}},[a("vue-tags-input",{class:{"is-all":t.isAll,"border-input":!t.selectedFiltersModal},attrs:{"add-only-from-autocomplete":!0,"max-tags":10,maxlength:20,tags:t.selectedTags,placeholder:t.placeholder,"autocomplete-items":t.tagOptions},on:{"tags-changed":function(e){return t.selectedTags=e}},scopedSlots:t._u([{key:"autocomplete-item",fn:function(e){return a("div",{staticClass:"my-item",on:{click:function(a){return t.addTag(e.item)}}},[e.item.id?a("span",{staticClass:"auto-name",style:"color:"+e.item.colour+";background:"+t.getBackground(e.item.colour)},[t._v(t._s(e.item.text))]):a("span",{staticClass:"auto-name"},[t._v(t._s(e.item.text))])])}},{key:"tag-center",fn:function(e){return a("div",{staticClass:"my-tag-left",on:{click:function(a){return t.showCreateBox(!0,e)}}},[e.tag.client_id&&"SYSTEM"!==e.tag.client_id&&!e.tag.isPending?a("span",{staticClass:"icon icon-edit edit-tag-icon"}):t._e(),t._v(" "),e.tag.client_id&&e.tag.isPending?a("span",{staticClass:"icon icon-clock"}):t._e(),t._v("\n\t\t\t\t\t"+t._s(e.tag.text)+"\n\t\t\t\t")])}}],null,!1,4171474481),model:{value:t.tagsFilter,callback:function(e){t.tagsFilter=e},expression:"tagsFilter"}}),t._v(" "),t.isAll?a("a",{staticClass:"tags-nudge-link",attrs:{target:"_blank",href:"https://support.zerodha.com/category/trading-and-markets/kite-features/tags/articles/add-tags-on-console"}},[a("span",{staticClass:"icon icon-info"})]):t._e()],1),t._v(" "),a("div",{staticClass:"filter-option-container"},[a("div",{class:{"filter-option":!0,show:t.selectedFiltersModal},on:{click:function(e){return e.stopPropagation(),t.showSelectedFilters.apply(null,arguments)}}},[a("div",{staticClass:"filters"},[a("hr",{staticClass:"all-filter-hr"}),t._v(" "),t._l(t.tags,(function(e,i){return e.client_id&&"SYSTEM"!==e.client_id.toUpperCase()&&!t.selectedTags.find((function(t){return t.id===e.id}))?a("div",{key:i+"-o2",staticClass:"filters-list"},[a("label",{class:"checks type "+t.paletteMap[e.colour],on:{click:function(a){return t.addTag(e)}}},[t._v(t._s(e.text))])]):t._e()})),t._v(" "),a("label",{staticClass:"create-tag-cloud",on:{click:function(e){return t.showCreateBox()}}},[t._v("+ New tag")])],2)])])]):a("div",[a("a",{attrs:{href:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.showCreateBox.apply(null,arguments)}}},[t._v("+ Create and apply tag to all trades")])]),t._v(" "),t.showCreate?a("div",{staticClass:"section tagger"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideCreateBox}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showCreateBox("a")}}},[a("div",{staticClass:"modalbody",on:{click:t.hidePalette}},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideCreateBox.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),t.editing?a("h2",{staticClass:"row v-align"},[a("div",{staticClass:"eight columns"},[a("span",{staticClass:"icon icon-edit"}),t._v(" "),a("span",[t._v('Edit "'+t._s(t._f("clip")(t.newTag.text))+'"')])]),t._v(" "),a("div",{staticClass:"four columns text-right"},[a("su-button",{staticClass:"btn-grey btn-outline",attrs:{disabled:t.deleting,processing:t.deleting},nativeOn:{click:function(e){return e.preventDefault(),t.showConfirmationBox.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-trash"}),t._v("\n\t\t\t\t\t\t\t\t\tDelete tag\n\t\t\t\t\t\t\t\t")])],1)]):a("h2",[t._v("New tag")]),t._v(" "),a("su-form",{ref:"create_tag_form",attrs:{id:"create_tag_form"}},[a("div",{staticClass:"create-tag-color"},[a("label",[t._v(" ")]),a("br"),t._v(" "),a("div",{staticClass:"selected-color",on:{click:function(e){e.stopPropagation(),t.showPalette=!0}}},[a("span",{style:"background-color:"+t.newTag.colour},[t._v(" ")]),t._v(" "),a("span",[t._v("Color")])]),t._v(" "),t.showPalette?a("div",{staticClass:"color-palette"},t._l(t.palette,(function(e,i){return a("span",{key:i,staticClass:"palette-colors",style:"background:"+e,on:{click:function(a){return t.changeColor(e)}}},[t._v(" ")])})),0):t._e()]),a("div",{staticClass:"create-tag-name"},[a("su-input",{attrs:{id:"create_tag_name",type:"text",autofocus:"",pattern:"\\s*(\\S\\s*){3,}",oninput:"this.setCustomValidity('')",maxlength:15,oninvalid:"this.setCustomValidity('Please fill in this field')",label:"Tag",placeholder:"Tag",rules:t.rules.tagName},model:{value:t.newTag.text,callback:function(e){t.$set(t.newTag,"text",e)},expression:"newTag.text"}})],1),a("br"),t._v(" "),a("div",{staticClass:"create-tag-desc row"},[a("div",{staticClass:"eight columns"},[a("su-input",{attrs:{pattern:"\\s*(\\S\\s*){6,}",oninvalid:"this.setCustomValidity('Please fill in this field')",oninput:"this.setCustomValidity('')",type:"text",maxlength:140,minlength:6,label:"Description",placeholder:"Description",rules:t.rules.tagDesc},model:{value:t.newTag.description,callback:function(e){t.$set(t.newTag,"description",e)},expression:"newTag.description"}})],1),t._v(" "),a("div",{staticClass:"four columns su-input-group"},[a("label",{staticClass:"su-input-label"},[t._v(" ")]),t._v(" "),t.editing?a("su-button",{staticClass:"btn btn-blue",attrs:{type:"submit",disabled:t.creatingTag,processing:t.creatingTag},nativeOn:{click:function(e){return e.preventDefault(),t.createTag(!0)}}},[t._v("Update")]):a("su-button",{staticClass:"btn btn-blue",attrs:{type:"submit",disabled:t.creatingTag,processing:t.creatingTag},nativeOn:{click:function(e){return e.preventDefault(),t.createTag()}}},[t._v("Save")])],1)])])],1)])])])]):t._e(),t._v(" "),t.showConfirmation?a("div",{staticClass:"section tagger"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideConfirmationBox}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showConfirmationBox.apply(null,arguments)}}},[a("div",{staticClass:"modalbody",on:{click:function(e){return e.stopPropagation(),t.hidePalette.apply(null,arguments)}}},[a("h4",{staticClass:"text-center"},[t._v('Are you sure you want to delete "'+t._s(t.newTag.tag_name)+'" ?')]),a("br"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"six columns text-right"},[a("su-button",{staticClass:"btn btn-blue",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.deleteTag()}}},[t._v("Delete")])],1),t._v(" "),a("div",{staticClass:"six columns"},[a("su-button",{staticClass:"btn-grey btn-outline",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.hideConfirmationBox.apply(null,arguments)}}},[t._v("Cancel")])],1)])])])])])]):t._e(),t._v(" "),t.showTagManager?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideTagManagerModal}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showTagManagerModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideTagManagerModal.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("tag-manager",{attrs:{isModal:!0}})],1)])])])]):t._e()])},s=[],n=a("5975"),r=a("c7a0"),o=a.n(r),l=a("ba6a"),c=a("5665"),d=a("2f62"),u=a("6157");function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){h(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function h(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var _={name:"tagger",data:function(){var t=function(t,e){return e&&e.trim().length<3?new Error("Minimum characters required: 3"):e&&e.length>15?new Error("Maximum characters allowed: 15"):void 0},e=function(t,e){return e&&e.trim().length<6?new Error("Minimum characters required: 6"):e&&e.length>140?new Error("Maximum characters allowed: 140"):void 0};return{tagsFilter:"",selectedTags:[],newTag:{text:"",type:"custom",classes:"custom-tag ",value:"",colour:"rgba(3, 155, 229, 1)",description:""},showCreate:!1,hasChanged:!1,showPalette:!1,palette:["rgba(3, 155, 229, 1)","rgba(11, 128, 67, 1)","rgba(63, 81, 181, 1)","rgba(244, 81, 30, 1)","rgba(121, 85, 72, 1)","rgba(124, 179, 66, 1)","rgba(240, 147, 0, 1)","rgba(142, 36, 170, 1)","rgba(97, 97, 97, 1)","rgba(255, 205, 86, 1)"],paletteMap:{"rgba(3, 155, 229, 1)":"p1","rgba(11, 128, 67, 1)":"p2","rgba(63, 81, 181, 1)":"p3","rgba(244, 81, 30, 1)":"p4","rgba(121, 85, 72, 1)":"p5","rgba(124, 179, 66, 1)":"p6","rgba(240, 147, 0, 1)":"p7","rgba(142, 36, 170, 1)":"p8","rgba(97, 97, 97, 1)":"p9","rgba(255, 205, 86, 1)":"p10"},creatingTag:!1,editing:!1,deleting:!1,selectedFiltersModal:!1,showConfirmation:!1,rules:{tagName:[{validator:t,required:!0}],tagDesc:[{validator:e,required:!0}]},showTagManager:!1}},props:{holding:{type:Object},target:{type:"String"},tags:{type:Array},loader:{type:Boolean,default:!1},placeholder:{type:String,default:"+ Apply tags to all trades"},isAll:{type:Boolean,default:!0}},computed:{tagOptions:function(){var t=this;if(this.tags){var e=this.tags.filter((function(e){return-1!==e.text.toLowerCase().indexOf(t.tagsFilter.toLowerCase())&&"SYSTEM"!==e.client_id.toUpperCase()}));return e.push({text:"+  New tag"}),e}}},watch:{"newTag.text":function(t){this.newTag.text=t.toLowerCase().trim().replace(" ","-")},selectedTags:function(t,e){var a=this;if(this.$emit("changed",!0),t.length)if(t[t.length-1].hasOwnProperty("value")){if(t.length===this.holding.tags.length)for(var i=function(e){var i=t.filter((function(t){return t.id===a.holding.tags[e].id}));if(0===i.length)return a.hasChanged=!0,"break"},s=0;s<this.holding.tags.length;s++){var n=i(s);if("break"===n)break}else this.hasChanged=!0,this.compareArrays(t,e)||this.hideCreateBox();var r=document.querySelector(".breakdown-tag-container");if(r){var o=r.querySelector(".tagger").querySelector(".vue-tags-input"),l=r.querySelector(".tagger").querySelector(".filters");o&&l&&this.$nextTick((function(){var t=r.querySelector(".tagger").querySelector(".vue-tags-input").offsetHeight;l.style.paddingTop=t>45?t+7+"px":"45px"}))}}else this.showCreateBox("b"),this.selectedTags.pop()},tagsFilter:function(t){t&&t.trim()&&(this.newTag.text=t,this.hideSelectedFilters())}},components:{VueTagsInput:o.a,TagManager:u["default"],"su-loader":n["a"]},mounted:function(){var t=this;if(this.selectedFiltersModal=!1,this.holding&&this.holding.tags?this.selectedTags=JSON.parse(JSON.stringify(this.holding.tags)):this.fetchTags(!1,!0),this.holding&&this.holding.pendingTag){var e=function(e){var a=t.selectedTags.findIndex((function(a){return a.id===t.holding.pendingTags[e].id}));if(-1===a){var i=t.holding.pendingTags[e];i["isPending"]=!0,i["classes"]+=" pending",t.selectedTags.push(i)}else t.selectedTags[a]["isPending"]=!0};for(var a in this.holding.pendingTags)e(a)}},methods:p(p({},Object(d["d"])(["setConsoleTags"])),{},{showTagManagerModal:function(){this.showTagManager=!0},hideTagManagerModal:function(){this.showTagManager=!1},compareArrays:function(t,e){return t.length===e.length&&t.every((function(t,a){return t===e[a]}))},addTag:function(t){var e=this;if(t){var a=this.selectedTags.find((function(e){return e.id===t.id}));a||this.selectedTags.push(t)}else{var i=function(t){var a=e.selectedTags.find((function(a){return a.id===e.tags[t].id}));a||"SYSTEM"===e.tags[t].client_id||e.selectedTags.push(e.tags[t])};for(var s in this.tags)i(s);this.showSelectedFilters()}},showSelectedFilters:function(){var t=this;this.$nextTick((function(){t.selectedFiltersModal=!0}))},hideSelectedFilters:function(){var t=this;this.$nextTick((function(){t.selectedFiltersModal=!1}))},getBackground:function(t){if(t){var e=t.replace("1)","0.1)");return e}return"rgba(68, 68, 68, 0.1)"},showCreateBox:function(t,e){this.showCreate||(this.showCreate=!0,!0===t&&(this.editing=!0,this.newTag=e.tag),this.$emit("creating",!0))},hideCreateBox:function(){this.showCreate=!1,this.newTag={text:"",type:"custom",classes:"custom-tag ",value:"",colour:"rgba(3, 155, 229, 1)",description:""},this.$emit("creating",!1)},hidePalette:function(){this.showPalette=!1},changeColor:function(t){this.newTag.colour=t},createTag:function(t){var e=this;if(this.$refs["create_tag_form"]&&this.$refs["create_tag_form"].validate()){t||(this.newTag.classes+=this.paletteMap[this.newTag.colour]),this.creatingTag=!0;var a={tag_name:this.newTag.text,description:this.newTag.description,colour:this.newTag.colour},i=c["a"].createTag,s="POST";!0===t&&(a["tag_id"]=parseInt(this.newTag.id),i=c["a"].editTag,s="PUT"),l["a"].request(s,!1,i,a,(function(a,i){"SUCCESS"===a.toUpperCase()?e.fetchTags(t):"FAILURE"===a.toUpperCase()?(e.creatingTag=!1,e.$toast.error({message:"Error updating tags: "+i.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3})):(e.creatingTag=!1,e.$toast.error({message:"Error updating tags:"+l["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3}))}))}},fetchTags:function(t,e){var a=this;l["a"].request("GET",!1,c["a"].getTags,null,(function(i,s){if(a.creatingTag=!1,a.deleting=!1,"SUCCESS"===i.toUpperCase()){for(var n=s.data.data.result,r=0;r<n.length;r++)"SYSTEM"===n[r].client_id.toUpperCase()?(n[r]["type"]="system",n[r]["classes"]="system-tag"):(n[r]["type"]="custom",n[r]["classes"]="custom-tag "+a.paletteMap[n[r].colour]),n[r]["text"]=n[r].tag_name,n[r]["value"]=n[r].id;if(a.setConsoleTags(n),!e){var o=n.find((function(t){return t.tag_name===a.newTag.text}));if(o){if(t)for(var c in a.selectedTags)parseInt(a.selectedTags[c]["id"])===parseInt(o.id)&&(a.selectedTags[c]=o);else a.selectedTags.push(o);t?a.$toast.success({message:"Tag updated.",orientation:a.$toast.TOP_RIGHT,duration:6e3}):a.$toast.success({message:"Tag created.",orientation:a.$toast.TOP_RIGHT,duration:6e3})}else{var d=a.selectedTags.findIndex((function(t){return t.tag_name===a.newTag.text}));-1!==d&&a.selectedTags.splice(d),a.deleting=!1,a.$toast.success({message:"Tag deleted.",orientation:a.$toast.TOP_RIGHT,duration:6e3})}t&&a.$emit("tag-updated",n),a.hideCreateBox()}}else"FAILURE"===i.toUpperCase()?a.$toast.error({message:"Error fetching tags: "+s.data.message,orientation:a.$toast.TOP_RIGHT,duration:6e3}):a.$toast.error({message:"Error fetching tags:"+l["a"].errorMessage(),orientation:a.$toast.TOP_RIGHT,duration:6e3})}))},postTag:function(){for(var t={},e=[],a=0;a<this.selectedTags.length;a++)e.push(this.selectedTags[a]["id"]);t["target_id"]=this.holding.instrument_id,t["tag_ids"]=e,this.$emit("tag-posted",t)},deleteTag:function(){var t=this;this.deleting=!0,this.$nextTick((function(){t.hideConfirmationBox()}));var e=[];e.push(parseInt(this.newTag.id)),l["a"].request("PUT",!1,c["a"].deleteTag,{tag_ids:e},(function(e,a){"SUCCESS"===e.toUpperCase()?t.fetchTags(!0):"FAILURE"===e.toUpperCase()?(t.deleting=!1,t.$toast.error({message:"Error deleting tags: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3})):(t.deleting=!1,t.$toast.error({message:"Error deleting tags:"+l["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}))}))},showConfirmationBox:function(){this.showConfirmation=!0},hideConfirmationBox:function(){this.showConfirmation=!1}})},f=_,m=a("2877"),v=Object(m["a"])(f,i,s,!1,null,null,null);e["a"]=v.exports},6157:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"tag-widget "+(t.isModal?"":"page-container full-height")},[a("h1",[t.isInsideKite?a("span",{staticClass:"icon icon-bookmark"}):a("span",{staticClass:"icon icon-arrow-left",on:{click:function(e){return e.stopPropagation(),t.hideTagManagerModal.apply(null,arguments)}}}),t._v("\n\t\tManage tags\n\t\t"),!t.fetchingTags&&t.tags&&t.tags.length?a("su-button",{staticClass:"btn btn-blue",nativeOn:{click:function(e){return e.preventDefault(),t.showCreateBox()}}},[t._v("+ New tag")]):t._e()],1),t._v(" "),t.fetchingTags?a("div",[a("jobber",{attrs:{main:"Fetching your tags",sub:""}})],1):a("div",[t.tagResults&&t.tagResults.length||t.tags&&t.tags.length?a("div",[a("div",{staticClass:"tag-search"},[a("su-input",{attrs:{autofocus:"",placeholder:"Search tags",label:"Search"},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}})],1),t._v(" "),t.tagResults&&t.tagResults.length?a("div",{staticClass:"tag-list"},[a("div",{staticClass:"added-tags"},t._l(t.tagResults,(function(e,i){return a("p",{key:i},[a("span",{staticClass:"tag",style:"background:"+t.getBackground(e.colour)+";color:"+t.getColor(e),on:{click:function(a){return t.showCreateBox(!0,e)}}},[t._v(t._s(e.text))]),t._v(" "),a("span",{staticClass:"tag-links"},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"icon-container",attrs:{title:"Edit","tooltip-pos":"left"}},[a("span",{staticClass:"icon icon-edit",on:{click:function(a){return t.showCreateBox(!0,e)}}})]),t._v(" "),a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"icon-container",attrs:{title:"Delete","tooltip-pos":"left"}},[a("span",{staticClass:"icon icon-trash-empty",on:{click:function(a){return t.showConfirmationBox(!0,e)}}})]),t._v(" "),t.isInsideKite?t._e():a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"icon-container analyse",attrs:{title:"Analyse","tooltip-pos":"left"}},[a("span",{staticClass:"icon icon-trending-up",on:{click:function(a){return t.analyseTag(e)}}})])])])})),0)]):a("p",{staticClass:"text-grey"},[a("span",{staticClass:"icon icon-info"}),t._v(" No tags found.\n\t\t\t")])]):a("div",{staticClass:"text-center no-tags"},[a("img",{attrs:{src:"/static/images/tags-empty.png"}}),t._v(" "),a("br"),t._v(" "),t.fetchingTags?t._e():a("su-button",{staticClass:"btn btn-blue",nativeOn:{click:function(e){return e.preventDefault(),t.showCreateBox()}}},[t._v("Create tag")])],1)]),t._v(" "),t.showCreate?a("div",{staticClass:"section tagger"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideCreateBox}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showCreateBox("new")}}},[a("div",{staticClass:"modalbody",on:{click:t.hidePalette}},[t.editing?a("h2",{staticClass:"create-tag-head"},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.hideCreateBox.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-arrow-left"})]),t._v(" "),a("span",[t._v('Edit "'+t._s(t._f("clip")(t.newTag.text))+'"')])]):a("h2",{staticClass:"create-tag-head"},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.hideCreateBox.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-arrow-left"})]),t._v("\n\t\t\t\t\t\t\tNew tag\n\t\t\t\t\t\t")]),t._v(" "),a("su-form",{ref:"create_tag_form",attrs:{id:"create_tag_form"}},[a("div",{staticClass:"create-tag-color"},[a("label",[t._v(" ")]),a("br"),t._v(" "),a("div",{staticClass:"selected-color",on:{click:function(e){e.stopPropagation(),t.showPalette=!t.showPalette}}},[a("span",{style:"background-color:"+t.newTag.colour},[t._v(" ")]),t._v(" "),a("span",[t._v("Color")])]),t._v(" "),t.showPalette?a("div",{staticClass:"color-palette"},t._l(t.palette,(function(e,i){return a("span",{key:i,staticClass:"palette-colors",style:"background:"+e,on:{click:function(a){return t.changeColor(e)}}},[t._v(" ")])})),0):t._e()]),a("div",{staticClass:"create-tag-name"},[a("su-input",{attrs:{id:"create_tag_name",type:"text",autofocus:"true",pattern:"\\s*(\\S\\s*){3,}",oninput:"this.setCustomValidity('')",maxlength:20,oninvalid:"this.setCustomValidity('Please fill in this field')",label:"Tag",placeholder:"Tag",rules:t.rules.tagName},model:{value:t.newTag.text,callback:function(e){t.$set(t.newTag,"text",e)},expression:"newTag.text"}})],1),a("br"),t._v(" "),a("div",{staticClass:"create-tag-desc row"},[a("div",{staticClass:"eight columns"},[a("su-input",{attrs:{pattern:"\\s*(\\S\\s*){0,}",oninvalid:"this.setCustomValidity('Invalid characters')",oninput:"this.setCustomValidity('')",type:"text",maxlength:140,label:"Description",placeholder:"Description",rules:t.rules.tagDesc},model:{value:t.newTag.description,callback:function(e){t.$set(t.newTag,"description",e)},expression:"newTag.description"}})],1),t._v(" "),a("div",{staticClass:"four columns su-input-group"},[a("label",{staticClass:"su-input-label"},[t._v(" ")]),t._v(" "),t.editing?a("su-button",{staticClass:"btn btn-blue",attrs:{type:"submit",disabled:t.creatingTag,processing:t.creatingTag},nativeOn:{click:function(e){return e.preventDefault(),t.createTag(!0)}}},[t._v("Update")]):a("su-button",{staticClass:"btn btn-blue",attrs:{type:"submit",disabled:t.creatingTag,processing:t.creatingTag},nativeOn:{click:function(e){return e.preventDefault(),t.createTag()}}},[t._v("Save")])],1)]),t._v(" "),t.editing?a("p",{staticClass:"text-center"},[t.deleting?a("su-loader"):a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showConfirmationBox.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-trash"}),t._v("\n\t\t\t\t\t\t\t\t\tDelete tag\n\t\t\t\t\t\t\t\t")])],1):t._e()])],1)])])])]):t._e(),t._v(" "),t.showConfirmation?a("div",{staticClass:"section tagger"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideConfirmationBox}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showConfirmationBox.apply(null,arguments)}}},[a("div",{staticClass:"modalbody",on:{click:function(e){return e.stopPropagation(),t.hidePalette.apply(null,arguments)}}},[a("h4",{staticClass:"text-center"},[t._v('Are you sure you want to delete "'+t._s(t.newTag.tag_name)+'" ?')]),a("br"),t._v(" "),a("div",{staticClass:"button-container text-center"},[a("su-button",{staticClass:"btn-grey btn-outline",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.hideConfirmationBox.apply(null,arguments)}}},[t._v("Cancel")]),t._v(" "),a("su-button",{staticClass:"btn btn-blue",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.deleteTag()}}},[t._v("Delete")])],1)])])])])]):t._e()])},s=[],n=a("5975"),r=a("2e34"),o=a("02bc"),l=a("5dfe"),c=a("ba6a"),d=a("5665"),u=a("2f62");function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){h(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function h(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var _={name:"tagger",data:function(){var t=function(t,e){return e&&e.trim().length<3?new Error("Minimum characters required: 3"):e&&e.length>20?new Error("Maximum characters allowed: 20"):void 0},e=function(t,e){if(e&&e.length>140)return new Error("Maximum characters allowed: 140")};return{tags:[],searchInput:"",newTag:{text:"",type:"custom",classes:"custom-tag ",value:"",colour:"rgba(3, 155, 229, 1)",description:""},showCreate:!1,hasChanged:!1,showPalette:!1,palette:["rgba(3, 155, 229, 1)","rgba(11, 128, 67, 1)","rgba(63, 81, 181, 1)","rgba(244, 81, 30, 1)","rgba(121, 85, 72, 1)","rgba(124, 179, 66, 1)","rgba(240, 147, 0, 1)","rgba(142, 36, 170, 1)","rgba(97, 97, 97, 1)","rgba(255, 205, 86, 1)"],paletteMap:{"rgba(3, 155, 229, 1)":"p1","rgba(11, 128, 67, 1)":"p2","rgba(63, 81, 181, 1)":"p3","rgba(244, 81, 30, 1)":"p4","rgba(121, 85, 72, 1)":"p5","rgba(124, 179, 66, 1)":"p6","rgba(240, 147, 0, 1)":"p7","rgba(142, 36, 170, 1)":"p8","rgba(97, 97, 97, 1)":"p9","rgba(255, 205, 86, 1)":"p10"},creatingTag:!1,editing:!1,deleting:!1,showConfirmation:!1,rules:{tagName:[{validator:t,required:!0}],tagDesc:[{validator:e,required:!0}]},fetchingTags:!1}},props:{isModal:{type:Boolean,default:!1}},computed:p(p({},Object(u["c"])(["consoleTags","consolePendingTags","csrf"])),{},{isInsideKite:function(){return this.$route.query&&this.$route.query.source&&("kite"===this.$route.query.source||"kitewebview"===this.$route.query.source||"coinwebview"===this.$route.query.source)},tagOptions:function(){var t=this;if(this.tags){var e=this.tags.filter((function(e){return-1!==e.text.toLowerCase().indexOf(t.tagsFilter.toLowerCase())&&"SYSTEM"!==e.client_id.toUpperCase()}));return e.push({text:"+  New tag"}),e}},tagResults:function(){var t=this.searchInput.trim().toLowerCase(),e=[];if(t)for(var a in this.tags)-1!==this.tags[a].tag_name.toLowerCase().indexOf(t)&&e.push(this.tags[a]);else e=this.tags;return e.sort((function(t,e){var a=t.tag_name.toUpperCase(),i=e.tag_name.toUpperCase();return a<i?-1:a>i?1:0})),e}}),watch:{"newTag.text":function(t){t&&(this.newTag.text=t.toLowerCase().trim().replace(" ","-"))}},components:{"su-loader":n["a"],jobber:r["a"],"su-button":l["a"],empty:o["a"]},mounted:function(){var t=this;window.addEventListener("keyup",(function(e){27===e.keyCode&&(t.showCreate?t.hideCreateBox():t.hideTagManagerModal())})),this.fetchTags(!1,!0),this.$route.query.action&&"create"===this.$route.query.action&&(this.$route.query.tag&&(this.newTag.text=this.$route.query.tag),this.showCreateBox())},methods:p(p({},Object(u["d"])(["setConsoleTags"])),{},{hideTagManagerModal:function(){this.$parent.hideTagManagerModal()},analyseTag:function(t){this.$router.push({name:"taganalysis",query:{tag:t.tag_id}})},getBackground:function(t){if(t){var e=t.replace("1)","0.1)");return e}return"rgba(68, 68, 68, 0.1)"},getColor:function(t){return t.colour?t.colour:"#444"},showCreateBox:function(t,e){this.showCreate||(this.showCreate=!0,!0===t&&(this.editing=!0,this.newTag=e),this.$nextTick((function(){try{document.querySelectorAll(".create-tag-name")[0].querySelector("input").focus()}catch(t){console.log("Error creating tag form")}})))},hideCreateBox:function(){this.showCreate=!1,this.editing=!1,this.newTag={text:"",type:"custom",classes:"custom-tag ",value:"",colour:"rgba(3, 155, 229, 1)",description:""}},hidePalette:function(){this.showPalette=!1},changeColor:function(t){this.newTag.colour=t},createTag:function(t){var e=this;if(this.$refs["create_tag_form"]&&this.$refs["create_tag_form"].validate()){t||(this.newTag.classes+=this.paletteMap[this.newTag.colour]),this.creatingTag=!0;var a={tag_name:this.newTag.text,description:this.newTag.description,colour:this.newTag.colour},i=d["a"].createTag,s="POST";!0===t&&(a["tag_id"]=parseInt(this.newTag.id),i=d["a"].editTag,s="PUT"),c["a"].request(s,!1,i,a,(function(a,i){"SUCCESS"===a.toUpperCase()?e.fetchTags(t):"FAILURE"===a.toUpperCase()?(e.creatingTag=!1,e.$toast.error({message:"Error updating tags: "+i.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3})):(e.creatingTag=!1,e.$toast.error({message:"Error updating tags:"+c["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3}))}))}},fetchTags:function(t,e){var a=this;e&&(this.fetchingTags=!0),c["a"].request("GET",!1,d["a"].getTags,null,(function(i,s){if(a.fetchingTags=!1,a.creatingTag=!1,a.deleting=!1,"SUCCESS"===i.toUpperCase()){for(var n=s.data.data.result,r=0;r<n.length;r++)"SYSTEM"===n[r].client_id.toUpperCase()?(n[r]["type"]="system",n[r]["classes"]="system-tag"):(n[r]["type"]="custom",n[r]["classes"]="custom-tag "+a.paletteMap[n[r].colour]),n[r]["text"]=n[r].tag_name,n[r]["value"]=n[r].id;if(a.tags=n,a.setConsoleTags(n),!e){var o=n.find((function(t){return t.tag_name===a.newTag.text}));o?t?a.$toast.success({message:"Tag updated.",orientation:a.$toast.TOP_RIGHT,duration:6e3}):a.$toast.success({message:"Tag created.",orientation:a.$toast.TOP_RIGHT,duration:6e3}):(a.deleting=!1,a.$toast.success({message:"Tag deleted.",orientation:a.$toast.TOP_RIGHT,duration:6e3})),a.hideCreateBox()}}else"FAILURE"===i.toUpperCase()?a.$toast.error({message:"Error fetching tags: "+s.data.message,orientation:a.$toast.TOP_RIGHT,duration:6e3}):a.$toast.error({message:"Error fetching tags:"+c["a"].errorMessage(),orientation:a.$toast.TOP_RIGHT,duration:6e3})}))},postTag:function(){for(var t={},e=[],a=0;a<this.selectedTags.length;a++)e.push(this.selectedTags[a]["id"]);t["target_id"]=this.holding.instrument_id,t["tag_ids"]=e,this.$emit("tag-posted",t)},deleteTag:function(){var t=this;this.deleting=!0,this.$nextTick((function(){t.hideConfirmationBox()}));var e=[];e.push(parseInt(this.newTag.id)),c["a"].request("PUT",!1,d["a"].deleteTag,{tag_ids:e},(function(e,a){"SUCCESS"===e.toUpperCase()?t.fetchTags(!0):"FAILURE"===e.toUpperCase()?(t.deleting=!1,t.$toast.error({message:"Error deleting tags: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3})):(t.deleting=!1,t.$toast.error({message:"Error deleting tags:"+c["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}))}))},showConfirmationBox:function(t,e){t&&e&&(this.newTag=e),this.showConfirmation=!0},hideConfirmationBox:function(){this.showConfirmation=!1}})},f=_,m=a("2877"),v=Object(m["a"])(f,i,s,!1,null,null,null);e["default"]=v.exports},6825:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hide,expression:"hide"},{name:"on-escape",rawName:"v-on-escape",value:t.hide,expression:"hide"}],staticClass:"context-menu",attrs:{id:"context-menu-"+t._uid}},[a("div",{staticClass:"context-menu-button-wrap",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleButtonClick.apply(null,arguments)}}},[t._t("button")],2),t._v(" "),a("transition",{attrs:{name:"dropdown"}},[t.showMenu?a("ul",{staticClass:"context-menu-list list-flat"},[t._t("menu")],2):t._e()])],1)},s=[],n={name:"mobile-context-menu",props:{orientation:{type:String,default:"left"},marginTop:{type:Number,default:8},parentSelector:String},data:function(){return{showMenu:!1}},deactivated:function(){this.hide(),this.$emit("delete")},methods:{hide:function(){this.showMenu&&(this.showMenu=!1)},handleButtonClick:function(t){var e=this;this.showMenu?this.showMenu=!1:(this.showMenu=!0,this.$nextTick((function(){var t=0;if(e.parentSelector){var a=document.querySelector(e.parentSelector);t=a&&a.scrollTop}else t=window.pageYOffset||document.documentElement.scrollTop;var i=e.$el.querySelector(".context-menu-button").getBoundingClientRect(),s=e.$el.querySelector(".context-menu-list"),n=s.getBoundingClientRect(),r=!0;n.height+n.top-t<=window.innerHeight?s.style.top=i.top+i.height+e.marginTop+"px":(s.style.top=i.top-n.height-e.marginTop+"px",r=!1),r?s.classList.add("position-bottom"):s.classList.add("position-top"),"left"===e.orientation?s.style.left=i.left+i.width-n.width+"px":"right"===e.orientation&&(s.style.left=i.left+i.width+"px")})))}}},r=n,o=a("2877"),l=Object(o["a"])(r,i,s,!1,null,null,null);e["a"]=l.exports},"8e6f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container holdings"},[t.isMobileView?t._e():a("h1",[a("span",{staticClass:"icon icon-briefcase"}),t._v(" "),"family"===t.familySwitch?a("span",[t._v("Family holdings")]):a("span",[t._v("Holdings")])]),t._v(" "),t.isMobileView?t._e():a("hr",{staticClass:"header-hr"}),t._v(" "),t.isMobileView?a("div",{class:{"inputs-collapsed":!0,"family-inputs":!0}},[a("div",{staticClass:"date",on:{click:function(e){return t.toggleInputContainer()}}},[a("span",[t._v(t._s(t.formatDate(t.date)))])]),t._v(" "),a("div",{staticClass:"filters"},[t._l(t.allFilters.slice(0,3),(function(e,i){return a("span",{key:i,staticClass:"filter-filter",style:"background:"+t.getBackground(e)+";color:"+t.getColor(e),on:{click:function(e){return t.toggleInputContainer()}}},[t._v(t._s(e.text))])})),t._v(" "),t.allFilters.length>3?a("span",{staticClass:"filter-more",on:{click:function(e){return t.toggleInputContainer()}}},[t._v("+ "+t._s(t.allFilters.length-3)+" tags")]):t._e()],2),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"family-switch"},[a("span",{class:"personal"===t.familySwitch?"active":"",on:{click:function(e){return t.switchPortfolio("personal")}}},[t._v("Personal")]),t._v(" "),a("span",{class:"family"===t.familySwitch?"active":"",on:{click:function(e){return t.switchPortfolio("family")}}},[t._v("Family")])])]):t._e(),t._v(" "),t.isMobileView&&!t.holdingsError&&!t.job&&(t.holdings.length>0&&"personal"===t.familySwitch||t.holdingsFamily.length>0&&"family"===t.familySwitch&&t.familyList.length>1)?a("div",{staticClass:"grey-back-mobile"},[t._v("\n\t\t \n\t")]):t._e(),t._v(" "),!t.isMobileView||t.job||t.fetchingData||t.holdingsError||!(t.holdings.length>0&&"personal"===t.familySwitch||t.holdingsFamily.length>0&&"family"===t.familySwitch&&t.familyList.length>1)?t._e():a("div",{staticClass:"section mobile-agg"},["family"===t.familySwitch?a("div",{staticClass:"family-filter"},[t.modifyingFamily?t._e():a("a",{staticClass:"family-link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.toggleFamilyFilterModal.apply(null,arguments)}}},[a("span",{staticClass:"family-head"},[t._v("\n\t\t\t\t\tSub-accounts "),a("span",{staticClass:"text-light-grey"},[t._v(t._s(t.familyList.filter((function(t){return t.isChecked})).length)+"/"+t._s(t.familyList.length)+" selected")])]),t._v(" "),t.showFamilyFilter?a("span",{staticClass:"icon icon-chevron-up"}):a("span",{staticClass:"icon icon-chevron-down"})]),t._v(" "),a("div",{class:{"family-list":!0,hide:!t.showFamilyFilter}},[a("p",{staticClass:"select-links"},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.modifyFamilyList("all")}}},[a("span",{staticClass:"icon icon-check"}),t._v(" Select all\n\t\t\t\t\t")]),t._v(" "),a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.modifyFamilyList()}}},[a("span",{staticClass:"icon icon-times"}),t._v(" Deselect all\n\t\t\t\t\t")])]),t._v(" "),a("p",{staticClass:"family-search"},[a("su-input",{attrs:{maxlength:8,"dynamic-label":"","no-error":"",placeholder:"Search by name/client ID",label:"Search"},model:{value:t.familySearch,callback:function(e){t.familySearch=e},expression:"familySearch"}})],1),t._v(" "),t.modifyingFamily?t._e():a("div",{staticClass:"family-card-box"},t._l(t.filteredChildAccounts,(function(e,i){return a("div",{key:i,staticClass:"family-card"},[a("label",{staticClass:"family-checkbox-label"},[a("div",{staticClass:"row flex-row"},[a("div",{staticClass:"nine columns"},[a("span",{staticClass:"family-name"},[t._v(t._s(e.user_name.toLowerCase()))])]),t._v(" "),a("div",{staticClass:"three columns text-right text-light-grey"},[a("span",{staticClass:"family-id"},[t._v(t._s(e.user_id))])])]),t._v(" "),e.isChecked?a("input",{staticClass:"family-list-checkbox",attrs:{type:"checkbox",checked:""},on:{change:function(a){return t.modifyFamilyList(e,a)}}}):a("input",{staticClass:"family-list-checkbox",attrs:{type:"checkbox"},on:{change:function(a){return t.modifyFamilyList(e,a)}}}),t._v(" "),a("span",{staticClass:"checkmark"})])])})),0),a("br"),t._v(" "),a("p",{staticClass:"text-center"},[a("su-button",{staticClass:"btn btn-blue",attrs:{disabled:t.familyList&&0===t.familyList.filter((function(t){return t.isChecked})).length},nativeOn:{click:function(e){return e.preventDefault(),t.filterData(null,null,!0)}}},[t._v("Apply")]),a("br"),a("br"),t._v(" "),t._m(0)],1)])]):t._e(),t._v(" "),t.holdings.length>0&&"personal"===t.familySwitch||t.holdingsFamily.length>0&&"family"===t.familySwitch&&t.familyList.length>1?a("div",{class:{"holdings-mobile-agg":!0,hide:"family"===t.familySwitch&&t.showFamilyFilter}},[a("div",{staticClass:"row main-agg"},[a("div",{staticClass:"six columns"},[a("label",[t._v("Current")]),t._v(" "),"personal"===t.familySwitch?a("h1",[t._v(t._s(t._f("kformat")(t.holdings_aggregation.total_closing_value)))]):a("h1",[t._v(t._s(t._f("kformat")(t.holdings_aggregation_family.total_closing_value)))])]),t._v(" "),a("div",{staticClass:"six columns"},[a("label",[t._v("Invested")]),t._v(" "),"personal"===t.familySwitch?a("h1",[t._v(t._s(t._f("kformat")(t.holdings_aggregation.total_buy_value)))]):a("h1",[t._v(t._s(t._f("kformat")(t.holdings_aggregation_family.total_buy_value)))])])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row"},[t._m(1),t._v(" "),"personal"===t.familySwitch?a("div",{staticClass:"six columns"},[t.holdings_aggregation.total_unrealized_profit>0?a("h1",{staticClass:"pos"},[t._v("\n\t\t\t\t\t\t+"+t._s(t._f("kformat")(t.holdings_aggregation.total_unrealized_profit))+"\n\t\t\t\t\t\t"),a("span",{staticClass:"holdings-profit-percent"},[t._v("\n\t\t\t\t\t\t\t+"+t._s(t._f("inrFormat")(t.holdings_aggregation.total_unrealized_profit_percentage,2,null,!1))+"%\n\t\t\t\t\t\t")])]):t.holdings_aggregation.total_unrealized_profit<0?a("h1",{staticClass:"neg"},[t._v("\n\t\t\t\t\t\t"+t._s(t._f("kformat")(t.holdings_aggregation.total_unrealized_profit))+"\n\t\t\t\t\t\t"),a("span",{staticClass:"holdings-profit-percent"},[t._v(t._s(t._f("inrFormat")(t.holdings_aggregation.total_unrealized_profit_percentage,2,null,!1))+"%")])]):a("h1",{staticClass:"total-unrealized-profit"},[t._v("\n\t\t\t\t\t\t"+t._s(t._f("kformat")(t.holdings_aggregation.total_unrealized_profit))+"\n\t\t\t\t\t")])]):a("div",{staticClass:"six columns"},[t.holdings_aggregation_family.total_unrealized_profit>0?a("h1",{staticClass:"pos"},[t._v("\n\t\t\t\t\t\t+"+t._s(t._f("kformat")(t.holdings_aggregation_family.total_unrealized_profit))+"\n\t\t\t\t\t\t"),a("span",{staticClass:"holdings-profit-percent"},[t._v("\n\t\t\t\t\t\t\t+"+t._s(t._f("inrFormat")(t.holdings_aggregation_family.total_unrealized_profit_percentage,2,null,!1))+"%\n\t\t\t\t\t\t")])]):t.holdings_aggregation_family.total_unrealized_profit<0?a("h1",{staticClass:"neg"},[t._v("\n\t\t\t\t\t\t"+t._s(t._f("kformat")(t.holdings_aggregation_family.total_unrealized_profit))+"\n\t\t\t\t\t\t"),a("span",{staticClass:"holdings-profit-percent"},[t._v(t._s(t._f("inrFormat")(t.holdings_aggregation_family.total_unrealized_profit_percentage,2,null,!1))+"%")])]):a("h1",{staticClass:"total-unrealized-profit"},[t._v("\n\t\t\t\t\t\t"+t._s(t._f("kformat")(t.holdings_aggregation_family.total_unrealized_profit))+"\n\t\t\t\t\t")])])]),t._v(" "),"family"===t.familySwitch&&t.familyList&&t.familyList.length?a("p",{staticClass:"summary-breakdown"},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.toggleFamilyComparisonModal.apply(null,arguments)}}},[t._v("View sub-accounts "),t.showFamilyComparison?a("span",{staticClass:"icon icon-chevron-up"}):a("span",{staticClass:"icon icon-chevron-down"})])]):t._e(),t._v(" "),"family"===t.familySwitch?a("div",{class:{"summary-breakdown-container text-center":!0,hide:!t.showFamilyComparison}},[a("su-radio-group",{model:{value:t.familyDonutOption,callback:function(e){t.familyDonutOption=e},expression:"familyDonutOption"}},[a("su-radio",{attrs:{label:"Invested",value:"buy_value"}},[t._v("Invested")]),t._v(" "),a("su-radio",{attrs:{label:"Current",value:"present_value"}},[t._v("Current")])],1),t._v(" "),a("div",{attrs:{id:"family_donut"}}),t._v(" "),t._l(t.childSummary,(function(e,i){return a("div",{key:i,staticClass:"card summary-breakdown-card",class:t.childSummary.length-1===i?"last":""},[a("div",{staticClass:"top"},[a("span",{staticClass:"text-bold symbol"},[t._v(t._s(t._f("clip")(t._f("capitalize")(e.user_name),20)))]),t._v(" "),a("span",{staticClass:"text-small text-light-grey summary-clientid"},[t._v(" ("+t._s(e.client_id)+")")])]),t._v(" "),a("div",{staticClass:"middle"},[a("div",{staticClass:"middle-left text-left"},[a("label",[t._v("Invested")]),t._v(" "+t._s(t._f("inrFormat")(e["buy_value"],2))+"\n\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"middle-right"},["-"===e["pnl"]?a("span",[t._v("–")]):e.pnl>0?a("span",{staticClass:"pos"},[t._v("+"+t._s(t._f("inrFormat")(e["pnl_percentage"],2))+"%")]):e.pnl<0?a("span",{staticClass:"neg"},[t._v(t._s(t._f("inrFormat")(e["pnl_percentage"],2))+"%")]):a("span",[t._v(t._s(t._f("inrFormat")(e["pnl_percentage"],2)))])])]),t._v(" "),a("div",{staticClass:"bottom"},[a("div",{staticClass:"bottom-left text-left"},[a("label",[t._v("Present")]),t._v(" "+t._s(t._f("inrFormat")(e["present_value"],2))+"\n\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"bottom-right"},["-"===e["pnl"]?a("span",[t._v("–")]):e.pnl>0?a("span",{staticClass:"pos"},[t._v("+"+t._s(t._f("inrFormat")(e["pnl"],2)))]):e.pnl<0?a("span",{staticClass:"neg"},[t._v(t._s(t._f("inrFormat")(e["pnl"],2)))]):a("span",[t._v(t._s(t._f("inrFormat")(e["pnl"],2)))])])])])}))],2):t._e()]):t._e()]),t._v(" "),a("div",{class:"section head-section"+(t.isMobileView?" mobile-input-container hidden":"")},[t.isMobileView?a("div",[a("span",{staticClass:"hide-mobile-input",on:{click:function(e){return t.toggleInputContainer()}}},[a("span",{staticClass:"icon icon-arrow-left"})]),t._v(" "),a("h2",{staticClass:"text-center"},[t._v("\n\t\t\t\tSearch and filter\n\t\t\t")])]):t._e(),t._v(" "),a("su-form",[t.isMobileView?t._e():a("div",{staticClass:"hide-on-mobile",class:{locked:t.job||t.fetchingData,inputcontainer:!0,row:!0}},[a("div",{class:{two:!0,columns:!0,lockContainer:t.job||t.fetchingData,"su-input-group  su-static-label":!0}},[t.job||t.fetchingData?a("div",{staticClass:"input-lock"}):t._e(),t._v(" "),a("label",{staticClass:"su-input-label"},[t._v("Date")]),t._v(" "),a("datepicker",{attrs:{format:t.format,lang:"en","not-before":"2017-04-01","not-after":t.reportEndDate,placeholder:"Date"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),a("div",{class:{six:!0,columns:!0,"filter-component":!0,lockContainer:t.job||t.fetchingData,"su-input-group  su-static-label":!0}},[t.job||t.fetchingData?a("div",{staticClass:"input-lock"}):t._e(),t._v(" "),a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideSelectedFilters,expression:"hideSelectedFilters"}],staticClass:"filter-field"},[a("label",{staticClass:"su-input-label"},[t._v("Filter")]),t._v(" "),a("div",{staticClass:"filter-box",on:{click:function(e){return e.stopPropagation(),t.showSelectedFilters.apply(null,arguments)}}},[a("div",{staticClass:"filter-link"},[a("vue-tags-input",{attrs:{"add-only-from-autocomplete":!0,"max-tags":7,maxlength:20,tags:t.selectedTags,placeholder:"Sector/stock filters","autocomplete-items":t.filteredItems},on:{"tags-changed":function(e){return t.selectedTags=e}},scopedSlots:t._u([{key:"autocomplete-item",fn:function(e){return a("div",{staticClass:"my-item",on:{click:function(t){return e.performAdd(e.item)}}},[a("span",{staticClass:"auto-name"},[t._v(t._s(e.item.text))]),t._v(" "),a("span",{class:"auto-label "+e.item.type},[t._v(t._s(e.item.type))])])}},{key:"tag-center",fn:function(e){return a("div",{staticClass:"my-tag-left",on:{click:function(t){return e.performOpenEdit(e.index)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.tag.text)+"\n\t\t\t\t\t\t\t\t\t")])}}],null,!1,1406005952),model:{value:t.holdingsFilter,callback:function(e){t.holdingsFilter=e},expression:"holdingsFilter"}}),t._v(" "),t.selectedTags.length>0?a("span",{staticClass:"clear icon icon-times",on:{click:function(e){return t.resetSearch(!1)}}}):t._e()],1),t._v(" "),a("div",{staticClass:"filter-option-container"},[a("div",{class:{"filter-option":!0,show:t.selectedFiltersModal}},[a("div",{staticClass:"filters"},[t.showTypeFilters?a("label",{staticClass:"filters-label"},[t._v("Type")]):t._e(),t._v(" "),t._l(t.typeFilters,(function(e,i){return e.hide?t._e():a("div",{key:i+"-t",staticClass:"filters-list"},[a("label",{staticClass:"checks type",on:{click:function(a){return t.addFilter(e)}}},[t._v(t._s(e.text))])])})),t._v(" "),a("div",{staticClass:"row"},[t.showOtherFilters?a("div",{staticClass:"four columns"},[a("label",{staticClass:"filters-label"},[t._v("Others")]),t._v(" "),t._l(t.otherFilters,(function(e,i){return e.hide?t._e():a("div",{key:i+"-o",staticClass:"filters-list"},[a("label",{staticClass:"checks others",on:{click:function(a){return t.addFilter(e)}}},[t._v(t._s(e.text))])])}))],2):t._e(),t._v(" "),t.showSectorFilters?a("div",{staticClass:"eight columns"},[a("label",{staticClass:"filters-label"},[t._v("Sectors")]),t._v(" "),t._l(t.sectorFilters,(function(e,i){return e.hide?t._e():a("div",{key:i+"-s",staticClass:"filters-list"},[a("label",{staticClass:"checks sector",on:{click:function(a){return t.addFilter(e)}}},[t._v(t._s(e.text))])])}))],2):t._e()])],2)])])])])]),t._v(" "),"personal"===t.familySwitch?a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideSelectedTags,expression:"hideSelectedTags"}],class:{three:!0,columns:!0,"filter-component":!0,lockContainer:t.job||t.fetchingData,"su-input-group  su-static-label":!0}},[t.job||t.fetchingData?a("div",{staticClass:"input-lock"}):t._e(),t._v(" "),a("div",{staticClass:"filter-field"},[a("label",{staticClass:"su-input-label"},[t._v("Tags")]),t._v(" "),a("div",{class:{"filter-box tagger":!0,"all-tags-added-container":t.allTagsAdded}},[a("div",{staticClass:"filter-link",on:{click:function(e){return e.stopPropagation(),t.showSelectedTags.apply(null,arguments)}}},[a("vue-tags-input",{class:{"main-input":!0,"all-tags-added":t.allTagsAdded},attrs:{"add-only-from-autocomplete":!0,"max-tags":5,maxlength:20,tags:t.selectedTagFilters,placeholder:"Filter by tags","autocomplete-items":t.filteredTags},on:{"tags-changed":function(e){return t.selectedTagFilters=e}},scopedSlots:t._u([{key:"autocomplete-item",fn:function(e){return a("div",{staticClass:"my-item",on:{click:function(t){return e.performAdd(e.item)}}},[a("span",{staticClass:"auto-name",style:"color:"+e.item.colour+";background:"+t.getBackground(e.item)},[t._v(t._s(e.item.text))]),t._v(" "),a("span",{class:"auto-label "+e.item.type},[t._v(t._s(e.item.type))])])}},{key:"tag-center",fn:function(e){return t.allTagsAdded?a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\tFilter by all tags\n\t\t\t\t\t\t\t\t\t")]):a("div",{staticClass:"my-tag-left"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.tag.text)+"\n\t\t\t\t\t\t\t\t\t")])}}],null,!0),model:{value:t.tagFilter,callback:function(e){t.tagFilter=e},expression:"tagFilter"}}),t._v(" "),t.selectedTagFilters.length>0?a("span",{staticClass:"clear icon icon-times",on:{click:function(e){return t.resetSearch(!0)}}}):t._e()],1),t._v(" "),a("div",{staticClass:"filter-option-container main-input"},[a("div",{class:{"filter-option":!0,show:t.selectedTagsModal}},[a("div",{staticClass:"filters"},[t._l(t.consoleTags,(function(e,i){return e.client_id&&"SYSTEM"!==e.client_id.toUpperCase()&&!t.selectedTagFilters.find((function(t){return t.id===e.id}))?a("div",{key:i+"-l",staticClass:"filters-list"},[a("label",{class:"checks type "+t.paletteMap[e.colour],on:{click:function(a){return t.addTag(e)}}},[t._v(t._s(e.text))])]):t._e()})),t._v(" "),a("a",{staticClass:"manage-tags-link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showTagManagerModal.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-bookmark"}),t._v(" Manage tags\n\t\t\t\t\t\t\t\t\t\t")])],2)])])])])]):t._e(),t._v(" "),a("div",{staticClass:"one columns"},[a("label",[t._v(" ")]),a("br"),t._v(" "),t.job||t.fetchingData?t._e():a("su-button",{staticClass:"btn-blue",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.getHoldingsData(t.date)}}},[a("span",{staticClass:"icon icon-arrow-right"})]),t._v(" "),t.job||t.fetchingData?a("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"lock-img-container",attrs:{title:"Please wait while your report is being built"}},[a("img",{staticClass:"lock-class",attrs:{src:"/static/images/lock.svg"}}),t._v(" "),a("su-loader")],1):t._e()],1)]),t._v(" "),t.isMobileView?a("div",{staticClass:"show-on-mobile",class:{locked:t.job||t.fetchingData,inputcontainer:!0,row:!0}},[a("div",{staticClass:"row"},[a("div",{class:{six:!0,columns:!0,lockContainer:t.job||t.fetchingData}},[t.job||t.fetchingData?a("div",{staticClass:"input-lock"}):t._e(),t._v(" "),a("label",[t._v("Date")]),t._v(" "),a("input",{attrs:{id:"holdings_date"}})])]),t._v(" "),a("div",{staticClass:"row mobileFilter"},[a("div",{class:{twelve:!0,columns:!0,lockContainer:t.job||t.fetchingData}},[a("div",{staticClass:"filter-component"},[t.job||t.fetchingData?a("div",{staticClass:"input-lock"}):t._e(),t._v(" "),a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideSelectedFilters,expression:"hideSelectedFilters"}],staticClass:"filter-field"},[a("label",[t._v("Filter")]),t._v(" "),a("div",{staticClass:"filter-box",on:{click:function(e){return e.stopPropagation(),t.showSelectedFilters.apply(null,arguments)}}},[a("span",{staticClass:"close-mobile-filter",on:{click:function(e){return e.stopPropagation(),t.hideSelectedFilters(!0)}}},[a("span",{staticClass:"icon icon-arrow-left"})]),t._v(" "),a("div",{staticClass:"filter-link"},[a("vue-tags-input",{attrs:{"add-only-from-autocomplete":!0,tags:t.selectedTags,placeholder:"Sector/stock filters","autocomplete-items":t.filteredItems},on:{click:t.showSelectedFilters,"tags-changed":function(e){return t.selectedTags=e}},scopedSlots:t._u([{key:"autocomplete-item",fn:function(e){return a("div",{staticClass:"my-item",on:{click:function(t){return e.performAdd(e.item)}}},[a("span",{staticClass:"auto-name"},[t._v(t._s(e.item.text))]),t._v(" "),a("span",{class:"auto-label "+e.item.type},[t._v(t._s(e.item.type))])])}},{key:"tag-center",fn:function(e){return a("div",{staticClass:"my-tag-left",on:{click:function(t){return e.performOpenEdit(e.index)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.tag.text)+"\n\t\t\t\t\t\t\t\t\t\t\t")])}}],null,!1,2881979072),model:{value:t.holdingsFilter,callback:function(e){t.holdingsFilter=e},expression:"holdingsFilter"}})],1),t._v(" "),a("div",{staticClass:"filter-option-container"},[a("div",{class:{"filter-option":!0,show:t.selectedFiltersModal}},[a("div",{staticClass:"filters"},[t.showTypeFilters?a("label",{staticClass:"filters-label"},[t._v("Type")]):t._e(),t._v(" "),t._l(t.typeFilters,(function(e,i){return a("div",{key:i+"-t",staticClass:"filters-list"},[e.hide?t._e():a("label",{staticClass:"checks type",on:{click:function(a){return t.addFilter(e)}}},[t._v(t._s(e.text))])])})),t._v(" "),a("div",{staticClass:"row"},[t.showOtherFilters?a("div",{staticClass:"four columns"},[a("label",{staticClass:"filters-label"},[t._v("Others")]),t._v(" "),t._l(t.otherFilters,(function(e,i){return a("div",{key:i+"-o",staticClass:"filters-list"},[e.hide?t._e():a("label",{staticClass:"checks others",on:{click:function(a){return t.addFilter(e)}}},[t._v(t._s(e.text))])])}))],2):t._e(),t._v(" "),t.showSectorFilters?a("div",{staticClass:"eight columns"},[a("label",{staticClass:"filters-label"},[t._v("Sectors")]),t._v(" "),t._l(t.sectorFilters,(function(e,i){return a("div",{key:i+"-s",staticClass:"filters-list"},[e.hide?t._e():a("label",{staticClass:"checks sector",on:{click:function(a){return t.addFilter(e)}}},[t._v(t._s(e.text))])])}))],2):t._e()])],2)])])])])])])]),t._v(" "),"personal"===t.familySwitch?a("div",{class:{three:!0,columns:!0,"filter-component":!0,lockContainer:t.job||t.fetchingData}},[t.job||t.fetchingData?a("div",{staticClass:"input-lock"}):t._e(),t._v(" "),a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideSelectedTags,expression:"hideSelectedTags"}],staticClass:"filter-field"},[a("label",[t._v("Tags")]),t._v(" "),a("div",{class:{"filter-box tagger":!0,"all-tags-added-container":t.allTagsAdded}},[a("div",{staticClass:"filter-link",on:{click:function(e){return e.stopPropagation(),t.showSelectedTags.apply(null,arguments)}}},[a("vue-tags-input",{class:{"main-input":!0,"all-tags-added":t.allTagsAdded},attrs:{"add-only-from-autocomplete":!0,"max-tags":5,maxlength:20,tags:t.selectedTagFilters,placeholder:"Filter by tags","autocomplete-items":t.filteredTags},on:{"tags-changed":function(e){return t.selectedTagFilters=e}},scopedSlots:t._u([{key:"autocomplete-item",fn:function(e){return a("div",{staticClass:"my-item",on:{click:function(t){return e.performAdd(e.item)}}},[a("span",{staticClass:"auto-name",style:"color:"+e.item.colour+";background:"+t.getBackground(e.item)},[t._v(t._s(e.item.text))]),t._v(" "),a("span",{class:"auto-label "+e.item.type},[t._v(t._s(e.item.type))])])}},{key:"tag-center",fn:function(e){return t.allTagsAdded?a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\tFilter by all tags\n\t\t\t\t\t\t\t\t\t")]):a("div",{staticClass:"my-tag-left"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.tag.text)+"\n\t\t\t\t\t\t\t\t\t")])}}],null,!0),model:{value:t.tagFilter,callback:function(e){t.tagFilter=e},expression:"tagFilter"}}),t._v(" "),t.selectedTagFilters.length>0?a("span",{staticClass:"clear icon icon-times",on:{click:function(e){return t.resetSearch(!0)}}}):t._e()],1),t._v(" "),a("div",{staticClass:"filter-option-container main-input"},[a("div",{class:{"filter-option":!0,show:t.selectedTagsModal}},[a("div",{staticClass:"filters"},[t._l(t.consoleTags,(function(e,i){return e.client_id&&"SYSTEM"!==e.client_id.toUpperCase()&&!t.selectedTagFilters.find((function(t){return t.id===e.id}))?a("div",{key:i+"-l",staticClass:"filters-list"},[a("label",{class:"checks type "+t.paletteMap[e.colour],on:{click:function(a){return t.addTag(e)}}},[t._v(t._s(e.text))])]):t._e()})),t._v(" "),a("a",{staticClass:"manage-tags-link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showTagManagerModal.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-bookmark"}),t._v(" Manage tags\n\t\t\t\t\t\t\t\t\t\t")])],2)])])])])]):t._e(),t._v(" "),a("div",{staticClass:"text-center"},[a("label",[t._v(" ")]),t._v(" "),t.job||t.fetchingData?t._e():a("su-button",{staticClass:"btn-blue",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.getHoldingsData(t.date)}}},[t._v("Search")]),t._v(" "),a("br"),t._v(" "),a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.resetSearch("all")}}},[t._v("Reset")]),t._v(" "),t.job||t.fetchingData?a("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"lock-img-container",attrs:{title:"Please wait while your report is being built"}},[a("img",{staticClass:"lock-class",attrs:{src:"/static/images/lock.svg"}}),t._v(" "),a("su-loader")],1):t._e()],1)]):t._e()])],1),t._v(" "),t.job||t.fetchingData||t.holdingsError?t._e():a("div",{class:{section:!0,"pull-up-section":t.isMobileView&&(t.holdings.length>0&&"personal"===t.familySwitch||t.holdingsFamily.length>0&&"family"===t.familySwitch&&t.familyList.length>1)}},[t.isMobileView?t._e():a("div",{staticClass:"family-switch"},[a("span",{class:"personal"===t.familySwitch?"active":"",on:{click:function(e){return t.switchPortfolio("personal")}}},[t._v("Personal")]),t._v(" "),a("span",{class:"family"===t.familySwitch?"active":"",on:{click:function(e){return t.switchPortfolio("family")}}},[t._v("Family")])]),t._v(" "),"personal"===t.familySwitch&&t.holdings.length>0||"family"===t.familySwitch&&t.holdingsFamily.length>0&&t.familyList.length>1?a("div",[!t.isMobileView&&("personal"===t.familySwitch&&t.holdings.length>0||"family"===t.familySwitch&&t.holdingsFamily.length>0)?a("div",{staticClass:"holdings-total hide-on-mobile"},["family"===t.familySwitch?a("div",{staticClass:"family-account-web"},[t.modifyingFamily?t._e():a("h2",[t._v("\n\t\t\t\t\t\tSub-accounts "),a("span",{staticClass:"child-selected text-light-grey"},[t._v(t._s(t.familyList.filter((function(t){return t.isChecked})).length)+"/"+t._s(t.familyList.length)+" selected")]),t._v(" "),t.showFamilyFilter?a("span",{staticClass:"icon icon-chevron-up link",on:{click:function(e){return e.stopPropagation(),t.hideFamilyFilterModal()}}}):a("span",{staticClass:"icon icon-chevron-down link",on:{click:function(e){return e.stopPropagation(),t.showFamilyFilterModal()}}})]),t._v(" "),a("div",{class:{"family-list":!0,hide:!t.showFamilyFilter}},[t._l(t.filteredChildAccounts,(function(e,i){return a("div",{key:i,staticClass:"family-card"},[a("label",{staticClass:"family-checkbox-label"},[a("span",{staticClass:"family-name"},[t._v(t._s(e.user_name.toLowerCase()))]),t._v(" "),a("span",{staticClass:"family-id text-light-grey"},[t._v(t._s(e.user_id))]),t._v(" "),e.isChecked?a("input",{staticClass:"family-list-checkbox",attrs:{type:"checkbox",checked:""},on:{change:function(a){return t.modifyFamilyList(e,a)}}}):a("input",{staticClass:"family-list-checkbox",attrs:{type:"checkbox"},on:{change:function(a){return t.modifyFamilyList(e,a)}}}),t._v(" "),a("span",{staticClass:"checkmark"})])])})),a("br"),t._v(" "),a("p",{staticClass:"family-web-apply"},[a("su-button",{staticClass:"btn btn-blue",attrs:{disabled:t.familyList&&0===t.familyList.filter((function(t){return t.isChecked})).length},nativeOn:{click:function(e){return e.preventDefault(),t.filterData(null,null,!0)}}},[t._v("Apply")]),t._v(" "),t._m(2)],1)],2)]):t._e(),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"four columns"},[a("label",[t._v("Invested")]),t._v(" "),"personal"===t.familySwitch?a("h3",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:t._f("inrFormat")(t.holdings_aggregation.total_buy_value,2,null,!0)}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(t.holdings_aggregation.total_buy_value,2,null,!1))+"\n\t\t\t\t\t\t")]):a("h3",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:t._f("inrFormat")(t.holdings_aggregation_family.total_buy_value,2,null,!0)}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(t.holdings_aggregation_family.total_buy_value,2,null,!1))+"\n\t\t\t\t\t\t")])]),t._v(" "),a("div",{staticClass:"four columns"},[a("label",[t._v("Present value")]),t._v(" "),"personal"===t.familySwitch?a("h3",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:t._f("inrFormat")(t.holdings_aggregation.total_closing_value,2,null,!0)}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(t.holdings_aggregation.total_closing_value,2,null,!1))+"\n\t\t\t\t\t\t")]):a("h3",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:t._f("inrFormat")(t.holdings_aggregation_family.total_closing_value,2,null,!0)}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(t.holdings_aggregation_family.total_closing_value,2,null,!1))+"\n\t\t\t\t\t\t")])]),t._v(" "),"personal"===t.familySwitch?a("div",{staticClass:"four columns profit-agg"},[a("label",[t._v("Unrealized P&L")]),t._v(" "),t.holdings_aggregation.total_unrealized_profit>0?a("h3",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pos",attrs:{title:t._f("inrFormat")(t.holdings_aggregation.total_unrealized_profit,2,null,!0)}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(t.holdings_aggregation.total_unrealized_profit,2,null,!1))+"\n\t\t\t\t\t\t")]):t.holdings_aggregation.total_unrealized_profit<0?a("h3",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"neg",attrs:{title:t._f("inrFormat")(t.holdings_aggregation.total_unrealized_profit,2,null,!0)}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(t.holdings_aggregation.total_unrealized_profit,2,null,!1))+"\n\t\t\t\t\t\t")]):a("h3",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:t._f("inrFormat")(t.holdings_aggregation.total_unrealized_profit,2,null,!0)}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(t.holdings_aggregation.total_unrealized_profit,2,null,!1))+"\n\t\t\t\t\t\t")]),t._v(" "),t.holdings_aggregation.total_unrealized_profit_percentage>0?a("span",{staticClass:"pos holdings-profit-percent"},[a("span",{staticClass:"icon icon-up-dir pos"}),t._v(t._s(t._f("inrFormat")(t.holdings_aggregation.total_unrealized_profit_percentage,2,null,!1))+"%\n\t\t\t\t\t\t")]):t.holdings_aggregation.total_unrealized_profit_percentage<0?a("span",{staticClass:"neg holdings-profit-percent"},[a("span",{staticClass:"icon icon-down-dir neg"}),t._v(t._s(t._f("inrFormat")(t.holdings_aggregation.total_unrealized_profit_percentage,2,null,!1))+"%\n\t\t\t\t\t\t")]):t._e()]):a("div",{staticClass:"four columns profit-agg"},[a("label",[t._v("Unrealized P&L")]),t._v(" "),t.holdings_aggregation_family.total_unrealized_profit>0?a("h3",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pos",attrs:{title:t._f("inrFormat")(t.holdings_aggregation_family.total_unrealized_profit,2,null,!0)}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(t.holdings_aggregation_family.total_unrealized_profit,2,null,!1))+"\n\t\t\t\t\t\t")]):t.holdings_aggregation_family.total_unrealized_profit<0?a("h3",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"neg",attrs:{title:t._f("inrFormat")(t.holdings_aggregation_family.total_unrealized_profit,2,null,!0)}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(t.holdings_aggregation_family.total_unrealized_profit,2,null,!1))+"\n\t\t\t\t\t\t")]):a("h3",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:t._f("inrFormat")(t.holdings_aggregation_family.total_unrealized_profit,2,null,!0)}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(t.holdings_aggregation_family.total_unrealized_profit,2,null,!1))+"\n\t\t\t\t\t\t")]),t._v(" "),t.holdings_aggregation_family.total_unrealized_profit_percentage>0?a("span",{staticClass:"pos holdings-profit-percent"},[a("span",{staticClass:"icon icon-up-dir pos"}),t._v(t._s(t._f("inrFormat")(t.holdings_aggregation_family.total_unrealized_profit_percentage,2,null,!1))+"%\n\t\t\t\t\t\t")]):t.holdings_aggregation_family.total_unrealized_profit_percentage<0?a("span",{staticClass:"neg holdings-profit-percent"},[a("span",{staticClass:"icon icon-down-dir neg"}),t._v(t._s(t._f("inrFormat")(t.holdings_aggregation_family.total_unrealized_profit_percentage,2,null,!1))+"%\n\t\t\t\t\t\t")]):t._e()])]),t._v(" "),"family"===t.familySwitch?a("p",{staticClass:"summary-breakdown"},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.toggleFamilyComparisonModal.apply(null,arguments)}}},[t._v("View sub-accounts "),t.showFamilyComparison?a("span",{staticClass:"icon icon-chevron-up"}):a("span",{staticClass:"icon icon-chevron-down"})])]):t._e(),t._v(" "),"family"===t.familySwitch?a("div",{class:{"summary-breakdown-container":!0,hide:!t.showFamilyComparison}},[a("div",{staticClass:"row"},[a("div",{staticClass:"four columns"},[a("su-radio-group",{model:{value:t.familyDonutOption,callback:function(e){t.familyDonutOption=e},expression:"familyDonutOption"}},[a("su-radio",{attrs:{label:"Invested",value:"buy_value"}},[t._v("Invested")]),t._v(" "),a("su-radio",{attrs:{label:"Current",value:"present_value"}},[t._v("Current")])],1),t._v(" "),a("div",{attrs:{id:"family_donut"}})],1),t._v(" "),a("div",{staticClass:"eight columns"},[a("div",{staticClass:"table-container"},[a("table",{staticClass:"holdings-breakdown-table summary-breakdown-table"},[t._m(3),t._v(" "),a("tbody",t._l(t.childSummary,(function(e,i){return a("tr",{key:i},[a("td",[a("span",{staticClass:"summary-name"},[t._v(t._s(t._f("capitalize")(e.user_name)))]),a("br"),t._v(" "),a("span",{staticClass:"text-light-grey text-small"},[t._v(t._s(e.client_id))])]),t._v(" "),a("td",[t._v(t._s(t._f("inrFormat")(e.buy_value,2)))]),t._v(" "),a("td",[t._v(t._s(t._f("inrFormat")(e.present_value,2)))]),t._v(" "),"-"===e["pnl"]?a("td",[t._v("–")]):e["pnl"]>0?a("td",{staticClass:"pos"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t+"+t._s(t._f("inrFormat")(e["pnl"],2))+" "),a("span",{staticClass:"text-small"},[t._v("(+"+t._s(t._f("inrFormat")(e["pnl_percentage"],2))+"%)")])]):e["pnl"]<0?a("td",{staticClass:"neg"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["pnl"],2))+" "),a("span",{staticClass:"text-small"},[t._v("("+t._s(t._f("inrFormat")(e["pnl_percentage"],2))+"%)")])]):a("td",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["pnl"],2))+"\n\t\t\t\t\t\t\t\t\t\t\t")])])})),0)])])])])]):t._e()]):t._e(),t._v(" "),!t.isMobileView&&t.selectedTags.length>0&&t.filteringData?a("p",{staticClass:"search-helper"},[a("a",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:"Clear filters",href:"#"},on:{click:function(e){return e.preventDefault(),t.resetSearch("all")}}},[a("span",{staticClass:"icon icon-arrow-left"})]),t._v("\n\t\t\t\tShowing results for "),t._l(t.selectedTags,(function(e,i){return a("span",{key:i,staticClass:"search-tags"},[t._v(" "+t._s(e.text)),i!==t.selectedTags.length-1||t.selectedTagFilters.length?a("span",[t._v(",")]):t._e()])})),t._l(t.selectedTagFilters,(function(e,i){return a("span",{key:e.id,staticClass:"search-tags"},[t._v(" "+t._s(e.text)),i<t.selectedTagFilters.length-1?a("span",[t._v(",")]):t._e()])}))],2):t._e(),t._v(" "),t.isPending?a("p",{staticClass:"text-grey"},[a("span",{staticClass:"icon icon-clock"},[t._v(" One or more tags you searched are pending addition/removal. Please check back in a while.")])]):t._e(),t._v(" "),a("div",{class:{"chart-switch":!0,hide:t.noFilterResults}},[a("div",{staticClass:"taxpnl-tabs"},[a("span",{class:["portfolio"===t.activeSection?"active":"","tab","portfolio"],on:{click:function(e){return t.displayTab("portfolio")}}},["family"===t.familySwitch?a("span",[t._v("Family overview")]):a("span",[t._v("Overview")])]),"personal"===t.familySwitch?a("span",{class:["treemap"===t.activeSection?"active":"","tab","treemap"],on:{click:function(e){return t.displayTab("treemap")}}},[t._v("\n\t\t\t\t\t\tTreemap")]):t._e(),"personal"===t.familySwitch?a("span",{class:["insights"===t.activeSection?"active":"","tab","insights"],on:{click:function(e){return t.displayTab("insights")}}},[t._v("\n\t\t\t\t\t\tInsights")]):t._e(),t._v(" "),a("br",{staticClass:"show-on-mobile"}),t.isMobileView?t._e():a("a",{staticClass:"text-small",attrs:{href:"https://zerodha.com/z-connect/console/introducing-portfolio-analytics",target:"_blank"}},[a("span",{staticClass:"icon icon-info"}),t._v("Learn more")])])]),t._v(" "),t.showDonutReset&&t.isMobileView?a("p",{staticClass:"text-center donut-reset"},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.resetSearch("all")}}},[a("span",{staticClass:"icon icon-ccw"}),t._v(" Reset search\n\t\t\t\t")])]):t._e(),t._v(" "),a("div",{staticStyle:{background:"#fff"},attrs:{id:"treemap_share_container"}},[a("img",{attrs:{id:"logo_img",src:"/static/images/zerodha-logo.svg"}}),t._v(" "),"portfolio"===t.activeSection?a("div",["personal"===t.familySwitch?a("portfolio-chart",{class:{hide:t.noFilterResults},attrs:{filters:t.selectedTags,"raw-data":t.holdings_items,"unfiltered-holdings":t.holdings,isMobileView:t.isMobileView},on:{"filter-data":t.filterData}}):a("portfolio-chart",{class:{hide:t.noFilterResultsFamily},attrs:{filters:t.selectedTags,"raw-data":t.holdings_items_family,"unfiltered-holdings":t.holdingsFamily,isMobileView:t.isMobileView},on:{"filter-data":t.filterData}}),t._v(" "),"personal"===t.familySwitch&&t.holdings_items.length?a("p",{class:{"text-center":t.isMobileView,"text-right":!t.isMobileView,"include-mf":!0}},[a("su-checkbox",{attrs:{label:"Include stocks from Mutual funds"},on:{change:t.removeMF},model:{value:t.includeMF,callback:function(e){t.includeMF=e},expression:"includeMF"}})],1):t._e(),t._v(" "),"family"===t.familySwitch&&t.holdings_items_family.length?a("p",{class:{"text-center":t.isMobileView,"text-right":!t.isMobileView,"include-mf":!0}},[a("su-checkbox",{attrs:{label:"Include stocks from Mutual funds"},on:{change:t.removeMF},model:{value:t.includeMF,callback:function(e){t.includeMF=e},expression:"includeMF"}})],1):t._e()],1):"treemap"===t.activeSection?a("div",{class:{"treemap-container":!0,hide:t.noFilterResults}},[a("div",{staticClass:"holdings-treemap"},[a("holdings-treemap",{key:"holdings-page",attrs:{"raw-data":t.holdings,"hide-stats":!0,"max-items":100,name:"holdings"},on:{"change-source":t.changeSource,"reset-filters":t.resetFilters,sectorData:t.setSectorData,"update-filters":t.setFilter}}),t._v(" "),a("div",{staticStyle:{height:"65px"},attrs:{id:"treemap_stats"}},[a("span",{staticClass:"stats-obj"},[t._v("\n\t\t\t\t\t\t\t\tYour top sectors\n\t\t\t\t\t\t\t\t"),a("span",t._l(t.sectorData,(function(e,i){return a("i",{key:i},[t._v(t._s(e.name)),i<t.sectorData.length-1&&t.sectorData.length>2?a("i",[t._v(", ")]):t._e()])})),0)]),t._v(" "),a("span",{staticClass:"stats-obj"},[t._v("Your most profitable sector"),a("span",[t._v(t._s(t.topSector))])])])],1)]):t._e()]),t._v(" "),"insights"===t.activeSection?a("div",{staticClass:"insights"},[t.shareTickerTape?a("div",[a("iframe",{attrs:{id:"insights_frame",src:t.insightsURL+"broker=kite"}}),t._v(" "),t.selectedTags.length>0?a("div",{staticClass:"iframe-side-container"},t._l(t.selectedTags,(function(e,i){return a("div",{key:i},["sector"===e.type||"stock"===e.type?a("div",{class:{"iframe-tags":!0,active:t.activeInsight===e.text},on:{click:function(a){return t.changeInsightsURL(e)}}},[a("span",{staticClass:"iframe-tag-name"},[t._v(t._s(e.text))]),t._v(" "),a("span",{class:"iframe-tag-type "+e.type+"-tag"},[t._v(t._s(e.type))])]):t._e()])})),0):t._e()]):a("div",[a("br"),t._v(" "),a("su-checkbox",{attrs:{label:"I agree to share my holdings with <a href=https://www.tickertape.in/>tickertape</a>."},model:{value:t.shareTickerTape,callback:function(e){t.shareTickerTape=e},expression:"shareTickerTape"}})],1)]):t._e()]):t._e()]),t._v(" "),!(t.holdings.length>0&&"personal"===t.familySwitch&&t.noFilterResults||t.holdingsFamily.length>0&&"family"===t.familySwitch&&t.noFilterResultsFamily)||t.job||t.fetchingData||t.holdingsError||t.initFetch?t._e():a("div",{staticClass:"section"},[t._m(4)]),t._v(" "),!(t.holdings.length>0&&t.holdings_items.length>0&&"personal"===t.familySwitch||t.holdingsFamily.length>0&&t.holdings_items_family.length>0&&"family"===t.familySwitch&&t.familyList.length>1)||t.job||t.fetchingData||t.holdingsError?t._e():a("div",{class:{section:!0,"table-section":!0,"pull-up-section lessmargin":t.isMobileView}},[t.pnlStatus?a("div",{staticClass:"last-updated text-small text-light-grey"},[a("span",{staticClass:"icon icon-clock"}),t._v(" Last updated: Equity – "+t._s(t.pnlStatus["eq"])+" | MF – "+t._s(t.pnlStatus["mf"])+"\n\t\t")]):t._e(),t._v(" "),a("div",{staticClass:"fetch-data"},[t.sortingData?a("su-loader"):t._e()],1),t._v(" "),"family"!==t.familySwitch?a("div",{staticClass:"table-download text-small"},[a("span",{staticClass:"icon icon-download"}),t._v("\n\t\t\tDownload:\n\t\t\t"),a("a",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{href:"#",title:"Download complete results as Excel"},on:{click:function(e){return e.preventDefault(),t.downloadData("xlsx")}}},[t._v("XLSX")])]):t._e(),t._v(" "),t.isMobileView?a("div",{class:{"table-sort":!0,"no-float":"family"===t.familySwitch}},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.showSortModal.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-sliders"}),t._v(" Sort\n\t\t\t")]),t._v(" "),t.showSort?a("mobile-context-menu",{attrs:{isMenu:!1},on:{close:t.hideSortModal}},[a("template",{slot:"menu"},[a("div",{staticClass:"sort-container"},[a("div",{staticClass:"su-input-group  su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Order")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.sortKey,expression:"sortKey"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortKey=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"tradingsymbol"}},[t._v("Symbol")]),t._v(" "),a("option",{attrs:{value:"quantity_available"}},[t._v("Qty.")]),t._v(" "),a("option",{attrs:{value:"buy_average"}},[t._v("Buy average")]),t._v(" "),a("option",{attrs:{value:"holdings_buy_value"}},[t._v("Buy value")]),t._v(" "),a("option",{attrs:{value:"close_price"}},[t._v("LTP")]),t._v(" "),a("option",{attrs:{value:"closing_value"}},[t._v("Present value")]),t._v(" "),a("option",{attrs:{value:"unrealized_profit"}},[t._v("P&L")]),t._v(" "),a("option",{attrs:{value:"unrealized_profit_percentage"}},[t._v("P&L chg.")])])]),t._v(" "),a("div",{staticClass:"su-input-group  su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Sort by")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.sortBy,expression:"sortBy"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortBy=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"asc"}},[t._v("Ascending")]),t._v(" "),a("option",{attrs:{value:"desc"}},[t._v("Descending")])])]),t._v(" "),a("div",{staticClass:"text-center"},[a("br"),t._v(" "),a("su-button",{staticClass:"btn btn-blue",nativeOn:{click:function(e){return e.preventDefault(),t.sortMobileTable()}}},[t._v("Sort")]),a("br")],1)])])],2):t._e()],1):t._e(),t._v(" "),t.isMobileView?t._e():a("div",{staticClass:"table-container hide-on-mobile"},[a("table",{staticClass:"holdings-table",attrs:{id:"holdings_table"}},[a("thead",[a("tr",[a("th",{class:["table-border "+t.isSorted("tradingsymbol")],on:{click:function(e){return t.sortTable("tradingsymbol",e)}}},[t._v("\n\t\t\t\t\t\t\tSymbol\n\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("tradingsymbol")]})]),t._v(" "),a("th",{class:t.isSorted("quantity_available"),on:{click:function(e){return t.sortTable("quantity_available",e)}}},[t._v("\n\t\t\t\t\t\t\tQty.\n\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("quantity_available")]})]),t._v(" "),a("th",{class:t.isSorted("buy_average"),on:{click:function(e){return t.sortTable("buy_average",e)}}},[t._v("\n\t\t\t\t\t\t\tBuy avg.\n\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("buy_average")]})]),t._v(" "),a("th",{class:["table-border"+t.isSorted("holdings_buy_value")],on:{click:function(e){return t.sortTable("holdings_buy_value",e)}}},[t._v("\n\t\t\t\t\t\t\tBuy value\n\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("holdings_buy_value")]})]),t._v(" "),a("th",{class:t.isSorted("close_price"),on:{click:function(e){return t.sortTable("close_price",e)}}},[t._v("\n\t\t\t\t\t\t\tLTP\n\t\t\t\t\t\t\t"),a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{"tooltip-pos":"left",title:"LTP is updated on page load"}},[a("span",{staticClass:"icon icon-info"})]),t._v(" "),a("span",{class:["arrow "+t.getsortBy("close_price")]})]),t._v(" "),a("th",{class:t.isSorted("closing_value"),on:{click:function(e){return t.sortTable("closing_value",e)}}},[t._v("\n\t\t\t\t\t\t\tPresent value\n\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("closing_value")]})]),t._v(" "),t.onlyMF?a("th",{class:t.isSorted("weight"),on:{click:function(e){return t.sortTable("weight",e)}}},[t._v("\n\t\t\t\t\t\t\tWeight\n\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("weight")]})]):t._e(),t._v(" "),a("th",{class:["table-focus"+t.isSorted("unrealized_profit")],on:{click:function(e){return t.sortTable("unrealized_profit",e)}}},[t._v("\n\t\t\t\t\t\t\tP&L\n\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("unrealized_profit")]})]),t._v(" "),a("th",{class:t.isSorted("unrealized_profit_percentage"),on:{click:function(e){return t.sortTable("unrealized_profit_percentage",e)}}},[t._v("\n\t\t\t\t\t\t\tP&L chg.\n\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("unrealized_profit_percentage")]})])])]),t._v(" "),"personal"===t.familySwitch?a("tbody",t._l(t.holdings_items,(function(e,i){return a("tr",{key:i,on:{mouseleave:function(e){t.showDrop=!1},mouseenter:function(e){t.showDrop=!0}}},[a("td",{staticClass:"textleft table-border"},[e.hasOwnProperty("detailedSymbol")&&e.pendingTag?a("span",{staticClass:"symbol",domProps:{innerHTML:t._s(e["detailedSymbol"]+"<span v-tooltip :title=Tagging in process. Could take a few minutes. class=pending-tag><img src=/static/images/clock-dark.svg>Tagging</span>")}}):e.hasOwnProperty("detailedSymbol")&&!e.pendingTag?a("span",{staticClass:"symbol",domProps:{innerHTML:t._s(e["detailedSymbol"])}}):a("span",{staticClass:"symbol"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e["tradingsymbol"])+"\n\t\t\t\t\t\t\t\t"),e.pendingTag?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pending-tag",attrs:{title:"Tagging in process. Could take a few minutes."}},[a("span",{staticClass:"icon icon-clock"}),t._v("Tagging")]):t._e()]),t._v(" "),-1!==e["instrument_type"].indexOf("EQ")||-1!==e["instrument_type"].indexOf("GOLD")?a("div",{staticClass:"flag-container"},[t.showDrop&&t.hasBreakdown?a("context-menu",{staticClass:"table"},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"context-menu-button",attrs:{slot:"button",title:"Options"},slot:"button"},[a("span",{staticClass:"icon icon-ellipsis"})]),t._v(" "),a("template",{slot:"menu"},[0===parseFloat(e["quantity_discrepant"])&&t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getHoldingsBreakdown(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tView breakdown\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),t.hasBreakdown&&"family"!==t.familySwitch?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getHoldingsDividend(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tView dividends\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),parseFloat(e["quantity_discrepant"])>0&&(""===e["failure_date"]||null===e["failure_date"])&&"family"!==t.familySwitch?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.scrollToDiscrepant(e)}}},[a("img",{attrs:{src:"/static/images/alert-icon.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tView discrepancy\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),"family"!==t.familySwitch?a("hr"):t._e(),t._v(" "),t.hasBreakdown&&"family"!==t.familySwitch?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getHoldingsBreakdown(e)}}},[a("span",{staticClass:"icon icon-bookmark"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tView tags\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),"family"!==t.familySwitch?a("li",[a("a",{attrs:{href:"/portfolio/tags/analyse"}},[a("span",{staticClass:"icon icon-trending-up"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tAnalyse tags\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),t.pledgeError?t._e():a("hr"),t._v(" "),t.pledgeError?t._e():a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.computeCreatePledgeModal(e,"pledge")}}},[a("img",{attrs:{src:"/static/images/pledge-icon.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tPledge for margin\n\t\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),parseFloat(e["quantity_pledged_for_margin"])>0&&t.hasBreakdown&&!t.pledgeError?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.computeCreatePledgeModal(e,"unpledge")}}},[a("img",{attrs:{src:"/static/images/unpledge-icon.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tUnpledge\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),"pledge"==e["pending_pledge_type"]&&parseFloat(e["pending_pledge_qty"])>0&&t.hasBreakdown&&!t.pledgeError?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.computeCancelPledgeModal(e,"pledge")}}},[a("span",{staticClass:"icon icon-trash"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tCancel pledge request\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),"unpledge"==e["pending_pledge_type"]&&parseFloat(e["pending_pledge_qty"])>0&&t.hasBreakdown&&!t.pledgeError?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.computeCancelPledgeModal(e,"unpledge")}}},[a("span",{staticClass:"icon icon-trash"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tCancel unpledge request\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e()])],2):t._e(),t._v(" "),parseFloat(e["pending_pledge_qty"])>0&&"pledge"==e["pending_pledge_type"]?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pledge-flag pending-pledge",attrs:{title:"Pending qty. for pledge"}},[a("img",{attrs:{src:"/static/images/pledge.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["pending_pledge_qty"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),parseFloat(e["pending_pledge_qty"])>0&&"unpledge"==e["pending_pledge_type"]?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pledge-flag pending-pledge",attrs:{title:"Pending qty. for unpledge"}},[a("img",{attrs:{src:"/static/images/unpledge.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["pending_pledge_qty"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),parseFloat(e["quantity_pledged_for_margin"])>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pledge-flag",attrs:{title:"Pledged for margin"}},[a("img",{attrs:{src:"/static/images/pledge.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_pledged_for_margin"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),parseFloat(e["quantity_pledged_for_loan"])>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pledge-flag loan-flag",attrs:{title:"Pledged for LAS"}},[a("img",{attrs:{src:"/static/images/pledge-blue.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_pledged_for_loan"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),parseFloat(e["quantity_discrepant"])>0&&(null===e["failure_date"]||""===e["failure_date"])?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"status-flag",attrs:{title:"Discrepancy"}},[a("img",{attrs:{src:"/static/images/alert.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_discrepant"],3))+"\n\t\t\t\t\t\t\t\t")]):null!==e["failure_date"]&&e["failure_date"].length>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"status-flag",attrs:{title:"Unknown discrepancy. Contact support"}},[t._m(5,!0)]):t._e(),t._v(" "),e["quantity_long_term"]>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"status-flag longterm-flag",attrs:{title:"Long term holdings"}},[a("img",{attrs:{src:"/static/images/calendar-long.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_long_term"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),e["quantity_short_term"]>0&&t.isShortTermFiltered?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"status-flag shortterm-flag",attrs:{title:"Short term holdings"}},[a("img",{attrs:{src:"/static/images/calendar-short.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_short_term"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e()],1):t._e(),t._v(" "),-1!==e["instrument_type"].indexOf("MF")?a("div",{staticClass:"flag-container"},[t.showDrop&&t.hasBreakdown?a("context-menu",{staticClass:"table"},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"context-menu-button",attrs:{slot:"button",title:"Options"},slot:"button"},[a("span",{staticClass:"icon icon-ellipsis"})]),t._v(" "),a("template",{slot:"menu"},[0===parseFloat(e["quantity_discrepant"])&&t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getHoldingsBreakdown(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tView breakdown\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),parseFloat(e["quantity_discrepant"])>0&&"family"!==t.familySwitch?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.scrollToDiscrepant(e)}}},[a("img",{attrs:{src:"/static/images/alert-icon.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tView discrepancy\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getMFComposition(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tView stock composition\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),a("hr"),t._v(" "),t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getHoldingsBreakdown(e)}}},[a("span",{staticClass:"icon icon-bookmark"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tView tags\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),a("li",[a("a",{attrs:{href:"/portfolio/tags/analyse"}},[a("span",{staticClass:"icon icon-trending-up"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tAnalyse tags\n\t\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),t.hasBreakdown?a("hr"):t._e(),t._v(" "),t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.computeCreatePledgeModal(e,"pledge")}}},[a("img",{attrs:{src:"/static/images/pledge-icon.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tPledge for margin\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),parseFloat(e["quantity_pledged_for_margin"])>0&&t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.computeCreatePledgeModal(e,"unpledge")}}},[a("img",{attrs:{src:"/static/images/unpledge-icon.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tUnpledge\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),"pledge"==e["pending_pledge_type"]&&parseFloat(e["pending_pledge_qty"])>0&&t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.computeCancelPledgeModal(e,"pledge")}}},[a("span",{staticClass:"icon icon-trash"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tCancel pledge request\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),"unpledge"==e["pending_pledge_type"]&&parseFloat(e["pending_pledge_qty"])>0&&t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.computeCancelPledgeModal(e,"unpledge")}}},[a("span",{staticClass:"icon icon-trash"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tCancel unpledge request\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e()])],2):t._e(),t._v(" "),parseFloat(e["pending_pledge_qty"])>0&&"pledge"==e["pending_pledge_type"]?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pledge-flag pending-pledge",attrs:{title:"Pending qty. for pledge"}},[a("img",{attrs:{src:"/static/images/pledge.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["pending_pledge_qty"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),parseFloat(e["pending_pledge_qty"])>0&&"unpledge"==e["pending_pledge_type"]?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pledge-flag pending-pledge",attrs:{title:"Pending qty. for unpledge"}},[a("img",{attrs:{src:"/static/images/unpledge.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["pending_pledge_qty"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),e["quantity_pledged_for_margin"]>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pledge-flag",attrs:{title:"Pledged for margin"}},[a("img",{attrs:{src:"/static/images/pledge.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_pledged_for_margin"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),parseFloat(e["quantity_pledged_for_loan"])>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pledge-flag loan-flag",attrs:{title:"Pledged for LAS"}},[a("img",{attrs:{src:"/static/images/pledge-blue.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_pledged_for_loan"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),parseFloat(e["quantity_discrepant"])>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"status-flag",attrs:{title:"Discrepancy"}},[a("img",{attrs:{src:"/static/images/alert.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_discrepant"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),e["quantity_long_term"]>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"status-flag longterm-flag",attrs:{title:"Long term holdings"}},[a("img",{attrs:{src:"/static/images/calendar-long.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_long_term"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),e["quantity_short_term"]>0&&t.isShortTermFiltered?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"status-flag shortterm-flag",attrs:{title:"Short term holdings"}},[a("img",{attrs:{src:"/static/images/calendar-short.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_short_term"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e()],1):t._e(),t._v(" "),a("div",{staticClass:"new-tags"},[e.tags&&e.tags.length?a("div",{staticClass:"added-tags"},t._l(e.tags,(function(i,s){return e.pendingTags&&0!==e.pendingTags.filter((function(t){return t.id===i.id})).length?t._e():a("span",{key:s,style:"background:"+t.getBackground(i)+";color:"+t.getColor(i)},[t._v(t._s(i.text))])})),0):t._e(),t._v(" "),e.pendingTag&&e.pendingTags.length?a("div",{staticClass:"pending-tags"},t._l(e.pendingTags,(function(e,i){return a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],key:i,style:"background:"+t.getBackground(e)+";color:"+t.getColor(e),attrs:{title:"Pending"}},[a("span",{staticClass:"icon icon-clock"}),t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.text)+"\n\t\t\t\t\t\t\t\t\t")])})),0):t._e()])]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["qty_total"],3))+"\n\t\t\t\t\t\t")]),t._v(" "),0!==parseFloat(e["quantity_discrepant"])||null!==e["failure_date"]&&e["failure_date"].length>0?a("td",{staticClass:"text-light-grey"},[t._v(" – ")]):a("td",[t._v(t._s(t._f("inrFormat")(e["buy_average"],2)))]),t._v(" "),0!==parseFloat(e["quantity_discrepant"])||null!==e["failure_date"]&&e["failure_date"].length>0?a("td",{staticClass:"text-light-grey table-border"},[t._v(" – ")]):a("td",{staticClass:"table-border"},[t._v(t._s(t._f("inrFormat")(e["holdings_buy_value"],2)))]),t._v(" "),0!==parseFloat(e["quantity_discrepant"])||null==e["close_price"]||null!==e["failure_date"]&&e["failure_date"].length>0?a("td",{staticClass:"text-light-grey"},[t._v(" – ")]):a("td",[t._v(t._s(t._f("inrFormat")(e["close_price"],2)))]),t._v(" "),null==e["closing_value"]||null!==e["failure_date"]&&e["failure_date"].length>0?a("td",{staticClass:"text-light-grey"},[t._v(" – ")]):a("td",[t._v(t._s(t._f("inrFormat")(e["closing_value"],2)))]),t._v(" "),t.onlyMF&&e["weight"]?a("td",[t._v(t._s(t._f("round")(e["weight"]))+"%")]):t._e(),t._v(" "),0!==parseFloat(e["quantity_discrepant"])||null!==e["failure_date"]&&e["failure_date"].length>0?a("td",{staticClass:"text-light-grey table-focus"},[t._v(" – ")]):e["unrealized_profit"]>0?a("td",{staticClass:"pos table-focus"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit"],2))+"\n\t\t\t\t\t\t")]):e["unrealized_profit"]<0?a("td",{staticClass:"neg table-focus"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit"],2))+"\n\t\t\t\t\t\t")]):null==e["unrealized_profit"]?a("td",{staticClass:"table-focus"},[t._v("\n\t\t\t\t\t\t\t–\n\t\t\t\t\t\t")]):a("td",{staticClass:"table-focus"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit"],2))+"\n\t\t\t\t\t\t")]),t._v(" "),0!==parseFloat(e["quantity_discrepant"])||null!==e["failure_date"]&&e["failure_date"].length>0?a("td",{staticClass:"text-light-grey"},[t._v(" – ")]):e["unrealized_profit"]>0?a("td",{staticClass:"pos"},[t._v("\n\t\t\t\t\t\t\t+"+t._s(t._f("inrFormat")(e["unrealized_profit_percentage"],2))+"%\n\t\t\t\t\t\t")]):e["unrealized_profit"]<0?a("td",{staticClass:"neg"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit_percentage"],2))+"%\n\t\t\t\t\t\t")]):null==e["unrealized_profit"]?a("td",[t._v("\n\t\t\t\t\t\t\t–\n\t\t\t\t\t\t")]):a("td",[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit_percentage"],2))+"\n\t\t\t\t\t\t")])])})),0):"family"===t.familySwitch?a("tbody",t._l(t.holdings_items_family,(function(e,i){return a("tr",{key:i,on:{mouseleave:function(e){t.showDrop=!1},mouseenter:function(e){t.showDrop=!0}}},[a("td",{staticClass:"textleft table-border"},[e.hasOwnProperty("detailedSymbol")&&e.pendingTag?a("span",{staticClass:"symbol",domProps:{innerHTML:t._s(e["detailedSymbol"]+"<span v-tooltip :title=Tagging in process. Could take a few minutes. class=pending-tag><img src=/static/images/clock-dark.svg>Tagging</span>")}}):e.hasOwnProperty("detailedSymbol")&&!e.pendingTag?a("span",{staticClass:"symbol",domProps:{innerHTML:t._s(e["detailedSymbol"])}}):a("span",{staticClass:"symbol"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e["tradingsymbol"])+"\n\t\t\t\t\t\t\t\t"),e.pendingTag?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pending-tag",attrs:{title:"Tagging in process. Could take a few minutes."}},[a("span",{staticClass:"icon icon-clock"}),t._v("Tagging")]):t._e()]),t._v(" "),-1!==e["instrument_type"].indexOf("EQ")||-1!==e["instrument_type"].indexOf("GOLD")?a("div",{staticClass:"flag-container"},[t.showDrop&&t.hasBreakdown?a("context-menu",{staticClass:"table"},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"context-menu-button",attrs:{slot:"button",title:"Options"},slot:"button"},[a("span",{staticClass:"icon icon-ellipsis"})]),t._v(" "),a("template",{slot:"menu"},[0===parseFloat(e["quantity_discrepant"])&&t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getHoldingsBreakdown(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tView breakdown\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),t.hasBreakdown&&"family"!==t.familySwitch?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getHoldingsDividend(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tView dividends\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e()])],2):t._e(),t._v(" "),parseFloat(e["pending_pledge_qty"])>0&&"pledge"==e["pending_pledge_type"]?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pledge-flag pending-pledge",attrs:{title:"Pending qty. for pledge"}},[a("img",{attrs:{src:"/static/images/pledge.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["pending_pledge_qty"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),parseFloat(e["pending_pledge_qty"])>0&&"unpledge"==e["pending_pledge_type"]?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pledge-flag pending-pledge",attrs:{title:"Pending qty. for unpledge"}},[a("img",{attrs:{src:"/static/images/unpledge.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["pending_pledge_qty"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),parseFloat(e["quantity_pledged_for_margin"])>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pledge-flag",attrs:{title:"Pledged for margin"}},[a("img",{attrs:{src:"/static/images/pledge.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_pledged_for_margin"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),parseFloat(e["quantity_pledged_for_loan"])>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pledge-flag loan-flag",attrs:{title:"Pledged for LAS"}},[a("img",{attrs:{src:"/static/images/pledge-blue.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_pledged_for_loan"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),parseFloat(e["quantity_discrepant"])>0&&(null===e["failure_date"]||""===e["failure_date"])?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"status-flag",attrs:{title:"Discrepancy"}},[a("img",{attrs:{src:"/static/images/alert.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_discrepant"],3))+"\n\t\t\t\t\t\t\t\t")]):null!==e["failure_date"]&&e["failure_date"].length>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"status-flag",attrs:{title:"Unknown discrepancy. Contact support"}},[t._m(6,!0)]):t._e(),t._v(" "),e["quantity_long_term"]>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"status-flag longterm-flag",attrs:{title:"Long term holdings"}},[a("img",{attrs:{src:"/static/images/calendar-long.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_long_term"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),e["quantity_short_term"]>0&&t.isShortTermFiltered?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"status-flag shortterm-flag",attrs:{title:"Short term holdings"}},[a("img",{attrs:{src:"/static/images/calendar-short.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_short_term"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e()],1):t._e(),t._v(" "),-1!==e["instrument_type"].indexOf("MF")?a("div",{staticClass:"flag-container"},[t.showDrop&&t.hasBreakdown?a("context-menu",{staticClass:"table"},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"context-menu-button",attrs:{slot:"button",title:"Options"},slot:"button"},[a("span",{staticClass:"icon icon-ellipsis"})]),t._v(" "),a("template",{slot:"menu"},[0===parseFloat(e["quantity_discrepant"])&&t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getHoldingsBreakdown(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tView breakdown\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),parseFloat(e["quantity_discrepant"])>0&&"family"!==t.familySwitch?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.scrollToDiscrepant(e)}}},[a("img",{attrs:{src:"/static/images/alert-icon.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tView discrepancy\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getMFComposition(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tView stock composition\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e()])],2):t._e(),t._v(" "),parseFloat(e["pending_pledge_qty"])>0&&"pledge"==e["pending_pledge_type"]?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pledge-flag pending-pledge",attrs:{title:"Pending qty. for pledge"}},[a("img",{attrs:{src:"/static/images/pledge.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["pending_pledge_qty"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),parseFloat(e["pending_pledge_qty"])>0&&"unpledge"==e["pending_pledge_type"]?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pledge-flag pending-pledge",attrs:{title:"Pending qty. for unpledge"}},[a("img",{attrs:{src:"/static/images/unpledge.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["pending_pledge_qty"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),e["quantity_pledged_for_margin"]>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pledge-flag",attrs:{title:"Pledged for margin"}},[a("img",{attrs:{src:"/static/images/pledge.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_pledged_for_margin"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),parseFloat(e["quantity_pledged_for_loan"])>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pledge-flag loan-flag",attrs:{title:"Pledged for LAS"}},[a("img",{attrs:{src:"/static/images/pledge-blue.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_pledged_for_loan"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),parseFloat(e["quantity_discrepant"])>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"status-flag",attrs:{title:"Discrepancy"}},[a("img",{attrs:{src:"/static/images/alert.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_discrepant"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),e["quantity_long_term"]>0?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"status-flag longterm-flag",attrs:{title:"Long term holdings"}},[a("img",{attrs:{src:"/static/images/calendar-long.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_long_term"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),e["quantity_short_term"]>0&&t.isShortTermFiltered?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"status-flag shortterm-flag",attrs:{title:"Short term holdings"}},[a("img",{attrs:{src:"/static/images/calendar-short.svg"}}),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["quantity_short_term"],3))+"\n\t\t\t\t\t\t\t\t")]):t._e()],1):t._e(),t._v(" "),a("div",{staticClass:"family-comp"},t._l(e.client_ids,(function(e,i){return a("span",{key:i,staticClass:"family-split"},[a("span",{staticClass:"family-clientid"},[t._v(t._s(e.client_id))]),a("strong",[t._v(t._s(e.qty))])])})),0)]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(e["qty_total"],3))+"\n\t\t\t\t\t\t")]),t._v(" "),0!==parseFloat(e["quantity_discrepant"])||null!==e["failure_date"]&&e["failure_date"].length>0?a("td",{staticClass:"text-light-grey"},[t._v(" – ")]):a("td",[t._v(t._s(t._f("inrFormat")(e["buy_average"],2)))]),t._v(" "),0!==parseFloat(e["quantity_discrepant"])||null!==e["failure_date"]&&e["failure_date"].length>0?a("td",{staticClass:"text-light-grey table-border"},[t._v(" – ")]):a("td",{staticClass:"table-border"},[t._v(t._s(t._f("inrFormat")(e["holdings_buy_value"],2)))]),t._v(" "),0!==parseFloat(e["quantity_discrepant"])||null==e["close_price"]||null!==e["failure_date"]&&e["failure_date"].length>0?a("td",{staticClass:"text-light-grey"},[t._v(" – ")]):a("td",[t._v(t._s(t._f("inrFormat")(e["close_price"],2)))]),t._v(" "),null==e["closing_value"]||null!==e["failure_date"]&&e["failure_date"].length>0?a("td",{staticClass:"text-light-grey"},[t._v(" – ")]):a("td",[t._v(t._s(t._f("inrFormat")(e["closing_value"],2)))]),t._v(" "),t.onlyMF&&e["weight"]?a("td",[t._v(t._s(t._f("round")(e["weight"]))+"%")]):t._e(),t._v(" "),0!==parseFloat(e["quantity_discrepant"])||null!==e["failure_date"]&&e["failure_date"].length>0?a("td",{staticClass:"text-light-grey table-focus"},[t._v(" – ")]):e["unrealized_profit"]>0?a("td",{staticClass:"pos table-focus"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit"],2))+"\n\t\t\t\t\t\t")]):e["unrealized_profit"]<0?a("td",{staticClass:"neg table-focus"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit"],2))+"\n\t\t\t\t\t\t")]):null==e["unrealized_profit"]?a("td",{staticClass:"table-focus"},[t._v("\n\t\t\t\t\t\t\t–\n\t\t\t\t\t\t")]):a("td",{staticClass:"table-focus"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit"],2))+"\n\t\t\t\t\t\t")]),t._v(" "),0!==parseFloat(e["quantity_discrepant"])||null!==e["failure_date"]&&e["failure_date"].length>0?a("td",{staticClass:"text-light-grey"},[t._v(" – ")]):e["unrealized_profit"]>0?a("td",{staticClass:"pos"},[t._v("\n\t\t\t\t\t\t\t+"+t._s(t._f("inrFormat")(e["unrealized_profit_percentage"],2))+"%\n\t\t\t\t\t\t")]):e["unrealized_profit"]<0?a("td",{staticClass:"neg"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit_percentage"],2))+"%\n\t\t\t\t\t\t")]):null==e["unrealized_profit"]?a("td",[t._v("\n\t\t\t\t\t\t\t–\n\t\t\t\t\t\t")]):a("td",[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit_percentage"],2))+"\n\t\t\t\t\t\t")])])})),0):t._e()])])]),t._v(" "),!(t.holdings.length>0&&t.holdings_items.length>0&&"personal"===t.familySwitch||t.holdingsFamily.length>0&&t.holdings_items_family.length>0&&"family"===t.familySwitch&&t.familyList.length>1)||t.job||t.fetchingData||t.holdingsError||!t.isMobileView?t._e():a("div",{staticClass:"section table-section show-on-mobile cards pull-up-section"},["personal"===t.familySwitch?a("div",t._l(t.holdings_items,(function(e,i){return a("div",{key:i,staticClass:"card",class:t.holdings_items.length-1===i?"last":"",on:{click:function(a){return t.toShowContextMenu(e)}}},[t.contextMenuInstrumentId===e.instrument_id?a("mobile-context-menu",{on:{close:function(a){return t.toHideContextMenu(e)}}},[a("template",{slot:"menu"},[!t.hasBreakdown||-1===e["instrument_type"].indexOf("EQ")&&-1===e["instrument_type"].indexOf("GOLD")||"family"===t.familySwitch?t._e():a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getHoldingsDividend(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\tView dividends\n\t\t\t\t\t\t\t")])]),t._v(" "),0===e["quantity_discrepant"]&&t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getHoldingsBreakdown(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\tView breakdown\n\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),e["quantity_discrepant"]>0&&(""===e["failure_date"]||null===e["failure_date"])&&"family"!==t.familySwitch?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.scrollToDiscrepant(e)}}},[a("img",{attrs:{src:"/static/images/alert-icon.svg"}}),t._v("\n\t\t\t\t\t\t\t\tView discrepancy\n\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),t.hasBreakdown&&"family"!==t.familySwitch?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getHoldingsBreakdown(e)}}},[a("span",{staticClass:"icon icon-bookmark"}),t._v("\n\t\t\t\t\t\t\t\tView tags\n\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),"family"!==t.familySwitch?a("li",[a("a",{attrs:{href:"/portfolio/tags/analyse"}},[a("span",{staticClass:"icon icon-trending-up"}),t._v("\n\t\t\t\t\t\t\t\tAnalyse tags\n\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),-1!==e["instrument_type"].indexOf("MF")&&t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getMFComposition(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\tView stock composition\n\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.computeCreatePledgeModal(e,"pledge")}}},[a("span",{staticClass:"icon icon-briefcase"}),t._v(" Pledge for margin\n\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),e["quantity_pledged_for_margin"]>0&&t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.computeCreatePledgeModal(e,"unpledge")}}},[a("span",{staticClass:"icon icon-briefcase"}),t._v(" Unpledge\n\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),"pledge"==e["pending_pledge_type"]&&e["pending_pledge_qty"]>0&&t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.computeCancelPledgeModal(e,"pledge")}}},[a("span",{staticClass:"icon icon-trash"}),t._v("\n\t\t\t\t\t\t\t\tCancel pledge request\n\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),"unpledge"==e["pending_pledge_type"]&&e["pending_pledge_qty"]>0&&t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.computeCancelPledgeModal(e,"unpledge")}}},[a("span",{staticClass:"icon icon-trash"}),t._v("\n\t\t\t\t\t\t\t\tCancel unpledge request\n\t\t\t\t\t\t\t")])]):t._e()])],2):t._e(),t._v(" "),a("div",{staticClass:"top"},[a("div",{staticClass:"top-left"},[0!==e["quantity_discrepant"]?a("div",[a("label",[t._v("Qty.")]),t._v(" "+t._s(e["qty_total"])+"\n\t\t\t\t\t\t\t"),null!==e["failure_date"]&&e["failure_date"].length>0?a("span",{staticClass:"failure"},[a("img",{attrs:{src:"/static/images/alert-icon-dark.svg"}})]):t._e()]):a("div",[a("label",[t._v("Qty.")]),t._v(" "+t._s(e["qty_total"])+" "),a("span",{staticClass:"separator"},[t._v("•")]),t._v(" "),a("label",[t._v("Buy avg.")]),t._v(" "+t._s(t._f("inrFormat")(e["buy_average"],2))+"\n\t\t\t\t\t\t")])]),t._v(" "),a("div",{staticClass:"top-right"},[0!==e["quantity_discrepant"]?a("div",{staticClass:"text-light-grey"},[t._v(" – ")]):e["unrealized_profit"]>0?a("div",{staticClass:"pos"},[t._v("\n\t\t\t\t\t\t\t+"+t._s(t._f("inrFormat")(e["unrealized_profit_percentage"],2))+"%\n\t\t\t\t\t\t")]):e["unrealized_profit"]<0?a("div",{staticClass:"neg"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit_percentage"],2))+"%\n\t\t\t\t\t\t")]):null==e["unrealized_profit"]?a("div",[t._v("\n\t\t\t\t\t\t\t–\n\t\t\t\t\t\t")]):a("div",[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit_percentage"],2))+"\n\t\t\t\t\t\t")])])]),t._v(" "),a("div",{staticClass:"middle"},[a("div",{staticClass:"middle-left"},[a("div",{staticClass:"text-bold symbol"},[t._v(t._s(e["tradingsymbol"]))])]),t._v(" "),a("div",{staticClass:"middle-right"},[0!==e["quantity_discrepant"]?a("div",{staticClass:"text-light-grey"},[t._v(" – ")]):e["unrealized_profit"]>0?a("div",{staticClass:"pos"},[t._v("\n\t\t\t\t\t\t\t+"+t._s(t._f("inrFormat")(e["unrealized_profit"],2))+"\n\t\t\t\t\t\t")]):e["unrealized_profit"]<0?a("div",{staticClass:"neg"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit"],2))+"\n\t\t\t\t\t\t")]):null==e["unrealized_profit"]?a("div",[t._v("\n\t\t\t\t\t\t\t–\n\t\t\t\t\t\t")]):a("div",[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit"],2))+"\n\t\t\t\t\t\t")])])]),t._v(" "),a("div",{staticClass:"bottom"},[a("div",{staticClass:"bottom-left"},[null==e["holdings_buy_value"]?a("div",[t._v(" – ")]):a("div",[a("label",[t._v("Invested")]),t._v(" "+t._s(t._f("inrFormat")(e["holdings_buy_value"],2)))])]),t._v(" "),a("div",{staticClass:"bottom-right"},[0!==e["quantity_discrepant"]||null==e["close_price"]?a("div",[t._v(" – ")]):a("div",[a("label",[t._v("LTP")]),t._v(" "+t._s(t._f("inrFormat")(e["close_price"],2)))])])])],1)})),0):"family"===t.familySwitch?a("div",t._l(t.holdings_items_family,(function(e,i){return a("div",{key:i,staticClass:"card",class:t.holdings_items.length-1===i?"last":"",on:{click:function(a){return t.toShowContextMenu(e)}}},[t.contextMenuInstrumentId===e.instrument_id?a("mobile-context-menu",{on:{close:function(a){return t.toHideContextMenu(e)}}},[a("template",{slot:"menu"},[!t.hasBreakdown||-1===e["instrument_type"].indexOf("EQ")&&-1===e["instrument_type"].indexOf("GOLD")||"family"===t.familySwitch?t._e():a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getHoldingsDividend(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\tView dividends\n\t\t\t\t\t\t\t")])]),t._v(" "),0===e["quantity_discrepant"]&&t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getHoldingsBreakdown(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\tView breakdown\n\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),e["quantity_discrepant"]>0&&(""===e["failure_date"]||null===e["failure_date"])&&"family"!==t.familySwitch?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.scrollToDiscrepant(e)}}},[a("img",{attrs:{src:"/static/images/alert-icon.svg"}}),t._v("\n\t\t\t\t\t\t\t\tView discrepancy\n\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),-1!==e["instrument_type"].indexOf("MF")&&t.hasBreakdown?a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getMFComposition(e)}}},[a("span",{staticClass:"icon icon-menu"}),t._v("\n\t\t\t\t\t\t\t\tView stock composition\n\t\t\t\t\t\t\t")])]):t._e()])],2):t._e(),t._v(" "),a("div",{staticClass:"top"},[a("div",{staticClass:"top-left"},[0!==e["quantity_discrepant"]?a("div",[a("label",[t._v("Qty.")]),t._v(" "+t._s(e["qty_total"])+"\n\t\t\t\t\t\t\t"),null!==e["failure_date"]&&e["failure_date"].length>0?a("span",{staticClass:"failure"},[a("img",{attrs:{src:"/static/images/alert-icon-dark.svg"}})]):t._e()]):a("div",[a("label",[t._v("Qty.")]),t._v(" "+t._s(e["qty_total"])+" "),a("span",{staticClass:"separator"},[t._v("•")]),t._v(" "),a("label",[t._v("Buy avg.")]),t._v(" "+t._s(t._f("inrFormat")(e["buy_average"],2))+"\n\t\t\t\t\t\t")])]),t._v(" "),a("div",{staticClass:"top-right"},[0!==e["quantity_discrepant"]?a("div",{staticClass:"text-light-grey"},[t._v(" – ")]):e["unrealized_profit"]>0?a("div",{staticClass:"pos"},[t._v("\n\t\t\t\t\t\t\t+"+t._s(t._f("inrFormat")(e["unrealized_profit_percentage"],2))+"%\n\t\t\t\t\t\t")]):e["unrealized_profit"]<0?a("div",{staticClass:"neg"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit_percentage"],2))+"%\n\t\t\t\t\t\t")]):null==e["unrealized_profit"]?a("div",[t._v("\n\t\t\t\t\t\t\t–\n\t\t\t\t\t\t")]):a("div",[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit_percentage"],2))+"\n\t\t\t\t\t\t")])])]),t._v(" "),a("div",{staticClass:"middle"},[a("div",{staticClass:"middle-left"},[a("div",{staticClass:"text-bold symbol"},[t._v(t._s(e["tradingsymbol"]))])]),t._v(" "),a("div",{staticClass:"middle-right"},[0!==e["quantity_discrepant"]?a("div",{staticClass:"text-light-grey"},[t._v(" – ")]):e["unrealized_profit"]>0?a("div",{staticClass:"pos"},[t._v("\n\t\t\t\t\t\t\t+"+t._s(t._f("inrFormat")(e["unrealized_profit"],2))+"\n\t\t\t\t\t\t")]):e["unrealized_profit"]<0?a("div",{staticClass:"neg"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit"],2))+"\n\t\t\t\t\t\t")]):null==e["unrealized_profit"]?a("div",[t._v("\n\t\t\t\t\t\t\t–\n\t\t\t\t\t\t")]):a("div",[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("inrFormat")(e["unrealized_profit"],2))+"\n\t\t\t\t\t\t")])])]),t._v(" "),a("div",{staticClass:"bottom"},[a("div",{staticClass:"bottom-left"},[null==e["holdings_buy_value"]?a("div",[t._v(" – ")]):a("div",[a("label",[t._v("Invested")]),t._v(" "+t._s(t._f("inrFormat")(e["holdings_buy_value"],2)))])]),t._v(" "),a("div",{staticClass:"bottom-right"},[0!==e["quantity_discrepant"]||null==e["close_price"]?a("div",[t._v(" – ")]):a("div",[a("label",[t._v("LTP")]),t._v(" "+t._s(t._f("inrFormat")(e["close_price"],2)))])])])],1)})),0):t._e()]),t._v(" "),t.job?a("div",{class:{section:!0,"text-center":!0}},[a("jobber")],1):t._e(),t._v(" "),t.job||t.fetchingData||t.holdingsError||t.initFetch?t.job||t.fetchingData||!t.holdingsError?t._e():a("div",{staticClass:"section"},[a("error",{attrs:{sub:t.holdingsErrorMsg}})],1):a("div",{class:{section:!0,"text-center":!0}},["personal"===t.familySwitch&&t.noResults||"family"===t.familySwitch&&t.noResultsFamily&&t.familyList.length?a("empty"):"family"===t.familySwitch&&t.noResultsFamily&&0===t.familyList.length?a("div",{staticClass:"text-center no-family"},[a("empty",{attrs:{sub:"You don't have sub-accounts added to your family. <a target=_blank href=https://support.zerodha.com/category/console/profile/account/articles/family-account>Learn more</a>.",main:"",imgSrc:"static/images/family-invite.png"}}),t._v(" "),a("a",{staticClass:"btn btn-blue",attrs:{href:"/account/family"}},[t._v("Link a sub-account")])],1):t._e()],1),t._v(" "),a("div",{staticClass:"section"},[t.showModal?a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideBreakdown}},[a("div",{staticClass:"modal-container breakdown-tag-container",on:{click:function(e){e.stopPropagation(),t.showBreakdown(),t.hideSelectedBreakdownFilters(e)}}},[a("div",{class:{modalbody:!0,nomargin:t.isMobileFetching}},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideBreakdown.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("div",{class:{lessmargin:t.isMobileFetching}},[a("h2",{staticClass:"holdings-breakdown-name"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.breakdownSymbol)+"\n\t\t\t\t\t\t\t\t"),t.fetchingBreakdown?a("su-loader"):t._e()],1)]),t._v(" "),a("div",{staticClass:"text-grey"},[t.instrument.isin?a("div",{staticClass:"breakdown-meta"},[a("span",{staticClass:"text-light-grey"},[t._v("ISIN")]),t._v(" "),a("span",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.instrument.isin)+"\n\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),t.breakdownQty?a("div",{staticClass:"breakdown-meta"},[a("span",{staticClass:"text-light-grey"},[t._v("Total qty.")]),t._v(" "),a("span",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(t.breakdownQty,3))+"\n\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),t.breakdownT1?a("div",{staticClass:"breakdown-meta"},[a("span",{staticClass:"text-light-grey"},[t._v("T1 qty.")]),t._v(" "),a("span",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("qtyFormat")(t.breakdownT1,3))+"\n\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),t.breakdownLTP?a("div",{staticClass:"breakdown-meta"},[a("span",{staticClass:"text-light-grey"},[t._v("LTP")]),t._v(" "),a("span",[t._v(t._s(t.breakdownLTP))])]):t._e()]),t._v(" "),"family"!==t.familySwitch?a("hr"):t._e(),t._v(" "),!t.fetchingBreakdown&&t.holdingsBreakdown.length>0&&!t.holdingsBreakdownError&&"family"!==t.familySwitch?a("div",[a("p",{staticClass:"analyse-tags-link"},[t._m(7),t._v(" "),t.instrument.pendingTag?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"pending-tag",attrs:{title:"Tagging in process. Could take a few minutes."}},[a("span",{staticClass:"icon icon-clock"}),t._v(" Tagging")]):t._e()]),t._v(" "),t.enableTagEdit||0===t.selectedHolding.tags.length&&!t.selectedHolding.pendingTag?!t.enableTagEdit&&0===t.selectedHolding.tags.length&&t.enableBreakdownEdit?a("div",{staticClass:"text-light-grey"},[a("span",{staticClass:"icon icon-info"},[t._v(" No tags")])]):a("div",{staticClass:"tagger"},[t.isTagModifying?t._e():a("tagger",{ref:"tagger0",attrs:{holding:t.selectedHolding,tags:t.consoleTags,isAll:!0},on:{"tag-updated":t.updateFetchedTags,creating:t.showTagCreating,changed:t.tagChanged}})],1):a("div",[a("div",{staticClass:"new-tags"},[a("div",{staticClass:"added-tags"},t._l(t.selectedHolding.tags,(function(e,i){return t.instrument.pendingTags&&0!==t.instrument.pendingTags.filter((function(t){return t.id===e.id})).length?t._e():a("span",{key:i,style:"background:"+t.getBackground(e)+";color:"+t.getColor(e)},[t._v(t._s(e.text))])})),0),t._v(" "),t.selectedHolding.pendingTag?a("div",{staticClass:"pending-tags"},t._l(t.selectedHolding.pendingTags,(function(e,i){return a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],key:i,style:"background:"+t.getBackground(e)+";color:"+t.getColor(e),attrs:{title:"Pending"}},[a("span",{staticClass:"icon icon-clock"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.text)+"\n\t\t\t\t\t\t\t\t\t\t")])})),0):t._e()])]),t._v(" "),a("br"),t._v(" "),t.enableBreakdownEdit?t._e():a("a",{staticClass:"float-right text-small edit-tags-enable",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.enableBreakdownEdit=!0,t.enableTagEdit=!1}}},[a("span",{staticClass:"icon icon-edit"}),t._v(" Change tags")]),t._v(" "),t.enableBreakdownEdit?a("a",{staticClass:"float-right text-small edit-tags-enable",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.enableBreakdownEdit=!1,t.enableTagEdit=!0}}},[a("span",{staticClass:"icon icon-arrow-left"}),t._v(" Back")]):a("a",{staticClass:"float-right text-small edit-tags-enable",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.showTagManagerModal.apply(null,arguments)}}},[a("span",{staticClass:"icon icon-bookmark"}),t._v(" Manage tags")]),t._v(" "),a("span",{staticClass:"text-light-grey text-small paginate-info"},[t._v("Rows 1 - "+t._s(t.holdingsBreakdown.length)+" out of "+t._s(t.holdingsBreakdown.length))])]):t._e(),t._v(" "),!t.fetchingBreakdown&&t.holdingsBreakdown.length>0&&!t.holdingsBreakdownError?a("div",{staticClass:"holdings-breakdown-table-container table-container"},[a("table",{staticClass:"holdings-breakdown-table"},[a("thead",[a("tr",{class:{mobileBreakdown:t.isMobileFetching}},[a("td",[t._v("Date")]),t._v(" "),a("td",[t._v("Qty.")]),t._v(" "),a("td",[t._v("Price")]),t._v(" "),a("td",[t._v("Age (days)")]),t._v(" "),a("td",[t._v("P&L")])])]),t._v(" "),t._l(t.holdingsBreakdown,(function(e,i){return a("tbody",{key:i,class:{mobileBreakdown:t.isMobileFetching}},[a("tr",[a("td",{staticClass:"text-left"},[a("span",{staticClass:"date"},[t._v(t._s(t._f("dateFilter")(e["order_execution_time"],"date")))]),t._v(" "),e["external_trade_type"]?a("span",{staticClass:"trade-type"},[t._v(t._s(e["external_trade_type"]))]):t._e(),t._v(" "),t.enableBreakdownEdit||0===e.tags.length&&!e.pendingTag||"family"===t.familySwitch?t._e():a("div",{staticClass:"new-tags"},[a("div",{staticClass:"added-tags"},t._l(e.tags,(function(i,s){return 0===e.pendingTags.filter((function(t){return t.id===i.id})).length?a("span",{key:s,style:"background:"+t.getBackground(i)+";color:"+t.getColor(i)},[t._v(t._s(i.text))]):t._e()})),0),t._v(" "),e.pendingTag&&e.pendingTags.length?a("div",{staticClass:"pending-tags"},t._l(e.pendingTags,(function(e,i){return a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],key:i,style:"background:"+t.getBackground(e)+";color:"+t.getColor(e),attrs:{title:"Pending"}},[a("span",{staticClass:"icon icon-clock"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.text)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])})),0):t._e()]),t._v(" "),"family"===t.familySwitch?a("div",{staticClass:"family-comp"},[a("span",{staticClass:"family-split"},[t._v(t._s(e.client_id))])]):t._e()]),t._v(" "),a("td",[t._v(t._s(t._f("qtyFormat")(e["quantity"],3)))]),t._v(" "),a("td",[t._v(t._s(t._f("inrFormat")(e["price"],2)))]),t._v(" "),a("td",[t._v(t._s(e["days"]))]),t._v(" "),a("td",[t.breakdownLTP&&t.breakdownLTP-e["price"]>0?a("span",{staticClass:"pos"},[t._v(t._s(t._f("inrFormat")((t.breakdownLTP-e["price"])*e["quantity"],2)))]):t.breakdownLTP&&t.breakdownLTP-e["price"]<0?a("span",{staticClass:"neg"},[t._v(t._s(t._f("inrFormat")((t.breakdownLTP-e["price"])*e["quantity"],2)))]):a("span",[t._v("0")])])]),t._v(" "),a("tr",[t.enableBreakdownEdit?a("td",{staticClass:"tagger text-left",attrs:{colspan:"5"}},[t.isTagModifying?t._e():a("tagger",{ref:"tagger_b"+i,refInFor:!0,attrs:{holding:e,tags:t.consoleTags,placeholder:"Search and apply tags",isAll:!1},on:{"tag-updated":t.updateFetchedTags,creating:t.showTagCreating,changed:t.tagChanged}})],1):t._e()])])}))],2)]):t._e(),t._v(" "),!t.fetchingBreakdown&&t.holdingsBreakdown.length>0&&!t.holdingsBreakdownError&&"family"!==t.familySwitch?a("div",[t.showCreateTag||!t.enableTagEdit&&!t.enableBreakdownEdit?t._e():a("div",{staticClass:"text-right"},[a("br"),t._v(" "),a("su-button",{staticClass:"btn btn-blue",attrs:{type:"submit",disabled:t.updatingTag||!t.hasChanged,processing:t.updatingTag},nativeOn:{click:function(e){return e.preventDefault(),t.postTag.apply(null,arguments)}}},[t._v("Apply tags")])],1)]):t.fetchingBreakdown||0!==t.holdingsBreakdown.length||t.holdingsBreakdownError?!t.fetchingBreakdown&&t.holdingsBreakdownError?a("div",[a("error",{attrs:{sub:t.holdingsBreakdownErrorMsg}})],1):t._e():a("p",{staticClass:"text-light-grey"},[t._v("\n\t\t\t\t\t\t\tNo breakdown available\n\t\t\t\t\t\t")])])])])]):t._e()]),t._v(" "),a("div",{staticClass:"section"},[t.showMfComposition?a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideMfCompositionModal}},[a("div",{staticClass:"modal-container mf-compo-container",on:{click:function(e){return e.stopPropagation(),t.showMfCompositionModal.apply(null,arguments)}}},[a("div",{class:{modalbody:!0,nomargin:t.isMobileFetching}},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideMfCompositionModal.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("div",{staticClass:"row v-align"},[a("div",{class:{lessmargin:t.isMobileFetching}},[a("h2",{staticClass:"holdings-breakdown-name"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.mfCompositionName)+"\n\t\t\t\t\t\t\t\t")])])]),t._v(" "),t.isMobileFetching?t._e():a("hr",{staticClass:"modal-separator"}),t._v(" "),t.mfComposition.length>0?a("div",{staticClass:"holdings-breakdown-table-container table-container"},[a("table",{staticClass:"holdings-breakdown-table"},[a("thead",[a("tr",{class:{mobileBreakdown:t.isMobileFetching}},[a("td",[t._v("Symbol")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("Sector")]),t._v(" "),a("td",[t._v("Weightage")])])]),t._v(" "),a("tbody",{class:{mobileBreakdown:t.isMobileFetching}},t._l(t.mfComposition,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"text-left"},[a("span",[t._v(t._s(e["name"]))])]),t._v(" "),a("td",{staticClass:"text-left"},[a("span",{staticClass:"mf-weightage"},[t._v(t._s(e["sector"]))])]),t._v(" "),a("td",[t._v(t._s(t._f("round")(e["weightage"]))+"%")])])})),0)])]):a("p",{staticClass:"text-light-grey"},[a("i",{staticClass:"icon icon-info"}),t._v(" composition not available\n\t\t\t\t\t\t")])])])])]):t._e()]),t._v(" "),a("div",{staticClass:"section"},[t.showDividendModal?a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideDividend}},[a("div",{staticClass:"modal-container holdings-dividend-container",on:{click:function(e){return e.stopPropagation(),t.showDividend.apply(null,arguments)}}},[a("div",{class:{modalbody:!0,nomargin:t.isMobileFetching}},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideDividend.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("div",{staticClass:"row v-align"},[a("div",{class:{five:!0,columns:!0,lessmargin:t.isMobileFetching}},[a("h2",{staticClass:"holdings-breakdown-name"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.dividendSymbol)+"\n\t\t\t\t\t\t\t\t\t"),t.fetchingDividend?a("su-loader"):t._e()],1)]),t._v(" "),a("div",{staticClass:"seven columns"},[a("div",{staticClass:"row"},[a("div",{staticClass:"six columns"},[a("span",{staticClass:"text-light-grey holdings-modal-label"},[t._v("ISIN")]),t._v(" "),a("span",[t._v(t._s(t.dividendIsin))])])])])]),t._v(" "),t._m(8),t._v(" "),!t.fetchingDividend&&t.holdingsDividend.length>0&&!t.holdingsDividendError?a("div",{staticClass:"holdings-breakdown-table-container holdings-dividend table-container"},[a("table",{staticClass:"holdings-breakdown-table"},[a("thead",[a("tr",{class:{mobileBreakdown:t.isMobileFetching}},[a("td",[t._v("Date")]),t._v(" "),a("td",[t._v("Qty")]),t._v(" "),a("td",[t._v("Dividend / Share (DPS)")]),t._v(" "),a("td",[t._v("Total dividend")])])]),t._v(" "),a("tbody",{class:{mobileBreakdown:t.isMobileFetching}},t._l(t.holdingsDividend,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"text-left"},[a("span",{staticClass:"date"},[t._v(t._s(e["ex_date"]))])]),t._v(" "),a("td",[t._v(t._s(t._f("qtyFormat")(e["quantity"],2)))]),t._v(" "),a("td",[t._v(t._s(t._f("inrFormat")(e["dividend_per_share"],2)))]),t._v(" "),a("td",[t._v(t._s(t._f("inrFormat")(e["net_dividend_amount"],2)))])])})),0)])]):t.fetchingDividend||0!==t.holdingsDividend.length||t.holdingsDividendError?!t.fetchingDividend&&t.holdingsDividendError?a("div",[a("error",{attrs:{sub:t.holdingsDividendErrorMsg}})],1):t._e():a("p",{staticClass:"text-light-grey"},[a("span",{staticClass:"icon icon-info"}),t._v(" No dividends received\n\t\t\t\t\t\t")])])])])]):t._e()]),t._v(" "),a("div",{staticClass:"section"},[t.showCreatePledge?a("div",{staticClass:"modal-mask pledge-modal"},[a("div",{staticClass:"modal-wrapper",on:{click:function(e){return e.stopPropagation(),t.hideCreatePledgeModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showCreatePledgeModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideCreatePledgeModal.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("div",{staticClass:"row v-align"},[a("div",{staticClass:"five columns"},[a("h2",{staticClass:"holdings-breakdown-name"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.pledgeData.tradingsymbol)+"\n\t\t\t\t\t\t\t\t")])]),t._v(" "),a("div",{staticClass:"seven columns"},[a("div",{staticClass:"row"},[a("div",{staticClass:"six columns"},[a("span",{staticClass:"text-light-grey holdings-modal-label"},[t._v("Qty. available")]),t._v(" "),a("span",[t._v(t._s(t._f("qtyFormat")(t.pledgeData.quantity_available_pledge,3)))])]),t._v(" "),a("div",{staticClass:"six columns"},[a("span",{staticClass:"text-light-grey holdings-modal-label"},[t._v("ISIN")]),t._v(" "),a("span",[t._v(t._s(t.pledgeData.isin))])])])])]),a("hr"),a("br"),t._v(" "),t.fetchingHaircut?a("p",[t._v("\n\t\t\t\t\t\t\tFetching pledge data "),a("su-loader")],1):a("div",[t.pledgeData.haircut?a("div",[a("p",[a("su-checkbox",{attrs:{label:"I agree and confirm to have read and understood the <a target=_blank href=https://support.zerodha.com/category/console/portfolio/pledging/articles/pledging-terms-of-services>terms of service</a> for pledging."},model:{value:t.acceptPledgeTerms,callback:function(e){t.acceptPledgeTerms=e},expression:"acceptPledgeTerms"}})],1),t._v(" "),a("div",{staticClass:"row"},[t.pledgeData.close_price?a("div",{staticClass:"three columns"},[a("label",[t._v("Stock value")]),t._v(" "),a("p",[t._v("₹"+t._s((t.pledgeData.close_price*t.pledgeQty||t.pledgeData.close_price).toFixed(2)))])]):t._e(),t._v(" "),a("div",{staticClass:"two columns"},[a("label",[t._v("Haircut")]),t._v(" "),a("p",[t._v(t._s(t.pledgeData.haircut)+"%")])]),t._v(" "),t._m(9),t._v(" "),t.pledgeData.close_price?a("div",{staticClass:"five columns"},[a("label",[t._v("Collateral margin available")]),t._v(" "),a("p",[t._v("₹"+t._s(((t.pledgeData.close_price-t.pledgeData.close_price*t.pledgeData.haircut/100)*t.pledgeQty||t.pledgeData.close_price-t.pledgeData.close_price*t.pledgeData.haircut/100).toFixed(2))+" ")])]):t._e()]),t._v(" "),t._m(10),t._v(" "),a("su-form",[a("div",{staticClass:"row"},[a("div",{staticClass:"four columns"},[a("su-input",{attrs:{type:"number",maxlength:8,"dynamic-label":"","no-error":"",placeholder:"Qty. to be pledged",label:"Qty. to be pledged"},model:{value:t.pledgeQty,callback:function(e){t.pledgeQty=e},expression:"pledgeQty"}})],1)]),t._v(" "),a("br"),t._v(" "),a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.pledging,disabled:t.pledging||!t.acceptPledgeTerms},nativeOn:{click:function(e){return e.preventDefault(),t.createPledgeRequest(t.pledgeData,"pledge")}}},[t._v("Submit")])],1)],1):a("p",[a("span",{staticClass:"icon icon-alert-triangle"}),t._v(" This instrument cannot be pledged. "),a("a",{attrs:{href:"https://support.zerodha.com/category/console/portfolio/articles/unable-to-pledge"}},[t._v("Learn more")]),t._v(".\n\t\t\t\t\t\t\t")])])])])])]):t._e()]),t._v(" "),t.showCreateUnpledge?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask unpledge-modal"},[a("div",{staticClass:"modal-wrapper",on:{click:function(e){return e.stopPropagation(),t.hideCreateUnpledgeModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showCreateUnpledgeModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideCreateUnpledgeModal.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("div",{staticClass:"row v-align"},[a("div",{staticClass:"five columns"},[a("h2",{staticClass:"holdings-breakdown-name"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.pledgeData.tradingsymbol)+"\n\t\t\t\t\t\t\t\t")])]),t._v(" "),a("div",{staticClass:"seven columns"},[a("div",{staticClass:"row text-small"},[a("div",{staticClass:"six columns"},[a("span",{staticClass:"text-light-grey holdings-modal-label"},[t._v("Qty. pledged")]),t._v(" "),a("span",[t._v(t._s(t._f("qtyFormat")(t.pledgeData.quantity_pledged_for_margin,3)))])]),t._v(" "),a("div",{staticClass:"six columns"},[a("span",{staticClass:"text-light-grey holdings-modal-label"},[t._v("ISIN")]),t._v(" "),a("span",[t._v(t._s(t.pledgeData.isin))])])])])]),a("hr"),a("br"),t._v(" "),t.fetchingHaircut?a("p",[t._v("\n\t\t\t\t\t\t\tFetching pledge data "),a("su-loader")],1):a("div",[a("su-form",[a("div",{staticClass:"row"},[a("div",{staticClass:"five columns"},[a("su-input",{attrs:{type:"number",maxlength:8,"dynamic-label":"","no-error":"",placeholder:"Qty. to be unpledged",label:"Qty. to be unpledged"},model:{value:t.pledgeQty,callback:function(e){t.pledgeQty=e},expression:"pledgeQty"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("label",[t._v(" ")]),a("br"),t._v(" "),a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.pledging,disabled:t.pledging},nativeOn:{click:function(e){return e.preventDefault(),t.createPledgeRequest(t.pledgeData,"unpledge")}}},[t._v("Submit")])],1)])])],1)])])])])]):t._e(),t._v(" "),t.showCancelPledge?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask cancel-pledge-modal"},[a("div",{staticClass:"modal-wrapper",on:{click:function(e){return e.stopPropagation(),t.hideCancelPledgeModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showCancelPledgeModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideCancelPledgeModal.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("div",{staticClass:"text-center"},[a("p",[t._v("Cancel this request?")]),t._v(" "),a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.pledging,disabled:t.pledging},nativeOn:{click:function(e){return e.preventDefault(),t.cancelPledgeRequest(t.pledgeData)}}},[t._v("Confirm")])],1)])])])])]):t._e(),t._v(" "),t.showSmallcaseWidget?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper smallcase-wrapper",on:{click:function(e){return e.stopPropagation(),t.hideSmallcaseWidgetModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showSmallcaseWidgetModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideSmallcaseWidgetModal.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("div",{staticClass:"iframe-container"},[a("iframe",{attrs:{src:t.smallcaseSRC}})])])])])])]):t._e(),t._v(" "),a("div",{staticClass:"section"},[t.showKiteAuth?a("div",{staticClass:"modal-mask cancel-pledge-modal"},[a("div",{staticClass:"modal-wrapper"},[a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideKiteAuthModal,expression:"hideKiteAuthModal"}],staticClass:"modal-container"},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideKiteAuthModal.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("div",{staticClass:"text-right"},[t._m(11),t._v(" "),a("su-button",{staticClass:"btn-blue",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.invokeKiteAuth()}}},[t._v("Continue")])],1)])])])]):t._e()]),t._v(" "),t.showTagManager?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",on:{click:t.hideTagManagerModal}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showTagManagerModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideTagManagerModal.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("tag-manager",{attrs:{isModal:!0}})],1)])])])]):t._e()])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{href:"/account/family"}},[a("span",{staticClass:"icon icon-link"}),t._v(" Link a sub-account")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"six columns"},[a("label",{staticClass:"big-label"},[t._v("P&L")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{href:"/account/family"}},[a("span",{staticClass:"icon icon-link"}),t._v(" Link a sub-account")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",[t._v("Account")]),t._v(" "),a("td",[t._v("Buy value")]),t._v(" "),a("td",[t._v("Present value")]),t._v(" "),a("td",[t._v("P&L")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-grey"},[a("span",{staticClass:"icon icon-info"},[t._v(" No results found for your search.")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{target:"_blank",href:"https://support.zerodha.com"}},[a("img",{attrs:{src:"/static/images/alert-icon-dark.svg"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{target:"_blank",href:"https://support.zerodha.com"}},[a("img",{attrs:{src:"/static/images/alert-icon-dark.svg"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{href:"/portfolio/tags/analyse"}},[a("span",{staticClass:"icon icon-trending-up"}),t._v(" Analyse tags\n\t\t\t\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notice text-box yellow"},[a("ul",[a("li",[a("span",[t._v("\n\t\t\t\t\t\t\t\t\t\tDividends are available from FY 2018-19\n\t\t\t\t\t\t\t\t\t")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"two columns"},[a("label",[t._v("Segment")]),t._v(" "),a("p",[t._v("All")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-grey text-small"},[a("strong",[t._v("Disclaimer: ")]),t._v("For margin pledge transactions, I am aware and hereby give my consent for re-pledging of securities by the TM to CM and further by CM to CC.\n\t\t\t\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-left"},[t._v("You have to authorise this stock/MF unit at CDSL (your Demat depository) to complete the sell transaction as per new regulations. "),a("a",{attrs:{target:"_blank",href:"https://support.zerodha.com/category/trading-and-markets/trading-faqs/articles/generate-cdsl-tpin"}},[t._v("Learn more.")])])}],n=a("5698"),r=a("8508"),o=a.n(r),l=a("e7db"),c=a.n(l),d=(a("92b9"),a("c7a0")),u=a.n(d),g=a("02bc"),p=a("37bf"),h=a("2e34"),_=a("6825"),f=a("e2ac"),m=a("5dfe"),v=a("3fb9"),A=a("2f62"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"holdings-treemap"},[a("form",{attrs:{id:"treemap_view_types"}},[a("su-radio-group",{model:{value:t.treeType,callback:function(e){t.treeType=e},expression:"treeType"}},t._l(t.treeTypes,(function(e,i){return a("su-radio",{key:i,attrs:{label:e.label,value:e.val}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),a("div",{staticClass:"chart"},[a("div",{staticClass:"canvas"}),t._v(" "),"sector"!==t.treeView&&"sector"===t.treeSourceType?a("div",{staticClass:"chart-action",on:{click:function(e){return t.sectorView()}}},[a("span",{staticClass:"icon icon-arrow-left"}),t._v(" "),a("span",[t._v("Sectors")])]):t._e(),t._v(" "),a("form",{staticClass:"treemap-source"},[a("su-radio-group",{on:{change:function(e){return t.changeSource()}},model:{value:t.treeSourceType,callback:function(e){t.treeSourceType=e},expression:"treeSourceType"}},t._l(t.treeSourceTypes,(function(e,i){return a("su-radio",{key:i,attrs:{label:e.label,value:e.val}},[t._v(t._s(e.label))])})),1)],1)])])},b=[],C=(a("b108"),a("00a5")),w=a("ce24"),k=a("b6f4"),x=a("6bcb"),T=a("1231"),F=a("166a"),E={props:{data:Array,rawData:Array,hideStats:Boolean,maxItems:{type:Number,default:100}},data:function(){return{element:null,node:null,isActive:!1,treeView:"sector",treeType:"pnl",treeTypes:[{val:"currentValue",label:"Current"},{val:"investmentValue",label:"Investment"},{val:"pnl",label:"P&L"}],treeSourceType:"sector",treeSourceTypes:[{val:"sector",label:"Sectors"},{val:"stocks",label:"Instruments"}],selectedSector:""}},created:function(){this.maxItems=this.maxItems||100},mounted:function(){var t=this;this.element=Object(C["a"])(this.$el.querySelector("div.chart .canvas")),this.draw(this.element,this.sectorFormattedData,this.hideStats,this.treeType),this.$nextTick((function(){t.treeType="pnl"}))},beforeDestroy:function(){this.postProcess()},activated:function(){this.preProcess()},deactivated:function(){this.postProcess()},computed:{formattedData:function(){return this.formatRawData(this.rawData,!1)},sectorFormattedData:function(){return this.formatRawData(this.rawData,!0)}},watch:{treeType:function(t){this.redraw()},treeSourceType:function(t){this.redraw()},rawData:function(t){}},methods:{changeSource:function(){this.$emit("change-source",this.treeSourceType)},sectorView:function(){this.treeView="sector",this.redraw(),this.$emit("reset-filters",this.treeView)},postProcess:function(){this.isActive=!1},isElementInView:function(t){return document.querySelector("#"+t+"-treemap div.chart .canvas")},handleResize:function(){this.isActive&&this.redraw()},redraw:function(){if("sector"===this.treeSourceType)if("sector"===this.treeView)this.draw(this.element,this.sectorFormattedData,this.hideStats,this.treeType,!1,!0);else{var t=this.formattedData.children,e=this.selectedSector,a=function(t,e){return t.filter((function(t){return t.sector===e}))};this.draw(this.element,this.formatRawData(a(t,e),!1,!0),this.hideStats,this.treeType,!1,!0)}else this.draw(this.element,this.formatRawData(this.formattedData.children,!1,!0),this.hideStats,this.treeType,!1,!0)},formatRawData:function(t,e,a){var i=t;if(i){for(var s=[],n={},r=[],o="",l=0,c=0,d=0,u=0;u<i.length;u++){var g=i[u].qty_total;a?(s.push({name:i[u].name,quantity:i[u].quantity,investmentValue:i[u].investmentValue,currentValue:i[u].currentValue,pnl:i[u].pnl,sector:i[u].sector,weight:i[u].weight}),l+=i[u].pnl,d+=i[u].investmentValue,c+=i[u].currentValue):i[u].buy_average>0&&i[u].close_price>0&&0===i[u].quantity_discrepant&&(i[u].isin_breakdown||(n.hasOwnProperty(i[u].sector)?(n[i[u].sector][0]+=parseFloat(i[u].holdings_buy_value),n[i[u].sector][1]+=parseFloat(i[u].holdings_buy_value),n[i[u].sector][2]+=parseFloat(i[u].unrealized_profit),n[i[u].sector][3]+=isNaN(parseFloat(i[u].weight))?0:parseFloat(i[u].weight)):(n[i[u].sector]=[],n[i[u].sector][0]=parseFloat(i[u].holdings_buy_value),n[i[u].sector][1]=parseFloat(i[u].closing_value),n[i[u].sector][2]=parseFloat(i[u].unrealized_profit),n[i[u].sector][3]=isNaN(parseFloat(i[u].weight))?0:parseFloat(i[u].weight))),s.push({name:i[u].tradingsymbol,quantity:g,investmentValue:i[u].holdings_buy_value,currentValue:i[u].closing_value,pnl:i[u].unrealized_profit,sector:i[u].sector,weight:i[u].weight}),l+=i[u].unrealized_profit,d+=i[u].holdings_buy_value,c+=i[u].closing_value)}for(var p in n)r.push({name:p,investmentValue:n[p][0],currentValue:n[p][1],pnl:n[p][2],weight:n[p][3]});var h="desc",_="investmentValue";s.sort((function(t,e){var a=t[_],i=e[_];if("asc"===h){if(a<i)return-1;if(a>i)return 1}else{if(a>i)return-1;if(a<i)return 1}return 0})),r.sort((function(t,e){var a=t[_],i=e[_];if("asc"===h){if(a<i)return-1;if(a>i)return 1}else{if(a>i)return-1;if(a<i)return 1}return 0}));var f=JSON.parse(JSON.stringify(r));return f.sort((function(t,e){var a=t["pnl"],i=e["pnl"];return a>i?-1:a<i?1:0})),o=f[0],s=s.slice(0,this.maxItems),r=r.slice(0,this.maxItems),this.$emit("sectorData",{data1:r,data2:o}),e?{name:"holdings",totalPnl:l,totalInvestment:d,totalValue:c,children:r}:{name:"holdings",totalPnl:l,totalInvestment:d,totalValue:c,children:s}}},draw:function(t,e,a,i,s,n){if(t&&t.node()){n&&(t.html(""),this.node=null),e.children=e.children.sort((function(t,e){return Math.abs(t[i])<Math.abs(e[i])}));var r=e,o={top:0,right:0,bottom:20,left:0},l=50,c=t.node().getBoundingClientRect().width,d=c-o.left-o.right,u=Object(T["a"])(".2f"),g=Object(F["b"])(39,174,96),p=Object(F["b"])(237,42,68),h=["#496fdb","#03a9f4","#b0269b","#673ab7","#3f51b5","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#f0df4b","#ffc107","#ff9800","#ff7473","#2196f3","#42aac4","#1e8ca8"];"breakdown"===this.treeView&&(h=h.reverse());var _=function(t){return p.brighter(Math.random(1))},f=function(t){return g.brighter(Math.random(1))},m=Object(w["b"])().range(h),v=this;if(s&&this.node){var A=Object(k["a"])().size([d,l]),y=Object(x["a"])(r).sum((function(t){return Math.abs(Math.round(Math.round(100*t[i]))/100)}));this.node.data(A(y).leaves()).attr("data-balloon-length","small").attr("data-balloon-pos",(function(t){return t.x1<100?"right":t.x1>d-100?"left":"up"})).style("cursor",(function(t){if("sector"===v.treeView&&"sector"===v.treeSourceType)return"pointer"})).attr("data-balloon",(function(t){return t.data.name+"\n Value: ₹"+u(t.data[i],2)+"\n Weight: "+u(t.data["weight"])+"%"})).text((function(t){if(t.x1-t.x0>45&&t.y1-t.y0>20){if("sector"===v.treeView&&"sector"===v.treeSourceType)return t.data.name;var e=10;return t.data.name.length>e?t.data.name.substring(0,e)+"..":t.data.name}})).on("click",(function(t){if("breakdown"!==v.treeView&&"sector"===v.treeSourceType){v.selectedSector=t.data.name;var e=t.data.name;if("Others"!==e){var a=v.formattedData.children,i=function(t,e){return t.filter((function(t){return t.sector===e}))};v.treeView="breakdown",v.draw(v.element,v.formatRawData(i(a,e),!1,!0),v.hideStats,v.treeType,!0,!0),v.$emit("update-filters",t.data.name)}}})).style("background",(function(t){return"pnl"===i?t.data.pnl>0?f(t.data.pnl):_(t.data.pnl):m(t.data.name)})).transition().duration(500).style("left",(function(t){return t.x0+"px"})).style("top",(function(t){return t.y0+"px"})).style("width",(function(t){return Math.max(0,t.x1-t.x0)+"px"})).style("height",(function(t){return Math.max(0,t.y1-t.y0)+"px"}))}else{var b=t.append("div").attr("class","treemap").style("position","relative").style("width",d+"px").style("height",l+"px").style("left",o.left+"px").style("top",o.top+"px"),C=Object(k["a"])().size([d,l]),E=Object(x["a"])(r).sum((function(t){return Math.abs(Math.round(100*Math.round(t[i])))/100}));this.node=b.datum(E).selectAll(".node").data(C(E).leaves()).enter().append("div").attr("class","node").style("cursor",(function(t){if("sector"===v.treeView&&"sector"===v.treeSourceType)return"pointer"})).style("left",(function(t){return t.x0+"px"})).style("top",(function(t){return t.y0+"px"})).style("width",(function(t){return Math.max(0,t.x1-t.x0)+"px"})).style("height",(function(t){return Math.max(0,t.y1-t.y0)+"px"})).style("background",(function(t){return"pnl"===i?t.data.pnl>0?f(t.data.pnl):_(t.data.pnl):m(t.data.name)})).text((function(t){if(t.x1-t.x0>45&&t.y1-t.y0>20){if("sector"===v.treeView&&"sector"===v.treeSourceType)return t.data.name;var e=10;return t.data.name.length>e?t.data.name.substring(0,e)+"..":t.data.name}})).on("click",(function(t){if("breakdown"!==v.treeView&&"sector"===v.treeSourceType){v.selectedSector=t.data.name;var e=t.data.name,a=v.formattedData.children;if("Others"!==e){var i=function(t,e){return t.filter((function(t){return t.sector===e}))};v.treeView="breakdown",v.draw(v.element,v.formatRawData(i(a,e),!1,!0),v.hideStats,v.treeType,!0,!0),v.$emit("update-filters",t.data.name)}}})).attr("data-balloon-length","small").attr("data-balloon-pos",(function(t){return t.x1<100?"right":t.x1>d-100&&t.x0>200?"left":"up"})).attr("data-balloon",(function(t){return t.data.name+"\n Value: ₹"+u(t.data[i],2)+"\n Weight: "+u(t.data["weight"])+"%"})).transition().duration(500).style("left",(function(t){return t.x0+"px"})).style("top",(function(t){return t.y0+"px"})).style("width",(function(t){return Math.max(0,t.x1-t.x0)+"px"})).style("height",(function(t){return Math.max(0,t.y1-t.y0)+"px"}))}}}}},D=E,S=a("2877"),B=Object(S["a"])(D,y,b,!1,null,null,null),M=B.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"donut-container"},[a("su-form",{staticClass:"donut-switch text-right",attrs:{id:"treemap_view_types"}},[a("su-radio-group",{model:{value:t.valueType,callback:function(e){t.valueType=e},expression:"valueType"}},t._l(t.valueTypes,(function(e,i){return a("su-radio",{key:i,attrs:{label:e.label,value:e.val}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),a("div",{staticClass:"donut-chart-container"},[a("div",{staticClass:"chart-columns"},[a("div",{staticClass:"donut-chart",attrs:{id:"account_chart"}}),t._v(" "),t.loaded?a("div",{staticClass:"labels acLabels",on:{mouseout:t.removeHighlight}},t._l(t.accountLabels,(function(e,i){return t.accountWeights[i]>0?a("span",{key:i,class:"label acLabel"+i,on:{mouseover:function(a){return t.hoverLabel("Account",e,i)},mouseout:function(e){return t.hoverLabel("Account",-1,i)},click:function(e){return t.chartClicked(i,"Account")}}},["Gold"!==e?a("span",{staticClass:"label-dot",style:"background:"+(t.accountLabels[i-1]&&"Gold"===t.accountLabels[i-1]?t.accountColors[i-1]:t.accountColors[i])}):t._e(),t._v(" "),"Gold"!==e?a("span",{staticClass:"label-name"},[t._v(t._s(t._f("clip")(e)))]):t._e(),t._v(" "),"Gold"!==e?a("span",{staticClass:"label-weight"},[t._v(t._s(t.accountWeights[i])+"%")]):t._e(),t._v(" "),"Gold"===e?a("span",{staticClass:"label-dot",style:"background:rgb(255, 181, 13)"}):t._e(),t._v(" "),"Gold"===e?a("span",{staticClass:"label-name"},[t._v(t._s(t._f("clip")(e)))]):t._e(),t._v(" "),"Gold"===e?a("span",{staticClass:"label-weight"},[t._v(t._s(t.accountWeights[i])+"%")]):t._e()]):t._e()})),0):t._e()]),t._v(" "),a("div",{staticClass:"chart-columns"},[a("div",{staticClass:"donut-chart",attrs:{id:"sector_chart"}}),t._v(" "),t.loaded?a("div",{staticClass:"labels scLabels",on:{mouseout:t.removeHighlight}},t._l(t.sectorLabels,(function(e,i){return a("span",{key:i,class:"label scLabel"+i,on:{mouseover:function(a){return t.hoverLabel("Sectors",e,i)},mouseout:function(e){return t.hoverLabel("Sectors",-1,i)},click:function(e){return t.chartClicked(i,"Sectors")}}},[a("span",{staticClass:"label-dot",style:"background:"+t.colors[i]}),t._v(" "),a("span",{staticClass:"label-name"},[t._v(t._s(t._f("clip")(t._f("capitalize")(e))))]),t._v(" "),a("span",{staticClass:"label-weight"},[t._v(t._s(t.sectorWeights[i]))])])})),0):t._e()]),t._v(" "),a("div",{staticClass:"chart-columns"},[a("div",{staticClass:"donut-chart",attrs:{id:"stock_chart"}}),t._v(" "),t.loaded?a("div",{staticClass:"labels stLabels",attrs:{id:"stock_labels"},on:{mouseout:t.removeHighlight}},[t._l(t.capLabels,(function(e,i){return e?a("span",{key:i+"cap",class:"label stLabel"+i,on:{mouseover:function(a){return t.hoverStock("Stocks",e,i)},mouseout:function(a){return t.hoverStock("Stocks",-1,i,e)}}},[a("span",{staticClass:"label-dot",style:"background:"+t.sunburstColors[i]}),t._v(" "),a("span",{staticClass:"label-name",attrs:{val:e},domProps:{innerHTML:t._s(t.getCap(e))}}),t._v(" "),a("span",{staticClass:"label-weight"},[t._v(t._s(t.capWeights[i]))])]):t._e()})),t._v(" "),t.otherStockValues.length?a("span",{staticClass:"label stLabel4"},[a("span",{staticClass:"label-dot",style:"background:"+t.sunburstColors[4]}),t._v(" "),a("span",{staticClass:"label-name"},[t._v("Others")]),t._v(" "),a("span",{staticClass:"label-weight"},[t._v(t._s(t.otherStockWeight))])]):t._e(),t._v(" "),a("hr"),t._v(" "),t._l(t.stockLabels,(function(e,i){return a("div",{key:i+"stock_L",on:{mouseover:function(a){return t.hoverStock("Stocks",e,i)},mouseout:function(a){return t.hoverStock("Stocks",-1,i,e)}}},[t.stockData.hasOwnProperty(e)&&"L"===t.stockData[e].cap?a("div",{class:"label stLabel"+i},[a("span",{staticClass:"label-dot",style:"background:"+t.colors[i]}),t._v(" "),a("span",{staticClass:"label-name",attrs:{val:e}},[t._v(t._s(t._f("clip")(e))),"ICICIGI"===e?a("span",[t._v(t._s(i))]):t._e()]),t._v(" "),a("span",{staticClass:"label-weight"},[t._v(t._s(t.stockWeights[i]))])]):t._e()])})),t._v(" "),t._l(t.stockLabels,(function(e,i){return a("div",{key:i+"stock_M",on:{mouseover:function(a){return t.hoverStock("Stocks",e,i)},mouseout:function(a){return t.hoverStock("Stocks",-1,i,e)}}},[t.stockData.hasOwnProperty(e)&&"M"===t.stockData[e].cap?a("div",{class:"label stLabel"+i},[a("span",{staticClass:"label-dot",style:"background:"+t.colors[i]}),t._v(" "),a("span",{staticClass:"label-name",attrs:{val:e}},[t._v(t._s(t._f("clip")(e)))]),t._v(" "),a("span",{staticClass:"label-weight"},[t._v(t._s(t.stockWeights[i]))])]):t._e()])})),t._v(" "),t._l(t.stockLabels,(function(e,i){return a("div",{key:i+"stock_S",on:{mouseover:function(a){return t.hoverStock("Stocks",e,i)},mouseout:function(a){return t.hoverStock("Stocks",-1,i,e)}}},[t.stockData.hasOwnProperty(e)&&"S"===t.stockData[e].cap?a("div",{class:"label stLabel"+i},[a("span",{staticClass:"label-dot",style:"background:"+t.colors[i]}),t._v(" "),a("span",{staticClass:"label-name",attrs:{val:e}},[t._v(t._s(t._f("clip")(e)))]),t._v(" "),a("span",{staticClass:"label-weight"},[t._v(t._s(t.stockWeights[i]))])]):t._e()])}))],2):t._e()])])],1)},O=[],I={props:{data:Array,rawData:Array,unfilteredHoldings:Array,filters:Array,hideStats:Boolean,maxItems:{type:Number,default:100},isMobileView:{type:Boolean,default:!1}},data:function(){return{accountChart:{},sectorChart:{},stockChart:{},accountValues:[],accountLabels:["Equity","Equity Debt","Mutual Funds","Mutual Funds Debt","Gold"],accountWeights:[],sectorValues:[],sectorLabels:[],sectorWeights:[],stockValues:[],stockLabels:[],stockWeights:[],capValues:[],capLabels:[],capWeights:[],accountData:{EQ:{invested:0,current:0,investedEQ:0,currentEQ:0},EQD:{invested:0,current:0,investedEQ:0,currentEQ:0},MF:{invested:0,current:0,investedEQ:0,currentEQ:0},MFD:{invested:0,current:0,investedEQ:0,currentEQ:0},GOLD:{invested:0,current:0,investedEQ:0,currentEQ:0}},sectorData:{},stockData:{},loaded:!0,totalAccount:{invested:0,current:0,investedEQ:0,currentEQ:0},totalSector:{invested:0,current:0,investedEQ:0,currentEQ:0},totalStock:{invested:0,current:0,investedEQ:0,currentEQ:0},selectedSection:{type:"",text:"",value:""},valueType:"current",valueTypes:[{val:"current",label:"Current"},{val:"invested",label:"Invested"}],highlightedLabel:"",currentSelected:"",currentHover:"",curentLabel:"",otherStockValues:[],otherStockWeight:0}},mounted:function(){this.formatData(this.rawData),this.prepareData(!0)},watch:{valueType:function(t){this.prepareData(!1)},rawData:function(t){this.formatData(t),this.prepareData()}},computed:{maxArcs:function(){return 40},colors:function(){return["rgb(0, 89, 193)","rgb(104, 142, 217)","rgb(155, 179, 229)","rgb(0, 123, 182)","rgb(0, 143, 122)","rgb(65, 172, 156)","rgb(127, 199, 188)","rgb(170, 149, 219)","rgb(115, 79, 195)","rgb(167, 97, 198)","rgb(194, 112, 200)","rgb(253, 154, 192)","rgb(255, 206, 197)","rgb(255, 242, 222)","rgb(255, 225, 158)","rgb(255, 211, 110)","rgb(255, 196, 61)","rgb(255, 181, 13)","rgb(0, 143, 122)","rgb(65, 172, 156)","rgb(127, 199, 188)","rgb(170, 149, 219)","rgb(115, 79, 195)","rgb(167, 97, 198)","rgb(194, 112, 200)","rgb(253, 154, 192)","rgb(255, 206, 197)","rgb(255, 242, 222)","rgb(255, 225, 158)","rgb(255, 211, 110)","rgb(255, 196, 61)","rgb(255, 181, 13)","rgb(0, 89, 193)","rgb(104, 142, 217)","rgb(155, 179, 229)","rgb(0, 123, 182)","rgb(0, 143, 122)","rgb(65, 172, 156)","rgb(127, 199, 188)","rgb(170, 149, 219)","rgb(115, 79, 195)","rgb(167, 97, 198)","rgb(194, 112, 200)","rgb(253, 154, 192)","rgb(255, 206, 197)","rgb(255, 242, 222)","rgb(255, 225, 158)","rgb(255, 211, 110)"]},accountColors:function(){return["rgb(0, 89, 193)","rgb(104, 142, 217)","rgb(194, 112, 200)","rgb(253, 154, 192)","rgb(65, 172, 156)"]},sunburstColors:function(){return["rgb(68, 68, 90)","rgb(115, 115, 123)","rgb(155, 155, 160)","rgb(255, 181, 13)","rgb(197, 197, 201)"]}},methods:{getAncestors:function(t){var e=[],a=t;while(a.parent)e.unshift(a),a=a.parent;return e},throwSunburst:function(t){var e=200,a=200;this.isMobileView&&(e=46*window.innerWidth/100,a=180);var i=this.sunburstColors,s=(n["w"]("#stock_chart"),Math.min(e,a)/2-10),r=this,o=n["s"]().range([0,2*Math.PI]),l=n["u"]().range([0,s]),c=n["t"](i),d=(n["t"](this.colors),n["q"]()),u=(n["j"](",d"),n["a"]().startAngle((function(t){return Math.max(0,Math.min(2*Math.PI,o(t.x0)))})).endAngle((function(t){return Math.max(0,Math.min(2*Math.PI,o(t.x1)))})).innerRadius((function(t){return Math.max(0,l(t.y0))-7})).outerRadius((function(t){return Math.max(0,l(t.y1))+8}))),g=n["a"]().startAngle((function(t){return Math.max(0,Math.min(2*Math.PI,o(t.x0)))})).endAngle((function(t){return Math.max(0,Math.min(2*Math.PI,o(t.x1)))})).innerRadius((function(t){return Math.max(0,l(t.y0))-7})).outerRadius((function(t){return Math.max(0,l(t.y1))})),p=n["a"]().startAngle((function(t){return Math.max(0,Math.min(2*Math.PI,o(t.x0)))})).endAngle((function(t){return Math.max(0,Math.min(2*Math.PI,o(t.x1)))})).innerRadius((function(t){return Math.max(0,l(t.y0))})).outerRadius((function(t){return Math.max(0,l(t.y1))-6})),h=n["w"]("#stock_chart").append("svg").attr("width",e).attr("height",a).attr("id","#stock_chart_donut").append("g").attr("transform","translate("+e/2+","+a/2+")");t=n["l"](t),t.sum((function(t){return"root"===t.name?void 0:t.value})),h.selectAll("path").data(d(t).descendants()).enter().append("g").each((function(t,e){var a=n["w"](this);0===e&&a.append("text").text("Stocks").attr("class","data-text data-text__section").attr("id","#stock_chart_section").attr("text-anchor","middle").attr("dy","1rem"),a.append("text").text("".concat(parseFloat(t.value).toFixed(2))).attr("class","data-text data-text__value").attr("text-anchor","middle").attr("dy","1rem");var i=t.data.name;if(i.length>18){var s=i.substring(0,18);i=s+".."}1===t.depth&&(i=r.getCap(i)),a.append("text").text(i).attr("class","data-text data-text__name").attr("text-anchor","middle").attr("dy","1rem");n["w"](this).select(".data-text__section").classed("data-text--show",!0)})).attr("class","data-group").append("path").attr("id",(function(t){return t.data.name.replace(/ /g,"")})).attr("class","stock-data-path").each((function(t,e){1===t.depth?n["w"](this).attr("d",p):2===t.depth&&n["w"](this).attr("d",g)})).style("fill",(function(t,e){return 1===t.depth?c(t.data.name):2===t.depth?r.colors[e-5]:void 0})).on("mouseleave",(function(t){r.mouseLeave(t,g,u,h,this)})).on("mouseover",(function(t){r.highlightLabel("stLabel",t.data.name,!0),r.mouseOver(t,g,u,h,this)})),n["w"]("#stock_chart").on("mouseout",(function(){h.selectAll("path").style("opacity",1)})),n["w"]("#stock_labels").on("mouseout",(function(){h.selectAll("path").style("opacity",1)}))},mouseLeave:function(t,e,a,i,s){var r=this,o=r.getAncestors(t);i.selectAll("path").filter((function(t){return o.indexOf(t)>=0})).style("opacity",1),2===t.depth?n["w"](s).transition().duration(150).attr("d",e):1===t.depth&&function(){for(var a=t.children,s=0;s<a.length;s++)i.selectAll("path").filter((function(t){return a.indexOf(t)>=0})).style("opacity",1).transition().duration(150).attr("d",e)}();for(var l=document.getElementById("#stock_chart_donut").querySelectorAll(".data-text"),c=0;c<l.length;c++)l[c].classList.remove("data-text--show");document.getElementById("#stock_chart_section").classList.add("data-text--show"),i.selectAll("path").style("opacity",1)},mouseOver:function(t,e,a,i,s){var r=this;i.selectAll("path").style("opacity",.3);var o=r.getAncestors(t);i.selectAll("path").filter((function(t){return o.indexOf(t)>=0})).style("opacity",1),2===t.depth?n["w"](s).transition().duration(150).attr("d",a):1===t.depth&&function(){for(var e=t.children,s=0;s<e.length;s++)i.selectAll("path").filter((function(t){return e.indexOf(t)>=0})).style("opacity",1).transition().duration(150).attr("d",a)}();for(var l=document.getElementById("#stock_chart_donut").querySelectorAll(".data-text"),c=0;c<l.length;c++)l[c].classList.remove("data-text--show");n["w"](s.parentNode).select(".data-text__value").classed("data-text--show",!0),n["w"](s.parentNode).select(".data-text__name").classed("data-text--show",!0)},bakeDonut:function(t,e,a){var i,s=this,r="",o="",l="";"Account"===a?(r="acLabel",l="#account_chart"):"Sectors"===a?(r="scLabel",l="#sector_chart",o="sc"):"Stocks"===a&&(r="stLabel",l="#stock_chart");var c=t,d=200,u=200,g=u,p=u,h=34,_=e,f=n["w"](l),m=Math.min(g,p)/2,v=n["t"]().range(_),A=(n["n"](c,(function(t){return t.value})),f.append("svg").attr("viewBox","0 0 ".concat(d+h," ").concat(u+h)).attr("class","pie").attr("width",d).attr("height",p).attr("id",l+"_donut")),y=A.append("g").attr("transform","translate( ".concat(g/2+h/2,", ").concat(p/2+h/2,")")),b=n["a"]().innerRadius(m-h).outerRadius(m),C=n["a"]().innerRadius(m-h).outerRadius(m+8),w=n["r"]().value((function(t){return t.value})).sort(null);y.selectAll("path").attr("class","data-path").data(w(c)).enter().append("g").attr("class","data-group").each((function(t,e){var i=n["w"](this);0===e&&i.append("text").text(a).attr("class","data-text data-text__section").attr("id",l+"_section").attr("text-anchor","middle").attr("dy","1rem"),i.append("text").text("".concat(t.data.value)).attr("class","data-text data-text__value").attr("text-anchor","middle").attr("dy","1rem");var s=t.data.name;if(s.length>18){var r=s.substring(0,18);s=r+".."}i.append("text").text(s).attr("class","data-text data-text__name").attr("text-anchor","middle").attr("dy","1rem");n["w"](this).select(".data-text__section").classed("data-text--show",!0)})).append("path").attr("d",b).attr("fill",(function(t,e){return"Gold"===t.data.name?"rgb(255, 181, 13)":v(t.data.name)})).attr("class","data-path").attr("id",(function(t){return"Account"===a?s.reverseAccountMap(t.data.name).replace(/ /g,""):o+t.data.name.replace(/ /g,"")})).on("mouseover",(function(t){s.highlightLabel(r,t.index);var e=this;e.parentNode;if(e!==i){i=e;n["x"](".data-path").transition().duration(150).attr("d",b);n["w"](e).transition().duration(150).attr("d",C);for(var a=document.getElementById(l+"_donut").querySelectorAll(".data-text"),o=0;o<a.length;o++)a[o].classList.remove("data-text--show");n["w"](this.parentNode).select(".data-text__value").classed("data-text--show",!0),n["w"](this.parentNode).select(".data-text__name").classed("data-text--show",!0)}})).on("mouseout",(function(){for(var t=document.getElementsByClassName("label"),e=0;e<t.length;e++)t[e].classList.remove("active");i="";n["x"](".data-path").transition().duration(150).attr("d",b);for(var a=document.getElementById(l+"_donut").querySelectorAll(".data-text"),s=0;s<a.length;s++)a[s].classList.remove("data-text--show");document.getElementById(l+"_section").classList.add("data-text--show")})).on("click",(function(t){s.chartClicked(t.index,a)}))},hoverStock:function(t,e,a,i){var s=new Event("mouseover"),n=new Event("mouseleave");-1===e?document.getElementById(i).dispatchEvent(n):document.getElementById(e).dispatchEvent(s)},hoverLabel:function(t,e,a,i){var s="",r="",o="";"Account"===t?(s="acLabel",r="#account_chart"):"Sectors"===t&&(s="scLabel",r="#sector_chart",o="sc");var l=200,c=200,d=34,u=Math.min(l,c)/2,g=n["a"]().innerRadius(u-d).outerRadius(u),p=n["a"]().innerRadius(u-d).outerRadius(u+8);n["x"](".data-path").transition().duration(150).attr("d",g);if(-1!==e){var h="#"+o+e.replace(/ /g,"");"Account"===t&&(h="#"+this.reverseAccountMap(e).replace(/ /g,"")),n["w"](h).transition().duration(150).attr("d",p);for(var _=document.getElementById(r+"_donut").querySelectorAll(".data-text"),f=0;f<_.length;f++)_[f].classList.remove("data-text--show");n["w"](h).each((function(){n["w"](this.parentNode).select(".data-text__value").classed("data-text--show",!0),n["w"](this.parentNode).select(".data-text__name").classed("data-text--show",!0)}))}else{for(var m=document.getElementById(r+"_donut").querySelectorAll(".data-text"),v=0;v<m.length;v++)m[v].classList.remove("data-text--show");document.getElementById(r+"_section").classList.add("data-text--show")}this.highlightLabel(s,a)},highlightLabel:function(t,e,a){this.removeHighlight();var i=document.getElementsByClassName(t+"s"),s="";if(a){i=i[0].querySelectorAll(".label");for(var n=0;n<i.length;n++)i[n].querySelector(".label-name")&&i[n].querySelector(".label-name").getAttribute("val")===e&&(s=i[n])}else s=i[0].getElementsByClassName(t+e)[0];s.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}),s.classList.add("active"),this.highlightedLabel=s},removeHighlight:function(){""!==this.highlightedLabel&&this.highlightedLabel.classList.remove("active")},sortData:function(t,e){return Object.keys(t).sort((function(a,i){return t[i][e]-t[a][e]}))},prepareData:function(t,e,a){var i=this,s="";s=-1!==this.valueType.indexOf("current")?"current":"invested";var n={},r={},o=[];this.sectorValues=[],this.sectorLabels=[],this.sectorWeights=[],this.stockValues=[],this.stockLabels=[],this.stockWeights=[],this.accountValues=[],this.accountLabels=[],this.accountWeights=[],o=this.sortData(this.accountData,s);for(var l=0;l<o.length;l++)this.accountValues.push(parseFloat(this.accountData[o[l]][s]).toFixed(2)),this.accountLabels.push(this.accountMap(o[l]));n=this.sectorData,o=this.sortData(n,s);for(var c=0;c<o.length;c++)c<this.maxArcs&&(this.sectorValues.push(parseFloat(n[o[c]][s]).toFixed(2)),this.sectorLabels.push(o[c]));r=this.stockData,o=this.sortData(r,s);var d=[];this.otherStockValues=[];var u=["L","M","S","G"];for(var g in u)for(var p=0;p<o.length;p++)p<this.maxArcs&&""!==r[o[p]]["cap"]?r[o[p]]["cap"]===u[g]&&(this.stockValues.push(parseFloat(r[o[p]][s]).toFixed(2)),this.stockLabels.push(o[p]),d.push(r[o[p]]["cap"])):0===g&&this.otherStockValues.push(parseFloat(r[o[p]][s]).toFixed(2));for(var h=[],_=0;_<this.accountValues.length;_++)h.push({name:this.accountLabels[_],value:this.accountValues[_]});document.getElementById("account_chart").innerHTML="",this.bakeDonut(h,this.accountColors,"Account");for(var f=[],m=0;m<this.sectorValues.length;m++)f.push({name:this.sectorLabels[m],value:this.sectorValues[m]});document.getElementById("sector_chart").innerHTML="",this.bakeDonut(f,this.colors,"Sectors");var v=[];this.capValues=[],this.capLabels=[];for(var A=0;A<this.stockValues.length;A++)v.push({name:this.stockLabels[A],value:this.stockValues[A],cap:d[A]}),-1!==this.capLabels.indexOf(d[A])?this.capValues[this.capLabels.indexOf(d[A])]+=parseFloat(parseFloat(this.stockValues[A]).toFixed(2)):(this.capLabels.push(d[A]),this.capValues.push(parseFloat(parseFloat(this.stockValues[A]).toFixed(2))));var y=[],b=[];-1!==this.capLabels.indexOf("L")?(y[0]="L",b[0]=this.capValues[this.capLabels.indexOf("L")],-1!==this.capLabels.indexOf("M")&&(y[1]="M",b[1]=this.capValues[this.capLabels.indexOf("M")]),-1!==this.capLabels.indexOf("S")&&(y[2]="S",b[2]=this.capValues[this.capLabels.indexOf("S")]),-1!==this.capLabels.indexOf("G")&&(y[3]="G",b[3]=this.capValues[this.capLabels.indexOf("G")])):-1!==this.capLabels.indexOf("M")?(y[0]="M",b[0]=this.capValues[this.capLabels.indexOf("M")],-1!==this.capLabels.indexOf("S")&&(y[1]="S",b[1]=this.capValues[this.capLabels.indexOf("S")]),-1!==this.capLabels.indexOf("G")&&(y[2]="G",b[2]=this.capValues[this.capLabels.indexOf("G")])):-1!==this.capLabels.indexOf("G")&&(y[0]="G",b[0]=this.capValues[this.capLabels.indexOf("G")]),this.capLabels=y,this.capValues=b;for(var C={name:"root",children:[{name:"L",children:[]},{name:"M",children:[]},{name:"S",children:[]},{name:"G",children:[]}]},w=0;w<v.length;w++)for(var k=0;k<C["children"].length;k++)v[w]["cap"]&&C["children"][k]["name"].toUpperCase()===v[w]["cap"].toUpperCase()&&C["children"][k]["children"].push(v[w]);document.getElementById("stock_chart").innerHTML="",this.throwSunburst(C),this.loaded=!1,this.$nextTick((function(){i.totalSector[s]=i.computeTotal(n,s),i.totalStock[s]=i.computeTotal(r,s),i.totalAccount[s]=i.computeTotal(i.accountData,s);for(var t=0;t<i.accountValues.length;t++)i.accountWeights[t]=parseFloat(100*parseFloat(i.accountValues[t])/parseFloat(i.totalAccount[s])).toFixed(2);for(var e=0;e<i.sectorValues.length;e++)i.sectorWeights[e]=parseFloat(100*parseFloat(i.sectorValues[e])/parseFloat(i.totalSector[s])).toFixed(2)+"%";for(var a=0;a<i.stockValues.length;a++)i.stockWeights[a]=parseFloat(100*parseFloat(i.stockValues[a])/parseFloat(i.totalStock[s])).toFixed(2)+"%";for(var o=0;o<i.capValues.length;o++)i.capWeights[o]=parseFloat(100*parseFloat(i.capValues[o])/parseFloat(i.totalStock[s])).toFixed(2)+"%";var l=0;for(var c in i.otherStockValues)l+=parseFloat(i.otherStockValues[c]);i.otherStockWeight=parseFloat(100*parseFloat(l)/parseFloat(i.totalStock[s])).toFixed(2)+"%",i.defaultRadius=i.accountChart.outerRadius,i.loaded=!0}))},chartClicked:function(t,e){if("Account"===e)this.selectedSection={type:"instrument_type",classes:"type-tag",value:this.reverseAccountMap(this.accountLabels[t]),text:this.accountLabels[t]};else if("Sectors"===e)this.selectedSection={type:"sector",classes:"sector-tag",value:this.sectorLabels[t],text:this.sectorLabels[t]};else if("Stocks"===e){var a=this.stockData[this.stockLabels[t]];this.selectedSection={type:"stock",classes:"stock-tag",value:this.stockLabels[t],text:this.stockLabels[t],sector:a}}this.$emit("filter-data",this.selectedSection,!0)},computeTotal:function(t,e,a){var i=0,s=0;for(var n in t)a?s<a&&(i+=t[n][e],s++):i+=t[n][e];return i},formatData:function(t){this.accountData={EQ:{invested:0,current:0,investedEQ:0,currentEQ:0},EQD:{invested:0,current:0,investedEQ:0,currentEQ:0},MF:{invested:0,current:0,investedEQ:0,currentEQ:0},MFD:{invested:0,current:0,investedEQ:0,currentEQ:0},GOLD:{invested:0,current:0,investedEQ:0,currentEQ:0}};var e=t;this.sectorData={},this.stockData={};for(var a=0;a<e.length;a++)if(null===e[a]["holdings_buy_value"]&&(e[a]["holdings_buy_value"]=0),null===e[a]["closing_value"]&&(e[a]["closing_value"]=e[a]["holdings_buy_value"]),-1!==e[a]["instrument_type"].indexOf("EQ")||"GOLD"===e[a]["instrument_type"])this.accountData[e[a]["instrument_type"]]["invested"]+=e[a]["holdings_buy_value"],this.accountData[e[a]["instrument_type"]]["current"]+=e[a]["closing_value"],this.accountData[e[a]["instrument_type"]]["investedEQ"]+=e[a]["holdings_buy_value"],this.accountData[e[a]["instrument_type"]]["currentEQ"]+=e[a]["closing_value"],e[a]["sector"]&&(this.sectorData.hasOwnProperty(e[a]["sector"])?(this.sectorData[e[a]["sector"]]["invested"]+=e[a]["holdings_buy_value"],this.sectorData[e[a]["sector"]]["current"]+=e[a]["closing_value"],this.sectorData[e[a]["sector"]]["investedEQ"]+=e[a]["holdings_buy_value"],this.sectorData[e[a]["sector"]]["currentEQ"]+=e[a]["closing_value"],-1===this.sectorData[e[a]["sector"]]["instrument_type"].indexOf(e[a]["instrument_type"])&&this.sectorData[e[a]["sector"]]["instrument_type"].push(e[a]["instrument_type"])):(this.sectorData[e[a]["sector"]]={},this.sectorData[e[a]["sector"]]["invested"]=e[a]["holdings_buy_value"],this.sectorData[e[a]["sector"]]["current"]=e[a]["closing_value"],this.sectorData[e[a]["sector"]]["investedEQ"]=e[a]["holdings_buy_value"],this.sectorData[e[a]["sector"]]["currentEQ"]=e[a]["closing_value"],this.sectorData[e[a]["sector"]]["investedMF"]=0,this.sectorData[e[a]["sector"]]["currentMF"]=0,this.sectorData[e[a]["sector"]]["instrument_type"]=[],this.sectorData[e[a]["sector"]]["instrument_type"].push(e[a]["instrument_type"]))),this.stockData.hasOwnProperty(e[a]["tradingsymbol"])?(this.stockData[e[a]["tradingsymbol"]]["invested"]+=e[a]["holdings_buy_value"],this.stockData[e[a]["tradingsymbol"]]["current"]+=e[a]["closing_value"],this.stockData[e[a]["tradingsymbol"]]["investedEQ"]+=e[a]["holdings_buy_value"],this.stockData[e[a]["tradingsymbol"]]["currentEQ"]+=e[a]["closing_value"],-1===this.stockData[e[a]["tradingsymbol"]]["instrument_type"].indexOf(e[a]["instrument_type"])&&this.stockData[e[a]["tradingsymbol"]]["instrument_type"].push(e[a]["instrument_type"])):(this.stockData[e[a]["tradingsymbol"]]={},this.stockData[e[a]["tradingsymbol"]]["invested"]=e[a]["holdings_buy_value"],this.stockData[e[a]["tradingsymbol"]]["current"]=e[a]["closing_value"],this.stockData[e[a]["tradingsymbol"]]["investedEQ"]=e[a]["holdings_buy_value"],this.stockData[e[a]["tradingsymbol"]]["currentEQ"]=e[a]["closing_value"],this.stockData[e[a]["tradingsymbol"]]["investedMF"]=0,this.stockData[e[a]["tradingsymbol"]]["currentMF"]=0,this.stockData[e[a]["tradingsymbol"]]["sector"]=e[a]["sector"],this.stockData[e[a]["tradingsymbol"]]["cap"]=e[a]["cap"],this.stockData[e[a]["tradingsymbol"]]["instrument_type"]=[],this.stockData[e[a]["tradingsymbol"]]["instrument_type"].push(e[a]["instrument_type"]));else{for(var i=!1,s=0;s<this.filters.length;s++)if("sector"===this.filters[s]["type"]){i=!0;break}for(var n in e[a]["isin_breakdown"])if("MFD"!==e[a]["instrument_type"])if(this.filters.length>0){for(var r=0;r<this.filters.length;r++)if("sector"===this.filters[r]["type"]&&this.filters[r]["text"]===e[a]["isin_breakdown"][n]["sector"]||"stock"===this.filters[r]["type"]&&this.filters[r]["text"]===e[a]["isin_breakdown"][n]["tradingsymbol"]||"instrument_type"===this.filters[r]["type"]&&"MF"===this.filters[r]["value"]){var o=parseFloat(e[a]["isin_breakdown"][n]["weightage"])/100*parseFloat(e[a]["holdings_buy_value"]),l=parseFloat(e[a]["isin_breakdown"][n]["weightage"])/100*parseFloat(e[a]["closing_value"]);this.accountData[e[a]["instrument_type"]]["invested"]+=o,this.accountData[e[a]["instrument_type"]]["current"]+=l,this.accountData[e[a]["instrument_type"]]["investedEQ"]+=o,this.accountData[e[a]["instrument_type"]]["currentEQ"]+=l,i&&e[a]["isin_breakdown"][n]["sector"]?("sector"===this.filters[r]["type"]&&this.filters[r]["text"]===e[a]["isin_breakdown"][n]["sector"]&&(this.sectorData.hasOwnProperty(e[a]["isin_breakdown"][n]["sector"])?(this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["invested"]+=o,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["current"]+=l,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["investedMF"]+=o,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["currentMF"]+=l,-1===this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["instrument_type"].indexOf(e[a]["instrument_type"])&&this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["instrument_type"].push(e[a]["instrument_type"])):(this.sectorData[e[a]["isin_breakdown"][n]["sector"]]={},this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["invested"]=o,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["current"]=l,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["investedEQ"]=0,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["currentEQ"]=0,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["investedMF"]=o,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["currentMF"]=l,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["sector"]=e[a]["isin_breakdown"][n]["sector"],this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["instrument_type"]=[],this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["instrument_type"].push(e[a]["instrument_type"]))),"sector"===this.filters[r]["type"]&&this.filters[r]["text"]===e[a]["isin_breakdown"][n]["sector"]&&(this.stockData.hasOwnProperty(e[a]["isin_breakdown"][n]["tradingsymbol"])?(this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["invested"]+=o,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["current"]+=l,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["investedMF"]+=o,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["currentMF"]+=l,-1===this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["instrument_type"].indexOf(e[a]["instrument_type"])&&this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["instrument_type"].push(e[a]["instrument_type"])):(this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]={},this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["invested"]=o,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["current"]=l,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["investedEQ"]=0,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["currentEQ"]=0,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["investedMF"]=o,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["currentMF"]=l,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["sector"]=e[a]["isin_breakdown"][n]["sector"],this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["cap"]=e[a]["isin_breakdown"][n]["cap"],this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["instrument_type"]=[],this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["instrument_type"].push(e[a]["instrument_type"])))):(e[a]["isin_breakdown"][n]["sector"]&&(this.sectorData.hasOwnProperty(e[a]["isin_breakdown"][n]["sector"])?(this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["invested"]+=o,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["current"]+=l,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["investedMF"]+=o,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["currentMF"]+=l,-1===this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["instrument_type"].indexOf(e[a]["instrument_type"])&&this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["instrument_type"].push(e[a]["instrument_type"])):(this.sectorData[e[a]["isin_breakdown"][n]["sector"]]={},this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["invested"]=o,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["current"]=l,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["investedEQ"]=0,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["currentEQ"]=0,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["investedMF"]=o,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["currentMF"]=l,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["sector"]=e[a]["isin_breakdown"][n]["sector"],this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["instrument_type"]=[],this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["instrument_type"].push(e[a]["instrument_type"]))),this.stockData.hasOwnProperty(e[a]["isin_breakdown"][n]["tradingsymbol"])?(this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["invested"]+=o,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["current"]+=l,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["investedMF"]+=o,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["currentMF"]+=l,-1===this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["instrument_type"].indexOf(e[a]["instrument_type"])&&this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["instrument_type"].push(e[a]["instrument_type"])):(this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]={},this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["invested"]=o,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["current"]=l,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["investedEQ"]=0,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["currentEQ"]=0,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["investedMF"]=o,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["currentMF"]=l,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["sector"]=e[a]["isin_breakdown"][n]["sector"],this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["cap"]=e[a]["isin_breakdown"][n]["cap"],this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["instrument_type"]=[],this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["instrument_type"].push(e[a]["instrument_type"])))}}else{var c=parseFloat(e[a]["isin_breakdown"][n]["weightage"])/100*parseFloat(e[a]["holdings_buy_value"]),d=parseFloat(e[a]["isin_breakdown"][n]["weightage"])/100*parseFloat(e[a]["closing_value"]);this.accountData[e[a]["instrument_type"]]["invested"]+=c,this.accountData[e[a]["instrument_type"]]["current"]+=d,this.accountData[e[a]["instrument_type"]]["investedEQ"]+=c,this.accountData[e[a]["instrument_type"]]["currentEQ"]+=d,e[a]["isin_breakdown"][n]["sector"]&&(this.sectorData.hasOwnProperty(e[a]["isin_breakdown"][n]["sector"])?(this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["invested"]+=c,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["current"]+=d,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["investedMF"]+=c,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["currentMF"]+=d,-1===this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["instrument_type"].indexOf(e[a]["instrument_type"])&&this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["instrument_type"].push(e[a]["instrument_type"])):(this.sectorData[e[a]["isin_breakdown"][n]["sector"]]={},this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["invested"]=c,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["current"]=d,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["investedEQ"]=0,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["currentEQ"]=0,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["investedMF"]=c,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["currentMF"]=d,this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["sector"]=e[a]["isin_breakdown"][n]["sector"],this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["instrument_type"]=[],this.sectorData[e[a]["isin_breakdown"][n]["sector"]]["instrument_type"].push(e[a]["instrument_type"]))),this.stockData.hasOwnProperty(e[a]["isin_breakdown"][n]["tradingsymbol"])?(this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["invested"]+=c,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["current"]+=d,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["investedMF"]+=c,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["currentMF"]+=d,-1===this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["instrument_type"].indexOf(e[a]["instrument_type"])&&this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["instrument_type"].push(e[a]["instrument_type"])):(this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]={},this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["invested"]=c,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["current"]=d,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["investedEQ"]=0,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["currentEQ"]=0,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["investedMF"]=c,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["currentMF"]=d,this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["sector"]=e[a]["isin_breakdown"][n]["sector"],this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["cap"]=e[a]["isin_breakdown"][n]["cap"],this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["instrument_type"]=[],this.stockData[e[a]["isin_breakdown"][n]["tradingsymbol"]]["instrument_type"].push(e[a]["instrument_type"]))}else if("MFD"===e[a]["instrument_type"])if(this.filters.length>0){for(var u=0;u<this.filters.length;u++)if("instrument_type"===this.filters[u]["type"]&&"MFD"===this.filters[u]["value"]){var g=parseFloat(e[a]["isin_breakdown"][n]["weightage"])/100*parseFloat(e[a]["holdings_buy_value"]),p=parseFloat(e[a]["isin_breakdown"][n]["weightage"])/100*parseFloat(e[a]["closing_value"]);this.accountData[e[a]["instrument_type"]]["invested"]+=g,this.accountData[e[a]["instrument_type"]]["current"]+=p,this.accountData[e[a]["instrument_type"]]["investedEQ"]+=g,this.accountData[e[a]["instrument_type"]]["currentEQ"]+=p}}else{var h=parseFloat(e[a]["isin_breakdown"][n]["weightage"])/100*parseFloat(e[a]["holdings_buy_value"]),_=parseFloat(e[a]["isin_breakdown"][n]["weightage"])/100*parseFloat(e[a]["closing_value"]);this.accountData[e[a]["instrument_type"]]["invested"]+=h,this.accountData[e[a]["instrument_type"]]["current"]+=_,this.accountData[e[a]["instrument_type"]]["investedEQ"]+=h,this.accountData[e[a]["instrument_type"]]["currentEQ"]+=_}}},getCap:function(t){var e={L:"Large cap",M:"Mid cap",S:"Small cap",G:"Gold"};return e[t]},accountMap:function(t){var e={EQ:"Equity",EQD:"Debt",MF:"Equity (MF)",MFD:"Debt (MF)",GOLD:"Gold"};return e[t]},reverseAccountMap:function(t){var e={Equity:"EQ",Debt:"EQD","Equity (MF)":"MF","Debt (MF)":"MFD",Gold:"GOLD"};return e[t]}}},q=I,L=Object(S["a"])(q,P,O,!1,null,null,null),$=L.exports,Q=a("ba6a"),R=a("5665"),N=a("6157");function H(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function U(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?H(Object(a),!0).forEach((function(e){G(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function G(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var j=[],z=[];function V(t){var e=null,a=[];return location.search.substr(1).split("&").forEach((function(i){a=i.split("="),a[0]===t&&(e=decodeURIComponent(a[1]))})),e}function Y(t,e){return t+"?date="+e}var W={data:function(){return{instrument:null,holdingsBreakdown:[],holdingsDividend:[],dividendSymbol:"",dividendIsin:"",breakdownSymbol:"",breakdownQty:"",breakdownLTP:"",breakdownDel:"",breakdownT1:"",breakdownQtyLoan:"",breakdownQtyMargin:"",showModal:!1,contextMenuInstrumentId:"",showDividendModal:!1,job:!1,params:{},holdings_items:[],holdings:[],holdings_items_family:[],holdingsFamily:[],holdings_aggregation:{},holdings_aggregation_family:{},date:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),format:"YYYY-MM-DD",sortKey:"tradingsymbol",sortBy:"asc",segment:"EQ",segmentState:"EQ",disabled:{to:new Date(2017,3,1)},timeout:"",lastClicked:null,noResults:!1,noResultsFamily:!1,fetchingBreakdown:!1,fetchingDividend:!1,hasBreakdown:{},isWeightageSorted:!1,weightageSortby:"asc",fetchingData:!1,showDrop:!0,sortingData:!1,searchQuery:"",filteredData:[],filtering:!1,filterBy:"",filterKey:{Pledged:"pledged","Long term":"long_term","Short term":"short_term",Discrepancy:"discrepant"},typeFilters:[{type:"instrument_type",text:"Equity",value:"EQ",classes:"type-tag"},{type:"instrument_type",text:"Debt",value:"EQD",classes:"type-tag"},{type:"instrument_type",text:"Equity (MF)",value:"MF",classes:"type-tag"},{type:"instrument_type",text:"Debt (MF)",value:"MFD",classes:"type-tag"},{type:"instrument_type",text:"Gold",value:"GOLD",classes:"type-tag"}],otherFilters:[{type:"others",text:"Discrepancies",value:"quantity_discrepant",classes:"others-tag"},{type:"others",text:"Long term holdings",value:"quantity_long_term",classes:"others-tag"},{type:"others",text:"Short term holdings",value:"quantity_short_term",classes:"others-tag"},{type:"others",text:"Pledged holdings",value:"quantity_pledged_for_margin",classes:"others-tag"}],holdingsError:!1,holdingsErrorFamily:!1,holdingsErrorMsg:"Please try again",holdingsBreakdownError:!1,holdingsBreakdownErrorMsg:"Please try again",holdingsDividendError:!1,holdingsDividendErrorMsg:"Please try again",showCreatePledge:!1,showCreateUnpledge:!1,showCancelPledge:!1,pledgeData:{},pledgeQty:"",pledging:!1,pledgeType:"pledge",haircut:[],isConsent:!1,isMobileFetching:!1,selectedFilters:[],selectedFiltersModal:!1,firstPoll:!0,smallcaseSRC:"",showSmallcaseWidget:!1,showFilterModalWrapper:!1,sectorFilters:[],treemapStats:{},sectorData:[],topSector:"",treeSource:"sector",pledgeError:!1,poaStatus:{},acceptPOA:!1,postingPOA:!1,mf_data:[],tags:[],holdingsFilter:"",selectedTags:[],activeSection:"portfolio",filteringData:!1,noFilterResults:!1,noFilterResultsFamily:!1,showMfComposition:!1,mfComposition:[],mfCompositionName:"",kiteHoldings:[],insightsFrame:{},insightsURL:"",activeInsight:"",showTypeFilters:!0,showOtherFilters:!0,showSectorFilters:!0,onlyMF:!1,shareTickerTape:!1,tickerTapeTags:[],showKiteAuth:!1,requestID:"",selectedHolding:{},holdingsTags:[],palette:["rgba(3, 155, 229, 1)","rgba(11, 128, 67, 1)","rgba(63, 81, 181, 1)","rgba(244, 81, 30, 1)","rgba(121, 85, 72, 1)","rgba(124, 179, 66, 1)","rgba(240, 147, 0, 1)","rgba(142, 36, 170, 1)","rgba(97, 97, 97, 1)","rgba(255, 205, 86, 1)"],paletteMap:{"rgba(3, 155, 229, 1)":"p1","rgba(11, 128, 67, 1)":"p2","rgba(63, 81, 181, 1)":"p3","rgba(244, 81, 30, 1)":"p4","rgba(121, 85, 72, 1)":"p5","rgba(124, 179, 66, 1)":"p6","rgba(240, 147, 0, 1)":"p7","rgba(142, 36, 170, 1)":"p8","rgba(97, 97, 97, 1)":"p9","rgba(255, 205, 86, 1)":"p10"},isPending:!1,showCreateTag:!1,updatingTag:!1,initFetch:!0,enableTagEdit:!0,enableBreakdownEdit:!1,includeMF:!0,selectedTagFilters:[],tagFilter:"",selectedTagsModal:!1,allTagsAdded:!1,pollCount:{personal:0,family:0},hasChanged:!1,isTagModifying:!1,kiteBreakdownItem:{},isTagAdded:!1,fetchingHaircut:!1,showTagManager:!1,breakdownXIRR:0,showSort:!1,fetchingXIRR:!1,showDonutReset:!1,showFamilyFilter:!1,familyList:[],familySearch:"",showFamilyComparison:!1,familySwitch:"personal",familyData:[],personalData:[],familyDonutData:[],familyDonutOption:"present_value",modifyingFamily:!1,acceptPledgeTerms:!1}},created:function(){this.insightsRootURL="https://portfolio.tickertape.in/"},mounted:function(){var t=this,e=V("isin"),a=V("segment"),i=V("tradingsymbol");e&&a&&i&&(this.kiteBreakdownItem={},this.kiteBreakdownItem["isin"]=e.toUpperCase(),this.kiteBreakdownItem["tradingsymbol"]=i.toUpperCase(),this.segmentState=a.toUpperCase(),this.isMobileFetching=!0);var s=this;window.addEventListener("keyup",(function(t){27===t.keyCode&&(s.showTagManager?s.hideTagManagerModal():s.hideBreakdown(),s.hideDividend(),s.hideCreatePledgeModal(),s.hideCreateUnpledgeModal(),s.hideCancelPledgeModal(),s.hideSelectedFilters(),s.hideSmallcaseWidgetModal())}));var n=document.getElementsByClassName("ti-new-tag-input")[0];n&&n.addEventListener("input",(function(){0!==this.value.trim().length?s.hideSelectedFilters():s.selectedFiltersModal=!0})),this.addFilter({type:"instrument_type",text:"Equity",value:"EQ",classes:"type-tag"}),this.addFilter({type:"instrument_type",text:"Debt",value:"EQD",classes:"type-tag"}),this.addFilter({type:"instrument_type",text:"Equity (MF)",value:"MF",classes:"type-tag"}),this.addFilter({type:"instrument_type",text:"Debt (MF)",value:"MFD",classes:"type-tag"}),this.addFilter({type:"instrument_type",text:"Gold",value:"GOLD",classes:"type-tag"}),this.tags.push({type:"instrument_type",text:"Equity",value:"EQ",classes:"type-tag"}),this.tags.push({type:"instrument_type",text:"Debt",value:"EQD",classes:"type-tag"}),this.tags.push({type:"instrument_type",text:"Equity (MF)",value:"MF",classes:"type-tag"}),this.tags.push({type:"instrument_type",text:"Debt (MF)",value:"MFD",classes:"type-tag"}),this.tags.push({type:"instrument_type",text:"Gold",value:"GOLD",classes:"type-tag"});var r=document.createElement("script");r.setAttribute("src","https://kite.trade/publisher.js?v=3"),document.head.appendChild(r);var o=[];for(var l in this.childAccounts)if("ACCEPTED"===this.childAccounts[l].state.toUpperCase()){var c=this.childAccounts[l];c["isChecked"]=!0,o.push(c)}if(o.length&&(this.userDetails["isChecked"]=!0,this.familyList=[this.userDetails].concat(o)),this.getHoldingsJobs(),this.getKiteHoldings(),this.consoleTags&&this.consoleTags.length)for(var d=function(e){var a=t.tags.filter((function(a){return a.hasOwnProperty("id")&&a.id===t.consoleTags[e].id}));0===a.length&&t.tags.push(t.consoleTags[e])},u=0;u<this.consoleTags.length;u++)d(u)},computed:U(U({},Object(A["c"])(["isMobileView","consoleTags","pnlStatus","consolePendingTags","csrf","reportEndDate","childAccounts","userDetails"])),{},{isShortTermFiltered:function(){return this.selectedTags&&this.selectedTags.find((function(t){return"quantity_short_term"===t.value}))},filteredChildAccounts:function(){var t=this,e=this.modifyingFamily;console.log(e);var a=JSON.parse(JSON.stringify(this.familyList)),i=[];return i=this.familySearch?a.filter((function(e){return-1!==e.user_id.indexOf(t.familySearch.toUpperCase())||-1!==e.user_name.toUpperCase().indexOf(t.familySearch.toUpperCase())})):a,i},allFilters:function(){var t=[];return t=t.concat(this.selectedTags,this.selectedTagFilters),t},filteredTags:function(){var t=this;if(this.tagFilter)return this.consoleTags.filter((function(e){return-1!==e.text.toLowerCase().indexOf(t.tagFilter.toLowerCase())}))},filteredItems:function(){var t=this;if(this.holdingsFilter)return this.tags.filter((function(e){return-1!==e.text.toLowerCase().indexOf(t.holdingsFilter.toLowerCase())}))},taggedHolding:function(){var t=this;return this.consoleTags.filter((function(e){return-1!==e.text.toLowerCase().indexOf(t.holdingsFilter.toLowerCase())}))}}),watch:{familyDonutOption:function(t){if(t){for(var e in document.getElementById("family_donut")&&(document.getElementById("family_donut").innerHTML=""),this.familyDonutData=[],this.childSummary)this.familyDonutData.push({name:this.childSummary[e].client_id,value:"buy_value"===t?parseFloat(parseFloat(this.childSummary[e].buy_value).toFixed(2)):parseFloat(parseFloat(this.childSummary[e].present_value).toFixed(2))});this.bakeFamilyDonut(this.familyDonutData)}},childAccounts:function(t){if(t){var e=[];for(var a in t)if("ACCEPTED"===t[a].state.toUpperCase()){var i=t[a];i["isChecked"]=!0,e.push(i)}e.length&&(this.userDetails["isChecked"]=!0,this.familyList=[this.userDetails].concat(e)),this.familyList&&this.familyList.length>1&&this.familyList.filter((function(t){return t.isChecked})).length&&(this.initFetch=!0,this.noResultsFamily=!1,this.getFamilyHoldingsData(this.date))}},tagFilter:function(t){t&&t.trim()&&this.hideSelectedTags()},selectedTagFilters:function(t){if(this.isPending=!1,t.length)for(var e=0;e<t.length;e++)t[e].hasOwnProperty("id")&&this.pendingTags&&-1!==this.pendingTags.indexOf(t[e].id)&&(this.isPending=!0);else this.allTagsAdded=!1;this.filterData()},selectedTags:function(t){if(t.length>0){for(var e=0;e<t.length;e++)"sector"!==t[e].type&&"stock"!==t[e].type||this.tickerTapeTags.push(t[e]);for(var a=0;a<this.typeFilters.length;a++){for(var i=!1,s=0;s<t.length;s++)t[s]["text"]===this.typeFilters[a]["text"]&&(i=!0);this.typeFilters[a]["hide"]=!!i}this.typeFilters.length>0&&(this.showTypeFilters=this.typeFilters.some((function(t){return!0!==t.hide})));for(var n=0;n<this.sectorFilters.length;n++){for(var r=!1,o=0;o<t.length;o++)t[o]["text"]===this.sectorFilters[n]["text"]&&(r=!0);this.sectorFilters[n]["hide"]=!!r}this.sectorFilters.length>0&&(this.showSectorFilters=this.sectorFilters.some((function(t){return!0!==t.hide})));for(var l=0;l<this.otherFilters.length;l++){for(var c=!1,d=0;d<t.length;d++)t[d]["text"]===this.otherFilters[l]["text"]&&(c=!0);this.otherFilters[l]["hide"]=!!c}this.otherFilters.length>0&&(this.showOtherFilters=this.otherFilters.some((function(t){return!0!==t.hide})))}else this.typeFilters=this.typeFilters.map((function(t){return U(U({},t),{},{hide:!1})})),this.sectorFilters=this.sectorFilters.map((function(t){return U(U({},t),{},{hide:!1})})),this.otherFilters=this.otherFilters.map((function(t){return U(U({},t),{},{hide:!1})})),this.showTypeFilters=!0,this.showOtherFilters=!0,this.showSectorFilters=!0;this.filterData()},activeSection:function(t){this.shareTickerTape&&"insights"===t&&this.triggerTickerTape()},shareTickerTape:function(t){t&&"insights"===this.activeSection&&this.triggerTickerTape()}},methods:U(U({},Object(A["d"])(["setConsoleTags","setConsolePendingTags"])),{},{getChildSummary:function(){var t=this,e=[];for(var a in this.familyList){var i={user_name:"",client_id:"",buy_value:0,present_value:0,pnl:0,pnl_percentage:0};for(var s in i["client_id"]=this.familyList[a].user_id,i["user_name"]=this.familyList[a].user_name,this.holdingsFamily)this.holdingsFamily[s].client_id===this.familyList[a].user_id&&(i["buy_value"]+=this.holdingsFamily[s].holdings_buy_value?parseFloat(this.holdingsFamily[s].holdings_buy_value):0,i["present_value"]+=this.holdingsFamily[s].closing_value?parseFloat(this.holdingsFamily[s].closing_value):parseFloat(this.holdingsFamily[s].holdings_buy_value));e.push(i)}for(var n in e)e[n]["buy_value"]?(e[n]["pnl"]=parseFloat(e[n]["present_value"])-parseFloat(e[n]["buy_value"]),e[n]["pnl_percentage"]=(parseFloat(e[n]["present_value"])-parseFloat(e[n]["buy_value"]))/parseFloat(e[n]["buy_value"])*100):(e[n]["pnl"]="-",e[n]["pnl_percentage"]="-");if(this.childSummary=e,this.familyDonutData=[],e){for(var r in e)this.familyDonutData.push({name:e[r].client_id,value:"buy_value"===this.familyDonutOption?parseFloat(parseFloat(e[r].buy_value).toFixed(2)):parseFloat(parseFloat(e[r].present_value).toFixed(2))});document.getElementById("family_donut")&&(document.getElementById("family_donut").innerHTML=""),setTimeout((function(){t.bakeFamilyDonut(t.familyDonutData)}),700)}},bakeFamilyDonut:function(t){document.getElementById("family_donut")&&(document.getElementById("family_donut").innerHTML="");var e,a=this,i="",s="#family_donut",r="Family",o=t,l=190,c=190,d=c,u=c,g=32,p=["rgb(0, 89, 193)","rgb(104, 142, 217)","rgb(155, 179, 229)","rgb(0, 123, 182)","rgb(0, 143, 122)","rgb(65, 172, 156)","rgb(127, 199, 188)","rgb(170, 149, 219)","rgb(115, 79, 195)","rgb(167, 97, 198)","rgb(194, 112, 200)","rgb(253, 154, 192)","rgb(255, 206, 197)","rgb(255, 242, 222)","rgb(255, 225, 158)","rgb(255, 211, 110)","rgb(255, 196, 61)","rgb(255, 181, 13)","rgb(0, 143, 122)","rgb(65, 172, 156)","rgb(127, 199, 188)","rgb(170, 149, 219)","rgb(115, 79, 195)","rgb(167, 97, 198)","rgb(194, 112, 200)","rgb(253, 154, 192)","rgb(255, 206, 197)","rgb(255, 242, 222)","rgb(255, 225, 158)","rgb(255, 211, 110)","rgb(255, 196, 61)","rgb(255, 181, 13)","rgb(0, 89, 193)","rgb(104, 142, 217)","rgb(155, 179, 229)","rgb(0, 123, 182)","rgb(0, 143, 122)","rgb(65, 172, 156)","rgb(127, 199, 188)","rgb(170, 149, 219)","rgb(115, 79, 195)","rgb(167, 97, 198)","rgb(194, 112, 200)","rgb(253, 154, 192)","rgb(255, 206, 197)","rgb(255, 242, 222)","rgb(255, 225, 158)","rgb(255, 211, 110)"],h=n["w"](s),_=Math.min(d,u)/2,f=n["t"]().range(p),m=(n["n"](o,(function(t){return t.value})),h.append("svg").attr("viewBox","0 0 ".concat(l+g," ").concat(c+g)).attr("class","pie").attr("width",l).attr("height",u).attr("id",s+"_donut")),v=m.append("g").attr("transform","translate( ".concat(d/2+g/2,", ").concat(u/2+g/2,")")),A=n["a"]().innerRadius(_-g).outerRadius(_),y=n["a"]().innerRadius(_-g).outerRadius(_+8),b=n["r"]().value((function(t){return t.value})).sort(null);v.selectAll("path").attr("class","data-path").data(b(o)).enter().append("g").attr("class","data-group").each((function(t,e){var a=n["w"](this);0===e&&a.append("text").text(r).attr("class","data-text data-text__section").attr("id",s+"_section").attr("text-anchor","middle").attr("dy","1rem"),a.append("text").text("".concat(t.data.value)).attr("class","data-text data-text__value").attr("text-anchor","middle").attr("dy","1rem");var i=t.data.name;if(i.length>18){var o=i.substring(0,18);i=o+".."}a.append("text").text(i).attr("class","data-text data-text__name").attr("text-anchor","middle").attr("dy","1rem");n["w"](this).select(".data-text__section").classed("data-text--show",!0)})).append("path").attr("d",A).attr("fill",(function(t,e){return"Gold"===t.data.name?"rgb(255, 181, 13)":f(t.data.name)})).attr("class","data-path").attr("id",(function(t){return"Account"===r?a.reverseAccountMap(t.data.name).replace(/ /g,""):i+t.data.name.replace(/ /g,"")})).on("mouseover",(function(t){var a=this;a.parentNode;if(a!==e){e=a;n["x"](".data-path").transition().duration(150).attr("d",A);n["w"](a).transition().duration(150).attr("d",y);for(var i=document.getElementById(s+"_donut").querySelectorAll(".data-text"),r=0;r<i.length;r++)i[r].classList.remove("data-text--show");n["w"](this.parentNode).select(".data-text__value").classed("data-text--show",!0),n["w"](this.parentNode).select(".data-text__name").classed("data-text--show",!0)}})).on("mouseout",(function(){for(var t=document.getElementsByClassName("label"),a=0;a<t.length;a++)t[a].classList.remove("active");e="";n["x"](".data-path").transition().duration(150).attr("d",A);for(var i=document.getElementById(s+"_donut").querySelectorAll(".data-text"),r=0;r<i.length;r++)i[r].classList.remove("data-text--show");document.getElementById(s+"_section").classList.add("data-text--show")})).on("click",(function(t){}))},sortStaticTable:function(t){var e,a,i,s,n,r,o;e=document.getElementById("family-compare"),i=!0;while(i){for(i=!1,a=e.rows,s=1;s<a.length-1;s++)if(o=!1,n=a[s].getElementsByTagName("TD")[t],r=a[s+1].getElementsByTagName("TD")[t],n.innerHTML.toLowerCase()>r.innerHTML.toLowerCase()){o=!0;break}o&&(a[s].parentNode.insertBefore(a[s+1],a[s]),i=!0)}},switchPortfolio:function(t){var e=this;this.familySwitch=t,"family"===t?(this.$router.push({name:"familyHoldings"}),document.getElementById("family_donut")&&(document.getElementById("family_donut").innerHTML=""),this.$nextTick((function(){e.bakeFamilyDonut(e.familyDonutData)}))):this.$router.push({name:"holdings"})},modifyFamilyList:function(t,e){var a=this;this.modifyingFamily=!0,this.$nextTick((function(){if(t)if("all"===t)for(var e in a.familyList)a.familyList[e].isChecked=!0;else{var i=a.familyList.findIndex((function(e){return e.user_id===t.user_id}));a.familyList[i].isChecked=!a.familyList[i].isChecked}else for(var s in a.familyList)a.familyList[s].isChecked=!1;a.modifyingFamily=!1}))},toggleFamilyFilterModal:function(){this.showFamilyFilter=!this.showFamilyFilter},showFamilyFilterModal:function(){this.showFamilyFilter=!0},hideFamilyFilterModal:function(){this.showFamilyComparison&&(this.familySearch=""),this.showFamilyFilter=!1},toggleFamilyComparisonModal:function(){this.showFamilyComparison&&(this.familySearch=""),this.showFamilyComparison=!this.showFamilyComparison},showFamilyComparisonModal:function(){this.showFamilyComparison=!0},hideFamilyComparisonModal:function(){this.showFamilyComparison=!1},showSortModal:function(){this.showSort=!0},hideSortModal:function(){this.showSort=!1},toggleInputContainer:function(t){var e=this,a=document.getElementsByClassName("mobile-input-container")[0];a&&(t?-1===a.className.indexOf("hidden")&&a.classList.add("hidden"):a.classList.toggle("hidden"),this.$nextTick((function(){if(-1!==document.getElementsByClassName("mobile-input-container")[0].className.indexOf("hidden"))document.querySelector("body").style.overflowY="auto";else{document.querySelector("body").style.overflowY="hidden";var t=e;new c.a({element:document.getElementById("holdings_date"),startDate:t.date,minDate:new Date("2017-03-31"),dropdowns:{minYear:2017,maxYear:(new Date).getFullYear(),months:!1,years:!0},plugins:["mobilefriendly"],maxDate:new Date,setup:function(e){e.on("selected",(function(e,a){t.date=e.dateInstance}))}})}})))},formatDate:function(t,e){var a=t,i=""+(a.getMonth()+1),s=""+a.getDate(),n=a.getFullYear();return i.length<2&&(i="0"+i),s.length<2&&(s="0"+s),[n,i,s].join(e||"-")},showTagManagerModal:function(){this.showTagManager=!0},hideTagManagerModal:function(){this.showTagManager=!1},tagChanged:function(t){var e=this,a=!1;if(t){if(this.enableTagEdit){for(var i=[],s=[],n=function(t){var a=e.$refs["tagger0"].selectedTags.filter((function(a){return a.id===e.selectedHolding.tags[t].id}));0===a.length&&s.push(parseInt(e.selectedHolding.tags[t].id))},r=0;r<this.selectedHolding.tags.length;r++)n(r);for(var o=function(t){var a=e.selectedHolding.tags.filter((function(a){return a.id===e.$refs["tagger0"].selectedTags[t].id}));0===a.length&&i.push(parseInt(e.$refs["tagger0"].selectedTags[t].id))},l=0;l<this.$refs["tagger0"].selectedTags.length;l++)o(l);(i.length||s.length)&&(a=!0)}else for(var c=function(t){for(var i=[],s=[],n=function(a){var i=e.$refs["tagger_b"+t][0].selectedTags.filter((function(i){return i.id===e.holdingsBreakdown[t].tags[a].id}));0===i.length&&s.push(parseInt(e.holdingsBreakdown[t].tags[a].id))},r=0;r<e.holdingsBreakdown[t].tags.length;r++)n(r);for(var o=function(a){var s=e.holdingsBreakdown[t].tags.filter((function(i){return i.id===e.$refs["tagger_b"+t][0].selectedTags[a].id}));0===s.length&&i.push(parseInt(e.$refs["tagger_b"+t][0].selectedTags[a].id))},l=0;l<e.$refs["tagger_b"+t][0].selectedTags.length;l++)o(l);(i.length||s.length)&&(a=!0)},d=0;d<this.holdingsBreakdown.length;d++)c(d);this.hasChanged=a}},hideSelectedBreakdownFilters:function(t){if(t.target&&(t.target.closest(".filter-option")||-1!==t.target.className.indexOf("checks")))console.log("clicked");else if(this.$refs.tagger0)this.$refs.tagger0.hideSelectedFilters();else for(var e in this.holdingsBreakdown)this.$refs["tagger_b"+e][0].hideSelectedFilters()},getHoldingsJobs:function(){var t=sessionStorage.getItem("console_holdings");t?this.getHoldingsData(new Date(JSON.parse(t).date)):this.getHoldingsData(new Date)},addTag:function(t){var e=this;if(t){var a=this.selectedTagFilters.find((function(e){return e.id===t.id}));a||this.selectedTagFilters.push(t),this.allTagsAdded=!1}else{var i=function(t){var a=e.selectedTagFilters.find((function(a){return a.id===e.consoleTags[t].id}));a||e.selectedTagFilters.push(e.consoleTags[t])};for(var s in this.consoleTags)i(s);this.allTagsAdded=!0}this.isTagAdded=!0},showSelectedTags:function(){this.selectedTagsModal=!0,this.hideSelectedFilters()},hideSelectedTags:function(){this.isTagAdded?this.isTagAdded=!1:this.selectedTagsModal=!1},removeMF:function(){if(this.includeMF)this.addFilter({type:"instrument_type",text:"Equity (MF)",value:"MF",classes:"type-tag"}),this.addFilter({type:"instrument_type",text:"Debt (MF)",value:"MFD",classes:"type-tag"}),this.filterData();else{var t=this.selectedTags.filter((function(t){return-1!==t.value.indexOf("MF")}));for(var e in t)this.selectedTags.splice(this.selectedTags.indexOf(t[e]),1);this.filterData()}},showTagCreating:function(t){this.showCreateTag=t},postTag:function(){var t=this,e=!1,a={segment:"EQ"};if("MF"!==this.selectedHolding.instrument_type&&"MFD"!==this.selectedHolding.instrument_type||(a["segment"]="MF"),a["tags"]=[],this.enableTagEdit){a["target_type"]="holding";var i={};i["target_id"]=this.selectedHolding.instrument_id,i["instrument_id"]=this.selectedHolding.instrument_id;for(var s=[],n=[],r=function(e){var a=t.$refs["tagger0"].selectedTags.filter((function(a){return a.id===t.selectedHolding.tags[e].id}));0===a.length&&n.push(parseInt(t.selectedHolding.tags[e].id))},o=0;o<this.selectedHolding.tags.length;o++)r(o);for(var l=function(e){var a=t.selectedHolding.tags.filter((function(a){return a.id===t.$refs["tagger0"].selectedTags[e].id}));0===a.length&&s.push(parseInt(t.$refs["tagger0"].selectedTags[e].id))},c=0;c<this.$refs["tagger0"].selectedTags.length;c++)l(c);s.length&&(i["added_tag_ids"]=s,e=!0),n.length&&(i["deleted_tag_ids"]=n,e=!0),a["tags"].push(i)}else{a["target_type"]="order";for(var d=function(i){var s={};s["target_id"]=t.holdingsBreakdown[i].order_id,s["instrument_id"]=t.holdingsBreakdown[i].instrument_id;for(var n=[],r=[],o=function(e){var a=t.$refs["tagger_b"+i][0].selectedTags.filter((function(a){return a.id===t.holdingsBreakdown[i].tags[e].id}));0===a.length&&r.push(parseInt(t.holdingsBreakdown[i].tags[e].id))},l=0;l<t.holdingsBreakdown[i].tags.length;l++)o(l);for(var c=function(e){var a=t.holdingsBreakdown[i].tags.filter((function(a){return a.id===t.$refs["tagger_b"+i][0].selectedTags[e].id}));0===a.length&&n.push(parseInt(t.$refs["tagger_b"+i][0].selectedTags[e].id))},d=0;d<t.$refs["tagger_b"+i][0].selectedTags.length;d++)c(d);n.length&&(s["added_tag_ids"]=n),r.length&&(s["deleted_tag_ids"]=r),(n.length||r.length)&&(a["tags"].push(s),e=!0)},u=0;u<this.holdingsBreakdown.length;u++)d(u)}e?(this.updatingTag=!0,Q["a"].request("POST",!1,R["a"].getPendingTags,a,(function(e,a){t.updatingTag=!1,"SUCCESS"===e.toUpperCase()?(t.fetchPendingTags(),t.hideBreakdown(),t.$toast.success({message:"Tags modified.",orientation:t.$toast.TOP_RIGHT,duration:5e3})):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error updating tags: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error updating tags:"+Q["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))):this.$toast.warning({message:"No changes to update.",orientation:this.$toast.TOP_RIGHT,duration:6e3})},showKiteAuthModal:function(){this.showKiteAuth=!0},hideKiteAuthModal:function(){this.showKiteAuth=!1},invokeKiteAuth:function(){this.showKiteAuth=!1;var t=this;try{KiteConnect.ready((function(){var e=new KiteConnect("console");e.authHoldings(t.requestID,(function(){t.$toast.success({message:"Authorization successful. Please re-initiate pledge.",orientation:t.$toast.TOP_RIGHT,duration:6e3})}))}))}catch(e){console.log(e),this.$toast.error({message:"Failed to pledge. Please try again.",orientation:this.$toast.TOP_RIGHT,duration:6e3})}},getColor:function(t){return t.colour?t.colour:"#c270c8"},getBackground:function(t){if(t.colour){var e=t.colour.replace("1)","0.1)");return e}return"rgba(194,112,200,.2)"},updateFetchedTags:function(t){var e=this;this.setConsoleTags(t),this.isTagModifying=!0,this.$nextTick((function(){for(var t=0;t<e.holdings.length;t++){e.holdings[t].tags=[];var a=function(a){if("EQ"===a.toUpperCase()||"MF"===a.toUpperCase())for(var i=function(i){if(e.holdings[t].instrument_id===e.holdingsTags[a][i].instrument_id){var s=e.consoleTags.filter((function(t){return-1!==e.holdingsTags[a][i].tags.indexOf(parseInt(t.id))}));e.holdings[t]["tags"]=s}},s=0;s<e.holdingsTags[a].length;s++)i(s);else{e.pendingTags=e.holdingsTags[a];for(var n=0;n<e.holdingsTags[a].length;n++)e.holdings[t].instrument_id===e.holdingsTags[a][n].instrument_id&&(e.holdings[t].pendingTag=!0)}};for(var i in e.holdingsTags)a(i)}for(var s=0;s<e.holdings_items.length;s++){e.holdings_items[s].tags=[];var n=function(t){if("EQ"===t.toUpperCase()||"MF"===t.toUpperCase())for(var a=function(a){if(e.holdings_items[s].instrument_id===e.holdingsTags[t][a].instrument_id){var i=e.consoleTags.filter((function(i){return-1!==e.holdingsTags[t][a].tags.indexOf(parseInt(i.id))}));e.holdings_items[s]["tags"]=i}},i=0;i<e.holdingsTags[t].length;i++)a(i);else for(var n=0;n<e.holdingsTags[t].length;n++)e.holdings_items[s].instrument_id===e.holdingsTags[t][n].instrument_id&&(e.holdings_items[s].pendingTag=!0)};for(var r in e.holdingsTags)n(r)}var o=function(t){var a=[],i=function(i){var s=e.consoleTags.find((function(a){return e.holdingsBreakdown[t].tags[i].id===a.id}));a.push(s)};for(var s in e.holdingsBreakdown[t].tags)i(s);e.holdingsBreakdown[t]["tags"]=a};for(var l in e.holdingsBreakdown)o(l);e.isTagModifying=!1}))},fetchPendingTags:function(){var t=this;this.pendingTags=[],Q["a"].request("GET",!1,R["a"].getPendingTags,null,(function(e,a){if("SUCCESS"===e.toUpperCase()){if(a.data.data.result&&a.data.data.result.pending&&a.data.data.result.pending.length>0){var i=a.data.data.result.pending.find((function(t){return"holding"===t.target_type})),s=a.data.data.result.pending.find((function(t){return"order"===t.target_type}));t.setConsolePendingTags(a.data.data.result.pending);for(var n=function(e){var a={},n=[],r=[],o=[];if(i&&(a=i.tags.find((function(a){return a.target_id===t.holdings[e].instrument_id})),a)){var l=a.deleted_tag_ids?t.consoleTags.filter((function(t){return-1!==a.deleted_tag_ids.indexOf(parseInt(t.id))})):[],c=a.added_tag_ids?t.consoleTags.filter((function(t){return-1!==a.added_tag_ids.indexOf(parseInt(t.id))})):[];r=l.concat(c)}if(s){n=s.tags.filter((function(a){return a.instrument_id===t.holdings[e].instrument_id}));for(var d=function(e){if(n[e].added_tag_ids)for(var a=function(a){o.push(t.consoleTags.find((function(t){return n[e].added_tag_ids[a]===parseInt(t.id)})))},i=0;i<n[e].added_tag_ids.length;i++)a(i);if(n[e].deleted_tag_ids)for(var s=function(a){o.push(t.consoleTags.find((function(t){return n[e].deleted_tag_ids[a]===parseInt(t.id)})))},r=0;r<n[e].deleted_tag_ids.length;r++)s(r)},u=0;u<n.length;u++)d(u)}var g=r.concat(o);g=t.getUnique(g,(function(t){return t.id})),t.pendingTags.push(g),t.holdings[e]["pendingTags"]=g,(a&&Object.keys(a).length>0||n.length>0)&&(t.holdings[e].pendingTag=!0)},r=0;r<t.holdings.length;r++)n(r);t.pendingTags=t.getUnique(t.pendingTags,(function(t){return t.id}));for(var o=function(e){var a={},n=[],r=[],o=[];if(i&&(a=i.tags.find((function(a){return a.target_id===t.holdings_items[e].instrument_id})),a)){var l=a.deleted_tag_ids?t.consoleTags.filter((function(t){return-1!==a.deleted_tag_ids.indexOf(parseInt(t.id))})):[],c=a.added_tag_ids?t.consoleTags.filter((function(t){return-1!==a.added_tag_ids.indexOf(parseInt(t.id))})):[];r=l.concat(c)}if(s){n=s.tags.filter((function(a){return a.instrument_id===t.holdings_items[e].instrument_id}));for(var d=function(e){if(n[e].added_tag_ids)for(var a=function(a){o.push(t.consoleTags.find((function(t){return n[e].added_tag_ids[a]===parseInt(t.id)})))},i=0;i<n[e].added_tag_ids.length;i++)a(i);if(n[e].deleted_tag_ids)for(var s=function(a){o.push(t.consoleTags.find((function(t){return n[e].deleted_tag_ids[a]===parseInt(t.id)})))},r=0;r<n[e].deleted_tag_ids.length;r++)s(r)},u=0;u<n.length;u++)d(u)}var g=t.getUnique(r.concat(o));t.holdings_items[e]["pendingTags"]=g,(a&&Object.keys(a).length>0||n.length>0)&&(t.holdings_items[e].pendingTag=!0)},l=0;l<t.holdings_items.length;l++)o(l)}}else"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching tags: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching tags:"+Q["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},fetchHoldingsTags:function(){var t=this;Q["a"].request("GET",!1,R["a"].getHoldingsTags,null,(function(e,a){if("SUCCESS"===e.toUpperCase()){t.holdingsTags=a.data.data.result;for(var i=0;i<t.holdings.length;i++){t.holdings[i].tags=[];var s=function(e){if("EQ"===e.toUpperCase()||"MF"===e.toUpperCase())for(var a=function(a){if(t.holdings[i].instrument_id===t.holdingsTags[e][a].instrument_id){var s=t.consoleTags.filter((function(i){return-1!==t.holdingsTags[e][a].tags.indexOf(parseInt(i.id))}));t.holdings[i]["tags"]=s}},s=0;s<t.holdingsTags[e].length;s++)a(s);else{t.pendingTags=t.holdingsTags[e];for(var n=0;n<t.holdingsTags[e].length;n++)t.holdings[i].instrument_id===t.holdingsTags[e][n].instrument_id&&(t.holdings[i].pendingTag=!0)}};for(var n in t.holdingsTags)s(n)}for(var r=0;r<t.holdings_items.length;r++){t.holdings_items[r].tags=[];var o=function(e){if("EQ"===e.toUpperCase()||"MF"===e.toUpperCase())for(var a=function(a){if(t.holdings_items[r].instrument_id===t.holdingsTags[e][a].instrument_id){var i=t.consoleTags.filter((function(i){return-1!==t.holdingsTags[e][a].tags.indexOf(parseInt(i.id))}));t.holdings_items[r]["tags"]=i}},i=0;i<t.holdingsTags[e].length;i++)a(i);else for(var s=0;s<t.holdingsTags[e].length;s++)t.holdings_items[r].instrument_id===t.holdingsTags[e][s].instrument_id&&(t.holdings_items[r].pendingTag=!0)};for(var l in t.holdingsTags)o(l)}var c=null;t.$route.params&&t.$route.params.tag?c=t.$route.params.tag:t.$route.query&&t.$route.query.tag&&(c=t.$route.query.tag),c&&t.$nextTick((function(){var e=t.selectedTagFilters.find((function(t){return t.id===c.id}));e||t.selectedTagFilters.push(c)})),t.filterData(),t.fetchPendingTags()}else"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching tags: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching tags:"+Q["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3});t.fetchingData=!1,t.job=!1}))},fetchTags:function(t){var e=this;Q["a"].request("GET",!1,R["a"].getTags,null,(function(a,i){if("SUCCESS"===a.toUpperCase()){for(var s=i.data.data.result,n=0;n<s.length;n++)"SYSTEM"===s[n].client_id.toUpperCase()?(s[n]["type"]="system",s[n]["classes"]="system-tag"):(s[n]["type"]="custom",s[n]["classes"]="custom-tag "+e.paletteMap[s[n].colour]),s[n]["text"]=s[n].tag_name,s[n]["value"]=s[n].id;e.setConsoleTags(s),t?e.fetchPendingTags():e.fetchHoldingsTags()}else"FAILURE"===a.toUpperCase()?e.$toast.error({message:"Error fetching tags: "+i.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3}):e.$toast.error({message:"Error fetching tags:"+Q["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3})}))},triggerTickerTape:function(){var t=this;this.tickerTapeTags.length>0?this.changeInsightsURL(this.tickerTapeTags[0]):this.insightsURL=this.insightsRootURL+"insights/?",this.$nextTick((function(){t.insightsFrame=t.$el.querySelector("#insights_frame"),t.insightsFrame.addEventListener("load",(function(){t.insightsFrame.contentWindow.postMessage(JSON.stringify({type:"holdingInfo",data:t.kiteHoldings}),"https://portfolio.tickertape.in/")}))}))},changeInsightsURL:function(t){"sector"===t.type?(this.insightsFrame&&this.insightsFrame.contentWindow?this.insightsFrame.contentWindow.postMessage(JSON.stringify({type:"portfolioNavigation",path:"/composition/sectors/"+encodeURIComponent(t.text)}),"https://portfolio.tickertape.in/"):this.insightsURL=this.insightsRootURL+"composition/sectors/"+encodeURIComponent(t.text)+"/?",this.activeInsight=t.text):"stock"===t.type&&(this.insightsURL=this.insightsRootURL+"composition/sectors/"+encodeURIComponent(t.sector)+"/?ticker="+encodeURIComponent(t.text)+"&",this.activeInsight=t.text)},displayTab:function(t){this.activeSection=t},resetSearch:function(t){"all"===t?(this.selectedTags=[],this.selectedTagFilters=[],this.hideSelectedFilters(),this.hideSelectedTags(),this.showDonutReset=!1):t?(this.selectedTagFilters=[],this.hideSelectedTags()):(this.selectedTags=[],this.hideSelectedFilters()),this.filteringData=!1},addFilter:function(t){if(this.selectedTags.length<7){for(var e=!1,a=0;a<this.selectedTags.length;a++)if(this.selectedTags[a]["text"]===t["text"]){e=!0;break}e||this.selectedTags.push(t)}},filterData:function(t,e,a){var i=this;if(e&&(this.showDonutReset=!0),t){this.selectedTags=[];var s=this.tags.find((function(e){var a=e.text;return a===t.text}));this.addFilter(s)}for(var n=function(t){(i.selectedTags.length>0||i.selectedTagFilters.length>0)&&(i.filteringData=!0);var e=JSON.parse(JSON.stringify(i.holdings));1===t&&(e=JSON.parse(JSON.stringify(i.holdingsFamily)));for(var s=[],n=[],r=[],o=[],l=[],c=[],d=[],u=[],g=[],p=[],h=0;h<i.selectedTags.length;h++)"instrument_type"===i.selectedTags[h]["type"]?c.push(i.selectedTags[h]["value"]):"others"===i.selectedTags[h]["type"]?g.push(i.selectedTags[h]["value"]):"sector"===i.selectedTags[h]["type"]?d.push(i.selectedTags[h]["value"]):"stock"===i.selectedTags[h]["type"]&&u.push(i.selectedTags[h]["value"]);for(var _=0;_<i.selectedTagFilters.length;_++)p.push(i.selectedTagFilters[_]["value"]);if(c.length>0){for(var f=!0,m=0;m<c.length;m++){for(var v=0;v<e.length;v++)e[v]["instrument_type"]===c[m]&&s.push(e[v]);"EQ"!==c[m]&&"EQD"!==c[m]&&"GOLD"!==c[m]||(f=!1)}i.onlyMF=f}else s=e;if(d.length>0)for(var A=0;A<d.length;A++)for(var y=0;y<s.length;y++)s[y].isin_breakdown?function(){var t=!1,e=JSON.parse(JSON.stringify(s[y]));e["detailedSymbol"]=s[y]["tradingsymbol"];var a=0;for(var i in s[y]["isin_breakdown"])s[y]["isin_breakdown"][i]["sector"].toUpperCase()===d[A].toUpperCase()&&(a+=parseFloat(e["isin_breakdown"][i]["weightage"]),t=!0);if(t){e["detailedSymbol"]=e["detailedSymbol"]+" <span class='detailed-symbol'><span class='name'>"+d[A]+"</span>"+parseFloat(a).toFixed(2)+"%</span>";var r=n.findIndex((function(t){return t.tradingsymbol===e.tradingsymbol}));-1!==r?n[r]["detailedSymbol"]=n[r]["detailedSymbol"]+" <span class='detailed-symbol'><span class='name'>"+d[A]+"</span>"+parseFloat(a).toFixed(2)+"%</span>":n.push(e)}}():s[y]["sector"].toUpperCase()===d[A].toUpperCase()&&n.push(s[y]);else n=s;if(u.length>0)for(var b=0;b<u.length;b++)for(var C=0;C<n.length;C++)n[C].isin_breakdown?function(){var t=!1,e=JSON.parse(JSON.stringify(n[C]));e["detailedSymbol"]=n[C]["tradingsymbol"];var a=0;for(var i in n[C]["isin_breakdown"])n[C]["isin_breakdown"][i]["tradingsymbol"]===u[b]&&(a=parseFloat(e["isin_breakdown"][i]["weightage"]),t=!0);if(t){e["detailedSymbol"]=e["detailedSymbol"]+" <span class='detailed-symbol'><span class='name'>"+u[b]+"</span>"+parseFloat(a).toFixed(2)+"%</span>";var s=r.findIndex((function(t){return t.tradingsymbol===e.tradingsymbol}));-1!==s?r[s]["detailedSymbol"]=r[s]["detailedSymbol"]+" <span class='detailed-symbol'><span class='name'>"+u[b]+"</span>"+parseFloat(a).toFixed(2)+"%</span>":r.push(e)}}():n[C]["tradingsymbol"]===u[b]&&r.push(n[C]);else r=n;if(g.length>0)for(var w=0;w<g.length;w++)for(var k=function(t){r.isin_breakdown||r[t][g[w]]>0&&!o.find((function(e){return e.client_id===r[t].client_id&&e.tradingsymbol===r[t].tradingsymbol}))&&o.push(r[t])},x=0;x<r.length;x++)k(x);else o=r;if(p.length>0&&!a){for(var T=[],F=0;F<p.length;F++)for(var E=0;E<o.length;E++)if(o[E]["tags"])for(var D=0;D<o[E]["tags"].length;D++)o[E]["tags"][D].id===p[F]&&-1===T.indexOf(o[E].instrument_id)&&(l.push(o[E]),T.push(o[E].instrument_id))}else l=o;0===t?(i.holdings_items=l,0===l.length?i.noFilterResults=!0:(i.noFilterResults=!1,i.computeAggregates())):0===l.length?i.noFilterResultsFamily=!0:(i.noFilterResultsFamily=!1,i.combineChildren(l),i.computeAggregatesFamily(),i.getChildSummary(),i.hideFamilyFilterModal())},r=0;r<2;r++)n(r)},getKiteHoldings:function(){var t=this;Q["a"].request("GET",!1,R["a"].getKiteHoldings,null,(function(e,a){"SUCCESS"===e.toUpperCase()?t.kiteHoldings=a.data.data.result:"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching Kite holdings: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching Kite holdings:"+Q["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})})),this.kiteHoldings=[{tradingsymbol:"ASHOKLEY",exchange:"NSE",instrument_token:54273,isin:"INE208A01029",product:"CNC",price:0,quantity:40,t1_quantity:0,realised_quantity:40,collateral_quantity:0,collateral_type:"",average_price:118.5,last_price:111.2,close_price:110.8,pnl:-291.9999999999999,day_change:.4000000000000057,day_change_percentage:.3610108303249149},{tradingsymbol:"BANKINDIA",exchange:"NSE",instrument_token:1214721,isin:"INE084A01016",product:"CNC",price:0,quantity:14,t1_quantity:0,realised_quantity:14,collateral_quantity:0,collateral_type:"",average_price:49,last_price:50.6,close_price:49.8,pnl:22.40000000000002,day_change:.8000000000000043,day_change_percentage:1.6064257028112534}]},changeSource:function(t){this.treeSource=t},setSectorData:function(t){this.sectorData=[];for(var e=0;e<(t.data1.length>=3?3:t.data1.length);e++)this.sectorData.push(t.data1[e]);this.topSector=t.data2?t.data2.name:""},setFilter:function(t){this.selectedFilters=[],this.selectedFilters.push(t),this.getHoldingsData(this.params.date,!1,!1,!0)},toShowContextMenu:function(t){this.contextMenuInstrumentId=t.instrument_id},toHideContextMenu:function(t){this.contextMenuInstrumentId=""},isActiveFilter:function(t){return-1!==this.selectedFilters.indexOf(t)},toggleFilterModalWrapper:function(){this.showFilterModalWrapper=!this.showFilterModalWrapper,this.showFilterModalWrapper?document.getElementsByClassName("mobileFilter")[0]&&document.getElementsByClassName("mobileFilter")[0].classList.add("mobile"):document.getElementsByClassName("mobileFilter")[0]&&document.getElementsByClassName("mobileFilter")[0].classList.remove("mobile")},hideFilterModalWrapper:function(){this.showFilterModalWrapper=!1,document.getElementsByClassName("mobileFilter")[0]&&document.getElementsByClassName("mobileFilter")[0].classList.remove("mobile")},toggleSelectedFilters:function(){var t=document.getElementsByClassName("ti-new-tag-input")[0];0!==t.value.trim().length?this.selectedFiltersModal=!1:this.selectedFiltersModal=!this.selectedFiltersModal},hideSelectedFilters:function(t){document.getElementsByClassName("mobileFilter")[0]&&(t||0===this.holdingsFilter.trim().length)&&document.getElementsByClassName("mobileFilter")[0].classList.remove("mobile"),this.selectedFiltersModal=!1},showSelectedFilters:function(t){this.selectedFiltersModal=!0,document.getElementsByClassName("mobileFilter")[0]&&document.getElementsByClassName("mobileFilter")[0].classList.add("mobile"),this.hideSelectedTags()},resetFilters:function(){this.selectedFilters=[],this.filterData(),this.hideSelectedFilters()},scrollToDiscrepant:function(t){if(t){var e="EQ",a=t["instrument_id"];-1!==t.instrument_type.indexOf("MF")&&(e="MF"),this.$router.push({name:"discrepancies",params:{segment:e.toUpperCase(),instrument_id:a}})}},downloadData:function(){var t=this,e=R["a"].downloadHoldings+"?date="+this.formatDate(this.params.date);Q["a"].request("GET",!0,e,null,(function(a,i){a&&"PENDING"===a.toUpperCase()?setTimeout((function(){t.downloadData()}),500):a&&"UNDEFINED"===a.toUpperCase()?-1!==i.headers["content-type"].indexOf("spreadsheet")?window.location.href=e+"&csrf="+t.csrf:t.$toast.error({message:"Error downloading holdings: "+i.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error downloading holdings:"+Q["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},getMFComposition:function(t){for(var e in this.mfComposition=[],this.mfCompositionName=t["tradingsymbol"],t["isin_breakdown"])""!==e&&null!==t["isin_breakdown"][e]["instrument_id"]&&""!==t["isin_breakdown"][e]["instrument_id"]&&this.mfComposition.push({name:t["isin_breakdown"][e]["tradingsymbol"],weightage:t["isin_breakdown"][e]["weightage"],sector:t["isin_breakdown"][e]["sector"]});this.mfComposition.sort((function(t,e){return e.weightage-t.weightage})),this.showMfCompositionModal()},showMfCompositionModal:function(){this.showMfComposition=!0},hideMfCompositionModal:function(){this.showMfComposition=!1},getXIRR:function(){var t=this;this.fetchingXIRR=!0,this.breakdownXIRR=0;var e=this.instrument.instrument_type;-1!==e.indexOf("MF")&&(e="MF");var a=R["a"].getXIRR+"?segment="+e;this.instrument.instrument_id?a+="&instrument_id="+this.instrument.instrument_id:a+="&isin="+this.instrument.isin,Q["a"].request("GET",!1,a,null,(function(e,a){t.fetchingXIRR=!1,"SUCCESS"===e.toUpperCase()?t.breakdownXIRR=a.data.data.result||"–":"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching XIRR: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching XIRR:"+Q["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},getHoldingsBreakdown:function(t){var e=this;this.instrument=t,this.getXIRR();var a="",i="EQ";if(-1!==t.instrument_type.indexOf("MF")&&(i="MF"),this.breakdownSymbol=t["tradingsymbol"],this.breakdownQty=t["qty_total"],this.breakdownLTP=0===t["quantity_discrepant"]&&null!==t["close_price"]?t["close_price"]:0,this.breakdownDel=t["quantity_available"]-t["quantity_t1"],this.breakdownT1=t["quantity_t1"],this.breakdownQtyLoan=t["quantity_pledged_for_loan"],this.breakdownQtyMargin=t["quantity_pledged_for_margin"],this.selectedHolding=t,!this.instrument["instrument_id"]||!this.segmentState)return this.fetchingBreakdown=!1,this.holdingsBreakdownError=!0,void this.$toast.error({message:"Not enough data to fetch breakdown",orientation:this.$toast.TOP_RIGHT,duration:4e3});if(a=R["a"].getHoldingsBreakdown+"?instrument_id="+this.instrument["instrument_id"]+"&segment="+i,"family"===this.familySwitch&&this.familyList&&this.familyList.filter((function(t){return t.isChecked})).length)for(var s in this.familyList)this.familyList[s].isChecked&&(a+="&children="+this.familyList[s].user_id);this.holdingsBreakdownError=!1,this.showBreakdown(),this.fetchingBreakdown=!0,Q["a"].request("GET",!1,a,null,(function(a,i){if(e.fetchingBreakdown=!1,"SUCCESS"===a.toUpperCase()){e.isMobileFetching&&(e.breakdownSymbol=t["tradingsymbol"],e.breakdownQty=t["qty_total"],e.breakdownLTP=0===t["quantity_discrepant"]&&null!==t["close_price"]?t["close_price"]:0,e.breakdownDel=t["quantity_available"]-t["quantity_t1"],e.breakdownT1=t["quantity_t1"],e.breakdownQtyLoan=t["quantity_pledged_for_loan"],e.breakdownQtyMargin=t["quantity_pledged_for_margin"],e.selectedHolding=t),e.holdingsBreakdown=i.data.data.result;var s=e.consolePendingTags.find((function(t){return"holding"===t.target_type})),n={},r=[];if(s&&(n=s.tags.find((function(t){return t.target_id===e.instrument.instrument_id})),n)){var o=n.deleted_tag_ids?e.consoleTags.filter((function(t){return-1!==n.deleted_tag_ids.indexOf(parseInt(t.id))})):[],l=n.added_tag_ids?e.consoleTags.filter((function(t){return-1!==n.added_tag_ids.indexOf(parseInt(t.id))})):[];r=o.concat(l)}var c=e.consolePendingTags.find((function(t){return"order"===t.target_type})),d=function(t){var a=new Date,i=new Date(e.holdingsBreakdown[t]["order_execution_time"]),s=Math.round(parseFloat((a-i)/864e5));e.holdingsBreakdown[t]["days"]=s;var o=e.consoleTags.filter((function(a){return-1!==e.holdingsBreakdown[t].tags.indexOf(parseInt(a.id))}));e.holdingsBreakdown[t]["tags"]=o,e.holdingsBreakdown[t]["pendingTag"]=!1,e.holdingsBreakdown[t]["pendingTags"]=[];var l=[],d=[];if(c){l=c.tags.filter((function(a){return a.target_id===e.holdingsBreakdown[t].order_id}));for(var u=function(t){if(l[t].added_tag_ids)for(var a=function(a){d.push(e.consoleTags.find((function(e){return l[t].added_tag_ids[a]===parseInt(e.id)})))},i=0;i<l[t].added_tag_ids.length;i++)a(i);if(l[t].deleted_tag_ids)for(var s=function(a){d.push(e.consoleTags.find((function(e){return l[t].deleted_tag_ids[a]===parseInt(e.id)})))},n=0;n<l[t].deleted_tag_ids.length;n++)s(n)},g=0;g<l.length;g++)u(g)}var p=r.concat(d);p=e.getUnique(p,(function(t){return t.id})),e.holdingsBreakdown[t]["pendingTags"]=p,(n&&Object.keys(n).length>0||l.length>0)&&(e.holdingsBreakdown[t].pendingTag=!0)};for(var u in e.holdingsBreakdown)d(u)}else"FAILURE"===a.toUpperCase()?(e.holdingsBreakdownError=!0,e.$toast.error({message:"Error fetching breakdown: "+i.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3})):(e.holdingsBreakdownError=!0,e.$toast.error({message:"Error fetching breakdown:"+Q["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3}))}))},getHoldingsDividend:function(t){var e=this;this.dividendSymbol=t["tradingsymbol"],this.dividendIsin=t["isin"],this.instrument=t;var a="",i="EQ";if(-1===t.instrument_type.indexOf("EQ")&&-1===t.instrument_type.indexOf("GOLD")&&(i="MF"),this.isMobileFetching){if(!this.instrument["isin"]||!this.segmentState)return this.fetchingDividend=!1,this.holdingsDividendError=!0,void this.$toast.error({message:"Not enough data to fetch dividends",orientation:this.$toast.TOP_RIGHT,duration:6e3});if(a=R["a"].getHoldingsDividends+"?isin="+t["isin"]+"&segment="+i,"family"===this.familySwitch&&this.familyList&&this.familyList.filter((function(t){return t.isChecked})).length)for(var s in this.familyList)this.familyList[s].isChecked&&(a+="&children="+this.familyList[s].user_id)}else{if(!this.instrument["instrument_id"]||!this.segmentState)return this.fetchingDividend=!1,this.holdingsDividendError=!0,void this.$toast.error({message:"Not enough data to fetch dividends",orientation:this.$toast.TOP_RIGHT,duration:6e3});a=R["a"].getHoldingsDividends+"?instrument_id="+this.instrument["instrument_id"]+"&segment="+i}this.holdingsDividendError=!1,this.showDividend(),this.fetchingDividend=!0,Q["a"].request("GET",!1,a,null,(function(t,a){e.fetchingDividend=!1,"SUCCESS"===t.toUpperCase()?e.holdingsDividend=a.data.data.result:"FAILURE"===t.toUpperCase()?(e.holdingsDividendError=!0,e.$toast.error({message:"Error fetching tags: "+a.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3})):(e.holdingsDividendError=!0,e.$toast.error({message:"Error fetching tags:"+Q["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3}))}))},showMenu:function(t){t.target.children.length>0?(t.target.children[3].classList.toggle("show"),null!==this.lastClicked&&this.lastClicked!==t.target.children[3]&&this.lastClicked.classList.toggle("show"),this.lastClicked=t.target.children[3]):(t.target.parentNode.children[3].classList.toggle("show"),null!==this.lastClicked&&this.lastClicked!==t.target.parentNode.children[3]&&this.lastClicked.classList.toggle("show"),this.lastClicked=t.target.parentNode.children[3])},isSorted:function(t){return t===this.sortKey?" sorted":""},getsortBy:function(t){return t===this.sortKey?"arrow-show arrow "+this.sortBy:"asc"},sortMobileTable:function(){this.params.page=1,this.sortingData=!0,"personal"===this.familySwitch?this.getHoldingsData(this.params.date,!0):this.getFamilyHoldingsData(this.params.date,!0),this.hideSortModal()},sortTable:function(t,e){if(j=[],t===this.sortKey)if("asc"===this.sortBy){this.sortBy="desc";for(var a=document.getElementById("holdings_table").querySelectorAll("thead th span.arrow"),i=0;i<a.length;i++)a[i].className="arrow asc";e.target.querySelector("span.arrow")?e.target.querySelector("span.arrow").className="arrow desc":-1===e.target.className.indexOf("icon")&&(e.target.className="arrow desc")}else{this.sortBy="asc";for(var s=document.getElementById("holdings_table").querySelectorAll("thead th span.arrow"),n=0;n<s.length;n++)s[n].className="arrow asc";e.target.querySelector("span.arrow")?e.target.querySelector("span.arrow").className="arrow asc":-1===e.target.className.indexOf("icon")&&(e.target.className="arrow asc")}else{this.sortKey=t,this.sortBy="asc";for(var r=document.getElementById("holdings_table").querySelectorAll("thead th span.arrow"),o=0;o<r.length;o++)r[o].className="arrow asc";e.target.querySelector("span.arrow")?e.target.querySelector("span.arrow").className="arrow asc":-1===e.target.className.indexOf("icon")&&(e.target.className="arrow asc"),this.params.page=1}this.sortingData=!0,"personal"===this.familySwitch?this.getHoldingsData(this.params.date,!0):this.getFamilyHoldingsData(this.params.date,!0)},compare:function(t,e){return"tradingsymbol"===this.sortKey?t[this.sortKey]<e[this.sortKey]?"desc"===this.sortBy?1:-1:t[this.sortKey]>e[this.sortKey]?"desc"===this.sortBy?-1:1:0:null===t[this.sortKey]?1:null===e[this.sortKey]?-1:parseFloat(t[this.sortKey])<parseFloat(e[this.sortKey])?"desc"===this.sortBy?1:-1:parseFloat(t[this.sortKey])>parseFloat(e[this.sortKey])?"desc"===this.sortBy?-1:1:0},sortWeightage:function(){this.sortKey="",this.sortBy="","desc"===this.weightageSortby||!1===this.isWeightageSorted?this.weightageSortby="asc":this.weightageSortby="desc",this.isWeightageSorted=!0;var t=this.holdings_items;t.sort(this.compare)},pollData:function(t){var e=this;this.pollCount[t]++,"personal"===t?this.firstPoll?setTimeout((function(){return e.getHoldingsData(e.date)}),500):setTimeout((function(){return e.getHoldingsData(e.date)}),1e3):this.firstPoll?setTimeout((function(){return e.getFamilyHoldingsData(e.date)}),500):setTimeout((function(){return e.getFamilyHoldingsData(e.date)}),1e3),this.firstPoll=!1},getHoldingsData:function(t,e,a,i){var s=this;if(this.noFilterResults=!1,this.filteringData=!1,this.holdingsError=!1,this.noResults=!1,this.hideFilterModalWrapper(),i)this.filterData();else{if(e||a||(this.fetchingData=!0),a&&(this.sortingData=!0),e)return j=this.holdings_items,j.sort(this.compare),void(this.sortingData=!1);j=[],this.date=t||new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),this.params={date:this.date},sessionStorage.setItem("console_holdings",JSON.stringify(this.params));var n=Y(R["a"].getHoldings,this.formatDate(this.date));this.toggleInputContainer(!0),Q["a"].request("GET",!0,n,null,(function(t,n){if(s.holdings_items=[],s.holdings=[],s.sectorFilters=[],s.hasBreakdown={},"PENDING"===t.toUpperCase())s.pollCount["personal"]<10?(s.job=!0,s.pollData("personal")):(s.job=!1,s.fetchingData=!1,s.sortingData=!1,s.$toast.error({message:"Error fetching holdings: Request timed out",orientation:s.$toast.TOP_RIGHT,duration:6e3}),s.pollCount["personal"]=0,sessionStorage.getItem("console_holdings")&&sessionStorage.removeItem("console_holdings"));else if("SUCCESS"===t.toUpperCase()){(s.initFetch||!i&&!e&&!a)&&s.familyList&&s.familyList.length>1&&s.familyList.filter((function(t){return t.isChecked})).length&&!s.familyList.find((function(t){return!t.hasOwnProperty("user_id")||!t.user_id}))?s.getFamilyHoldingsData(s.date):(s.initFetch=!1,s.noResultsFamily=!0),"familyHoldings"===s.$route.name&&(s.familySwitch="family"),s.pollCount["personal"]=0,s.firstPoll=!0;var r=n.data.data.result;s.hasBreakdown=r.has_breakdown,delete r.has_breakdown;var o=function(t){for(var e=r[t],a=function(a){var i=e[a];-1!==e[a]["instrument_type"].toUpperCase().indexOf("DEBT")?i["instrument_type"]=t.toUpperCase()+"D":"GOLD"===e[a]["instrument_type"].toUpperCase()?i["instrument_type"]="GOLD":i["instrument_type"]=t.toUpperCase(),s.sectorFilters.some((function(t){return t.text===e[a]["sector"]}))||""===e[a]["sector"]||"-"===e[a]["sector"]||s.sectorFilters.push({text:e[a]["sector"],value:e[a]["sector"],type:"sector",classes:"sector-tag",includesMF:!1});var n=parseFloat(i["quantity_available"])+parseFloat(i["quantity_pledged_for_loan"])+parseFloat(i["quantity_pledged_for_margin"]);if(i["quantity_available_pledge"]=i["quantity_available"]-i["quantity_t1"],i["quantity_short_term"]=n-(i["quantity_long_term"]||0),isNaN(n)?i["qty_total"]=0:(parseFloat(n)%1!==0&&(n=parseFloat(n).toFixed(3)),i["qty_total"]=n),i.ltp&&s.hasBreakdown&&(i["close_price"]=i.ltp,i["closing_value"]=parseFloat(parseFloat(parseFloat(i.ltp)*parseFloat(i.qty_total)).toFixed(2)),i["unrealized_profit"]=i.closing_value-i.holdings_buy_value,i["unrealized_profit_percentage"]=0!==i.holdings_buy_value?100*(i.closing_value-i.holdings_buy_value)/i.holdings_buy_value:null),i["row"]=a,i["tags"]=[],Object.keys(s.holdingsTags).length>0){var r=function(t){if("EQ"===t.toUpperCase()||"MF"===t.toUpperCase())for(var e=function(e){if(i.instrument_id===s.holdingsTags[t][e].instrument_id){var a=s.consoleTags.filter((function(a){return-1!==s.holdingsTags[t][e].tags.indexOf(parseInt(a.id))}));i["tags"]=a}},a=0;a<s.holdingsTags[t].length;a++)e(a)};for(var o in s.holdingsTags)r(o)}if(i["pendingTag"]=!1,s.consolePendingTags.length>0){var l=s.consolePendingTags.find((function(t){return"holding"===t.target_type}));if(l){var c=l.tags.find((function(t){return t.target_id===i.instrument_id}));c&&(i["pendingTag"]=!0)}}s.holdings_items.push(i),s.holdings.push(i)},i=0;i<e.length;i++)a(i)};for(var l in r)o(l);for(var c=!0,d=function(t){if(s.holdings[t].isin_breakdown){var e=function(e){""!==s.holdings[t]["isin_breakdown"][e]["instrument_id"]&&null!==s.holdings[t]["isin_breakdown"][e]["instrument_id"]&&(s.tags.some((function(a){return a.text===s.holdings[t]["isin_breakdown"][e]["tradingsymbol"]}))?s.tags[s.tags.findIndex((function(a){return a.text===s.holdings[t]["isin_breakdown"][e]["tradingsymbol"]}))]["includesMF"]=!0:s.tags.push({text:s.holdings[t]["isin_breakdown"][e]["tradingsymbol"],value:s.holdings[t]["isin_breakdown"][e]["tradingsymbol"],type:"stock",classes:"stock-tag",sector:s.holdings[t]["isin_breakdown"][e]["sector"],includesMF:!0}),s.sectorFilters.some((function(a){return a.text===s.holdings[t]["isin_breakdown"][e]["sector"]}))?s.sectorFilters[s.sectorFilters.findIndex((function(a){return a.text===s.holdings[t]["isin_breakdown"][e]["sector"]}))]["includesMF"]=!0:s.sectorFilters.push({text:s.holdings[t]["isin_breakdown"][e]["sector"],value:s.holdings[t]["isin_breakdown"][e]["sector"],type:"sector",classes:"sector-tag",includesMF:!0}))};for(var a in s.holdings[t]["isin_breakdown"])e(a)}else c=!1,""!==s.holdings[t]["instrument_id"]&&null!==s.holdings[t]["instrument_id"]&&(s.tags.some((function(e){return e.text===s.holdings[t]["tradingsymbol"]}))||s.tags.push({text:s.holdings[t]["tradingsymbol"],value:s.holdings[t]["tradingsymbol"],type:"stock",classes:"stock-tag",sector:s.holdings[t]["sector"],includesMF:!1}))},u=0;u<s.holdings.length;u++)d(u);s.onlyMF=c;for(var g=function(t){s.tags.some((function(e){return e.text===s.sectorFilters[t]["text"]}))||s.tags.push(s.sectorFilters[t])},p=0;p<s.sectorFilters.length;p++)g(p);s.sortingData=!1;var h=!1;if(e||a||(h=!0,s.fetchTags(),s.getPledgeHistory()),a&&s.getPledgeHistory(!0),0===s.holdings.length?s.noResults=!0:s.noResults=!1,document.getElementById("holdings_table"))for(var _=document.getElementById("holdings_table").querySelectorAll("tbody tr"),f=0;f<_.length;f++)_[f].className="";if((!s.familyList||s.familyList.length<=1||s.familyList.find((function(t){return!t.hasOwnProperty("user_id")||!t.user_id})))&&!h&&(s.fetchingData=!1,s.job=!1),s.sortingData=!1,s.kiteBreakdownItem.isin){var m=s.holdings_items.find((function(t){return t.isin===s.kiteBreakdownItem.isin}));m?s.getHoldingsBreakdown(m):(s.fetchingBreakdown=!1,s.holdingsBreakdownError=!0,s.$toast.error({message:"Not enough data to fetch breakdown",orientation:s.$toast.TOP_RIGHT,duration:4e3}))}}else"FAILURE"===t.toUpperCase()?(sessionStorage.getItem("console_holdings")&&sessionStorage.removeItem("console_holdings"),s.pollCount["personal"]=0,s.job=!1,s.fetchingData=!1,s.sortingData=!1,s.firstPoll=!0,s.holdingsError=!0,s.$toast.error({message:"Error fetching holdings: "+n.data.message,orientation:s.$toast.TOP_RIGHT,duration:6e3})):"UNDEFINED"===t.toUpperCase()&&(sessionStorage.getItem("console_holdings")&&sessionStorage.removeItem("console_holdings"),s.pollCount["personal"]=0,s.job=!1,s.fetchingData=!1,s.sortingData=!1,s.$toast.error({message:"Error fetching holdings:"+Q["a"].errorMessage(),orientation:s.$toast.TOP_RIGHT,duration:6e3}))}))}},combineChildren:function(t){var e=this,a=[],i=function(i){e.familyList.find((function(e){return e.isChecked&&e.user_id===t[i].client_id}))&&a.push(t[i])};for(var s in t)i(s);var n=[],r=["closing_value","holdings_buy_value","quantity_available","quantity_discrepant","quantity_long_term","quantity_short_term","quantity_pledged_for_loan","quantity_pledged_for_margin","quantity_t1","qty_total","unrealized_profit"];this.holdings_items_family=[];var o=function(t){var i=a.filter((function(e){return e.instrument_id===a[t].instrument_id})),s={},o=!1;for(var l in i){if(0===parseInt(l)&&-1!==n.indexOf(i[l].instrument_id)){o=!0;break}if(0===parseInt(l))s=i[l],s["client_ids"]=[],s["client_ids"].push({client_id:i[l].client_id,qty:i[l].qty_total});else{for(var c in i[l])-1!==r.indexOf(c)&&(s[c]||(s[c]=0),i[l][c]&&(s[c]+=parseFloat(i[l][c])));s["client_ids"].push({client_id:i[l].client_id,qty:i[l].qty_total})}n.push(i[l].instrument_id)}if(!o){var d=parseFloat(s.holdings_buy_value)/parseFloat(s.qty_total);d=parseFloat(parseFloat(d).toFixed(3)),s.buy_average=d;var u="",g="";s.holdings_buy_value&&s.closing_value&&(u=parseFloat(parseFloat(s.closing_value).toFixed(2)-parseFloat(s.holdings_buy_value).toFixed(2)),g=parseFloat(parseFloat(u/parseFloat(s.holdings_buy_value)*100).toFixed(2))),s.unrealized_profit=u,s.unrealized_profit_percentage=g,e.holdings_items_family.push(s)}};for(var l in a)o(l)},getFamilyHoldingsData:function(t,e,a,i){var s=this;if(this.noFilterResultsFamily=!1,this.filteringData=!1,this.holdingsErrorFamily=!1,this.noResultsFamily=!1,this.hideFilterModalWrapper(),this.hideFamilyFilterModal(),i)this.filterData(null,null,!0);else{if(e||a||(this.fetchingData=!0),a&&(this.sortingData=!0),e)return z=this.holdings_items_family,z.sort(this.compare),void(this.sortingData=!1);z=[],this.date=t||new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),this.params={date:this.date},sessionStorage.setItem("console_holdings",JSON.stringify(this.params));var n=Y(R["a"].getHoldings,this.formatDate(this.date));if(this.familyList)for(var r in this.familyList)n+="&children="+this.familyList[r].user_id;this.toggleInputContainer(!0),Q["a"].request("GET",!0,n,null,(function(t,e){if(s.holdings_items_family=[],s.holdingsFamily=[],s.sectorFiltersFamily=[],s.hasBreakdown={},"PENDING"===t.toUpperCase())s.pollCount["family"]<10?(s.job=!0,s.pollData("family")):(s.job=!1,s.fetchingData=!1,s.sortingData=!1,s.$toast.error({message:"Error fetching family holdings: Request timed out",orientation:s.$toast.TOP_RIGHT,duration:6e3}),s.pollCount["family"]=0,sessionStorage.getItem("console_holdings")&&sessionStorage.removeItem("console_holdings"));else if("SUCCESS"===t.toUpperCase()){s.pollCount["family"]=0,s.firstPoll=!0;var a=e.data.data.result;s.hasBreakdown=a.has_breakdown,delete a.has_breakdown;var i=!0,n=function(t){for(var e=a[t],n=function(a){var n=e[a];-1!==e[a]["instrument_type"].toUpperCase().indexOf("DEBT")?n["instrument_type"]=t.toUpperCase()+"D":"GOLD"===e[a]["instrument_type"].toUpperCase()?n["instrument_type"]="GOLD":n["instrument_type"]=t.toUpperCase(),s.sectorFilters.some((function(t){return t.text===e[a]["sector"]}))||""===e[a]["sector"]||"-"===e[a]["sector"]||s.sectorFilters.push({text:e[a]["sector"],value:e[a]["sector"],type:"sector",classes:"sector-tag",includesMF:!1}),n["row"]=a;var r=parseFloat(n["quantity_available"])+parseFloat(n["quantity_pledged_for_loan"])+parseFloat(n["quantity_pledged_for_margin"]);if(n["quantity_available_pledge"]=n["quantity_available"]-n["quantity_t1"],n["quantity_short_term"]=r-n["quantity_long_term"],isNaN(r)?n["qty_total"]=0:(parseFloat(r)%1!==0&&(r=parseFloat(r).toFixed(3)),n["qty_total"]=parseFloat(r)),n.ltp&&s.hasBreakdown&&(n["close_price"]=n.ltp,n["closing_value"]=parseFloat(parseFloat(parseFloat(n.ltp)*parseFloat(n.qty_total)).toFixed(2)),n["unrealized_profit"]=n.closing_value-n.holdings_buy_value,n["unrealized_profit_percentage"]=100*(n.closing_value-n.holdings_buy_value)/n.holdings_buy_value),n.isin_breakdown){var o=function(t){""!==n["isin_breakdown"][t]["instrument_id"]&&null!==n["isin_breakdown"][t]["instrument_id"]&&(s.tags.some((function(e){return e.text===n["isin_breakdown"][t]["tradingsymbol"]}))?s.tags[s.tags.findIndex((function(e){return e.text===n["isin_breakdown"][t]["tradingsymbol"]}))]["includesMF"]=!0:s.tags.push({text:n["isin_breakdown"][t]["tradingsymbol"],value:n["isin_breakdown"][t]["tradingsymbol"],type:"stock",classes:"stock-tag",sector:n["isin_breakdown"][t]["sector"],includesMF:!0}),s.sectorFilters.some((function(e){return e.text===n["isin_breakdown"][t]["sector"]}))?s.sectorFilters[s.sectorFilters.findIndex((function(e){return e.text===n["isin_breakdown"][t]["sector"]}))]["includesMF"]=!0:s.sectorFilters.push({text:n["isin_breakdown"][t]["sector"],value:n["isin_breakdown"][t]["sector"],type:"sector",classes:"sector-tag",includesMF:!0}))};for(var l in n["isin_breakdown"])o(l)}else i=!1,""!==n["instrument_id"]&&null!==n["instrument_id"]&&(s.tags.some((function(t){return t.text===n["tradingsymbol"]}))||s.tags.push({text:n["tradingsymbol"],value:n["tradingsymbol"],type:"stock",classes:"stock-tag",sector:n["sector"],includesMF:!1}));s.holdingsFamily.push(n)},r=0;r<e.length;r++)n(r)};for(var r in a)n(r);s.onlyMF=i;for(var o=function(t){s.tags.some((function(e){return e.text===s.sectorFilters[t]["text"]}))||s.tags.push(s.sectorFilters[t])},l=0;l<s.sectorFilters.length;l++)o(l);if(s.fetchingData=!1,s.job=!1,s.sortingData=!1,s.$route.query&&s.$route.query.subaccount&&s.initFetch?(s.modifyingFamily=!0,s.$nextTick((function(){var t=s.familyList.findIndex((function(t){return t.user_id===s.$route.query.subaccount}));if(-1!==t){for(var e in s.familyList)s.familyList[e].isChecked=!1;s.familyList[t].isChecked=!0}else console.log("Invalid sub-account.");s.modifyingFamily=!1,s.familySwitch="family",s.filterData(null,null,!0)}))):s.filterData(null,null,!0),s.initFetch=!1,s.sortingData=!1,0===s.holdingsFamily.length?s.noResultsFamily=!0:s.noResultsFamily=!1,document.getElementById("holdings_table"))for(var c=document.getElementById("holdings_table").querySelectorAll("tbody tr"),d=0;d<c.length;d++)c[d].className=""}else"FAILURE"===t.toUpperCase()?(sessionStorage.getItem("console_holdings")&&sessionStorage.removeItem("console_holdings"),s.pollCount["family"]=0,s.job=!1,s.fetchingData=!1,s.sortingData=!1,s.firstPoll=!0,s.holdingsErrorFamily=!0,s.$toast.error({message:"Error fetching family holdings: "+e.data.message,orientation:s.$toast.TOP_RIGHT,duration:6e3})):"UNDEFINED"===t.toUpperCase()&&(sessionStorage.getItem("console_holdings")&&sessionStorage.removeItem("console_holdings"),s.pollCount["family"]=0,s.job=!1,s.fetchingData=!1,s.sortingData=!1,s.$toast.error({message:"Error fetching family holdings:"+Q["a"].errorMessage(),orientation:s.$toast.TOP_RIGHT,duration:6e3}))}))}},computeAggregates:function(){this.holdings_aggregation={total_buy_value:0,total_closing_value:0,total_unrealized_profit:0,total_unrealized_profit_percentage:0};for(var t=0;t<this.holdings_items.length;t++)isNaN(parseFloat(this.holdings_items[t]["buy_average"]))||isNaN(parseFloat(this.holdings_items[t]["holdings_buy_value"]))||0!==parseFloat(this.holdings_items[t]["quantity_discrepant"])||(this.holdings_aggregation["total_buy_value"]+=parseFloat(this.holdings_items[t]["holdings_buy_value"]),isNaN(parseFloat(this.holdings_items[t]["closing_value"]))?this.holdings_aggregation["total_closing_value"]+=parseFloat(this.holdings_items[t]["holdings_buy_value"]):this.holdings_aggregation["total_closing_value"]+=parseFloat(this.holdings_items[t]["closing_value"]));this.holdings_aggregation["total_unrealized_profit"]=this.holdings_aggregation["total_closing_value"]-this.holdings_aggregation["total_buy_value"],this.holdings_aggregation["total_buy_value"]>0?this.holdings_aggregation["total_unrealized_profit_percentage"]=(this.holdings_aggregation["total_closing_value"]-this.holdings_aggregation["total_buy_value"])/this.holdings_aggregation["total_buy_value"]*100:this.holdings_aggregation["total_unrealized_profit_percentage"]=100},computeAggregatesFamily:function(){this.holdings_aggregation_family={total_buy_value:0,total_closing_value:0,total_unrealized_profit:0,total_unrealized_profit_percentage:0};for(var t=0;t<this.holdings_items_family.length;t++)isNaN(parseFloat(this.holdings_items_family[t]["buy_average"]))||isNaN(parseFloat(this.holdings_items_family[t]["holdings_buy_value"]))||0!==parseFloat(this.holdings_items_family[t]["quantity_discrepant"])||(this.holdings_aggregation_family["total_buy_value"]+=parseFloat(this.holdings_items_family[t]["holdings_buy_value"]),isNaN(parseFloat(this.holdings_items_family[t]["closing_value"]))?this.holdings_aggregation_family["total_closing_value"]+=parseFloat(this.holdings_items_family[t]["holdings_buy_value"]):this.holdings_aggregation_family["total_closing_value"]+=parseFloat(this.holdings_items_family[t]["closing_value"]));this.holdings_aggregation_family["total_unrealized_profit"]=this.holdings_aggregation_family["total_closing_value"]-this.holdings_aggregation_family["total_buy_value"],this.holdings_aggregation_family["total_buy_value"]>0?this.holdings_aggregation_family["total_unrealized_profit_percentage"]=(this.holdings_aggregation_family["total_closing_value"]-this.holdings_aggregation_family["total_buy_value"])/this.holdings_aggregation_family["total_buy_value"]*100:this.holdings_aggregation_family["total_unrealized_profit_percentage"]=100},searchFilter:function(){this.searchQuery.trim().length>0?-1===this.selectedFilters.indexOf("")&&this.selectedFilters.push(""):-1!==this.selectedFilters.indexOf("")&&this.selectedFilters.splice(this.selectedFilters.indexOf(""),1)},showBreakdown:function(){this.showModal=!0},hideBreakdown:function(){this.showModal=!1,this.enableTagEdit=!0,this.enableBreakdownEdit=!1,this.hasChanged=!1},showDividend:function(){this.showDividendModal=!0},hideDividend:function(){this.showDividendModal=!1},computeCreatePledgeModal:function(t,e){var a=this;if(this.hasBreakdown){if(t["pending_pledge_qty"]>0)return void this.$toast.warning({message:"There is a pending pledge/unpledge request for this scrip.",orientation:this.$toast.TOP_RIGHT,duration:6e3});if(this.pledgeData=t,this.pledgeQty="",this.isConsent=!1,"pledge"===e)if(parseFloat(t["quantity_available_pledge"])>0){if(this.haircut&&0!==this.haircut.length){var i=this.haircut.find((function(t){return t.isin===a.pledgeData.isin}));i&&(this.pledgeData.haircut=i.haircut_value)}else this.getPledgeHaircut(t);this.showCreatePledgeModal()}else this.$toast.warning({message:"This instrument cannot be pledged. <a href='https://support.zerodha.com/category/console/portfolio/articles/unable-to-pledge'>Learn more</a>.",orientation:this.$toast.TOP_RIGHT,duration:8e3});else if("unpledge"===e){if(this.haircut&&0!==this.haircut.length){var s=this.haircut.find((function(t){return t.isin===a.pledgeData.isin}));s&&(this.pledgeData.haircut=s.haircut_value)}else this.getPledgeHaircut(t);this.showCreateUnpledgeModal()}}},showCreatePledgeModal:function(){this.requestID="",this.showCreatePledge=!0},showCreateUnpledgeModal:function(){this.showCreateUnpledge=!0},hideCreatePledgeModal:function(){this.acceptPledgeTerms=!1,this.showCreatePledge=!1},hideCreateUnpledgeModal:function(){this.showCreateUnpledge=!1},computeCancelPledgeModal:function(t){this.pledgeData=t,this.showCancelPledgeModal()},showCancelPledgeModal:function(){this.showCancelPledge=!0},hideCancelPledgeModal:function(){this.showCancelPledge=!1},showSmallcaseWidgetModal:function(){this.showSmallcaseWidget=!0},hideSmallcaseWidgetModal:function(){this.showSmallcaseWidget=!1},createPledgeRequest:function(t,e){var a=this;if("pledge"===e&&this.pledgeQty>0&&this.pledgeQty<=t["quantity_available_pledge"]||"unpledge"===e&&this.pledgeQty>0&&this.pledgeQty<=t["quantity_pledged_for_margin"]){if(null===t["isin"])return void this.$toast.warning({message:"Required information to perform this action is not available",orientation:this.$toast.TOP_RIGHT,duration:6e3});if(parseFloat(this.pledgeQty)%1!==0)return void this.$toast.error({message:"Quantity to be pledged must be in multiples of 1.",orientation:this.$toast.TOP_RIGHT,duration:4e3});this.pledging=!0;var i={quantity:parseFloat(this.pledgeQty),trading_symbol:t["tradingsymbol"],isin:t["isin"],pledge_type:e.charAt(0).toUpperCase()+e.slice(1),close_price:parseFloat(t["close_price"]),previous_quantity:parseFloat(t["quantity_available_pledge"])};Q["a"].request("POST",!1,R["a"].placePledgeRequest,i,(function(i,s){a.pledging=!1,"SUCCESS"===i.toUpperCase()?(a.getHoldingsData(a.params.date,!1,!0),"pledge"===e?a.$toast.success({message:"Pledge request for "+t["tradingsymbol"]+" (Qty. "+a.pledgeQty+") successful. Please authorize pledge on CDSL. An email with more details has been sent.",orientation:a.$toast.TOP_RIGHT,duration:8e3}):a.$toast.success({message:"Unpledge request for "+t["tradingsymbol"]+" (Qty. "+a.pledgeQty+") successful",orientation:a.$toast.TOP_RIGHT,duration:6e3})):"FAILURE"===i.toUpperCase()?(a.hideCreatePledgeModal(),a.hideCreateUnpledgeModal(),a.$toast.error({message:"Error placing pledge request: "+s.data.message,orientation:a.$toast.TOP_RIGHT,duration:6e3})):(a.hideCreatePledgeModal(),a.hideCreateUnpledgeModal(),a.$toast.error({message:"Error placing pledge request:"+Q["a"].errorMessage(),orientation:a.$toast.TOP_RIGHT,duration:6e3}))}))}else this.$toast.warning({message:"Please enter a valid quantity",orientation:this.$toast.TOP_RIGHT,duration:6e3})},cancelPledgeRequest:function(t,e){var a=this;this.pledging=!0;var i={pledge_id:t["pending_pledge_id"]};Q["a"].request("POST",!1,R["a"].cancelPledgeRequest,i,(function(t,e){a.pledging=!1,"SUCCESS"===t.toUpperCase()?(a.getHoldingsData(a.params.date,!1,!0),a.hideCancelPledgeModal(),a.$toast.success({message:"Pledge/unpledge request cancelled successfully",orientation:a.$toast.TOP_RIGHT,duration:6e3})):"FAILURE"===t.toUpperCase()?(a.pledging=!1,a.hideCancelPledgeModal(),a.$toast.error({message:"Error cancelling pledge request: "+e.data.message,orientation:a.$toast.TOP_RIGHT,duration:6e3})):(a.pledging=!1,a.hideCancelPledgeModal(),a.$toast.error({message:"Error cancelling pledge request:"+Q["a"].errorMessage(),orientation:a.$toast.TOP_RIGHT,duration:6e3}))}))},getPledgeHaircut:function(t){var e=this;this.pledgeError=!1,this.fetchingHaircut=!0,Q["a"].request("GET",!1,R["a"].getPledgeHaircut,null,(function(a,i){if(e.fetchingHaircut=!1,"SUCCESS"===a.toUpperCase()){e.haircut=i.data.data.result;var s=function(t){var a=e.haircut.find((function(a){return a.instrument_id===e.holdings[t]["instrument_id"]}));a?(e.holdings[t].isin||(e.holdings[t]["isin"]=a.isin),e.holdings[t]["haircut"]=a.haircut_value):e.holdings[t]["haircut"]=0};for(var n in e.holdings)s(n);var r=function(t){var a=e.haircut.find((function(a){return a.instrument_id===e.holdings_items[t]["instrument_id"]}));a?(e.holdings_items[t].isin||(e.holdings_items[t]["isin"]=a.isin),e.holdings_items[t]["haircut"]=a.haircut_value):e.holdings_items[t]["haircut"]=0};for(var o in e.holdings_items)r(o);var l=e.haircut.find((function(e){return e.isin===t.isin}));l&&(e.pledgeData.haircut=l.haircut_value)}else"FAILURE"===a.toUpperCase()?(e.pledgeError=!0,e.job=!1,e.$toast.error({message:"Error fetching pledge haircut: "+i.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3})):(e.pledgeError=!0,e.$toast.error({message:"Error fetching pledge haircut:"+Q["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3}))}))},getPledgeHistory:function(t){var e=this;t&&(this.sortingData=!0),this.pledgeError=!1,Q["a"].request("GET",!1,R["a"].getPledgeHistory,null,(function(t,a){"SUCCESS"===t.toUpperCase()?function(){for(var t=a.data.data.result,i=e,s=function(a){var s=t.find((function(t){return t.isin===i.holdings[a]["isin"]})),n=e.holdings_items.find((function(t){return t.isin===e.holdings[a]["isin"]}));s?(e.holdings[a]["pending_pledge_type"]=s.pledge_type.toLowerCase(),e.holdings[a]["pending_pledge_qty"]=s.quantity,e.holdings[a]["pending_pledge_id"]=s.name,n&&(n["pending_pledge_type"]=s.pledge_type.toLowerCase(),n["pending_pledge_qty"]=s.quantity,n["pending_pledge_id"]=s.name)):(e.holdings[a]["pending_pledge_type"]="",e.holdings[a]["pending_pledge_qty"]=0,e.holdings[a]["pending_pledge_id"]="",n&&(n["pending_pledge_type"]="",n["pending_pledge_qty"]=0,n["pending_pledge_id"]=""))},n=0;n<e.holdings.length;n++)s(n);e.job=!1,e.sortingData=!1,e.hideCreatePledgeModal(),e.hideCreateUnpledgeModal(),e.hideCancelPledgeModal(),e.pledging=!1}():"FAILURE"===t.toUpperCase()?(e.pledgeError=!0,e.$toast.error({message:"Error fetching pledge history: "+a.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3})):(e.sortingData=!1,e.hideCreatePledgeModal(),e.hideCreateUnpledgeModal(),e.hideCancelPledgeModal(),e.pledging=!1,e.pledgeError=!0,e.$toast.error({message:"Error fetching pledge history:"+Q["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3}))}))},getUnique:function(t,e){return t.filter((function(a,i){return t.findIndex((function(t){return e?e(t)===e(a):t===a}))===i}))}}),components:{PortfolioChart:$,HoldingsTreemap:M,datepicker:o.a,VueTagsInput:u.a,TagManager:N["default"],Tagger:p["a"],jobber:h["a"],"su-button":m["a"],empty:g["a"],"context-menu":_["a"],"mobile-context-menu":f["a"],error:v["default"],rangepicker:c.a}},K=W,J=Object(S["a"])(K,i,s,!1,null,null,null);e["default"]=J.exports},b6f4:function(t,e,a){"use strict";var i=a("0dd4"),s=a("2388");function n(t){if("function"!==typeof t)throw new Error;return t}function r(){return 0}var o=function(t){return function(){return t}};e["a"]=function(){var t=s["a"],e=!1,a=1,l=1,c=[0],d=r,u=r,g=r,p=r,h=r;function _(t){return t.x0=t.y0=0,t.x1=a,t.y1=l,t.eachBefore(f),c=[0],e&&t.eachBefore(i["a"]),t}function f(e){var a=c[e.depth],i=e.x0+a,s=e.y0+a,n=e.x1-a,r=e.y1-a;n<i&&(i=n=(i+n)/2),r<s&&(s=r=(s+r)/2),e.x0=i,e.y0=s,e.x1=n,e.y1=r,e.children&&(a=c[e.depth+1]=d(e)/2,i+=h(e)-a,s+=u(e)-a,n-=g(e)-a,r-=p(e)-a,n<i&&(i=n=(i+n)/2),r<s&&(s=r=(s+r)/2),t(e,i,s,n,r))}return _.round=function(t){return arguments.length?(e=!!t,_):e},_.size=function(t){return arguments.length?(a=+t[0],l=+t[1],_):[a,l]},_.tile=function(e){return arguments.length?(t=n(e),_):t},_.padding=function(t){return arguments.length?_.paddingInner(t).paddingOuter(t):_.paddingInner()},_.paddingInner=function(t){return arguments.length?(d="function"===typeof t?t:o(+t),_):d},_.paddingOuter=function(t){return arguments.length?_.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):_.paddingTop()},_.paddingTop=function(t){return arguments.length?(u="function"===typeof t?t:o(+t),_):u},_.paddingRight=function(t){return arguments.length?(g="function"===typeof t?t:o(+t),_):g},_.paddingBottom=function(t){return arguments.length?(p="function"===typeof t?t:o(+t),_):p},_.paddingLeft=function(t){return arguments.length?(h="function"===typeof t?t:o(+t),_):h},_}},c7a0:function(t,e,a){!function(e,a){t.exports=a()}(window,(function(){return function(t){var e={};function a(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(i,s,function(e){return t[e]}.bind(null,s));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/dist/",a(a.s=6)}([function(t,e,a){var i=a(8);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals),(0,a(4).default)("7ec05f6c",i,!1,{})},function(t,e,a){var i=a(10);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals),(0,a(4).default)("3453d19d",i,!1,{})},function(t,e,a){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var a=function(t,e){var a,i=t[1]||"",s=t[3];if(!s)return i;if(e&&"function"==typeof btoa){var n=(a=s,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),r=s.sources.map((function(t){return"/*# sourceURL="+s.sourceRoot+t+" */"}));return[i].concat(r).concat([n]).join("\n")}return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+a+"}":a})).join("")},e.i=function(t,a){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},s=0;s<this.length;s++){var n=this[s][0];null!=n&&(i[n]=!0)}for(s=0;s<t.length;s++){var r=t[s];null!=r[0]&&i[r[0]]||(a&&!r[2]?r[2]=a:a&&(r[2]="("+r[2]+") and ("+a+")"),e.push(r))}},e}},function(t,e){t.exports="data:application/vnd.ms-fontobject;base64,aAUAAMQEAAABAAIAAAAAAAAAAAAAAAAAAAABAJABAAAAAExQAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAUdPJHwAAAAAAAAAAAAAAAAAAAAAAAA4AaQBjAG8AbQBvAG8AbgAAAA4AUgBlAGcAdQBsAGEAcgAAABYAVgBlAHIAcwBpAG8AbgAgADEALgAwAAAADgBpAGMAbwBtAG8AbwBuAAAAAAAAAQAAAAsAgAADADBPUy8yDxIFrAAAALwAAABgY21hcBdW0okAAAEcAAAAVGdhc3AAAAAQAAABcAAAAAhnbHlmpZ+jMAAAAXgAAAD8aGVhZA/FmAgAAAJ0AAAANmhoZWEHgAPIAAACrAAAACRobXR4EgABvgAAAtAAAAAcbG9jYQCSAOIAAALsAAAAEG1heHAACQAfAAAC/AAAACBuYW1lmUoJ+wAAAxwAAAGGcG9zdAADAAAAAASkAAAAIAADA4ABkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAAAAAAAEAAAOkCA8D/wABAA8AAQAAAAAEAAAAAAAAAAAAAACAAAAAAAAMAAAADAAAAHAABAAMAAAAcAAMAAQAAABwABAA4AAAACgAIAAIAAgABACDpAv/9//8AAAAAACDpAP/9//8AAf/jFwQAAwABAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAVgEBA74CgQAcAAABMhceARcWFwcmJy4BJyYjIgYHFyERFzY3PgE3NgIWSkNDbykpF2QQIB9VMzQ5P3AtnP6AmB0iIkspKAJVFxhSODlCIDMrKz4REislmgGAmhkVFBwICAABANYAgQMqAtUACwAAAQcXBycHJzcnNxc3Ayru7jzu7jzu7jzu7gKZ7u487u487u487u4AAQCSAIEDgAK9AAUAACUBFwEnNwGAAcQ8/gDuPPkBxDz+AO48AAAAAAEAAAAAAAAfydNRXw889QALBAAAAAAA1nUqGwAAAADWdSobAAAAAAO+AtUAAAAIAAIAAAAAAAAAAQAAA8D/wAAABAAAAAAAA74AAQAAAAAAAAAAAAAAAAAAAAcEAAAAAAAAAAAAAAACAAAABAAAVgQAANYEAACSAAAAAAAKABQAHgBQAGoAfgABAAAABwAdAAEAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEABwAAAAEAAAAAAAIABwBgAAEAAAAAAAMABwA2AAEAAAAAAAQABwB1AAEAAAAAAAUACwAVAAEAAAAAAAYABwBLAAEAAAAAAAoAGgCKAAMAAQQJAAEADgAHAAMAAQQJAAIADgBnAAMAAQQJAAMADgA9AAMAAQQJAAQADgB8AAMAAQQJAAUAFgAgAAMAAQQJAAYADgBSAAMAAQQJAAoANACkaWNvbW9vbgBpAGMAbwBtAG8AbwBuVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwaWNvbW9vbgBpAGMAbwBtAG8AbwBuaWNvbW9vbgBpAGMAbwBtAG8AbwBuUmVndWxhcgBSAGUAZwB1AGwAYQByaWNvbW9vbgBpAGMAbwBtAG8AbwBuRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="},function(t,e,a){"use strict";function i(t,e){for(var a=[],i={},s=0;s<e.length;s++){var n=e[s],r=n[0],o={id:t+":"+s,css:n[1],media:n[2],sourceMap:n[3]};i[r]?i[r].parts.push(o):a.push(i[r]={id:r,parts:[o]})}return a}a.r(e),a.d(e,"default",(function(){return h}));var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var n={},r=s&&(document.head||document.getElementsByTagName("head")[0]),o=null,l=0,c=!1,d=function(){},u=null,g="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(t,e,a,s){c=a,u=s||{};var r=i(t,e);return _(r),function(e){for(var a=[],s=0;s<r.length;s++){var o=r[s];(l=n[o.id]).refs--,a.push(l)}for(e?_(r=i(t,e)):r=[],s=0;s<a.length;s++){var l;if(0===(l=a[s]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete n[l.id]}}}}function _(t){for(var e=0;e<t.length;e++){var a=t[e],i=n[a.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](a.parts[s]);for(;s<a.parts.length;s++)i.parts.push(m(a.parts[s]));i.parts.length>a.parts.length&&(i.parts.length=a.parts.length)}else{var r=[];for(s=0;s<a.parts.length;s++)r.push(m(a.parts[s]));n[a.id]={id:a.id,refs:1,parts:r}}}}function f(){var t=document.createElement("style");return t.type="text/css",r.appendChild(t),t}function m(t){var e,a,i=document.querySelector("style["+g+'~="'+t.id+'"]');if(i){if(c)return d;i.parentNode.removeChild(i)}if(p){var s=l++;i=o||(o=f()),e=y.bind(null,i,s,!1),a=y.bind(null,i,s,!0)}else i=f(),e=function(t,e){var a=e.css,i=e.media,s=e.sourceMap;if(i&&t.setAttribute("media",i),u.ssrId&&t.setAttribute(g,e.id),s&&(a+="\n/*# sourceURL="+s.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}.bind(null,i),a=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else a()}}var v,A=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function y(t,e,a,i){var s=a?"":i.css;if(t.styleSheet)t.styleSheet.cssText=A(e,s);else{var n=document.createTextNode(s),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(n,r[e]):t.appendChild(n)}}},function(t,e,a){"use strict";var i=Array.isArray,s=Object.keys,n=Object.prototype.hasOwnProperty;t.exports=function t(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){var r,o,l,c=i(e),d=i(a);if(c&&d){if((o=e.length)!=a.length)return!1;for(r=o;0!=r--;)if(!t(e[r],a[r]))return!1;return!0}if(c!=d)return!1;var u=e instanceof Date,g=a instanceof Date;if(u!=g)return!1;if(u&&g)return e.getTime()==a.getTime();var p=e instanceof RegExp,h=a instanceof RegExp;if(p!=h)return!1;if(p&&h)return e.toString()==a.toString();var _=s(e);if((o=_.length)!==s(a).length)return!1;for(r=o;0!=r--;)if(!n.call(a,_[r]))return!1;for(r=o;0!=r--;)if(!t(e[l=_[r]],a[l]))return!1;return!0}return e!=e&&a!=a}},function(t,e,a){t.exports=a(14)},function(t,e,a){"use strict";var i=a(0);a.n(i).a},function(t,e,a){(t.exports=a(2)(!0)).push([t.i,".ti-tag-input[data-v-108f4f13] {\n  background-color: transparent;\n  color: inherit;\n  border: none;\n  padding: 0px;\n  margin: 0px;\n  display: flex;\n  top: 0px;\n  position: absolute;\n  width: 100%;\n  line-height: inherit;\n}\n.ti-tag-input[data-v-108f4f13]::-ms-clear {\n  display: none;\n}\ninput[data-v-108f4f13]:focus {\n  outline: none;\n}\ninput[disabled][data-v-108f4f13] {\n  background-color: transparent;\n}\n","",{version:3,sources:["C:/Users/johan/dev/vue-tags-input/vue-tags-input/C:/Users/johan/dev/vue-tags-input/vue-tags-input/tag-input.vue"],names:[],mappings:"AAAA;EACE,8BAA8B;EAC9B,eAAe;EACf,aAAa;EACb,aAAa;EACb,YAAY;EACZ,cAAc;EACd,SAAS;EACT,mBAAmB;EACnB,YAAY;EACZ,qBAAqB;CAAE;AAEzB;EACE,cAAc;CAAE;AAElB;EACE,cAAc;CAAE;AAElB;EACE,8BAA8B;CAAE",file:"tag-input.vue?vue&type=style&index=0&id=108f4f13&lang=css&scoped=true&",sourcesContent:[".ti-tag-input {\n  background-color: transparent;\n  color: inherit;\n  border: none;\n  padding: 0px;\n  margin: 0px;\n  display: flex;\n  top: 0px;\n  position: absolute;\n  width: 100%;\n  line-height: inherit; }\n\n.ti-tag-input::-ms-clear {\n  display: none; }\n\ninput:focus {\n  outline: none; }\n\ninput[disabled] {\n  background-color: transparent; }\n"],sourceRoot:""}])},function(t,e,a){"use strict";var i=a(1);a.n(i).a},function(t,e,a){e=t.exports=a(2)(!0);var i=a(11),s=i(a(3)),n=i(a(3)+"#iefix"),r=i(a(12)),o=i(a(13));e.push([t.i,"@font-face {\n  font-family: 'icomoon';\n  src: url("+s+");\n  src: url("+n+') format("embedded-opentype"), url('+r+') format("truetype"), url('+o+') format("woff");\n  font-weight: normal;\n  font-style: normal;\n}\n[class^="ti-icon-"][data-v-61d92e31], [class*=" ti-icon-"][data-v-61d92e31] {\n  font-family: \'icomoon\' !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.ti-icon-check[data-v-61d92e31]:before {\n  content: "\\e902";\n}\n.ti-icon-close[data-v-61d92e31]:before {\n  content: "\\e901";\n}\n.ti-icon-undo[data-v-61d92e31]:before {\n  content: "\\e900";\n}\nul[data-v-61d92e31] {\n  margin: 0px;\n  padding: 0px;\n  list-style-type: none;\n}\n*[data-v-61d92e31], *[data-v-61d92e31]:before, *[data-v-61d92e31]:after {\n  box-sizing: border-box;\n}\ninput[data-v-61d92e31]:focus {\n  outline: none;\n}\ninput[disabled][data-v-61d92e31] {\n  background-color: transparent;\n}\n.vue-tags-input[data-v-61d92e31] {\n  max-width: 450px;\n  position: relative;\n  background-color: #fff;\n}\ndiv.vue-tags-input.disabled[data-v-61d92e31] {\n  opacity: 0.5;\n}\ndiv.vue-tags-input.disabled *[data-v-61d92e31] {\n    cursor: default;\n}\n.ti-input[data-v-61d92e31] {\n  border: 1px solid #ccc;\n  display: flex;\n  padding: 4px;\n  flex-wrap: wrap;\n}\n.ti-tags[data-v-61d92e31] {\n  display: flex;\n  flex-wrap: wrap;\n  width: 100%;\n  line-height: 1em;\n}\n.ti-tag[data-v-61d92e31] {\n  background-color: #5C6BC0;\n  color: #fff;\n  border-radius: 2px;\n  display: flex;\n  padding: 3px 5px;\n  margin: 2px;\n  font-size: .85em;\n}\n.ti-tag[data-v-61d92e31]:focus {\n    outline: none;\n}\n.ti-tag .ti-content[data-v-61d92e31] {\n    display: flex;\n    align-items: center;\n}\n.ti-tag .ti-tag-center[data-v-61d92e31] {\n    position: relative;\n}\n.ti-tag span[data-v-61d92e31] {\n    line-height: .85em;\n}\n.ti-tag span.ti-hidden[data-v-61d92e31] {\n    padding-left: 14px;\n    visibility: hidden;\n    height: 0px;\n    white-space: pre;\n}\n.ti-tag .ti-actions[data-v-61d92e31] {\n    margin-left: 2px;\n    display: flex;\n    align-items: center;\n    font-size: 1.15em;\n}\n.ti-tag .ti-actions i[data-v-61d92e31] {\n      cursor: pointer;\n}\n.ti-tag[data-v-61d92e31]:last-child {\n    margin-right: 4px;\n}\n.ti-tag.ti-invalid[data-v-61d92e31], .ti-tag.ti-tag.ti-deletion-mark[data-v-61d92e31] {\n    background-color: #e54d42;\n}\n.ti-new-tag-input-wrapper[data-v-61d92e31] {\n  display: flex;\n  flex: 1 0 auto;\n  padding: 3px 5px;\n  margin: 2px;\n  font-size: .85em;\n}\n.ti-new-tag-input-wrapper input[data-v-61d92e31] {\n    flex: 1 0 auto;\n    min-width: 100px;\n    border: none;\n    padding: 0px;\n    margin: 0px;\n}\n.ti-new-tag-input[data-v-61d92e31] {\n  line-height: initial;\n}\n.ti-autocomplete[data-v-61d92e31] {\n  border: 1px solid #ccc;\n  border-top: none;\n  position: absolute;\n  width: 100%;\n  background-color: #fff;\n  z-index: 20;\n}\n.ti-item > div[data-v-61d92e31] {\n  cursor: pointer;\n  padding: 3px 6px;\n  width: 100%;\n}\n.ti-selected-item[data-v-61d92e31] {\n  background-color: #5C6BC0;\n  color: #fff;\n}\n',"",{version:3,sources:["C:/Users/johan/dev/vue-tags-input/vue-tags-input/C:/Users/johan/dev/vue-tags-input/vue-tags-input/vue-tags-input.scss"],names:[],mappings:"AAAA;EACE,uBAAuB;EACvB,mCAA8C;EAC9C,+JAAuM;EACvM,oBAAoB;EACpB,mBAAmB;CAAE;AAEvB;EACE,kCAAkC;EAClC,YAAY;EACZ,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,qBAAqB;EACrB,eAAe;EACf,oCAAoC;EACpC,mCAAmC;CAAE;AAEvC;EACE,iBAAiB;CAAE;AAErB;EACE,iBAAiB;CAAE;AAErB;EACE,iBAAiB;CAAE;AAErB;EACE,YAAY;EACZ,aAAa;EACb,sBAAsB;CAAE;AAE1B;EACE,uBAAuB;CAAE;AAE3B;EACE,cAAc;CAAE;AAElB;EACE,8BAA8B;CAAE;AAElC;EACE,iBAAiB;EACjB,mBAAmB;EACnB,uBAAuB;CAAE;AAE3B;EACE,aAAa;CAAE;AACf;IACE,gBAAgB;CAAE;AAEtB;EACE,uBAAuB;EACvB,cAAc;EACd,aAAa;EACb,gBAAgB;CAAE;AAEpB;EACE,cAAc;EACd,gBAAgB;EAChB,YAAY;EACZ,iBAAiB;CAAE;AAErB;EACE,0BAA0B;EAC1B,YAAY;EACZ,mBAAmB;EACnB,cAAc;EACd,iBAAiB;EACjB,YAAY;EACZ,iBAAiB;CAAE;AACnB;IACE,cAAc;CAAE;AAClB;IACE,cAAc;IACd,oBAAoB;CAAE;AACxB;IACE,mBAAmB;CAAE;AACvB;IACE,mBAAmB;CAAE;AACvB;IACE,mBAAmB;IACnB,mBAAmB;IACnB,YAAY;IACZ,iBAAiB;CAAE;AACrB;IACE,iBAAiB;IACjB,cAAc;IACd,oBAAoB;IACpB,kBAAkB;CAAE;AACpB;MACE,gBAAgB;CAAE;AACtB;IACE,kBAAkB;CAAE;AACtB;IACE,0BAA0B;CAAE;AAEhC;EACE,cAAc;EACd,eAAe;EACf,iBAAiB;EACjB,YAAY;EACZ,iBAAiB;CAAE;AACnB;IACE,eAAe;IACf,iBAAiB;IACjB,aAAa;IACb,aAAa;IACb,YAAY;CAAE;AAElB;EACE,qBAAqB;CAAE;AAEzB;EACE,uBAAuB;EACvB,iBAAiB;EACjB,mBAAmB;EACnB,YAAY;EACZ,uBAAuB;EACvB,YAAY;CAAE;AAEhB;EACE,gBAAgB;EAChB,iBAAiB;EACjB,YAAY;CAAE;AAEhB;EACE,0BAA0B;EAC1B,YAAY;CAAE",file:"vue-tags-input.scss?vue&type=style&index=0&id=61d92e31&lang=scss&scoped=true&",sourcesContent:['@font-face {\n  font-family: \'icomoon\';\n  src: url("./assets/fonts/icomoon.eot?7grlse");\n  src: url("./assets/fonts/icomoon.eot?7grlse#iefix") format("embedded-opentype"), url("./assets/fonts/icomoon.ttf?7grlse") format("truetype"), url("./assets/fonts/icomoon.woff?7grlse") format("woff");\n  font-weight: normal;\n  font-style: normal; }\n\n[class^="ti-icon-"], [class*=" ti-icon-"] {\n  font-family: \'icomoon\' !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale; }\n\n.ti-icon-check:before {\n  content: "\\e902"; }\n\n.ti-icon-close:before {\n  content: "\\e901"; }\n\n.ti-icon-undo:before {\n  content: "\\e900"; }\n\nul {\n  margin: 0px;\n  padding: 0px;\n  list-style-type: none; }\n\n*, *:before, *:after {\n  box-sizing: border-box; }\n\ninput:focus {\n  outline: none; }\n\ninput[disabled] {\n  background-color: transparent; }\n\n.vue-tags-input {\n  max-width: 450px;\n  position: relative;\n  background-color: #fff; }\n\ndiv.vue-tags-input.disabled {\n  opacity: 0.5; }\n  div.vue-tags-input.disabled * {\n    cursor: default; }\n\n.ti-input {\n  border: 1px solid #ccc;\n  display: flex;\n  padding: 4px;\n  flex-wrap: wrap; }\n\n.ti-tags {\n  display: flex;\n  flex-wrap: wrap;\n  width: 100%;\n  line-height: 1em; }\n\n.ti-tag {\n  background-color: #5C6BC0;\n  color: #fff;\n  border-radius: 2px;\n  display: flex;\n  padding: 3px 5px;\n  margin: 2px;\n  font-size: .85em; }\n  .ti-tag:focus {\n    outline: none; }\n  .ti-tag .ti-content {\n    display: flex;\n    align-items: center; }\n  .ti-tag .ti-tag-center {\n    position: relative; }\n  .ti-tag span {\n    line-height: .85em; }\n  .ti-tag span.ti-hidden {\n    padding-left: 14px;\n    visibility: hidden;\n    height: 0px;\n    white-space: pre; }\n  .ti-tag .ti-actions {\n    margin-left: 2px;\n    display: flex;\n    align-items: center;\n    font-size: 1.15em; }\n    .ti-tag .ti-actions i {\n      cursor: pointer; }\n  .ti-tag:last-child {\n    margin-right: 4px; }\n  .ti-tag.ti-invalid, .ti-tag.ti-tag.ti-deletion-mark {\n    background-color: #e54d42; }\n\n.ti-new-tag-input-wrapper {\n  display: flex;\n  flex: 1 0 auto;\n  padding: 3px 5px;\n  margin: 2px;\n  font-size: .85em; }\n  .ti-new-tag-input-wrapper input {\n    flex: 1 0 auto;\n    min-width: 100px;\n    border: none;\n    padding: 0px;\n    margin: 0px; }\n\n.ti-new-tag-input {\n  line-height: initial; }\n\n.ti-autocomplete {\n  border: 1px solid #ccc;\n  border-top: none;\n  position: absolute;\n  width: 100%;\n  background-color: #fff;\n  z-index: 20; }\n\n.ti-item > div {\n  cursor: pointer;\n  padding: 3px 6px;\n  width: 100%; }\n\n.ti-selected-item {\n  background-color: #5C6BC0;\n  color: #fff; }\n'],sourceRoot:""}])},function(t,e,a){"use strict";t.exports=function(t){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},function(t,e){t.exports="data:font/ttf;base64,AAEAAAALAIAAAwAwT1MvMg8SBawAAAC8AAAAYGNtYXAXVtKJAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZqWfozAAAAF4AAAA/GhlYWQPxZgIAAACdAAAADZoaGVhB4ADyAAAAqwAAAAkaG10eBIAAb4AAALQAAAAHGxvY2EAkgDiAAAC7AAAABBtYXhwAAkAHwAAAvwAAAAgbmFtZZlKCfsAAAMcAAABhnBvc3QAAwAAAAAEpAAAACAAAwOAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpAgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6QL//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAFYBAQO+AoEAHAAAATIXHgEXFhcHJicuAScmIyIGBxchERc2Nz4BNzYCFkpDQ28pKRdkECAfVTM0OT9wLZz+gJgdIiJLKSgCVRcYUjg5QiAzKys+ERIrJZoBgJoZFRQcCAgAAQDWAIEDKgLVAAsAAAEHFwcnByc3JzcXNwMq7u487u487u487u4Cme7uPO7uPO7uPO7uAAEAkgCBA4ACvQAFAAAlARcBJzcBgAHEPP4A7jz5AcQ8/gDuPAAAAAABAAAAAAAAH8nTUV8PPPUACwQAAAAAANZ1KhsAAAAA1nUqGwAAAAADvgLVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAO+AAEAAAAAAAAAAAAAAAAAAAAHBAAAAAAAAAAAAAAAAgAAAAQAAFYEAADWBAAAkgAAAAAACgAUAB4AUABqAH4AAQAAAAcAHQABAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGljb21vb24AaQBjAG8AbQBvAG8AblZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGljb21vb24AaQBjAG8AbQBvAG8Abmljb21vb24AaQBjAG8AbQBvAG8AblJlZ3VsYXIAUgBlAGcAdQBsAGEAcmljb21vb24AaQBjAG8AbQBvAG8AbkZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="},function(t,e){t.exports="data:font/woff;base64,d09GRgABAAAAAAUQAAsAAAAABMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDxIFrGNtYXAAAAFoAAAAVAAAAFQXVtKJZ2FzcAAAAbwAAAAIAAAACAAAABBnbHlmAAABxAAAAPwAAAD8pZ+jMGhlYWQAAALAAAAANgAAADYPxZgIaGhlYQAAAvgAAAAkAAAAJAeAA8hobXR4AAADHAAAABwAAAAcEgABvmxvY2EAAAM4AAAAEAAAABAAkgDibWF4cAAAA0gAAAAgAAAAIAAJAB9uYW1lAAADaAAAAYYAAAGGmUoJ+3Bvc3QAAATwAAAAIAAAACAAAwAAAAMDgAGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6QIDwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADgAAAAKAAgAAgACAAEAIOkC//3//wAAAAAAIOkA//3//wAB/+MXBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQBWAQEDvgKBABwAAAEyFx4BFxYXByYnLgEnJiMiBgcXIREXNjc+ATc2AhZKQ0NvKSkXZBAgH1UzNDk/cC2c/oCYHSIiSykoAlUXGFI4OUIgMysrPhESKyWaAYCaGRUUHAgIAAEA1gCBAyoC1QALAAABBxcHJwcnNyc3FzcDKu7uPO7uPO7uPO7uApnu7jzu7jzu7jzu7gABAJIAgQOAAr0ABQAAJQEXASc3AYABxDz+AO48+QHEPP4A7jwAAAAAAQAAAAAAAB/J01FfDzz1AAsEAAAAAADWdSobAAAAANZ1KhsAAAAAA74C1QAAAAgAAgAAAAAAAAABAAADwP/AAAAEAAAAAAADvgABAAAAAAAAAAAAAAAAAAAABwQAAAAAAAAAAAAAAAIAAAAEAABWBAAA1gQAAJIAAAAAAAoAFAAeAFAAagB+AAEAAAAHAB0AAQAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAHAAAAAQAAAAAAAgAHAGAAAQAAAAAAAwAHADYAAQAAAAAABAAHAHUAAQAAAAAABQALABUAAQAAAAAABgAHAEsAAQAAAAAACgAaAIoAAwABBAkAAQAOAAcAAwABBAkAAgAOAGcAAwABBAkAAwAOAD0AAwABBAkABAAOAHwAAwABBAkABQAWACAAAwABBAkABgAOAFIAAwABBAkACgA0AKRpY29tb29uAGkAYwBvAG0AbwBvAG5WZXJzaW9uIDEuMABWAGUAcgBzAGkAbwBuACAAMQAuADBpY29tb29uAGkAYwBvAG0AbwBvAG5pY29tb29uAGkAYwBvAG0AbwBvAG5SZWd1bGFyAFIAZQBnAHUAbABhAHJpY29tb29uAGkAYwBvAG0AbwBvAG5Gb250IGdlbmVyYXRlZCBieSBJY29Nb29uLgBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vue-tags-input",class:[{"ti-disabled":t.disabled},{"ti-focus":t.focused}]},[a("div",{staticClass:"ti-input"},[t.tagsCopy?a("ul",{staticClass:"ti-tags"},[t._l(t.tagsCopy,(function(e,i){return a("li",{key:i,staticClass:"ti-tag",class:[{"ti-editing":t.tagsEditStatus[i]},e.tiClasses,e.classes,{"ti-deletion-mark":t.isMarked(i)}],style:e.style,attrs:{tabindex:"0"},on:{click:function(a){return t.$emit("tag-clicked",{tag:e,index:i})}}},[a("div",{staticClass:"ti-content"},[t.$scopedSlots["tag-left"]?a("div",{staticClass:"ti-tag-left"},[t._t("tag-left",null,{tag:e,index:i,edit:t.tagsEditStatus[i],performSaveEdit:t.performSaveTag,performDelete:t.performDeleteTag,performCancelEdit:t.cancelEdit,performOpenEdit:t.performEditTag,deletionMark:t.isMarked(i)})],2):t._e(),t._v(" "),a("div",{ref:"tagCenter",refInFor:!0,staticClass:"ti-tag-center"},[t.$scopedSlots["tag-center"]?t._e():a("span",{class:{"ti-hidden":t.tagsEditStatus[i]},on:{click:function(e){return t.performEditTag(i)}}},[t._v(t._s(e.text))]),t._v(" "),t.$scopedSlots["tag-center"]?t._e():a("tag-input",{attrs:{scope:{edit:t.tagsEditStatus[i],maxlength:t.maxlength,tag:e,index:i,validateTag:t.createChangedTag,performCancelEdit:t.cancelEdit,performSaveEdit:t.performSaveTag}}}),t._v(" "),t._t("tag-center",null,{tag:e,index:i,maxlength:t.maxlength,edit:t.tagsEditStatus[i],performSaveEdit:t.performSaveTag,performDelete:t.performDeleteTag,performCancelEdit:t.cancelEdit,validateTag:t.createChangedTag,performOpenEdit:t.performEditTag,deletionMark:t.isMarked(i)})],2),t._v(" "),t.$scopedSlots["tag-right"]?a("div",{staticClass:"ti-tag-right"},[t._t("tag-right",null,{tag:e,index:i,edit:t.tagsEditStatus[i],performSaveEdit:t.performSaveTag,performDelete:t.performDeleteTag,performCancelEdit:t.cancelEdit,performOpenEdit:t.performEditTag,deletionMark:t.isMarked(i)})],2):t._e()]),t._v(" "),a("div",{staticClass:"ti-actions"},[t.$scopedSlots["tag-actions"]?t._e():a("i",{directives:[{name:"show",rawName:"v-show",value:t.tagsEditStatus[i],expression:"tagsEditStatus[index]"}],staticClass:"ti-icon-undo",on:{click:function(e){return t.cancelEdit(i)}}}),t._v(" "),t.$scopedSlots["tag-actions"]?t._e():a("i",{directives:[{name:"show",rawName:"v-show",value:!t.tagsEditStatus[i],expression:"!tagsEditStatus[index]"}],staticClass:"ti-icon-close",on:{click:function(e){return t.performDeleteTag(i)}}}),t._v(" "),t.$scopedSlots["tag-actions"]?t._t("tag-actions",null,{tag:e,index:i,edit:t.tagsEditStatus[i],performSaveEdit:t.performSaveTag,performDelete:t.performDeleteTag,performCancelEdit:t.cancelEdit,performOpenEdit:t.performEditTag,deletionMark:t.isMarked(i)}):t._e()],2)])})),t._v(" "),a("li",{staticClass:"ti-new-tag-input-wrapper"},[a("input",t._b({ref:"newTagInput",staticClass:"ti-new-tag-input",class:[t.createClasses(t.newTag,t.tags,t.validation,t.isDuplicate)],attrs:{placeholder:t.placeholder,maxlength:t.maxlength,disabled:t.disabled,type:"text",size:"1"},domProps:{value:t.newTag},on:{keydown:[function(e){return t.performAddTags(t.filteredAutocompleteItems[t.selectedItem]||t.newTag,e)},function(e){return e.type.indexOf("key")||8===e.keyCode?t.invokeDelete(e):null},function(e){return e.type.indexOf("key")||9===e.keyCode?t.performBlur(e):null},function(e){return e.type.indexOf("key")||38===e.keyCode?t.selectItem(e,"before"):null},function(e){return e.type.indexOf("key")||40===e.keyCode?t.selectItem(e,"after"):null}],paste:t.addTagsFromPaste,input:t.updateNewTag,blur:function(e){return t.$emit("blur",e)},focus:function(e){t.focused=!0,t.$emit("focus",e)},click:function(e){!t.addOnlyFromAutocomplete&&(t.selectedItem=null)}}},"input",t.$attrs,!1))])],2):t._e()]),t._v(" "),t._t("between-elements"),t._v(" "),t.autocompleteOpen?a("div",{staticClass:"ti-autocomplete",on:{mouseout:function(e){t.selectedItem=null}}},[t._t("autocomplete-header"),t._v(" "),a("ul",t._l(t.filteredAutocompleteItems,(function(e,i){return a("li",{key:i,staticClass:"ti-item",class:[e.tiClasses,e.classes,{"ti-selected-item":t.isSelected(i)}],style:e.style,on:{mouseover:function(e){!t.disabled&&(t.selectedItem=i)}}},[t.$scopedSlots["autocomplete-item"]?t._t("autocomplete-item",null,{item:e,index:i,performAdd:function(e){return t.performAddTags(e,void 0,"autocomplete")},selected:t.isSelected(i)}):a("div",{on:{click:function(a){return t.performAddTags(e,void 0,"autocomplete")}}},[t._v("\n          "+t._s(e.text)+"\n        ")])],2)})),0),t._v(" "),t._t("autocomplete-footer")],2):t._e()],2)};i._withStripped=!0;var s=a(5),n=a.n(s),r=function(t){return JSON.parse(JSON.stringify(t))},o=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0;void 0===t.text&&(t={text:t});var s=function(t,e){return e.filter((function(e){var a=t.text;return"string"==typeof e.rule?!new RegExp(e.rule).test(a):e.rule instanceof RegExp?!e.rule.test(a):"[object Function]"==={}.toString.call(e.rule)?e.rule(t):void 0})).map((function(t){return t.classes}))}(t,a),n=function(t,e){for(var a=0;a<t.length;){if(e(t[a],a,t))return a;a++}return-1}(e,(function(e){return e===t})),o=r(e),l=-1!==n?o.splice(n,1)[0]:r(t);return(i?i(o,l):-1!==o.map((function(t){return t.text})).indexOf(l.text))&&s.push("ti-duplicate"),0===s.length?s.push("ti-valid"):s.push("ti-invalid"),s},l=function(t){void 0===t.text&&(t={text:t});for(var e=r(t),a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return e.tiClasses=o.apply(void 0,[t].concat(i)),e},c=function(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),i=1;i<e;i++)a[i-1]=arguments[i];return t.map((function(e){return l.apply(void 0,[e,t].concat(a))}))},d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.scope.edit?a("input",{directives:[{name:"model",rawName:"v-model",value:t.scope.tag.text,expression:"scope.tag.text"}],staticClass:"ti-tag-input",attrs:{maxlength:t.scope.maxlength,type:"text",size:"1"},domProps:{value:t.scope.tag.text},on:{input:[function(e){e.target.composing||t.$set(t.scope.tag,"text",e.target.value)},function(e){return t.scope.validateTag(t.scope.index,e)}],blur:function(e){return t.scope.performCancelEdit(t.scope.index)},keydown:function(e){return t.scope.performSaveEdit(t.scope.index,e)}}}):t._e()};d._withStripped=!0;var u={name:"TagInput",props:{scope:{type:Object}}};function g(t,e,a,i,s,n,r,o){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),i&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=l):s&&(l=o?function(){s.call(this,this.$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}a(7);var p=g(u,d,[],!1,null,"108f4f13",null);p.options.__file="vue-tags-input/tag-input.vue";var h=p.exports,_=function(t){return!t.some((function(t){var e=!t.text;e&&console.warn('Missing property "text"',t);var a=!1;return t.classes&&(a="string"!=typeof t.classes),a&&console.warn('Property "classes" must be type of string',t),e||a}))},f=function(t){return!t.some((function(t){if("number"==typeof t){var e=isFinite(t)&&Math.floor(t)===t;return e||console.warn("Only numerics are allowed for this prop. Found:",t),!e}if("string"==typeof t){var a=/\W|[a-z]|!\d/i.test(t);return a||console.warn("Only alpha strings are allowed for this prop. Found:",t),!a}return console.warn("Only numeric and string values are allowed. Found:",t),!1}))},m={value:{type:String,default:"",required:!0},tags:{type:Array,default:function(){return[]},validator:_},autocompleteItems:{type:Array,default:function(){return[]},validator:_},allowEditTags:{type:Boolean,default:!1},autocompleteFilterDuplicates:{default:!0,type:Boolean},addOnlyFromAutocomplete:{type:Boolean,default:!1},autocompleteMinLength:{type:Number,default:1},autocompleteAlwaysOpen:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"Add Tag"},addOnKey:{type:Array,default:function(){return[13]},validator:f},saveOnKey:{type:Array,default:function(){return[13]},validator:f},maxTags:{type:Number},maxlength:{type:Number},validation:{type:Array,default:function(){return[]},validator:function(t){return!t.some((function(t){var e=!t.rule;e&&console.warn('Property "rule" is missing',t);var a=t.rule&&("string"==typeof t.rule||t.rule instanceof RegExp||"[object Function]"==={}.toString.call(t.rule));a||console.warn("A rule must be type of string, RegExp or function. Found:",JSON.stringify(t.rule));var i=!t.classes;i&&console.warn('Property "classes" is missing',t);var s=t.type&&"string"!=typeof t.type;return s&&console.warn('Property "type" must be type of string. Found:',t),!a||e||i||s}))}},separators:{type:Array,default:function(){return[";"]},validator:function(t){return!t.some((function(t){var e="string"!=typeof t;return e&&console.warn("Separators must be type of string. Found:",t),e}))}},avoidAddingDuplicates:{type:Boolean,default:!0},addOnBlur:{type:Boolean,default:!0},isDuplicate:{type:Function,default:null},addFromPaste:{type:Boolean,default:!0},deleteOnBackspace:{default:!0,type:Boolean}};function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var A={name:"VueTagsInput",components:{TagInput:h},props:m,data:function(){return{newTag:null,tagsCopy:null,tagsEditStatus:null,deletionMark:null,deletionMarkTime:null,selectedItem:null,focused:null}},computed:{autocompleteOpen:function(){return!!this.autocompleteAlwaysOpen||null!==this.newTag&&this.newTag.length>=this.autocompleteMinLength&&this.filteredAutocompleteItems.length>0&&this.focused},filteredAutocompleteItems:function(){var t=this,e=this.autocompleteItems.map((function(e){return l(e,t.tags,t.validation,t.isDuplicate)}));return this.autocompleteFilterDuplicates?e.filter(this.duplicateFilter):e}},methods:{createClasses:o,getSelectedIndex:function(t){var e=this.filteredAutocompleteItems,a=this.selectedItem,i=e.length-1;if(0!==e.length)return null===a?0:"before"===t&&0===a?i:"after"===t&&a===i?0:"after"===t?a+1:a-1},selectDefaultItem:function(){this.addOnlyFromAutocomplete&&this.filteredAutocompleteItems.length>0?this.selectedItem=0:this.selectedItem=null},selectItem:function(t,e){t.preventDefault(),this.selectedItem=this.getSelectedIndex(e)},isSelected:function(t){return this.selectedItem===t},isMarked:function(t){return this.deletionMark===t},invokeDelete:function(){var t=this;if(this.deleteOnBackspace&&!(this.newTag.length>0)){var e=this.tagsCopy.length-1;null===this.deletionMark?(this.deletionMarkTime=setTimeout((function(){return t.deletionMark=null}),1e3),this.deletionMark=e):this.performDeleteTag(e)}},addTagsFromPaste:function(){var t=this;this.addFromPaste&&setTimeout((function(){return t.performAddTags(t.newTag)}),10)},performEditTag:function(t){var e=this;this.allowEditTags&&(this._events["before-editing-tag"]||this.editTag(t),this.$emit("before-editing-tag",{index:t,tag:this.tagsCopy[t],editTag:function(){return e.editTag(t)}}))},editTag:function(t){this.allowEditTags&&(this.toggleEditMode(t),this.focus(t))},toggleEditMode:function(t){this.allowEditTags&&!this.disabled&&this.$set(this.tagsEditStatus,t,!this.tagsEditStatus[t])},createChangedTag:function(t,e){var a=this.tagsCopy[t];a.text=e?e.target.value:this.tagsCopy[t].text,this.$set(this.tagsCopy,t,l(a,this.tagsCopy,this.validation,this.isDuplicate))},focus:function(t){var e=this;this.$nextTick((function(){var a=e.$refs.tagCenter[t].querySelector("input.ti-tag-input");a&&a.focus()}))},quote:function(t){return t.replace(/([()[{*+.$^\\|?])/g,"\\$1")},cancelEdit:function(t){this.tags[t]&&(this.tagsCopy[t]=r(l(this.tags[t],this.tags,this.validation,this.isDuplicate)),this.$set(this.tagsEditStatus,t,!1))},hasForbiddingAddRule:function(t){var e=this;return t.some((function(t){var a=e.validation.find((function(e){return t===e.classes}));return!!a&&a.disableAdd}))},createTagTexts:function(t){var e=this,a=new RegExp(this.separators.map((function(t){return e.quote(t)})).join("|"));return t.split(a).map((function(t){return{text:t}}))},performDeleteTag:function(t){var e=this;this._events["before-deleting-tag"]||this.deleteTag(t),this.$emit("before-deleting-tag",{index:t,tag:this.tagsCopy[t],deleteTag:function(){return e.deleteTag(t)}})},deleteTag:function(t){this.disabled||(this.deletionMark=null,clearTimeout(this.deletionMarkTime),this.tagsCopy.splice(t,1),this._events["update:tags"]&&this.$emit("update:tags",this.tagsCopy),this.$emit("tags-changed",this.tagsCopy))},noTriggerKey:function(t,e){var a=-1!==this[e].indexOf(t.keyCode)||-1!==this[e].indexOf(t.key);return a&&t.preventDefault(),!a},performAddTags:function(t,e,a){var i=this;if(!(this.disabled||e&&this.noTriggerKey(e,"addOnKey"))){var s=[];"object"===v(t)&&(s=[t]),"string"==typeof t&&(s=this.createTagTexts(t)),(s=s.filter((function(t){return t.text.trim().length>0}))).forEach((function(t){t=l(t,i.tags,i.validation,i.isDuplicate),i._events["before-adding-tag"]||i.addTag(t,a),i.$emit("before-adding-tag",{tag:t,addTag:function(){return i.addTag(t,a)}})}))}},duplicateFilter:function(t){return this.isDuplicate?!this.isDuplicate(this.tagsCopy,t):!this.tagsCopy.find((function(e){return e.text===t.text}))},addTag:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"new-tag-input",i=this.filteredAutocompleteItems.map((function(t){return t.text}));this.addOnlyFromAutocomplete&&-1===i.indexOf(t.text)||this.$nextTick((function(){return e.maxTags&&e.maxTags<=e.tagsCopy.length?e.$emit("max-tags-reached",t):e.avoidAddingDuplicates&&!e.duplicateFilter(t)?e.$emit("adding-duplicate",t):void(e.hasForbiddingAddRule(t.tiClasses)||(e.$emit("input",""),e.tagsCopy.push(t),e._events["update:tags"]&&e.$emit("update:tags",e.tagsCopy),"autocomplete"===a&&e.$refs.newTagInput.focus(),e.$emit("tags-changed",e.tagsCopy)))}))},performSaveTag:function(t,e){var a=this,i=this.tagsCopy[t];this.disabled||e&&this.noTriggerKey(e,"addOnKey")||0!==i.text.trim().length&&(this._events["before-saving-tag"]||this.saveTag(t,i),this.$emit("before-saving-tag",{index:t,tag:i,saveTag:function(){return a.saveTag(t,i)}}))},saveTag:function(t,e){if(this.avoidAddingDuplicates){var a=r(this.tagsCopy),i=a.splice(t,1)[0];if(this.isDuplicate?this.isDuplicate(a,i):-1!==a.map((function(t){return t.text})).indexOf(i.text))return this.$emit("saving-duplicate",e)}this.hasForbiddingAddRule(e.tiClasses)||(this.$set(this.tagsCopy,t,e),this.toggleEditMode(t),this._events["update:tags"]&&this.$emit("update:tags",this.tagsCopy),this.$emit("tags-changed",this.tagsCopy))},tagsEqual:function(){var t=this;return!this.tagsCopy.some((function(e,a){return!n()(e,t.tags[a])}))},updateNewTag:function(t){var e=t.target.value;this.newTag=e,this.$emit("input",e)},initTags:function(){this.tagsCopy=c(this.tags,this.validation,this.isDuplicate),this.tagsEditStatus=r(this.tags).map((function(){return!1})),this._events["update:tags"]&&!this.tagsEqual()&&this.$emit("update:tags",this.tagsCopy)},blurredOnClick:function(t){this.$el.contains(t.target)||this.$el.contains(document.activeElement)||this.performBlur(t)},performBlur:function(){this.addOnBlur&&this.focused&&this.performAddTags(this.newTag),this.focused=!1}},watch:{value:function(t){this.addOnlyFromAutocomplete||(this.selectedItem=null),this.newTag=t},tags:{handler:function(){this.initTags()},deep:!0},autocompleteOpen:"selectDefaultItem"},created:function(){this.newTag=this.value,this.initTags()},mounted:function(){this.selectDefaultItem(),document.addEventListener("click",this.blurredOnClick)},destroyed:function(){document.removeEventListener("click",this.blurredOnClick)}},y=(a(9),g(A,i,[],!1,null,"61d92e31",null));y.options.__file="vue-tags-input/vue-tags-input.vue";var b=y.exports;a.d(e,"VueTagsInput",(function(){return b})),a.d(e,"createClasses",(function(){return o})),a.d(e,"createTag",(function(){return l})),a.d(e,"createTags",(function(){return c})),a.d(e,"TagInput",(function(){return h})),b.install=function(t){return t.component(b.name,b)},"undefined"!=typeof window&&window.Vue&&window.Vue.use(b),e.default=b}])}))},e9dd:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container holdings"},[a("div",{staticClass:"section"},[t.job?a("jobber",{attrs:{main:"Fetching holdings with discrepancies",sub:"",loader:!0}}):t._e(),t._v(" "),t.discrepant_items.length>0&&!t.job?a("div",{staticClass:"row",attrs:{id:"disc_basic"}},[a("div",{staticClass:"four columns"},[a("h1",[t._v("Holdings discrepancies")]),t._v(" "),a("p",{staticClass:"text-small text-light-grey"},[t._v("These are the holdings for which we have not received a buy price. These may have come from transfers, corporate actions, IPOs etc.\n\t\t\t\t\tFor us to compute the P&L properly for these entries, you need to manually add trades with the right values.")]),t._v(" "),a("hr",{staticClass:"no-bottom"}),t._v(" "),a("span",{staticClass:"open-side-nav show-inline-on-mobile",on:{click:function(e){return t.openSideNav()}}},[t._v("☰ View all scrips")]),t._v(" "),a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeSideNav,expression:"closeSideNav"}],staticClass:"disc-list-container",attrs:{id:"mobile-side-nav"}},[a("a",{staticClass:"close-side-nav show-on-mobile",attrs:{href:"javascript:void(0)"},on:{click:t.closeSideNav}},[t._v("×")]),t._v(" "),t._l(t.discrepant_items,(function(e,i){return a("div",{key:i,class:[e["instrument_id"]===t.initInstrument&&t.discSelected==={}||e["instrument_id"]===t.discSelected["instrument_id"]?"activeInstrument":"","disc-list"],on:{click:function(a){return t.getExternalTrades(e,a)}}},[a("span",{staticClass:"instrument-name"},[t._v(t._s(e["tradingsymbol"]))]),t._v(" "),e["quantity_discrepant"]>0?a("span",{staticClass:"status-flag"},[t._v(t._s(e["quantity_discrepant"])+" Qty.")]):t._e()])}))],2)]),t._v(" "),a("div",{staticClass:"eight columns disc-info"},[a("h1",[t._v(t._s(t.discSelected["tradingsymbol"]))]),t._v(" "),a("hr"),a("br"),a("br"),t._v(" "),a("div",{staticClass:"row"},[t.discSelected["isin"]?a("div",{staticClass:"six columns"},[a("label",[t._v("ISIN")]),t._v(" "),a("h2",[t._v(t._s(t.discSelected["isin"]))])]):t._e(),t._v(" "),a("div",{staticClass:"six columns"},[a("label",[t._v("Discrepancy (Qty.)")]),t._v(" "),a("h2",[t._v(t._s(t._f("round")(t.discSelected["quantity_discrepant"],4)))])])]),a("br"),t._v(" "),a("h2",{staticClass:"add-trade-container"},[t._v("\n\t\t\t\t\tTrades\n\t\t\t\t\t"),t.fetchingExternal?a("su-loader"):t._e(),t._v(" "),a("su-button",{staticClass:"add-external-trade btn btn-blue",nativeOn:{click:function(e){return e.preventDefault(),t.computeAdd()}}},[t._v("+ Add trade")])],1),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:" table-container"},[t.isPending?a("p",{staticClass:"text-small text-light-grey"},[t._v("The pending trades will be computed and added to your P&L within 48 hours.")]):t._e(),t._v(" "),t.externalTrades.length>0&&!t.fetchingExternal?a("table",{staticClass:"external-trades",attrs:{id:"external_trades"}},[t._m(0),t._v(" "),a("tbody",t._l(t.externalTrades,(function(e,i){return a("tr",{key:i,on:{mouseleave:function(e){t.showDrop=!1},mouseenter:function(e){t.showDrop=!0}}},[a("td",{staticClass:"text-left"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e["trade_date"])+"\n\t\t\t\t\t\t\t\t\t"),e["pending_recalc"]?a("span",{staticClass:"pending-flag"},[t._v("Pending")]):t._e(),t._v(" "),t.showDrop?a("context-menu",{staticClass:"table"},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"context-menu-button",attrs:{slot:"button",title:"Options"},slot:"button"},[a("span",{staticClass:"icon icon-ellipsis"})]),t._v(" "),a("template",{slot:"menu"},[a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.showEditDiscrepant(e)}}},[t._v("Edit trade")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.deleteDiscrepant(e)}}},[t._v("Delete trade")])])])],2):t._e()],1),t._v(" "),"ipo"==e["external_trade_type"]?a("td",{staticClass:"text-left"},[t._v(t._s(t._f("uppercase")(e["external_trade_type"])))]):a("td",{staticClass:"text-left"},[t._v(t._s(t._f("capitalize")(e["external_trade_type"])))]),t._v(" "),a("td",[t._v(t._s(t._f("inrFormat")(e["price"],4)))]),t._v(" "),a("td",[t._v(t._s(t._f("qtyFormat")(e["quantity"],4)))])])})),0)]):t._e()]),t._v(" "),0!==t.externalTrades.length||t.fetchingExternal?t._e():a("p",[t._v("\n\t\t\t\t\tTo fix the discrepancy, you should add manual trades here with matching quantities. Trades added can not be edited/deleted once the price is updated. "),a("a",{attrs:{href:"https://support.zerodha.com/category/q-backoffice/portfolio/articles/why-is-the-buy-average-for-some-shares-shown-as-n-a",target:"_blank"}},[t._v("Read more")]),t._v(".\n\t\t\t\t")])])]):t._e(),t._v(" "),t.noResults&&!t.job?a("div",{staticClass:"text-center"},[a("empty",{attrs:{main:"Nothing to show here",sub:""}})],1):t._e()],1),t._v(" "),t.showAddModal?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask add-disc-modal"},[a("div",{staticClass:"modal-wrapper",on:{click:function(e){return e.stopPropagation(),t.hideAdd.apply(null,arguments)}}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showAdd.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideAdd.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("h2",[t._v(t._s(t.discSelected["tradingsymbol"])+" — Add a trade")]),t._v(" "),a("su-form",[a("div",{staticClass:"row input-container"},[a("div",{staticClass:"three columns su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Purchase date")]),t._v(" "),a("datepicker",{attrs:{format:t.format,lang:"en","not-before":"1975-01-01","not-after":t.reportEndDate,placeholder:"YYYY-MM-DD"},model:{value:t.addExternalDate,callback:function(e){t.addExternalDate=e},expression:"addExternalDate"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"number",maxlength:8,"static-label":"","no-error":"",label:"Avg. price"},model:{value:t.addExternalPrice,callback:function(e){t.addExternalPrice=e},expression:"addExternalPrice"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"number",maxlength:8,"static-label":"","no-error":"",label:"Qty."},model:{value:t.addExternalQty,callback:function(e){t.addExternalQty=e},expression:"addExternalQty"}})],1),t._v(" "),a("div",{staticClass:"three columns su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Type")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.addExternalType,expression:"addExternalType"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.addExternalType=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Select type")]),t._v(" "),a("option",{attrs:{value:"ipo"}},[t._v("IPO")]),t._v(" "),a("option",{attrs:{value:"discrepant"}},[t._v("Others")])])])]),a("br"),t._v(" "),a("div",{staticClass:"text-right"},[a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.addingExternal,disabled:t.addingExternal},nativeOn:{click:function(e){return e.preventDefault(),t.addDiscrepant.apply(null,arguments)}}},[t._v("Add")])],1)])],1)])])])]):t._e(),t._v(" "),t.showEditModal?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask add-disc-modal"},[a("div",{staticClass:"modal-wrapper",on:{click:function(e){return e.stopPropagation(),t.hideEdit.apply(null,arguments)}}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showEdit.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideEdit.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("h2",[t._v(t._s(t.discSelected["tradingsymbol"])+" — Edit trade")]),t._v(" "),a("su-form",[a("div",{staticClass:"row input-container"},[a("div",{staticClass:"three columns"},[a("su-input",{attrs:{"static-label":"","not-before":"1975-01-01","not-after":t.reportEndDate,"no-error":"",label:"Purchase date",disabled:!0},model:{value:t.editExternalDate,callback:function(e){t.editExternalDate=e},expression:"editExternalDate"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"number","static-label":"","no-error":"",label:"Avg. price"},model:{value:t.editExternalPrice,callback:function(e){t.editExternalPrice=e},expression:"editExternalPrice"}})],1),t._v(" "),a("div",{staticClass:"three columns"},[a("su-input",{attrs:{type:"number","static-label":"","no-error":"",label:"Qty",disabled:!0},model:{value:t.editExternalQty,callback:function(e){t.editExternalQty=e},expression:"editExternalQty"}})],1),t._v(" "),a("div",{staticClass:"three columns su-input-group su-static-label"},[a("label",{staticClass:"su-input-label"},[t._v("Type")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.editExternalType,expression:"editExternalType"}],attrs:{disabled:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.editExternalType=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"ipo"}},[t._v("IPO")]),t._v(" "),a("option",{attrs:{value:"discrepant"}},[t._v("Others")])])])]),a("br"),t._v(" "),a("div",{staticClass:"text-right"},[a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.editingExternal,disabled:t.editingExternal},nativeOn:{click:function(e){return e.preventDefault(),t.editDiscrepant.apply(null,arguments)}}},[t._v("Update")])],1)])],1)])])])]):t._e()])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",{staticClass:"text-left"},[t._v("Purchase date")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("Type")]),t._v(" "),a("td",[t._v("Avg. price")]),t._v(" "),a("td",[t._v("Qty.")])])])}],n=a("8508"),r=a.n(n),o=a("6825"),l=a("2e34"),c=a("02bc"),d=a("ba6a"),u=a("5665"),g=a("2f62");function p(t){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function _(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),!0).forEach((function(e){f(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function m(t,e,a){return u["a"].getDiscrepants+"?date="+t+"&segment="+e}function v(t){return t?u["a"].getExternalTrades+"?instrument_id="+t:u["a"].getExternalTrades}function A(t){var e=new Date(t),a=""+(e.getMonth()+1),i=""+e.getDate(),s=e.getFullYear();return a.length<2&&(a="0"+a),i.length<2&&(i="0"+i),[s,a,i].join("-")}function y(t){var e=null,a=[];return location.search.substr(1).split("&").forEach((function(i){a=i.split("="),a[0]===t&&(e=decodeURIComponent(a[1]))})),e}var b={data:function(){return{instrument:null,showModal:!1,job:!1,params:{},holdings_items:[],discrepant_items:[],holdings_aggregation:{},tradingsymbol:"",date:null,segment:"EQ",format:"YYYY-MM-DD",sortKey:"tradingsymbol",sortBy:"asc",disabled:{to:new Date(2017,3,1)},timeout:"",lastClicked:null,noResults:!1,externalTrades:[],discSelected:{},tradesExist:!1,showAddModal:!1,addExternalDate:"",addExternalPrice:"",addExternalQty:"",addExternalType:"",addingExternal:!1,fetchingExternal:!1,showEditModal:!1,editExternalDate:"",editExternalPrice:"",editExternalQty:"",editExternalType:"",editExternalId:"",editingExternal:!1,oldExternalQty:"",initInstrument:"",showDrop:!0,isPending:!1,isinFetching:""}},mounted:function(){var t=this;if(window.addEventListener("keyup",(function(e){27===e.keyCode&&(t.hideAdd(),t.hideEdit())})),this.$route.params&&this.$route.params.segment)this.getHoldingsData(new Date,this.$route.params.segment);else{var e=y("ISIN");e&&(this.isinFetching=e),this.$router.push({name:"discrepancies",params:{segment:"EQ"}}),this.getHoldingsData(new Date,"EQ")}},computed:_(_({},Object(g["c"])(["reportEndDate"])),{},{filteredData:function(){var t=this.sortKey,e=this.sortOrders[t]||1,a=this.holdings;return t&&(a=a.slice().sort((function(a,i){return a=a[t],i=i[t],(a===i?0:a>i?1:-1)*e}))),a}}),methods:{openSideNav:function(){document.getElementById("mobile-side-nav")&&(document.getElementById("mobile-side-nav").className.indexOf("hidden")>-1&&document.getElementById("mobile-side-nav").classList.remove("hidden"),document.getElementById("mobile-side-nav").classList.add("show"))},closeSideNav:function(t,e){if(t&&t.target.className&&(-1===t.target.className.indexOf("open-side-nav")||t.target.className.indexOf("disc-list")>-1)){if(document.getElementById("mobile-side-nav")&&window.innerWidth<=800){-1!==document.getElementById("mobile-side-nav").className.indexOf("show")&&document.getElementById("mobile-side-nav").classList.remove("show"),document.getElementById("mobile-side-nav").classList.add("hidden");var a=this.$el.querySelector("#disc_basic");a.scrollTop=a.scrollHeight}}else 1===e&&document.getElementById("mobile-side-nav")&&-1!==document.getElementById("mobile-side-nav").className.indexOf("show")&&document.getElementById("mobile-side-nav").classList.remove("show")},addDiscrepant:function(){var t=this;if(this.addExternalDate&&this.addExternalPrice&&this.addExternalQty&&this.addExternalType){for(var e=0,a=0;a<this.externalTrades.length;a++){if(A(this.addExternalDate)===this.externalTrades[a]["trade_date"]&&this.addExternalType===this.externalTrades[a]["external_trade_type"])return void this.$toast.warning({message:"Adding external trade of same type is not allowed",orientation:this.$toast.TOP_RIGHT,duration:6e3});this.externalTrades[a]["pending_recalc"]&&(e+=parseFloat(this.externalTrades[a]["quantity"]))}var i=new Date(this.addExternalDate),s=new Date;if(i>s)return void this.$toast.warning({message:"Adding external trade for future dates is not allowed",orientation:this.$toast.TOP_RIGHT,duration:6e3});if(null===this.discSelected["isin"]||0===this.discSelected["isin"].length||null===this.discSelected["instrument_id"]||0===this.discSelected["instrument_id"].length)return void this.$toast.warning({message:"Required information to perform this action is not available",orientation:this.$toast.TOP_RIGHT,duration:6e3});var n=parseFloat(parseFloat(parseFloat(this.discSelected["quantity_discrepant"])-parseFloat(e)).toFixed(4));if(this.addExternalQty<=n){this.addingExternal=!0;var r={instrument_id:this.discSelected["instrument_id"],trade_date:A(this.addExternalDate),segment:this.segment,price:parseFloat(this.addExternalPrice),quantity:parseFloat(this.addExternalQty),external_trade_type:this.addExternalType},o=[];o.push(r);var l=v();d["a"].request("POST",!1,l,o,(function(e,a){t.addingExternal=!1,t.hideAdd(),"SUCCESS"===e.toUpperCase()?(t.$toast.success({message:"Trade added",orientation:t.$toast.TOP_RIGHT,duration:6e3}),t.getExternalTrades(t.discSelected)):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error adding trade: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error adding trade:"+d["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))}else this.$toast.warning({message:"Quantity can not be greater than total discrepant quantity",orientation:this.$toast.TOP_RIGHT,duration:6e3})}else this.$toast.warning({message:"Date, price, qty and type are required fields",orientation:this.$toast.TOP_RIGHT,duration:6e3})},showEditDiscrepant:function(t){this.editExternalDate=t["trade_date"],this.editExternalPrice=parseFloat(t["price"]).toFixed(2),this.editExternalQty=parseFloat(t["quantity"]).toFixed(4),this.editExternalType=t["external_trade_type"],this.oldExternalQty=parseFloat(t["quantity"]).toFixed(4),this.editExternalId=t["id"],this.showEdit()},editDiscrepant:function(){var t=this;if(this.editExternalDate&&this.editExternalPrice&&this.editExternalQty&&this.editExternalType){for(var e=0,a=0;a<this.externalTrades.length;a++)this.externalTrades[a]["pending_recalc"]&&(e+=parseFloat(this.externalTrades[a]["quantity"]));e-=this.oldExternalQty;var i=this.discSelected["quantity_discrepant"]-e;if(this.editExternalQty<=i){this.editingExternal=!0;var s={id:this.editExternalId.toString(),trade_date:this.editExternalDate,price:parseFloat(this.editExternalPrice),quantity:parseFloat(this.editExternalQty),external_trade_type:this.editExternalType,instrument_id:this.discSelected["instrument_id"],tradingsymbol:this.discSelected["tradingsymbol"],isin:this.discSelected["isin"],segment:this.segment},n=[];n.push(s);var r=v();d["a"].request("PUT",!1,r,n,(function(e,a){t.editingExternal=!1,t.hideEdit(),"SUCCESS"===e.toUpperCase()?(t.getExternalTrades(t.discSelected),t.$toast.success({message:"Edit successful",orientation:t.$toast.TOP_RIGHT,duration:6e3})):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error editing trade: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error editing trade:"+d["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))}else this.$toast.warning({message:"Quantity can not be grater than discrepant quantity",orientation:this.$toast.TOP_RIGHT,duration:6e3})}else this.$toast.warning({message:"Date, price, qty and type are required fields",orientation:this.$toast.TOP_RIGHT,duration:6e3})},deleteDiscrepant:function(t){var e=this;this.fetchingExternal=!0;var a={id:t["id"].toString(),instrument_id:this.discSelected["instrument_id"],trade_date:t["trade_date"],segment:this.segment},i=[];i.push(a);var s=v();d["a"].request("DELETE",!1,s,i,(function(t,a){"SUCCESS"===t.toUpperCase()?(e.getExternalTrades(e.discSelected),e.$toast.success({message:"Deleted successfully",orientation:e.$toast.TOP_RIGHT,duration:6e3})):"FAILURE"===t.toUpperCase()?(e.fetchingExternal=!1,e.$toast.error({message:"Error deleting trade: "+a.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3})):(e.fetchingExternal=!1,e.$toast.error({message:"Error deleting trade:"+d["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3}))}))},getExternalTrades:function(t,e){var a=this;this.addExternalDate="",this.addExternalPrice="",this.addExternalQty="",this.addExternalType="",this.closeSideNav(null,1),this.fetchingExternal=!0,this.isPending=!1;var i="";"object"===p(t)?(i=t["instrument_id"],this.discSelected=t):(i=t,this.discSelected=this.discrepant_items.find((function(e){return e.instrument_id===t})));var s=v(i);s+="&segment="+this.segment,this.$router.push({name:"discrepancies",params:{tradingsymbol:this.discSelected["tradingsymbol"],instrument_id:this.discSelected["instrument_id"]}}),d["a"].request("GET",!1,s,null,(function(t,e){if(a.externalTrades=[],"SUCCESS"===t.toUpperCase()){a.fetchingExternal=!1;var i=e.data.data.result;if(i.hasOwnProperty("length")){for(var s=0;s<i.length;s++)!0===i[s]["pending_recalc"]&&(a.isPending=!0);a.externalTrades=i}else a.externalTrades.push(i);a.externalTrades.length>0?a.tradesExist=!0:a.tradesExist=!1}else"FAILURE"===t.toUpperCase()?(a.fetchingExternal=!1,a.$toast.error({message:"Error fetching trades: "+e.data.message,orientation:a.$toast.TOP_RIGHT,duration:6e3})):(a.fetchingExternal=!1,a.$toast.error({message:"Error fetching trades:"+d["a"].errorMessage(),orientation:a.$toast.TOP_RIGHT,duration:6e3}))}))},showMenu:function(t){t.target.children.length>0?(t.target.children[3].classList.toggle("show"),null!==this.lastClicked&&this.lastClicked!==t.target.children[3]&&this.lastClicked.classList.toggle("show"),this.lastClicked=t.target.children[3]):(t.target.parentNode.children[3].classList.toggle("show"),null!==this.lastClicked&&this.lastClicked!==t.target.parentNode.children[3]&&this.lastClicked.classList.toggle("show"),this.lastClicked=t.target.parentNode.children[3])},pollData:function(){var t=this;setTimeout((function(){return t.getHoldingsData(t.date,t.segment)}),2e3)},getHoldingsData:function(t,e){var a=this;this.job=!0,this.noResults=!1,this.date=A(t||new Date),this.segment=e?e.toUpperCase():"EQ";var i=m(this.date,this.segment);d["a"].request("GET",!0,i,null,(function(t,i){if(a.holdings_items=[],"PENDING"===t.toUpperCase())a.job=!0,a.pollData();else if("SUCCESS"===t.toUpperCase()){a.params={date:a.date,segment:e},a.job=!1,a.holdings_items=i.data.data.result;for(var s=0;s<a.holdings_items.length;s++)a.totalPresentValue+=parseFloat(a.holdings_items[s]["closing_value"])||0,a.holdings_items[s]["quantity_discrepant"]>0&&a.discrepant_items.push(a.holdings_items[s]);if(a.$route.params&&a.$route.params.instrument_id)a.initInstrument=a.$route.params.instrument_id,a.getExternalTrades(a.initInstrument);else if(a.discrepant_items.length>0){var n={};a.isinFetching&&a.isinFetching.length>0&&(n=a.discrepant_items.find((function(t){return t.isin===a.isinFetching}))),(void 0===n||"object"===p(n)&&0===Object.keys(n).length)&&(n=a.discrepant_items[0]),a.initInstrument=n["instrument_id"],a.getExternalTrades(n)}else a.noResults=!0}else"FAILURE"===t.toUpperCase()?(a.job=!1,a.$toast.error({message:"Error fetching holdings: "+i.data.message,orientation:a.$toast.TOP_RIGHT,duration:6e3})):(a.job=!1,a.$toast.error({message:"Error fetching holdings:"+d["a"].errorMessage(),orientation:a.$toast.TOP_RIGHT,duration:6e3}))}))},computeAdd:function(){this.showAdd()},showAdd:function(){this.showAddModal=!0,document.getElementsByTagName("body")[0].style.overflowY="hidden"},hideAdd:function(){this.showAddModal=!1,document.getElementsByTagName("body")[0].style.overflowY="scroll"},showEdit:function(){this.showEditModal=!0,document.getElementsByTagName("body")[0].style.overflowY="hidden"},hideEdit:function(){this.showEditModal=!1,document.getElementsByTagName("body")[0].style.overflowY="scroll"}},components:{datepicker:r.a,"context-menu":o["a"],jobber:l["a"],empty:c["a"]}},C=b,w=a("2877"),k=Object(w["a"])(C,i,s,!1,null,null,null);e["default"]=k.exports},ec83:function(t,e,a){"use strict";e["a"]=function(t,e,a,i,s){var n,r=t.children,o=-1,l=r.length,c=t.value&&(s-a)/t.value;while(++o<l)n=r[o],n.x0=e,n.x1=i,n.y0=a,n.y1=a+=n.value*c}}}]);